"use strict";(globalThis.webpackChunksuperset=globalThis.webpackChunksuperset||[]).push([[6020],{40701:(e,t,n)=>{n.d(t,{J0:()=>v,YA:()=>E,bK:()=>y,CB:()=>b,Mu:()=>T,L1:()=>R,aZ:()=>$,qL:()=>S,nj:()=>h,x_:()=>A,LM:()=>Z,Ww:()=>g,v7:()=>_,g3:()=>x,_p:()=>D,az:()=>N,iO:()=>I,Ou:()=>C,WZ:()=>m,A7:()=>f});var r=n(21090),i=n(61988),a=n(72570),o=n(81255),s=n(80621),d=n(47456),c=n(44803),l=n(81395),u=n(31758);const h="UPDATE_COMPONENTS";function p(e){return(...t)=>(n,r)=>{const i=e(...t);if(n("function"==typeof i?i(n,r):i),i.type!==h||!i.payload||!i.payload.nextComponents){const e=r().dashboardLayout.present;n((0,l.P_)(e))}r().dashboardState.hasUnsavedChanges||n((0,u.if)(!0))}}const m=p((e=>({type:h,payload:{nextComponents:e}})));function f(e){return(t,n)=>{const{dashboardLayout:r}=n();t(m({[s.M2]:{...r.present[s.M2],meta:{text:e}}}))}}const y="DASHBOARD_TITLE_CHANGED";function g(e){return{type:y,text:e}}const b="DELETE_COMPONENT",_=p(((e,t)=>({type:b,payload:{id:e,parentId:t}}))),v="CREATE_COMPONENT",Z=p((e=>({type:v,payload:{dropResult:e}}))),E="CREATE_TOP_LEVEL_TABS",w=p((e=>({type:E,payload:{dropResult:e}}))),T="DELETE_TOP_LEVEL_TABS",x=p((()=>({type:T,payload:{}}))),S="RESIZE_COMPONENT";function I({id:e,width:t,height:n}){return(r,i)=>{const{dashboardLayout:a}=i(),{present:o}=a,s=o[e],d=t&&s.meta.width!==t,c=n&&s.meta.height!==n;if(s&&(d||c)){const i={[e]:{...s,meta:{...s.meta,width:t||s.meta.width,height:n||s.meta.height}}};r(m(i))}}}const $="MOVE_COMPONENT",O=p((e=>({type:$,payload:{dropResult:e}}))),R="HANDLE_COMPONENT_DROP";function D(e){return(t,n)=>{const r=function(e,t){const n=(0,d.Z)({dropResult:e,layout:t});return"number"==typeof n&&n<0}(e,n().dashboardLayout.present);if(r)return t((0,a.Dz)((0,i.t)("There is not enough space for this component. Try decreasing its width, or increasing the destination width.")));const{source:l,destination:u}=e,h=u&&u.id===s._4,p=l.id===s.D0,m=n().dashboardLayout.present[s._4],f=m&&m.children?m.children[0]:"";if(h)t(w(e));else if(u&&p)t(Z(e));else{if(l.type===o.yR&&u.type===o.yR&&l.id===f&&u.id!==f)return t((0,a.Dz)((0,i.t)("Can not move top level tab into nested tabs")));u&&l&&(u.id!==l.id||u.index!==l.index)&&t(O(e))}const{dashboardFilters:y,dashboardLayout:g}=n();if(!p){const{present:e}=g,n=e[l.id]||{},r=e[u.id]||{};if((n.type===o.yR||n.type===o.Os)&&n.children&&0===n.children.length){const n=(0,c.Z)({childId:l.id,layout:e});t(_(l.id,n))}(function({dashboardFilters:e={},source:t=[],destination:n=[]}){const r=new Set(t),i=new Set(n);return[].concat(...Object.values(e).map((({scopes:e})=>[].concat(...Object.values(e).map((({scope:e})=>e)))))).some((e=>i.has(e)!==r.has(e)))})({dashboardFilters:y,source:(n.parents||[]).concat(l.id),destination:(r.parents||[]).concat(u.id)})&&t((0,a.Dz)((0,i.t)("This chart has been moved to a different filter scope.")))}return null}}function C(){return(e,t)=>{e(r.zF.undo());const{dashboardLayout:n,dashboardState:i}=t();0!==n.past.length||i.maxUndoHistoryExceeded||i.updatedColorScheme||e((0,u.if)(!1))}}const N=p(r.zF.redo),A="UPDATE_COMPONENTS_PARENTS_LIST"},31758:(e,t,n)=>{n.d(t,{BD:()=>T,P0:()=>F,ec:()=>V,k5:()=>W,Ii:()=>j,Vd:()=>x,nV:()=>ie,J$:()=>ee,RU:()=>ne,$f:()=>k,mq:()=>oe,r$:()=>le,n1:()=>he,yV:()=>z,ee:()=>E,oJ:()=>Y,ek:()=>N,Z9:()=>I,H9:()=>D,Iw:()=>de,Be:()=>L,Pi:()=>Q,Mn:()=>G,Lb:()=>O,Qt:()=>me,z2:()=>M,Yy:()=>J,rL:()=>X,M8:()=>q,TN:()=>R,dr:()=>C,$_:()=>ae,ps:()=>te,E2:()=>re,Mb:()=>P,GH:()=>se,zL:()=>ue,uN:()=>pe,sL:()=>B,if:()=>w,O8:()=>K,WL:()=>A,oY:()=>ce,Sn:()=>U});var r=n(21090),i=n(31069),a=n(61988),o=n(55786),s=n(22428),d=n(64714),c=n(35854),l=n(98286),u=n(80621),h=n(72570),p=n(11370),m=n(43399),f=n(9679),y=n(91877),g=n(93185),b=n(40701),_=n(41295),v=n(50810),Z=n(81395);const E="SET_UNSAVED_CHANGES";function w(e){return{type:E,payload:{hasUnsavedChanges:e}}}const T="ADD_SLICE",x="REMOVE_SLICE",S="/superset/favstar/Dashboard",I="TOGGLE_FAVE_STAR";function $(e){return{type:I,isStarred:e}}function O(e){return function(t){return i.Z.get({endpoint:`${S}/${e}/count/`}).then((({json:e})=>{e.count>0&&t($(!0))})).catch((()=>t((0,h.Gb)((0,a.t)("There was an issue fetching the favorite status of this dashboard.")))))}}function R(e,t){return function(n){const r=t?"unselect":"select";return i.Z.get({endpoint:`${S}/${e}/${r}/`}).then((()=>{n($(!t))})).catch((()=>n((0,h.Gb)((0,a.t)("There was an issue favoriting this dashboard.")))))}}const D="TOGGLE_PUBLISHED";function C(e,t){return function(n){return i.Z.put({endpoint:`/api/v1/dashboard/${e}`,headers:{"Content-Type":"application/json"},body:JSON.stringify({published:t})}).then((()=>{n((0,h.ws)(t?(0,a.t)("This dashboard is now published"):(0,a.t)("This dashboard is now hidden"))),n(function(e){return{type:D,isPublished:e}}(t))})).catch((()=>{n((0,h.Gb)((0,a.t)("You do not have permissions to edit this dashboard.")))}))}}const N="TOGGLE_EXPAND_SLICE";function A(e){return{type:N,sliceId:e}}const L="UPDATE_CSS";function U(e){return{type:L,css:e}}const k="SET_EDIT_MODE";function P(e){return{type:k,editMode:e}}const F="ON_CHANGE";function M(){return{type:F}}const j="ON_SAVE",z="SET_REFRESH_FREQUENCY";function B(e,t=!1){return{type:z,refreshFrequency:e,isPersistent:t}}function H(e){return t=>{t(function(e){return{type:j,lastModifiedTime:e}}(e)),t(r.zF.clearHistory())}}function q(e,t,n){return(r,s)=>{var d,c,v,E,w,T;r({type:b.x_});const{dashboardFilters:x,dashboardLayout:S}=s(),I=S.present;Object.values(x).forEach((e=>{var t;const{chartId:n}=e,i=e.directPathToFilter.slice().pop(),a=((null==(t=I[i])?void 0:t.parents)||[]).slice();a.push(i),r((0,Z.yz)(n,a))}));const $=(0,p.Z)((0,m.De)()),O=function(e){return Object.values(e).reduce(((e,{chartId:t,scopes:n})=>({...e,[t]:Object.keys(n).reduce(((e,t)=>({...e,[t]:n[t]})),{})})),{})}(x),{certified_by:R,certification_details:D,css:C,dashboard_title:N,owners:A,roles:L,slug:U}=e,k=e=>void 0!==e.id,P={...e,certified_by:R||"",certification_details:R&&D?D:"",css:C||"",dashboard_title:N||(0,a.t)("[ untitled dashboard ]"),owners:(0,o.Z)(A).map((e=>k(e)?e.id:e)),roles:(0,y.cr)(g.T.DASHBOARD_RBAC)?(0,o.Z)(L).map((e=>k(e)?e.id:e)):void 0,slug:U||null,metadata:{...e.metadata,color_namespace:(null==(d=e.metadata)?void 0:d.color_namespace)||void 0,color_scheme:(null==(c=e.metadata)?void 0:c.color_scheme)||"",expanded_slices:(null==(v=e.metadata)?void 0:v.expanded_slices)||{},label_colors:(null==(E=e.metadata)?void 0:E.label_colors)||{},refresh_frequency:(null==(w=e.metadata)?void 0:w.refresh_frequency)||0,timed_refresh_immune_slices:(null==(T=e.metadata)?void 0:T.timed_refresh_immune_slices)||[]}},F=()=>{const{dashboardInfo:{metadata:{chart_configuration:e={}}}}=s();return Object.values(e).reduce(((e,t)=>Object.values(I).find((e=>{var n;return(null==e||null==(n=e.meta)?void 0:n.chartId)===t.id}))?{...e,[t.id]:t}:e),{})},M=async e=>{const{error:t,message:n}=await(0,l.O)(e);let i=(0,a.t)("Sorry, an unknown error occured");t&&(i=(0,a.t)("Sorry, there was an error saving this dashboard: %s",t)),"string"==typeof n&&"Forbidden"===n&&(i=(0,a.t)("You do not have permission to edit this dashboard")),r((0,h.Gb)(i))};if(n===u.TN){let e={};(0,y.cr)(g.T.DASHBOARD_CROSS_FILTERS)&&(e=F());const n={certified_by:P.certified_by,certification_details:P.certification_details,css:P.css,dashboard_title:P.dashboard_title,slug:P.slug,owners:P.owners,roles:P.roles,json_metadata:(0,f.o)({...(null==P?void 0:P.metadata)||{},default_filters:(0,f.o)($),filter_scopes:O,chart_configuration:e})};return i.Z.put({endpoint:`/api/v1/dashboard/${t}`,headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then((e=>(e=>{const n=e.json.result,i=e.json.last_modified_time;if(n.json_metadata){const e=JSON.parse(n.json_metadata);r((0,_.a8)({metadata:e})),e.chart_configuration&&r({type:_.t$,chartConfiguration:e.chart_configuration})}return i&&r(H(i)),window.history.pushState({event:"dashboard_properties_changed"},"",`/superset/dashboard/${U||t}/`),r((0,h.ws)((0,a.t)("This dashboard was saved successfully."))),e})(e))).catch((e=>M(e)))}const j={...P};j.metadata&&delete j.metadata;const z={...j,...(null==P?void 0:P.metadata)||{}};return i.Z.post({endpoint:`/superset/copy_dash/${t}/`,postPayload:{data:{...z,default_filters:(0,f.o)($),filter_scopes:(0,f.o)(O)}}}).then((e=>(e=>{const t=e.json.last_modified_time;if(t&&r(H(t)),(0,y.cr)(g.T.DASHBOARD_CROSS_FILTERS)){const e=F();r((0,_.Aw)(e))}return r((0,h.ws)((0,a.t)("This dashboard was saved successfully."))),e})(e))).catch((e=>M(e)))}}function G(e=[],t=!1,n=0,r){return(i,a)=>{if(!n)return void e.forEach((e=>i((0,s.refreshChart)(e,t,r))));const{metadata:o}=a().dashboardInfo,d=Math.max(n,o.stagger_time||5e3);"boolean"!=typeof o.stagger_refresh&&(o.stagger_refresh=void 0===o.stagger_refresh||"true"===o.stagger_refresh);const c=o.stagger_refresh?d/(e.length-1):0;e.forEach(((e,n)=>{setTimeout((()=>i((0,s.refreshChart)(e,t,r))),c*n)}))}}const W="ON_REFRESH_SUCCESS",V="ON_REFRESH";function J(e=[],t=!1,n=0,r){return i=>{i({type:V}),((e,t,n,r,i)=>new Promise((a=>{i(G(e,t,n,r)),a()})))(e,t,n,r,i).then((()=>i({type:W})))}}const Y="SHOW_BUILDER_PANE";function K(){return{type:Y}}function Q(e,t){return(n,r)=>{const{sliceEntities:i}=r(),a=i.slices[e];if(!a)return n((0,h.Dz)("Sorry, there is no chart definition associated with the chart trying to be added."));const o={...a.form_data,slice_id:a.slice_id},l={...d.u,id:e,form_data:o,formData:(0,c.oN)(o)};return Promise.all([n((0,s.addChart)(l,e)),n((0,v.QR)(o.datasource))]).then((()=>{n({type:T,slice:a}),a&&"filter_box"===a.viz_type&&n((0,Z.KJ)(e,t,a.form_data))}))}}function X(e){return(t,n)=>{const r=n().sliceEntities.slices[e];r&&"filter_box"===r.viz_type&&t((0,Z.ku)(e)),t({type:x,sliceId:e}),t((0,s.removeChart)(e))}}const ee="SET_COLOR_SCHEME";function te(e){return t=>{t(function(e){return{type:ee,colorScheme:e}}(e)),t(w(!0))}}const ne="SET_DIRECT_PATH";function re(e){return{type:ne,path:e}}const ie="SET_ACTIVE_TABS";function ae(e,t){return{type:ie,tabId:e,prevTabId:t}}const oe="SET_FOCUSED_FILTER_FIELD";function se(e,t){return{type:oe,chartId:e,column:t}}const de="UNSET_FOCUSED_FILTER_FIELD";function ce(e,t){return{type:de,chartId:e,column:t}}const le="SET_FULL_SIZE_CHART_ID";function ue(e){return{type:le,chartId:e}}const he="SET_MAX_UNDO_HISTORY_EXCEEDED";function pe(e=!0){return{type:he,payload:{maxUndoHistoryExceeded:e}}}function me(){return(e,t)=>{const{dashboardLayout:n}=t(),r=n.past.length;return e((0,h.Dz)(`You have used all ${r} undo slots and will not be able to fully undo subsequent actions. You may save your current state to reset the history.`))}}},44803:(e,t,n)=>{n.d(t,{Z:()=>i});const r={};function i({childId:e,layout:t={}}){if(r[e]){const n=t[r[e]]||{};if(n.children&&n.children.includes(e))return n.id}return r[e]=function({childId:e,layout:t={}}){let n=null;const r=Object.keys(t);for(let i=0;i<=r.length-1;i+=1){const a=r[i],o=t[a]||{};if(a!==e&&o.children&&o.children.includes(e)){n=a;break}}return n}({childId:e,layout:t}),r[e]}},47456:(e,t,n)=>{n.d(t,{Z:()=>s});var r=n(80621),i=n(44803),a=n(72673),o=n(28428);function s({dropResult:e,layout:t}){const{source:n,destination:s,dragging:d}=e,c=n.id===r.D0?(0,o.Z)(d.type):t[d.id]||{};if(n.id===s.id)return c.meta.width;const{width:l,minimumWidth:u}=(0,a.Z)({component:c,components:t}),{width:h,occupiedWidth:p}=(0,a.Z)({id:s.id,components:t});let m=Number(h-p);if(Number.isNaN(m)){const{width:e,occupiedWidth:n}=(0,a.Z)({id:(0,i.Z)({childId:s.id,layout:t}),components:t});m=Number(e-n)}return Number.isNaN(m)||Number.isNaN(Number(l))||m>=l?l:m>=u?m:-1}},72673:(e,t,n)=>{n.d(t,{Z:()=>s});var r=n(44803),i=n(80621),a=n(81255);function o({id:e,components:t}){const n=t[e];if(!n)return 0;let r=0;return(n.children||[]).forEach((e=>{const n=t[e]||{};r+=(n.meta||{}).width||0})),r}function s({id:e,component:t,components:n={}}){const d={width:void 0,occupiedWidth:void 0,minimumWidth:void 0},c=t||n[e];return c?(d.width=(c.meta||{}).width,d.occupiedWidth=d.width,c.type===a.Os?(d.width=s({id:(0,r.Z)({childId:c.id,layout:n}),components:n}).width||i.cz,d.occupiedWidth=o({id:c.id,components:n}),d.minimumWidth=d.occupiedWidth||i.cx):c.type===a.BA?(d.minimumWidth=i.cx,d.occupiedWidth=0,(c.children||[]).forEach((e=>{n[e].type===a.Os&&(d.minimumWidth=Math.max(d.minimumWidth,o({id:e,components:n})))}))):c.type!==a.xh&&c.type!==a.dW||(d.minimumWidth=i.cx),d):d}},11370:(e,t,n)=>{n.d(t,{Z:()=>i});var r=n(20194);function i(e){return Object.entries(e).reduce(((e,t)=>{const[n,{values:i}]=t,{chartId:a,column:o}=(0,r._)(n),s={...e[a],[o]:i};return{...e,[a]:s}}),{})}},61358:(e,t,n)=>{n.d(t,{jt:()=>c,Aw:()=>l,J8:()=>h,cq:()=>p,Dr:()=>m,Me:()=>f,M:()=>y,MZ:()=>g});var r=n(31069),i=n(61988),a=n(15926),o=n.n(a),s=n(98286),d=n(72570);const c="SET_REPORT";function l(e,t,n,a){const s=o().encode({filters:[{col:t,opr:"eq",value:a},{col:"creation_method",opr:"eq",value:n},{col:"created_by",opr:"rel_o_m",value:e}]});return function(e){return r.Z.get({endpoint:`/api/v1/report/?q=${s}`}).then((({json:t})=>{e({type:c,report:t})})).catch((()=>e((0,d.Gb)((0,i.t)("There was an issue fetching reports attached to this dashboard.")))))}}const u=(e,t)=>{const n=t(),{user:r,dashboardInfo:i,charts:a,explore:o}=n;if(i)e(l(r.userId,"dashboard_id","dashboards",i.id));else{const[t]=Object.keys(a);e(l(o.user.userId,"chart_id","charts",a[t].id))}},h="ADD_REPORT",p=e=>t=>r.Z.post({endpoint:"/api/v1/report/",jsonPayload:e}).then((({json:e})=>{t({type:h,json:e}),t((0,d.ws)((0,i.t)("The report has been created")))})).catch((async e=>{const n=(await(0,s.O)(e)).message,r=n[Object.keys(n)[0]];t((0,d.Gb)((0,i.t)("An error occurred while editing this report: %s",r)))})),m="EDIT_REPORT";function f(e,t){return function(n){r.Z.put({endpoint:`/api/v1/report/${e}`,jsonPayload:t}).then((({json:e})=>{n({type:m,json:e})})).catch((()=>n((0,d.Gb)((0,i.t)("An error occurred while editing this report.")))))}}function y(e,t){return function(n){return r.Z.put({endpoint:encodeURI(`/api/v1/report/${e.id}`),headers:{"Content-Type":"application/json"},body:JSON.stringify({active:t})}).catch((()=>{n((0,d.Gb)((0,i.t)("We were unable to active or deactivate this report.")))})).finally((()=>{n(u)}))}}function g(e){return function(t){return r.Z.delete({endpoint:encodeURI(`/api/v1/report/${e.id}`)}).catch((()=>{t((0,d.Gb)((0,i.t)("Your report could not be deleted")))})).finally((()=>{t(u),t((0,d.ws)((0,i.t)("Deleted: %s",e.name)))}))}}},42015:(e,t,n)=>{n.d(t,{Z:()=>k});var r=n(5872),i=n.n(r),a=n(23279),o=n.n(a),s=n(67294),d=n(51995),c=n(11965),l=n(23525),u=n(82191),h=n(58593),p=n(73727),m=n(75302),f=n(71230),y=n(15746),g=n(38097),b=n(27600),_=n(61988),v=n(70695),Z=n(37703);const{SubMenu:E}=u.$t,w=d.iK.div`
  display: flex;
  align-items: center;

  & i {
    margin-right: ${({theme:e})=>2*e.gridUnit}px;
  }

  & a {
    display: block;
    width: 150px;
    word-wrap: break-word;
    text-decoration: none;
  }
`,T=d.iK.i`
  margin-top: 2px;
`;function x(e){const{locale:t,languages:n,...r}=e;return(0,c.tZ)(E,i()({"aria-label":"Languages",title:(0,c.tZ)("div",{className:"f16"},(0,c.tZ)(T,{className:`flag ${n[t].flag}`})),icon:(0,c.tZ)(g.Z.TriangleDown,null)},r),Object.keys(n).map((e=>(0,c.tZ)(u.$t.Item,{key:e,style:{whiteSpace:"normal",height:"auto"}},(0,c.tZ)(w,{className:"f16"},(0,c.tZ)("i",{className:`flag ${n[e].flag}`}),(0,c.tZ)("a",{href:n[e].url},n[e].name))))))}const S=[{label:(0,_.t)("SQL query"),url:"/superset/sqllab?new=true",icon:"fa-fw fa-search",perm:"can_sqllab",view:"Superset"},{label:(0,_.t)("Chart"),url:"/chart/add",icon:"fa-fw fa-bar-chart",perm:"can_write",view:"Chart"},{label:(0,_.t)("Dashboard"),url:"/dashboard/new",icon:"fa-fw fa-dashboard",perm:"can_write",view:"Dashboard"}],I=e=>c.iv`
  padding: ${1.5*e.gridUnit}px ${4*e.gridUnit}px
    ${4*e.gridUnit}px ${7*e.gridUnit}px;
  color: ${e.colors.grayscale.base};
  font-size: ${e.typography.sizes.xs}px;
  white-space: nowrap;
`,$=d.iK.div`
  color: ${({theme:e})=>e.colors.primary.dark1};
`,O=d.iK.div`
  display: flex;
  flex-direction: row;
  justify-content: ${({align:e})=>e};
  align-items: center;
  margin-right: ${({theme:e})=>e.gridUnit}px;
  .ant-menu-submenu-title > svg {
    top: ${({theme:e})=>5.25*e.gridUnit}px;
  }
`,R=d.iK.a`
  padding-right: ${({theme:e})=>e.gridUnit}px;
  padding-left: ${({theme:e})=>e.gridUnit}px;
`,{SubMenu:D}=u.$t,C=({align:e,settings:t,navbarRight:n,isFrontendRoute:r})=>{const{roles:i}=(0,Z.v9)((e=>e.user)),a=(0,v.Z)("can_sqllab","Superset",i),o=(0,v.Z)("can_write","Dashboard",i),s=(0,v.Z)("can_write","Chart",i),d=a||s||o;return(0,c.tZ)(O,{align:e},(0,c.tZ)(u.$t,{mode:"horizontal"},!n.user_is_anonymous&&d&&(0,c.tZ)(D,{title:(0,c.tZ)($,{className:"fa fa-plus"}),icon:(0,c.tZ)(g.Z.TriangleDown,null)},S.map((e=>(0,v.Z)(e.perm,e.view,i)&&(0,c.tZ)(u.$t.Item,{key:e.label},(0,c.tZ)("a",{href:e.url},(0,c.tZ)("i",{className:`fa ${e.icon}`})," ",e.label))))),(0,c.tZ)(D,{title:(0,_.t)("Settings"),icon:(0,c.tZ)(g.Z.TriangleDown,{iconSize:"xl"})},t.map(((e,n)=>{var i;return[(0,c.tZ)(u.$t.ItemGroup,{key:`${e.label}`,title:e.label},null==(i=e.childs)?void 0:i.map((e=>"string"!=typeof e?(0,c.tZ)(u.$t.Item,{key:`${e.label}`},r(e.url)?(0,c.tZ)(p.rU,{to:e.url||""},e.label):(0,c.tZ)("a",{href:e.url},e.label)):null))),n<t.length-1&&(0,c.tZ)(u.$t.Divider,null)]})),!n.user_is_anonymous&&[(0,c.tZ)(u.$t.Divider,{key:"user-divider"}),(0,c.tZ)(u.$t.ItemGroup,{key:"user-section",title:(0,_.t)("User")},n.user_profile_url&&(0,c.tZ)(u.$t.Item,{key:"profile"},(0,c.tZ)("a",{href:n.user_profile_url},(0,_.t)("Profile"))),n.user_info_url&&(0,c.tZ)(u.$t.Item,{key:"info"},(0,c.tZ)("a",{href:n.user_info_url},(0,_.t)("Info"))),(0,c.tZ)(u.$t.Item,{key:"logout"},(0,c.tZ)("a",{href:n.user_logout_url},(0,_.t)("Logout"))))],(n.version_string||n.version_sha)&&[(0,c.tZ)(u.$t.Divider,{key:"version-info-divider"}),(0,c.tZ)(u.$t.ItemGroup,{key:"about-section",title:(0,_.t)("About")},(0,c.tZ)("div",{className:"about-section"},n.show_watermark&&(0,c.tZ)("div",{css:I},(0,_.t)("Powered by Apache Superset")),n.version_string&&(0,c.tZ)("div",{css:I},"Version: ",n.version_string),n.version_sha&&(0,c.tZ)("div",{css:I},"SHA: ",n.version_sha),n.build_number&&(0,c.tZ)("div",{css:I},"Build: ",n.build_number)))]),n.show_language_picker&&(0,c.tZ)(x,{locale:n.locale,languages:n.languages})),n.documentation_url&&(0,c.tZ)(R,{href:n.documentation_url,target:"_blank",rel:"noreferrer",title:(0,_.t)("Documentation")},(0,c.tZ)("i",{className:"fa fa-question"})," "),n.bug_report_url&&(0,c.tZ)(R,{href:n.bug_report_url,target:"_blank",rel:"noreferrer",title:(0,_.t)("Report a bug")},(0,c.tZ)("i",{className:"fa fa-bug"})),n.user_is_anonymous&&(0,c.tZ)(R,{href:n.user_login_url},(0,c.tZ)("i",{className:"fa fa-fw fa-sign-in"}),(0,_.t)("Login")))},N=d.iK.header`
  background-color: white;
  margin-bottom: 2px;
  &:nth-last-of-type(2) nav {
    margin-bottom: 2px;
  }

  .caret {
    display: none;
  }
  .navbar-brand {
    display: flex;
    flex-direction: column;
    justify-content: center;
  }
  .navbar-brand-text {
    border-left: 1px solid ${({theme:e})=>e.colors.grayscale.light2};
    border-right: 1px solid ${({theme:e})=>e.colors.grayscale.light2};
    height: 100%;
    color: ${({theme:e})=>e.colors.grayscale.dark1};
    padding-left: ${({theme:e})=>4*e.gridUnit}px;
    padding-right: ${({theme:e})=>4*e.gridUnit}px;
    margin-right: ${({theme:e})=>6*e.gridUnit}px;
    font-size: ${({theme:e})=>4*e.gridUnit}px;
    float: left;
    display: flex;
    flex-direction: column;
    justify-content: center;

    span {
      max-width: ${({theme:e})=>58*e.gridUnit}px;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }
    @media (max-width: 1127px) {
      display: none;
    }
  }
  .main-nav .ant-menu-submenu-title > svg {
    top: ${({theme:e})=>5.25*e.gridUnit}px;
  }
  @media (max-width: 767px) {
    .navbar-brand {
      float: none;
    }
  }
  .ant-menu-horizontal .ant-menu-item {
    height: 100%;
    line-height: inherit;
  }
  .ant-menu > .ant-menu-item > a {
    padding: ${({theme:e})=>4*e.gridUnit}px;
  }
  @media (max-width: 767px) {
    .ant-menu-item {
      padding: 0 ${({theme:e})=>6*e.gridUnit}px 0
        ${({theme:e})=>3*e.gridUnit}px !important;
    }
    .ant-menu > .ant-menu-item > a {
      padding: 0px;
    }
    .main-nav .ant-menu-submenu-title > svg:nth-child(1) {
      display: none;
    }
    .ant-menu-item-active > a {
      &:hover {
        color: ${({theme:e})=>e.colors.primary.base} !important;
        background-color: transparent !important;
      }
    }
  }

  .ant-menu-item a {
    &:hover {
      color: ${({theme:e})=>e.colors.grayscale.dark1};
      background-color: ${({theme:e})=>e.colors.primary.light5};
      border-bottom: none;
      margin: 0;
      &:after {
        opacity: 1;
        width: 100%;
      }
    }
  }
`,{SubMenu:A}=u.$t,{useBreakpoint:L}=m.ZP;function U({data:{menu:e,brand:t,navbar_right:n,settings:r},isFrontendRoute:i=(()=>!1)}){const[a,d]=(0,s.useState)("horizontal"),m=L();return(0,s.useEffect)((()=>{function e(){window.innerWidth<=767?d("inline"):d("horizontal")}e();const t=o()((()=>e()),10);return window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)}),[]),(0,l.e)(b.KD.standalone)?(0,c.tZ)(s.Fragment,null):(0,c.tZ)(N,{className:"top",id:"main-menu",role:"navigation"},(0,c.tZ)(c.xB,{styles:c.iv`
          .ant-menu-submenu.ant-menu-submenu-popup.ant-menu.ant-menu-light.ant-menu-submenu-placement-bottomLeft {
            border-radius: 0px;
          }
          .ant-menu-submenu.ant-menu-submenu-popup.ant-menu.ant-menu-light {
            border-radius: 0px;
          }
        `}),(0,c.tZ)(f.Z,null,(0,c.tZ)(y.Z,{md:16,xs:24},(0,c.tZ)(h.u,{id:"brand-tooltip",placement:"bottomLeft",title:t.tooltip,arrowPointAtCenter:!0},(0,c.tZ)("a",{className:"navbar-brand",href:t.path},(0,c.tZ)("img",{width:t.width,src:t.icon,alt:t.alt}))),t.text&&(0,c.tZ)("div",{className:"navbar-brand-text"},(0,c.tZ)("span",null,t.text)),(0,c.tZ)(u.$t,{mode:a,className:"main-nav"},e.map((e=>{var t;return(({label:e,childs:t,url:n,index:r,isFrontendRoute:i})=>n&&i?(0,c.tZ)(u.$t.Item,{key:e,role:"presentation"},(0,c.tZ)(p.rU,{role:"button",to:n},e)):n?(0,c.tZ)(u.$t.Item,{key:e},(0,c.tZ)("a",{href:n},e)):(0,c.tZ)(A,{key:r,title:e,icon:"inline"===a?(0,c.tZ)(s.Fragment,null):(0,c.tZ)(g.Z.TriangleDown,null)},null==t?void 0:t.map(((e,t)=>"string"==typeof e&&"-"===e?(0,c.tZ)(u.$t.Divider,{key:`$${t}`}):"string"!=typeof e?(0,c.tZ)(u.$t.Item,{key:`${e.label}`},e.isFrontendRoute?(0,c.tZ)(p.rU,{to:e.url||""},e.label):(0,c.tZ)("a",{href:e.url},e.label)):null))))({...e,isFrontendRoute:i(e.url),childs:null==(t=e.childs)?void 0:t.map((e=>"string"==typeof e?e:{...e,isFrontendRoute:i(e.url)}))})})))),(0,c.tZ)(y.Z,{md:8,xs:24},(0,c.tZ)(C,{align:m.md?"flex-end":"flex-start",settings:r,navbarRight:n,isFrontendRoute:i}))))}function k({data:e,...t}){const n={...e},r={Security:!0,Manage:!0},a=[],o=[];return n.menu.forEach((e=>{if(!e)return;const t=[],n={...e};e.childs&&(e.childs.forEach((e=>{("string"==typeof e||e.label)&&t.push(e)})),n.childs=t),r.hasOwnProperty(e.name)?o.push(n):a.push(n)})),n.menu=a,n.settings=o,(0,c.tZ)(U,i()({data:n},t))}},88014:(e,t,n)=>{n.d(t,{h:()=>J});var r=n(14890),i=n(53894),a=n(61806),o=n(99543),s=n(64714),d=n(8868),c=n(61358),l=n(41295),u=n(63389),h=n(31758),p=n(39023),m=n(39759),f=n(24350),y=n.n(f),g=n(50810),b=n(37927),_=n(21090),v=n(80621),Z=n(40701),E=n(81255);function w(e){return[E.BA,E.dW,E.xh].indexOf(e.type)>-1}var T=n(44803),x=n(47456);function S({currentComponent:e,layout:t={}}){if(e&&t[e.id]){const n=(e.parents||[]).slice();n.push(e.id),e.children.forEach((e=>{t[e].parents=n,S({currentComponent:t[e],layout:t})}))}}var I=n(28428);const $={[E.BG]:{[E.dW]:!0,[E.BA]:!0,[E.xh]:!0},[E.gn]:{[E.dW]:!0,[E.BA]:!0,[E.xh]:!0}};function O({parentType:e,childType:t}){if(!e||!t)return!1;const n=$[e];return!!n&&Boolean(n[t])}function R({dropResult:e,layout:t}){const{dragging:n,destination:r}=e,i=n.type,a=t[r.id],o=a.type;let s=(0,I.Z)(i,n.meta);s.parents=(a.parents||[]).concat(a.id),w(n)&&(s.meta.width=(0,x.Z)({dropResult:e,layout:t})||void 0);const d=O({parentType:o,childType:i}),c={[s.id]:s};if(d){const e=(0,I.Z)(E.Os);e.children=[s.id],e.parents=(a.parents||[]).concat(a.id),c[e.id]=e,s.parents=e.parents.concat(e.id),s=e}else if(i===E.yR){const e=(0,I.Z)(E.gn);e.parents=(a.parents||[]).concat(a.id),s.children=[e.id],c[e.id]=e}const l=[...a.children];return l.splice(r.index,0,s.id),c[r.id]={...a,children:l},c}const D={[u.$]:(e,t)=>({...t.data.dashboardLayout.present}),[Z.nj](e,t){const{payload:{nextComponents:n}}=t;return{...e,...n}},[Z.CB](e,t){const{payload:{id:n,parentId:r}}=t;if(!(r&&n&&e[n]&&e[r]))return e;const i={...e};function a(e,t){const n=i[e];delete i[e];const{children:r=[]}=n;r.forEach((t=>{a(t,e)}));const o=i[t];if(o){const n=(o.children||[]).indexOf(e);if(n>-1){const e=[...o.children];e.splice(n,1),i[t]={...o,children:e}}}}a(n,r);const o=i[r];return o.type===E.Os&&0===o.children.length&&a(r,(0,T.Z)({childId:r,layout:i})),i},[Z.J0](e,t){const{payload:{dropResult:n}}=t,r=R({dropResult:n,layout:e});return{...e,...r}},[Z.aZ](e,t){const{payload:{dropResult:n}}=t,{source:r,destination:i,dragging:a}=n;if(!r||!i||!a)return e;const o=function({entitiesMap:e,source:t,destination:n}){const r=[...e[t.id].children],i=[...e[n.id].children],a=r[t.index];if(t.id===n.id){const i=function(e,t,n){const r=[...e],[i]=r.splice(t,1);return r.splice(n,0,i),r}(r,t.index,n.index);return{...e,[t.id]:{...e[t.id],children:i}}}return r.splice(t.index,1),i.splice(n.index,0,a),{...e,[t.id]:{...e[t.id],children:r},[n.id]:{...e[n.id],children:i}}}({entitiesMap:e,source:r,destination:i});if(w(o[a.id])){const t=(0,x.Z)({dropResult:n,layout:e})||void 0;(o[a.id].meta||{}).width!==t&&(o[a.id]={...o[a.id],meta:{...o[a.id].meta,width:t}})}if(O({parentType:i.type,childType:a.type})){const e=o[i.id],t=e.children,n=(0,I.Z)(E.Os);n.children=[t[i.index]],n.parents=(e.parents||[]).concat(i.id),t[i.index]=n.id,o[n.id]=n}return{...e,...o}},[Z.YA](e,t){const{payload:{dropResult:n}}=t,{source:r,dragging:i}=n,a=e[v._4],o=a.children[0],s=e[o];if(r.id!==v.D0){const t=e[i.id].children[0],n=e[t],r=[...s.children].filter((e=>e!==i.id));return{...e,[v._4]:{...a,children:[i.id]},[o]:{...s,children:[]},[t]:{...n,children:[...n.children,...r]}}}const d=R({dropResult:n,layout:e}),c=Object.values(d),l=c.find((e=>e.type===E.gn)),u=c.find((e=>e.type===E.yR));return l.children=[...s.children],d[o]={...s,children:[]},d[v._4]={...a,children:[u.id]},{...e,...d}},[Z.Mu](e){const t=e[v._4],n=t.children[0],r=e[n];if(r.type!==E.yR)return e;let i=[];const a={...e};return r.children.forEach((t=>{const n=e[t];i=[...i,...n.children],delete a[t]})),delete a[n],a[v._4]={...t,children:[v.PV]},a[v.PV]={...e[v.PV],children:i},a},[Z.x_](e){const t={...e};return S({currentComponent:t[v._4],layout:t}),{...t}},[Z.bK]:(e,t)=>({...e,[v.M2]:{...e[v.M2],meta:{...e[v.M2].meta,text:t.text}}})},C=(0,_.ZP)((function(e={},t){return t.type in D?(0,D[t.type])(e,t):e}),{limit:v.Q9+2,ignoreInitialState:!0,filter:(0,_.an)([u.$,Z.nj,Z.CB,Z.J0,Z.YA,Z.Mu,Z.qL,Z.aZ,Z.L1])});var N=n(14670),A=n.n(N),L=n(31069),U=n(9679),k=n(97381),P=n(3741),F=n(23279),M=n.n(F);const j=new class{constructor({callback:e=(()=>{}),sizeThreshold:t=1e3,delayThreshold:n=1e3}){this.queue=[],this.sizeThreshold=t,this.delayThrehold=n,this.trigger=M()(this.trigger.bind(this),this.delayThrehold),this.callback=e}append(e){this.queue.push(e),this.trigger()}trigger(){if(this.queue.length>0){const e=this.queue.splice(0,this.sizeThreshold);this.callback.call(null,e),this.queue.length>0&&this.trigger()}}}({callback:e=>{if(e.length<=0)return;let t="/superset/log/?explode=events";const{source:n,source_id:r}=e[0];if("dashboard"===n?t+=`&dashboard_id=${r}`:"slice"===n&&(t+=`&slice_id=${r}`),navigator.sendBeacon){const n=new FormData;n.append("events",(0,U.o)(e)),navigator.sendBeacon(t,n)}else L.Z.post({endpoint:t,postPayload:{events:e},parseMethod:null})},sizeThreshold:1024,delayThreshold:1e3});let z=0;var B;const H=e=>(t=e)=>t,q=document.getElementById("app"),G=JSON.parse(null!=(B=null==q?void 0:q.getAttribute("data-bootstrap"))?B:"{}"),W={charts:s.Z,datasources:function(e,t){return t.type===g.Rn.SET_DATASOURCES?{...e,...y()(t.datasources,"uid")}:t.type===g.Rn.SET_DATASOURCE?{...e,[t.key]:t.datasource}:e||{}},dashboardInfo:function(e={},t){switch(t.type){case l.$A:return{...e,...t.newInfo,last_modified_time:Math.round((new Date).getTime()/1e3)};case u.$:return{...e,...t.data.dashboardInfo};default:return e}},dashboardFilters:p.ZP,dataMask:d.Z,nativeFilters:m.Z,dashboardState:function(e={},t){const n={[u.$]:()=>({...e,...t.data.dashboardState}),[h.Be]:()=>({...e,css:t.css}),[h.BD](){const n=new Set(e.sliceIds);return n.add(t.slice.slice_id),{...e,sliceIds:Array.from(n)}},[h.Vd](){const{sliceId:n}=t,r=new Set(e.sliceIds);return r.delete(n),{...e,sliceIds:Array.from(r)}},[h.Z9]:()=>({...e,isStarred:t.isStarred}),[h.H9]:()=>({...e,isPublished:t.isPublished}),[h.$f]:()=>({...e,editMode:t.editMode}),[h.n1](){const{maxUndoHistoryExceeded:n=!0}=t.payload;return{...e,maxUndoHistoryExceeded:n}},[h.oJ]:()=>({...e}),[h.J$]:()=>({...e,colorScheme:t.colorScheme,updatedColorScheme:!0}),[h.ek](){const n={...e.expandedSlices},{sliceId:r}=t;return n[r]?delete n[r]:n[r]=!0,{...e,expandedSlices:n}},[h.P0]:()=>({...e,hasUnsavedChanges:!0}),[h.Ii]:()=>({...e,hasUnsavedChanges:!1,maxUndoHistoryExceeded:!1,editMode:!1,updatedColorScheme:!1,lastModifiedTime:t.lastModifiedTime}),[h.ee](){const{hasUnsavedChanges:n}=t.payload;return{...e,hasUnsavedChanges:n}},[h.yV]:()=>({...e,refreshFrequency:t.refreshFrequency,shouldPersistRefreshFrequency:t.isPersistent,hasUnsavedChanges:t.isPersistent}),[h.ec]:()=>({...e,isRefreshing:!0}),[h.k5]:()=>({...e,isRefreshing:!1}),[h.RU]:()=>({...e,directPathToChild:t.path,directPathLastUpdated:Date.now()}),[h.nV](){const n=new Set(e.activeTabs);return n.delete(t.prevTabId),n.add(t.tabId),{...e,activeTabs:Array.from(n)}},[h.mq]:()=>({...e,focusedFilterField:{chartId:t.chartId,column:t.column}}),[h.Iw]:()=>e.focusedFilterField&&t.chartId===e.focusedFilterField.chartId&&t.column===e.focusedFilterField.column?{...e,focusedFilterField:null}:e,[h.r$]:()=>({...e,fullSizeChartId:t.chartId})};return t.type in n?n[t.type]():e},dashboardLayout:C,sliceEntities:b.Z,reports:function(e={},t){const n={[c.jt]:()=>({...t.report.result.reduce(((e,t)=>({...e,[t.id]:t})),{})}),[c.J8](){const n=t.json.result;return n.id=t.json.id,{...e,[t.json.id]:n}},[c.Dr](){const n=t.json.result;return n.id=t.json.id,{...e,[t.json.id]:n}}};return t.type in n?n[t.type]():e}},V=(0,r.UY)({messageToasts:a.Z,common:H(G.common||{}),user:H(G.user||{}),impressionId:H(A().generate()),...W}),J=(0,r.MT)(V,{},(0,r.qC)((0,r.md)(i.Z,(e=>t=>n=>{var r;if(n.type!==k.LOG_EVENT)return t(n);const{dashboardInfo:i,explore:a,impressionId:o,dashboardLayout:s}=e.getState();let d={impression_id:o,version:"v2"};i?d={source:"dashboard",source_id:i.id,...d}:a&&(d={source:"explore",source_id:a.slice?a.slice.slice_id:0,...d});const{eventName:c}=n.payload;let{eventData:l={}}=n.payload;if(l={...d,ts:(new Date).getTime(),event_name:c,...l},P.TY.has(c)?l={...l,event_type:"timing",trigger_event:z}:(z=A().generate(),l={...l,event_type:"user",event_id:z,visibility:document.visibilityState}),l.target_id&&null!=s&&null!=(r=s.present)&&r[l.target_id]){const{meta:e}=s.present[l.target_id];l.target_name=e.chartId?e.sliceName:e.text}return j.append(l),l})),(0,o.hU)(!1)))}}]);