(globalThis.webpackChunksuperset=globalThis.webpackChunksuperset||[]).push([[9932],{16737:(e,t,r)=>{"use strict";function i(e){return e.map((e=>[e,e.toString()]))}function o(e,t){return`${e}__${t}`}r.d(t,{mG:()=>i,n_:()=>o})},61819:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var i=r(21804),o=r.n(i),n=(r(67294),r(51995)),a=r(61988),s=r(51776),l=r(11965);const c=n.iK.div`
  margin-bottom: ${({theme:e})=>2*e.gridUnit}px;
`,d=function({certifiedBy:e,details:t,metricName:r}){const i=(0,n.Fg)();return(0,l.tZ)(s.ZP,{id:`${o()(r)}-tooltip`,title:(0,l.tZ)("div",null,e&&(0,l.tZ)(c,null,(0,a.t)("Certified by %s",e)),(0,l.tZ)("div",null,t))},(0,l.tZ)("svg",{xmlns:"http://www.w3.org/2000/svg",enableBackground:"new 0 0 24 24",height:"16",viewBox:"0 0 24 24",width:"16"},(0,l.tZ)("g",null,(0,l.tZ)("path",{fill:i.colors.primary.base,d:"M23,12l-2.44-2.79l0.34-3.69l-3.61-0.82L15.4,1.5L12,2.96L8.6,1.5L6.71,4.69L3.1,5.5L3.44,9.2L1,12l2.44,2.79l-0.34,3.7 l3.61,0.82L8.6,22.5l3.4-1.47l3.4,1.46l1.89-3.19l3.61-0.82l-0.34-3.69L23,12z M9.38,16.01L7,13.61c-0.39-0.39-0.39-1.02,0-1.41 l0.07-0.07c0.39-0.39,1.03-0.39,1.42,0l1.61,1.62l5.15-5.16c0.39-0.39,1.03-0.39,1.42,0l0.07,0.07c0.39,0.39,0.39,1.02,0,1.41 l-5.92,5.94C10.41,16.4,9.78,16.4,9.38,16.01z"}))))}},65634:(e,t,r)=>{"use strict";r.d(t,{E:()=>d}),r(67294);var i=r(51995),o=r(51776),n=r(45737),a=r(9882),s=r(61819),l=r(11965);const c=i.iK.span`
  svg {
    margin-right: ${({theme:e})=>e.gridUnit}px;
  }
`;function d({column:e,labelRef:t,showType:r=!1,showTooltip:i=!0}){const{expression:d,column_name:u,type_generic:m}=e,p=d&&d!==u,h=p?"expression":m;return(0,l.tZ)(c,null,r&&void 0!==h&&(0,l.tZ)(n.j,{type:h}),e.is_certified&&(0,l.tZ)(s.Z,{metricName:e.metric_name,certifiedBy:e.certified_by,details:e.certification_details}),i?(0,l.tZ)(o.u,{id:"metric-name-tooltip",title:e.verbose_name||e.column_name,trigger:["hover"],placement:"top"},(0,l.tZ)("span",{className:"m-r-5 option-label column-option-label",ref:t},e.verbose_name||e.column_name)):(0,l.tZ)("span",{className:"m-r-5 option-label column-option-label",ref:t},e.verbose_name||e.column_name),e.description&&(0,l.tZ)(a.Z,{className:"m-r-5 text-muted",icon:"info",tooltip:e.description,label:`descr-${e.column_name}`,placement:"top"}),p&&(0,l.tZ)(a.Z,{className:"m-r-5 text-muted",icon:"question-circle-o",tooltip:e.expression,label:`expr-${e.column_name}`,placement:"top"}))}},45737:(e,t,r)=>{"use strict";r.d(t,{j:()=>n,Z:()=>a});var i=r(88889),o=(r(67294),r(11965));function n({type:e}){let t="?";""===e||"expression"===e?t="Æ’":"aggregate"===e?t="AGG":e===i.Z.STRING?t="ABC":e===i.Z.NUMERIC?t="#":e===i.Z.BOOLEAN?t="T/F":e===i.Z.TEMPORAL&&(t="time");const r="time"===t?(0,o.tZ)("i",{className:"fa fa-clock-o type-label"}):(0,o.tZ)("div",{className:"type-label"},t);return(0,o.tZ)("span",null,r)}const a=n},43486:(e,t,r)=>{"use strict";r.d(t,{EI:()=>c,ZP:()=>d});var i=r(11965),o=r(23279),n=r.n(o),a=r(67294),s=r(51995),l=r(68122);function c({children:e}){const{gridUnit:t}=(0,s.Fg)();return(0,i.tZ)("div",{css:(0,i.iv)({display:"flex",flexWrap:"nowrap",margin:-2*t,marginBottom:t},"","")},e)}function d({onChange:e,value:t,children:r}){const o=(0,s.Fg)(),c=(0,a.useMemo)((()=>({0:e,[l.o]:n()(e,l.o)})),[e]),d=a.Children.map(r,(r=>{if("children"in r.props){const i=Array.isArray(r.props.children)?100/r.props.children.length+"%":void 0;return a.cloneElement(r,{children:a.Children.map(r.props.children,(r=>{const{name:o,width:s,debounceDelay:d=l.o,onChange:u}=r.props;return a.cloneElement(r,{width:s||i,value:null==t?void 0:t[o],debounceDelay:void 0,onChange(r){u&&u(r),d in c||(c[d]=n()(e,d)),c[d]({...t,[o]:r})}})}))})}return r}));return(0,i.tZ)("div",{css:(0,i.iv)({label:{textTransform:"uppercase",color:o.colors.text.label,fontSize:o.typography.sizes.s}},"","")},d)}},51384:(e,t,r)=>{"use strict";r.d(t,{m:()=>u}),r(67294);var i=r(51995),o=r(78186),n=r(9882),a=r(45737),s=r(61819),l=r(51776),c=r(11965);const d=i.iK.div`
  align-items: center;
  display: flex;

  > svg {
    margin-right: ${({theme:e})=>e.gridUnit}px;
  }
`;function u({metric:e,labelRef:t,openInNewWindow:r=!1,showFormula:i=!0,showType:u=!1,showTooltip:m=!0,url:p=""}){const h=e.verbose_name||e.metric_name||e.label,g=p?(0,c.tZ)("a",{href:p,target:r?"_blank":"",rel:"noreferrer"},h):h,f=e.warning_markdown||e.warning_text;return(0,c.tZ)(d,{className:"metric-option"},u&&(0,c.tZ)(a.j,{type:"expression"}),e.is_certified&&(0,c.tZ)(s.Z,{metricName:e.metric_name,certifiedBy:e.certified_by,details:e.certification_details}),m?(0,c.tZ)(l.ZP,{id:"metric-name-tooltip",title:h,trigger:["hover"],placement:"top"},(0,c.tZ)("span",{className:"option-label metric-option-label",ref:t},g)):(0,c.tZ)("span",{className:"option-label metric-option-label",ref:t},g),e.description&&(0,c.tZ)(n.Z,{className:"text-muted",icon:"info",tooltip:e.description,label:`descr-${e.metric_name}`}),i&&(0,c.tZ)(n.Z,{className:"text-muted",icon:"question-circle-o",tooltip:e.expression,label:`expr-${e.metric_name}`}),f&&(0,c.tZ)(n.Z,{className:"text-warning",icon:"warning",tooltip:(0,c.tZ)(o.Z,{source:f}),label:`warn-${e.metric_name}`}))}},35622:(e,t,r)=>{"use strict";r.d(t,{m_:()=>s,DS:()=>l,Au:()=>c,cm:()=>d});var i=r(61988),o=r(5364),n=r(88889),a=r(20620);const s={time_range:(0,i.t)("Time Range"),granularity_sqla:(0,i.t)("Time Column"),time_grain_sqla:(0,i.t)("Time Grain"),druid_time_origin:(0,i.t)("Origin"),granularity:(0,i.t)("Time Granularity")},l={[o.W3]:(0,i.t)("Time")},c={verbose_name:l[o.W3],column_name:o.W3,type_generic:n.Z.TEMPORAL,description:(0,i.t)("A reference to the [Time] configuration, taking granularity into account")},d={[a.nJ.aggregate]:(0,i.t)("Aggregate"),[a.nJ.raw]:(0,i.t)("Raw records")}},60097:(e,t,r)=>{"use strict";r.d(t,{M:()=>W,Z:()=>V});var i=r(11965),o=r(67294),n=r(51995),a=r(61988),s=r(9882),l=r(51776);function c({name:e,description:t,label:r,tooltipOnClick:o,onClick:n,warning:c,danger:d,leftNode:u,rightNode:m,validationErrors:p=[],renderTrigger:h=!1,hovered:g=!1,required:f=!1}){if(!r)return null;const y=p.length>0?"text-danger":"";return(0,i.tZ)("div",{className:"ControlHeader"},(0,i.tZ)("div",{className:"pull-left"},(0,i.tZ)("label",{className:"control-label",htmlFor:e},u&&(0,i.tZ)("span",null,u),(0,i.tZ)("span",{role:"button",tabIndex:0,onClick:n,className:y,style:{cursor:n?"pointer":""}},r)," ",c&&(0,i.tZ)("span",null,(0,i.tZ)(l.u,{id:"error-tooltip",placement:"top",title:c},(0,i.tZ)("i",{className:"fa fa-exclamation-circle text-warning"}))," "),d&&(0,i.tZ)("span",null,(0,i.tZ)(l.u,{id:"error-tooltip",placement:"top",title:d},(0,i.tZ)("i",{className:"fa fa-exclamation-circle text-danger"}))," "),p.length>0&&(0,i.tZ)("span",null,(0,i.tZ)(l.u,{id:"error-tooltip",placement:"top",title:p.join(" ")},(0,i.tZ)("i",{className:"fa fa-exclamation-circle text-danger"}))," "),g?(0,i.tZ)("span",null,t&&(0,i.tZ)("span",null,(0,i.tZ)(s.V,{label:(0,a.t)("description"),tooltip:t,placement:"top",onClick:o})," "),h&&(0,i.tZ)("span",null,(0,i.tZ)(s.V,{label:(0,a.t)("bolt"),tooltip:(0,a.t)("Changing this control takes effect instantly"),placement:"top",icon:"bolt"})," ")):null,f&&(0,i.tZ)("span",{className:"text-danger m-l-4"},(0,i.tZ)("strong",null,"*")))),m&&(0,i.tZ)("div",{className:"pull-right"},m),(0,i.tZ)("div",{className:"clearfix"}))}function d({value:e,options:t,onChange:r,...o}){const a=e||t[0][0],s=(0,n.Fg)();return(0,i.tZ)("div",{css:(0,i.iv)({".btn svg":{position:"relative",top:"0.2em"},".btn:focus":{outline:"none"},".control-label + .btn-group":{marginTop:1},".btn-group .btn.active":{background:s.colors.secondary.light5,fontWeight:s.typography.weights.bold,boxShadow:"none"}},"","")},(0,i.tZ)(c,o),(0,i.tZ)("div",{className:"btn-group btn-group-sm"},t.map((([e,t])=>(0,i.tZ)("button",{key:JSON.stringify(e),type:"button",className:"btn btn-default "+(e===a?"active":""),onClick:()=>{r(e)}},t)))))}var u=r(19181),m=r(45737),p=r(5872),h=r.n(p),g=r(88889),f=r(43486),y=r(31955),v=r(21888),b=r(4107),_=r(31059),Z=r(64749);const{Option:T}=Z.default;function C({creatable:e,onSearch:t,dropdownMatchSelectWidth:r=!1,minWidth:n="100%",showSearch:a=!0,onChange:s,options:l,children:c,value:d,...u}){const[m,p]=(0,o.useState)(),g=a||e,f=g?r=>{e&&p(r),t&&t(r)}:void 0,y=null==l?void 0:l.some((([e])=>e===m)),v=null==l?void 0:l.some((([e])=>e===d)),b=g?(e,t)=>{p(""),s&&s(e,t)}:s;return(0,i.tZ)(Z.default,h()({dropdownMatchSelectWidth:r,showSearch:g,onSearch:f,onChange:b,value:d},u,{css:(0,i.iv)({minWidth:n},"","")}),null==l?void 0:l.map((([e,t])=>(0,i.tZ)(T,{value:e},t))),c,d&&!v&&(0,i.tZ)(T,{key:d,value:d},d),m&&!y&&(0,i.tZ)(T,{key:m,value:m},m))}C.Option=T;const x={Slider:y.Z,InputNumber:v.Z,Input:b.Z,Select:C,Checkbox:_.Z,RadioButtonControl:d};function E({name:e,label:t,description:r,width:a,validators:l,required:d,onChange:u,value:m,defaultValue:p,controlType:g,...f}){const{gridUnit:y}=(0,n.Fg)(),[v,b]=(0,o.useState)(!1),[_,Z]=(0,o.useState)(void 0===m?p:m),[T,C]=(0,o.useState)(),E=e=>{const t=e&&"object"==typeof e&&"target"in e?"checkbox"===e.target.type||"radio"===e.target.type?e.target.checked:e.target.value:e,r=(null==l?void 0:l.map((e=>!(!d&&function(e){return null==e||""===e}(t))&&e(t))).filter((e=>!!e)))||[];C(r),Z(t),0===r.length&&u&&u(t)},A=x[g];return(0,i.tZ)("div",{css:(0,i.iv)({margin:2*y,width:a},"",""),onMouseEnter:()=>b(!0),onMouseLeave:()=>b(!1)},"Checkbox"===g?(0,i.tZ)(x.Checkbox,{checked:_,onChange:E},t," ",v&&r&&(0,i.tZ)(s.Z,{tooltip:r})):(0,i.tZ)(o.Fragment,null,t&&(0,i.tZ)(c,{name:e,label:t,description:r,validationErrors:T,hovered:v,required:d}),(0,i.tZ)(A,h()({},f,{value:_,onChange:E}))))}var A=r(872),S=r(61437),w=r(38798),R=r(14031),D=r(58842);const P={controlType:"Input",label:(0,a.t)("Emit Target"),description:(0,a.t)("If you wish to specify a different target column than the original column, it can be entered here"),defaultValue:"",debounceDelay:500,validators:void 0},N={controlType:"Select",label:(0,a.t)("D3 format"),description:D.YD,options:D.F6,defaultValue:D.F6[0][0],creatable:!0,minWidth:"14em",debounceDelay:500},k={controlType:"Select",label:(0,a.t)("D3 format"),description:D.oq,options:D.HC,defaultValue:D.HC[0][0],creatable:!0,minWidth:"10em",debounceDelay:500},M={controlType:"Slider",label:(0,a.t)("Fraction digits"),description:(0,a.t)("Number of decimal digits to round numbers to"),min:0,step:1,max:100,defaultValue:100},F={controlType:"InputNumber",label:(0,a.t)("Min Width"),description:(0,a.t)("Default minimal column width in pixels, actual width may still be larger than this if other columns don't need much space"),width:120,placeholder:"auto",debounceDelay:400,validators:[A.Z]},L={controlType:"RadioButtonControl",label:(0,a.t)("Text align"),description:(0,a.t)("Horizontal alignment"),width:130,debounceDelay:50,defaultValue:"left",options:[["left",(0,i.tZ)(S.E,{title:(0,a.t)("Left")})],["center",(0,i.tZ)(R.X,{title:(0,a.t)("Center")})],["right",(0,i.tZ)(w.l,{title:(0,a.t)("Right")})]]},O={controlType:"Checkbox",label:(0,a.t)("Show cell bars"),description:(0,a.t)("Whether to display a bar chart background in table columns"),defaultValue:!0,debounceDelay:200},I={controlType:"Checkbox",label:(0,a.t)("Align +/-"),description:(0,a.t)("Whether to align positive and negative values in cell bar chart at 0"),defaultValue:!1,debounceDelay:200},U={controlType:"Checkbox",label:(0,a.t)("Color +/-"),description:(0,a.t)("Whether to colorize numeric values by if they are positive or negative"),defaultValue:!1,debounceDelay:200},$={d3NumberFormat:N,emitTarget:P,d3SmallNumberFormat:{...N,label:(0,a.t)("Small number format"),description:(0,a.t)("D3 number format for numbers between -1.0 and 1.0, useful when you want to have different siginificant digits for small and large numbers")},d3TimeFormat:k,fractionDigits:M,columnWidth:F,horizontalAlign:L,showCellBars:O,alignPositiveNegative:I,colorPositiveNegative:U},B={[g.Z.STRING]:[["columnWidth",{name:"horizontalAlign",override:{defaultValue:"left"}}]],[g.Z.NUMERIC]:[["columnWidth",{name:"horizontalAlign",override:{defaultValue:"right"}}],["d3NumberFormat"],["d3SmallNumberFormat"],["alignPositiveNegative","colorPositiveNegative"],["showCellBars"]],[g.Z.TEMPORAL]:[["columnWidth",{name:"horizontalAlign",override:{defaultValue:"left"}}],["d3TimeFormat"]],[g.Z.BOOLEAN]:[["columnWidth",{name:"horizontalAlign",override:{defaultValue:"left"}}]]};function z({column:e,configFormLayout:t,onChange:r}){return(0,i.tZ)(f.ZP,{onChange:r,value:e.config},t[void 0===e.type?g.Z.STRING:e.type].map(((e,t)=>(0,i.tZ)(f.EI,{key:t},e.map((e=>{const t="string"==typeof e?e:e.name,r="string"==typeof e?{}:"override"in e?e.override:e.config,o={...t in $?$[t]:void 0,...r};return(0,i.tZ)(E,h()({key:t,name:t},o))}))))))}const q=o.memo((function({column:e,onChange:t,configFormLayout:r}){const{colors:o,gridUnit:a}=(0,n.Fg)(),s=6*a;return(0,i.tZ)(u.Z,{title:e.name,content:()=>(0,i.tZ)(z,{column:e,onChange:t,configFormLayout:r}),trigger:"click",placement:"right"},(0,i.tZ)("div",{css:(0,i.iv)({cursor:"pointer",padding:`${1.5*a}px ${2*a}px`,borderBottom:`1px solid ${o.grayscale.light2}`,position:"relative",paddingRight:s,"&:last-child":{borderBottom:"none"},"&:hover":{background:o.grayscale.light4},"> .fa":{color:o.grayscale.light2},"&:hover > .fa":{color:o.grayscale.light1}},"")},(0,i.tZ)(m.Z,{type:e.type}),e.name,(0,i.tZ)("i",{className:"fa fa-caret-right",css:(0,i.iv)({position:"absolute",right:3*a,top:3*a},"")})))}));var G=r(35622);const W={},V={RadioButtonControl:d,ColumnConfigControl:function({queryResponse:e,appliedColumnNames:t=[],value:r,onChange:s,configFormLayout:l=B,emitFilter:d,...u}){d?Object.values(l).forEach((e=>{e.some((e=>e.includes("emitTarget")))||e.push(["emitTarget"])})):Object.values(l).forEach((e=>{const t=e.findIndex((e=>e.includes("emitTarget")));t>-1&&e.splice(t,1)}));const{colnames:m,coltypes:p}=e||{};let h=[],g=[];if(0===t.length)h=m||[],g=p||[];else{const e=new Set(t);null==m||m.forEach(((t,r)=>{e.has(t)&&(h.push(t),g.push(null==p?void 0:p[r]))}))}const f=(0,n.Fg)(),y=(0,o.useMemo)((()=>{var e;const t={};return null==(e=h)||e.forEach(((e,i)=>{var o;t[e]={name:G.DS[e]||e,type:null==(o=g)?void 0:o[i],config:(null==r?void 0:r[e])||{}}})),t}),[r,h,g]),[v,b]=(0,o.useState)(!1),_=e=>y[e]||{};if(!h||0===h.length)return null;const Z=h.length>12,T=Z&&!v?h.slice(0,10):h;return(0,i.tZ)(o.Fragment,null,(0,i.tZ)(c,u),(0,i.tZ)("div",{css:(0,i.iv)({border:`1px solid ${f.colors.grayscale.light2}`,borderRadius:f.gridUnit},"","")},T.map((e=>(0,i.tZ)(q,{key:e,column:_(e),onChange:t=>((e,t)=>{if(s){const i=h&&r?Object.fromEntries(Object.entries(r).filter((([e])=>h.includes(e)))):{...r};s({...i,[e]:t})}})(e,t),configFormLayout:l}))),Z&&(0,i.tZ)("div",{role:"button",tabIndex:-1,css:(0,i.iv)({padding:2*f.gridUnit,textAlign:"center",cursor:"pointer",textTransform:"uppercase",fontSize:f.typography.sizes.xs,color:f.colors.text.label,":hover":{backgroundColor:f.colors.grayscale.light4}},"",""),onClick:()=>b(!v)},v?(0,i.tZ)(o.Fragment,null,(0,i.tZ)("i",{className:"fa fa-angle-up"})," Â  ",(0,a.t)("Show less columns")):(0,i.tZ)(o.Fragment,null,(0,i.tZ)("i",{className:"fa fa-angle-down"})," Â ",(0,a.t)("Show all columns")))))}}},53769:(e,t,r)=>{"use strict";r.d(t,{xM:()=>s,lC:()=>l,A3:()=>c,zo:()=>d,ZC:()=>u,dN:()=>m,$m:()=>p,SE:()=>h,z3:()=>g,Ju:()=>f,h1:()=>y,ov:()=>v,M4:()=>b,GA:()=>_});var i=r(61988),o=r(95826),n=r(93185),a=r(35622);const s={type:"DndColumnSelect",label:(0,i.t)("Group by"),default:[],description:(0,i.t)("One or many columns to group by. High cardinality groupings should include a series limit to limit the number of fetched and rendered series."),mapStateToProps(e,{includeTime:t}){const r={};if(e.datasource){const i=e.datasource.columns.filter((e=>e.groupby));t&&i.unshift(a.Au),r.options=Object.fromEntries(i.map((e=>[e.column_name,e]))),r.savedMetrics=e.datasource.metrics||[]}return r}},l={...s,label:(0,i.t)("Columns"),description:(0,i.t)("One or many columns to pivot as columns")},c={...s,label:(0,i.t)("Series"),multi:!1,default:null,description:(0,i.t)("Defines the grouping of entities. Each series is shown as a specific color on the chart and has a legend toggle")},d={...s,label:(0,i.t)("Entity"),default:null,multi:!1,validators:[o.Z],description:(0,i.t)("This defines the element to be plotted on the chart")},u={type:"DndFilterSelect",label:(0,i.t)("Filters"),default:null,description:"",mapStateToProps:({datasource:e,form_data:t})=>({columns:(null==e?void 0:e.columns.filter((e=>e.filterable)))||[],savedMetrics:(null==e?void 0:e.metrics)||[],selectedMetrics:t.metrics||(t.metric?[t.metric]:[]),datasource:e}),provideFormDataToProps:!0},m={type:"DndMetricSelect",multi:!0,label:(0,i.t)("Metrics"),validators:[o.Z],mapStateToProps:({datasource:e})=>({columns:e?e.columns:[],savedMetrics:e?e.metrics:[],datasource:e,datasourceType:null==e?void 0:e.type}),description:(0,i.t)("One or many metrics to display")},p={...m,multi:!1,label:(0,i.t)("Metric"),description:(0,i.t)("Metric")},h={...p,label:(0,i.t)("Right Axis Metric"),description:(0,i.t)("Choose a metric for right axis")},g={type:"DndMetricSelect",label:(0,i.t)("Sort by"),default:null,description:(0,i.t)("Metric used to define how the top series are sorted if a series or row limit is present. If undefined reverts to the first metric (where appropriate)."),mapStateToProps:({datasource:e})=>({columns:(null==e?void 0:e.columns)||[],savedMetrics:(null==e?void 0:e.metrics)||[],datasource:e,datasourceType:null==e?void 0:e.type})},f={...p,label:(0,i.t)("Bubble Size"),description:(0,i.t)("Metric used to calculate bubble size")},y={...p,label:(0,i.t)("X Axis"),description:(0,i.t)("Metric assigned to the [X] axis")},v={...p,label:(0,i.t)("Y Axis"),description:(0,i.t)("Metric assigned to the [Y] axis")},b={...p,label:(0,i.t)("Color Metric"),validators:[],description:(0,i.t)("A metric to use for color")},_={...c,label:a.m_.granularity_sqla,description:(0,i.t)("The time column for the visualization. Note that you can define arbitrary expression that return a DATETIME column in the table. Also note that the filter below is applied against this column or expression"),canDelete:!1,ghostButtonText:(0,i.t)((0,n.c)(n.T.ENABLE_DND_WITH_CLICK_UX)?"Drop a temporal column here or click":"Drop temporal column here"),mapStateToProps:({datasource:e})=>{var t,r;const i=null!=(t=null==e?void 0:e.columns.filter((e=>e.is_dttm)))?t:[];return{options:Object.fromEntries(i.map((e=>[e.column_name,e]))),default:(null==e?void 0:e.main_dttm_col)||(null==(r=i[0])?void 0:r.column_name)||null}}}},16522:(e,t,r)=>{"use strict";r.d(t,{Hq:()=>Y}),r(67294);var i=r(81545),o=r(45511),n=r(61988),a=r(95826),s=r(75294),l=r(93185),c=r(6126),d=r(58842),u=r(35622),m=r(65634),p=r(53769),h=r(11965);const g=(0,i.Z)(),f=(0,o.Z)(),y=[5,10,25,50,100,500],v={type:"SelectControl",label:(0,n.t)("Group by"),multi:!0,freeForm:!0,clearable:!0,default:[],includeTime:!1,description:(0,n.t)("One or many columns to group by. High cardinality groupings should include a sort by metric and series limit to limit the number of fetched and rendered series."),optionRenderer:e=>(0,h.tZ)(m.E,{showType:!0,column:e}),valueRenderer:e=>(0,h.tZ)(m.E,{column:e}),valueKey:"column_name",allowAll:!0,filterOption:({data:e},t)=>e.column_name&&e.column_name.toLowerCase().includes(t.toLowerCase())||e.verbose_name&&e.verbose_name.toLowerCase().includes(t.toLowerCase())||!1,promptTextCreator:e=>e,mapStateToProps(e,{includeTime:t}){const r={};if(e.datasource){const i=e.datasource.columns.filter((e=>e.groupby));t&&i.unshift(u.Au),r.options=i}return r},commaChoosesOption:!1},b={type:"MetricsControl",multi:!0,label:(0,n.t)("Metrics"),validators:[a.Z],mapStateToProps:({datasource:e})=>({columns:e?e.columns:[],savedMetrics:e?e.metrics:[],datasource:e,datasourceType:null==e?void 0:e.type}),description:(0,n.t)("One or many metrics to display")},_={...b,multi:!1,label:(0,n.t)("Metric"),description:(0,n.t)("Metric")},Z={type:"DatasourceControl",label:(0,n.t)("Datasource"),default:null,description:null,mapStateToProps:({datasource:e,form_data:t})=>({datasource:e,form_data:t})},T={type:"VizTypeControl",label:(0,n.t)("Visualization Type"),default:"table",description:(0,n.t)("The type of visualization to display")},C={type:"ColorPickerControl",label:(0,n.t)("Fixed Color"),description:(0,n.t)("Use this to define a static color for all circles"),default:{r:0,g:122,b:135,a:1},renderTrigger:!0},x={..._,label:(0,n.t)("Right Axis Metric"),clearable:!0,description:(0,n.t)("Choose a metric for right axis")},E={type:"ColorSchemeControl",label:(0,n.t)("Linear Color Scheme"),choices:()=>f.values().map((e=>[e.id,e.label])),default:f.getDefaultKey(),clearable:!1,description:"",renderTrigger:!0,schemes:()=>f.getMap(),isLinear:!0},A={..._,label:(0,n.t)("Color Metric"),default:null,validators:[],description:(0,n.t)("A metric to use for color")},S={...v,label:(0,n.t)("Columns"),description:(0,n.t)("One or many columns to pivot as columns")},w={type:"SelectControl",freeForm:!0,label:u.m_.druid_time_origin,choices:[["","default"],["now","now"]],default:null,description:(0,n.t)("Defines the origin where time buckets start, accepts natural dates as in `now`, `sunday` or `1970-01-01`")},R={type:"SelectControl",freeForm:!0,label:u.m_.granularity,default:"one day",choices:[[null,"all"],["PT5S","5 seconds"],["PT30S","30 seconds"],["PT1M","1 minute"],["PT5M","5 minutes"],["PT30M","30 minutes"],["PT1H","1 hour"],["PT6H","6 hour"],["P1D","1 day"],["P7D","7 days"],["P1W","week"],["week_starting_sunday","week starting Sunday"],["week_ending_saturday","week ending Saturday"],["P1M","month"],["P3M","quarter"],["P1Y","year"]],description:(0,n.t)("The time granularity for the visualization. Note that you can type and use simple natural language as in `10 seconds`, `1 day` or `56 weeks`")},D={type:"SelectControl",label:u.m_.granularity_sqla,description:(0,n.t)("The time column for the visualization. Note that you can define arbitrary expression that return a DATETIME column in the table. Also note that the filter below is applied against this column or expression"),default:e=>e.default,clearable:!1,optionRenderer:e=>(0,h.tZ)(m.E,{showType:!0,column:e}),valueRenderer:e=>(0,h.tZ)(m.E,{column:e}),valueKey:"column_name",mapStateToProps:e=>{const t={};return e.datasource&&(t.options=e.datasource.columns.filter((e=>e.is_dttm)),t.default=null,e.datasource.main_dttm_col?t.default=e.datasource.main_dttm_col:t.options&&t.options.length>0&&(t.default=t.options[0].column_name)),t}},P={type:"SelectControl",label:u.m_.time_grain_sqla,default:"P1D",description:(0,n.t)("The time granularity for the visualization. This applies a date transformation to alter your time column and defines a new time granularity. The options here are defined on a per database engine basis in the Superset source code."),mapStateToProps:({datasource:e})=>({choices:(null==e?void 0:e.time_grain_sqla)||null})},N={type:"DateFilterControl",freeForm:!0,label:u.m_.time_range,default:(0,n.t)("No filter"),description:(0,n.t)('The time range for the visualization. All relative times, e.g. "Last month", "Last 7 days", "now", etc. are evaluated on the server using the server\'s local time (sans timezone). All tooltips and placeholder times are expressed in UTC (sans timezone). The timestamps are then evaluated by the database using the engine\'s local timezone. Note one can explicitly set the timezone per the ISO 8601 format if specifying either the start and/or end time.'),mapStateToProps:({datasource:e,form_data:t})=>({datasource:e,endpoints:(null==t?void 0:t.time_range_endpoints)||null})},k={type:"SelectControl",freeForm:!0,label:(0,n.t)("Row limit"),validators:[s.Z],default:1e4,choices:(0,c.m)([10,50,100,250,500,1e3,5e3,1e4,5e4]),description:(0,n.t)("Limits the number of rows that get displayed.")},M={type:"SelectControl",freeForm:!0,label:(0,n.t)("Series limit"),validators:[s.Z],choices:(0,c.m)(y),clearable:!0,description:(0,n.t)("Limits the number of series that get displayed. A joined subquery (or an extra phase where subqueries are not supported) is applied to limit the number of series that get fetched and rendered. This feature is useful when grouping by high cardinality column(s) though does increase the query complexity and cost.")},F={type:"SelectControl",freeForm:!0,label:(0,n.t)("Series limit"),validators:[s.Z],choices:(0,c.m)(y),description:(0,n.t)("Limits the number of series that get displayed. A joined subquery (or an extra phase where subqueries are not supported) is applied to limit the number of series that get fetched and rendered. This feature is useful when grouping by high cardinality column(s) though does increase the query complexity and cost.")},L={type:"MetricsControl",label:(0,n.t)("Sort by"),default:null,description:(0,n.t)("Metric used to define how the top series are sorted if a series or row limit is present. If undefined reverts to the first metric (where appropriate)."),mapStateToProps:({datasource:e})=>({columns:(null==e?void 0:e.columns)||[],savedMetrics:(null==e?void 0:e.metrics)||[],datasource:e,datasourceType:null==e?void 0:e.type})},O={...v,label:(0,n.t)("Series"),multi:!1,default:null,description:(0,n.t)("Defines the grouping of entities. Each series is shown as a specific color on the chart and has a legend toggle")},I={...v,label:(0,n.t)("Entity"),default:null,multi:!1,validators:[a.Z],description:(0,n.t)("This defines the element to be plotted on the chart")},U={..._,label:(0,n.t)("X Axis"),description:(0,n.t)("Metric assigned to the [X] axis"),default:null},$={..._,label:(0,n.t)("Y Axis"),default:null,description:(0,n.t)("Metric assigned to the [Y] axis")},B={..._,label:(0,n.t)("Bubble Size"),description:(0,n.t)("Metric used to calculate bubble size"),default:null},z={type:"SelectControl",freeForm:!0,label:(0,n.t)("Y Axis Format"),renderTrigger:!0,default:d.Ul,choices:d.F6,description:d.YD,mapStateToProps:e=>{var t,r;const i="percentage"===(null==(t=e.controls)||null==(r=t.comparison_type)?void 0:r.value);return{warning:i?(0,n.t)('When `Calculation type` is set to "Percentage change", the Y Axis Format is forced to `.1%`'):null,disabled:i}}},q={type:"SelectControl",freeForm:!0,label:(0,n.t)("Time format"),renderTrigger:!0,default:d._r,choices:d.HC,description:d.oq},G={type:"AdhocFilterControl",label:(0,n.t)("Filters"),default:null,description:"",mapStateToProps:({datasource:e,form_data:t})=>({columns:(null==e?void 0:e.columns.filter((e=>e.filterable)))||[],savedMetrics:(null==e?void 0:e.metrics)||[],selectedMetrics:t.metrics||(t.metric?[t.metric]:[]),datasource:e})},W={type:"ColorSchemeControl",label:(0,n.t)("Color Scheme"),default:g.getDefaultKey(),renderTrigger:!0,choices:()=>g.keys().map((e=>[e,e])),description:(0,n.t)("The color scheme for rendering chart"),schemes:()=>g.getMap(),mapStateToProps:e=>{var t;return{dashboardId:null==e||null==(t=e.form_data)?void 0:t.dashboardId}}},V=(0,l.c)(l.T.ENABLE_EXPLORE_DRAG_AND_DROP),Y={metrics:V?p.dN:b,metric:V?p.$m:_,datasource:Z,viz_type:T,color_picker:C,metric_2:V?p.SE:x,linear_color_scheme:E,secondary_metric:V?p.M4:A,groupby:V?p.xM:v,columns:V?p.lC:S,druid_time_origin:w,granularity:R,granularity_sqla:V?p.GA:D,time_grain_sqla:P,time_range:N,row_limit:k,limit:M,timeseries_limit_metric:V?p.z3:L,orderby:V?p.z3:L,series:V?p.A3:O,entity:V?p.zo:I,x:V?p.h1:U,y:V?p.ov:$,size:V?p.Ju:B,y_axis_format:z,x_axis_time_format:q,adhoc_filters:V?p.ZC:G,color_scheme:W,series_columns:V?p.lC:S,series_limit:F,series_limit_metric:V?p.z3:L,legacy_order_by:V?p.z3:L}},43746:(e,t,r)=>{"use strict";r.d(t,{O9:()=>o,qU:()=>i.ControlComponentProps,Tu:()=>a.ControlFormItemSpec,vD:()=>s,jb:()=>n.Metric,GA:()=>d,xN:()=>l,zy:()=>c});var i={};r.r(i);var o,n=r(5352),a=r(43486);!function(e){e.NONE="None",e.GREATER_THAN=">",e.LESS_THAN="<",e.GREATER_OR_EQUAL="â‰¥",e.LESS_OR_EQUAL="â‰¤",e.EQUAL="=",e.NOT_EQUAL="â‰ ",e.BETWEEN="< x <",e.BETWEEN_OR_EQUAL="â‰¤ x â‰¤",e.BETWEEN_OR_LEFT_EQUAL="â‰¤ x <",e.BETWEEN_OR_RIGHT_EQUAL="< x â‰¤"}(o||(o={}));const s=[o.BETWEEN,o.BETWEEN_OR_EQUAL,o.BETWEEN_OR_LEFT_EQUAL,o.BETWEEN_OR_RIGHT_EQUAL];function l(e){return"column_name"in e}function c(e){return"column_name"in e&&"expression"in e&&!!e.expression}function d(e){return"label"in e&&"sqlExpression"in e}},58842:(e,t,r)=>{"use strict";r.d(t,{YD:()=>a,F6:()=>s,oq:()=>l,HC:()=>c,Ul:()=>d,_r:()=>u});var i=r(61988),o=r(45636),n=r(78900);const a=(0,i.t)("D3 format syntax: https://github.com/d3/d3-format"),s=[[o.Z.SMART_NUMBER,(0,i.t)("Adaptative formating")],["~g",(0,i.t)("Original value")],[",d",",d (12345.432 => 12,345)"],[".1s",".1s (12345.432 => 10k)"],[".3s",".3s (12345.432 => 12.3k)"],[",.1%",",.1% (12345.432 => 1,234,543.2%)"],[".2%",".2% (12345.432 => 1234543.20%)"],[".3%",".3% (12345.432 => 1234543.200%)"],[".4r",".4r (12345.432 => 12350)"],[",.3f",",.3f (12345.432 => 12,345.432)"],["+,","+, (12345.432 => +12,345.432)"],["$,.2f","$,.2f (12345.432 => $12,345.43)"],["DURATION",(0,i.t)("Duration in ms (66000 => 1m 6s)")],["DURATION_SUB",(0,i.t)("Duration in ms (1.40008 => 1ms 400Âµs 80ns)")]],l=(0,i.t)("D3 time format syntax: https://github.com/d3/d3-time-format"),c=[[n.Z.id,(0,i.t)("Adaptative formating")],["%d/%m/%Y","%d/%m/%Y | 14/01/2019"],["%m/%d/%Y","%m/%d/%Y | 01/14/2019"],["%Y-%m-%d","%Y-%m-%d | 2019-01-14"],["%Y-%m-%d %H:%M:%S","%Y-%m-%d %H:%M:%S | 2019-01-14 01:32:10"],["%d-%m-%Y %H:%M:%S","%d-%m-%Y %H:%M:%S | 14-01-2019 01:32:10"],["%H:%M:%S","%H:%M:%S | 01:32:10"]],d=s[0][0],u=c[0][0]},89368:(e,t,r)=>{"use strict";r.d(t,{$:()=>a,q:()=>s});var i=r(67294),o=r(16522),n=r(60097);function a(e){return"string"==typeof e&&e in n.Z?n.Z[e]:e}function s(e,t={}){if("string"==typeof e&&e in o.Hq){const r=e;return{name:r,config:{...o.Hq[r],...t[r]}}}if(!e||"string"==typeof e||i.isValidElement(e))return e;if("name"in e&&"config"in e)return{...e,config:{...e.config,type:a(e.config.type)}};if("override"in e&&e.name in o.Hq){const{name:t,override:r}=e;return{name:t,config:{...o.Hq[t],...r}}}return null}},6126:(e,t,r)=>{"use strict";function i(e){return e.map((e=>Array.isArray(e)?e:[e,e.toString()]))}function o(e,t){const r=[];for(let i=e;i<=t;i+=1)r.push([i,i.toString()]);return r}r.d(t,{m:()=>i,B:()=>o})},88274:(e,t,r)=>{"use strict";r.d(t,{Z:()=>S});var i=r(5872),o=r.n(i),n=r(67294),a=r(47859),s=r(86170),l=r(22222),c=r(80644),d=r(54085),u=r(74464),m=r(9330),p=r(89453),h=r(11965);function g(e){return e}const f=()=>null,y={id:"",className:"",preTransformProps:g,overrideTransformProps:void 0,postTransformProps:g,onRenderSuccess(){},onRenderFailure(){}},v=new m.Z;class b extends n.PureComponent{constructor(...e){super(...e),this.container=void 0,this.processChartProps=(0,l.P1)((e=>e.chartProps),(e=>e.preTransformProps),(e=>e.transformProps),(e=>e.postTransformProps),((e,t=g,r=g,i=g)=>i(r(t(e))))),this.createLoadableRenderer=(0,l.P1)((e=>e.chartType),(e=>e.overrideTransformProps),((e,t)=>{if(e){const r=(0,p.Z)({loader:{Chart:()=>(0,d.Z)().getAsPromise(e),transformProps:t?()=>Promise.resolve(t):()=>(0,u.Z)().getAsPromise(e)},loading:t=>this.renderLoading(t,e),render:this.renderChart});return r.preload(),r}return f})),this.renderChart=(e,t)=>{const{Chart:r,transformProps:i}=e,{chartProps:o,preTransformProps:n,postTransformProps:a}=t;return(0,h.tZ)(r,this.processChartProps({chartProps:o,preTransformProps:n,transformProps:i,postTransformProps:a}))},this.renderLoading=(e,t)=>{const{error:r}=e;return r?(0,h.tZ)("div",{className:"alert alert-warning",role:"alert"},(0,h.tZ)("strong",null,"ERROR"),"Â ",(0,h.tZ)("code",null,'chartType="',t,'"')," â€”",r.toString()):null},this.setRef=e=>{this.container=e}}render(){const{id:e,className:t,preTransformProps:r,postTransformProps:i,chartProps:n=v,onRenderSuccess:a,onRenderFailure:s}=this.props,l=this.createLoadableRenderer(this.props);if(null===n)return null;const c={};return e&&(c.id=e),t&&(c.className=t),(0,h.tZ)("div",o()({},c,{ref:this.setRef}),(0,h.tZ)(l,{preTransformProps:r,postTransformProps:i,chartProps:n,onRenderSuccess:a,onRenderFailure:s}))}}b.defaultProps=y;const _={backgroundColor:"#000",color:"#fff",overflow:"auto",padding:32};var Z=r(61988);const T={maxWidth:800},C={fontSize:16,fontWeight:"bold",paddingBottom:8},x={fontSize:14},E=({className:e,height:t,id:r,width:i})=>{const o=(0,n.useMemo)((()=>((e,t)=>({alignItems:"center",display:"flex",flexDirection:"column",height:e,justifyContent:"center",padding:16,textAlign:"center",width:t}))(t,i)),[t,i]),a="string"==typeof i||i>250,s=(0,Z.t)("No results were returned for this query. If you expected results to be returned, ensure any filters are configured properly and the datasource contains data for the selected time range.");return(0,h.tZ)("div",{className:e,id:r,style:o,title:a?void 0:s},(0,h.tZ)("div",{style:T},(0,h.tZ)("div",{style:C},(0,Z.t)("No Results")),a&&(0,h.tZ)("div",{style:x},s)))},A={FallbackComponent:function({componentStack:e,error:t,height:r,width:i}){return(0,h.tZ)("div",{style:{..._,height:r,width:i}},(0,h.tZ)("div",null,(0,h.tZ)("div",null,(0,h.tZ)("b",null,"Oops! An error occured!")),(0,h.tZ)("code",null,t?t.toString():"Unknown Error")),e&&(0,h.tZ)("div",null,(0,h.tZ)("b",null,"Stack Trace:"),(0,h.tZ)("code",null,e.split("\n").map((e=>(0,h.tZ)("div",{key:e},e))))))},height:400,width:"100%",enableNoResults:!0};class S extends n.PureComponent{constructor(...e){super(...e),this.core=void 0,this.createChartProps=m.Z.createSelector(),this.parseDimension=(0,l.P1)((({width:e})=>e),(({height:e})=>e),((e,t)=>{const r=(0,c.Z)(e),i=(0,c.Z)(t),o={height:i.isDynamic?100*i.multiplier+"%":i.value,width:r.isDynamic?100*r.multiplier+"%":r.value};return{BoundingBox:r.isDynamic&&i.isDynamic&&1===r.multiplier&&1===i.multiplier?n.Fragment:({children:e})=>(0,h.tZ)("div",{style:o},e),heightInfo:i,widthInfo:r}})),this.setRef=e=>{this.core=e}}renderChart(e,t){const{id:r,className:i,chartType:n,preTransformProps:s,overrideTransformProps:l,postTransformProps:c,onRenderSuccess:d,onRenderFailure:u,disableErrorBoundary:m,FallbackComponent:p,onErrorBoundary:g,Wrapper:f,queriesData:y,enableNoResults:v,..._}=this.props,Z=this.createChartProps({..._,queriesData:y,height:t,width:e});let T;if(!v||y&&!y.every((({data:e})=>!e||Array.isArray(e)&&0===e.length))){const o=(0,h.tZ)(b,{ref:this.setRef,id:r,className:i,chartType:n,chartProps:Z,preTransformProps:s,overrideTransformProps:l,postTransformProps:c,onRenderSuccess:d,onRenderFailure:u});T=f?(0,h.tZ)(f,{width:e,height:t},o):o}else T=(0,h.tZ)(E,{id:r,className:i,height:t,width:e});return!0===m?T:(0,h.tZ)(a.ZP,{FallbackComponent:r=>(0,h.tZ)(p,o()({width:e,height:t},r)),onError:g},T)}render(){const{heightInfo:e,widthInfo:t,BoundingBox:r}=this.parseDimension(this.props);if(t.isDynamic||e.isDynamic){const{debounceTime:i}=this.props;return(0,h.tZ)(r,null,(0,h.tZ)(s.Z,{debounceTime:i},(({width:r,height:i})=>this.renderChart(t.isDynamic?Math.floor(r):t.value,e.isDynamic?Math.floor(i):e.value))))}return this.renderChart(t.value,e.value)}}S.defaultProps=A},89453:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var i=r(68356),o=r.n(i);const n={onRenderFailure(){},onRenderSuccess(){}};function a(e){const t=o().Map(e);class r extends t{componentDidMount(){this.afterRender()}componentDidUpdate(){this.afterRender()}afterRender(){const{loaded:e,loading:t,error:r}=this.state,{onRenderFailure:i,onRenderSuccess:o}=this.props;t||(r?i(r):e&&Object.keys(e).length>0&&o())}}return r.defaultProps=void 0,r.defaultProps=n,r.preload=t.preload,r}},43323:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var i=r(67294),o=r(11965);function n(e,t){class r extends i.Component{constructor(e){super(e),this.container=void 0,this.setContainerRef=this.setContainerRef.bind(this)}componentDidMount(){this.execute()}componentDidUpdate(){this.execute()}componentWillUnmount(){this.container=void 0,null!=t&&t.componentWillUnmount&&t.componentWillUnmount.bind(this)()}setContainerRef(e){this.container=e}execute(){this.container&&e(this.container,this.props)}render(){const{id:e,className:t}=this.props;return(0,o.tZ)("div",{ref:this.setContainerRef,id:e,className:t})}}const n=r;return e.displayName&&(n.displayName=e.displayName),e.propTypes&&(n.propTypes={...n.propTypes,...e.propTypes}),e.defaultProps&&(n.defaultProps=e.defaultProps),r}},48805:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});class i{constructor(e){this.name=void 0,this.canBeAnnotationTypes=void 0,this.canBeAnnotationTypesLookup=void 0,this.credits=void 0,this.description=void 0,this.show=void 0,this.supportedAnnotationTypes=void 0,this.thumbnail=void 0,this.useLegacyApi=void 0,this.behaviors=void 0,this.datasourceCount=void 0,this.enableNoResults=void 0,this.deprecated=void 0,this.exampleGallery=void 0,this.tags=void 0,this.category=void 0;const{name:t,canBeAnnotationTypes:r=[],credits:i=[],description:o="",show:n=!0,supportedAnnotationTypes:a=[],thumbnail:s,useLegacyApi:l=!1,behaviors:c=[],datasourceCount:d=1,enableNoResults:u=!0,deprecated:m=!1,exampleGallery:p=[],tags:h=[],category:g=null}=e;this.name=t,this.credits=i,this.description=o,this.show=n,this.canBeAnnotationTypes=r,this.canBeAnnotationTypesLookup=r.reduce(((e,t)=>{const r=e;return r[t]=!0,r}),{}),this.supportedAnnotationTypes=a,this.thumbnail=s,this.useLegacyApi=l,this.behaviors=c,this.datasourceCount=d,this.enableNoResults=u,this.deprecated=m,this.exampleGallery=p,this.tags=h,this.category=g}canBeAnnotationType(e){return this.canBeAnnotationTypesLookup[e]||!1}clone(){return new i(this)}}},84912:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var i=r(91189),o=r(49714),n=r(11064),a=r(19427),s=r(54085),l=r(37687),c=r(74464);function d(e){return e}const u={};function m(e){return()=>{const t=e();return t instanceof Promise?t.then((e=>"default"in e&&e.default||e)):t}}class p extends i.Z{constructor(e){super(),this.controlPanel=void 0,this.metadata=void 0,this.loadBuildQuery=void 0,this.loadTransformProps=void 0,this.loadChart=void 0;const{metadata:t,buildQuery:r,loadBuildQuery:i,transformProps:o=d,loadTransformProps:n,Chart:a,loadChart:s,controlPanel:l=u}=e;if(this.controlPanel=l,this.metadata=t,this.loadBuildQuery=i&&m(i)||r&&m((()=>r))||void 0,this.loadTransformProps=m(null!=n?n:()=>o),s)this.loadChart=m(s);else{if(!a)throw new Error("Chart or loadChart is required");this.loadChart=()=>a}}register(){const e=this.config.key||(0,o.Z)("config.key");return(0,n.Z)().registerValue(e,this.metadata),(0,s.Z)().registerLoader(e,this.loadChart),(0,l.Z)().registerValue(e,this.controlPanel),(0,c.Z)().registerLoader(e,this.loadTransformProps),this.loadBuildQuery&&(0,a.Z)().registerLoader(e,this.loadBuildQuery),this}unregister(){const e=this.config.key||(0,o.Z)("config.key");return(0,n.Z)().remove(e),(0,s.Z)().remove(e),(0,l.Z)().remove(e),(0,c.Z)().remove(e),(0,a.Z)().remove(e),this}configure(e,t){return super.configure(e,t),this}}},9330:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(22222),o=r(78036);const n=800,a=600;class s{constructor(e={}){this.annotationData=void 0,this.datasource=void 0,this.rawDatasource=void 0,this.initialValues=void 0,this.formData=void 0,this.rawFormData=void 0,this.height=void 0,this.hooks=void 0,this.ownState=void 0,this.filterState=void 0,this.queriesData=void 0,this.width=void 0,this.behaviors=void 0,this.appSection=void 0,this.isRefreshing=void 0;const{annotationData:t={},datasource:r={},formData:i={},hooks:s={},ownState:l={},filterState:c={},initialValues:d={},queriesData:u=[],behaviors:m=[],width:p=n,height:h=a,appSection:g,isRefreshing:f}=e;this.width=p,this.height=h,this.annotationData=t,this.datasource=(0,o.Z)(r),this.rawDatasource=r,this.formData=(0,o.Z)(i),this.rawFormData=i,this.hooks=s,this.initialValues=d,this.queriesData=u,this.ownState=l,this.filterState=c,this.behaviors=m,this.appSection=g,this.isRefreshing=f}}s.createSelector=void 0,s.createSelector=function(){return(0,i.P1)((e=>e.annotationData),(e=>e.datasource),(e=>e.formData),(e=>e.height),(e=>e.hooks),(e=>e.initialValues),(e=>e.queriesData),(e=>e.width),(e=>e.ownState),(e=>e.filterState),(e=>e.behaviors),(e=>e.appSection),(e=>e.isRefreshing),((e,t,r,i,o,n,a,l,c,d,u,m,p)=>new s({annotationData:e,datasource:t,formData:r,height:i,hooks:o,initialValues:n,queriesData:a,ownState:c,filterState:d,width:l,behaviors:u,appSection:m,isRefreshing:p})))}},54085:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var i=r(90537),o=r(1875);class n extends i.Z{constructor(){super({name:"ChartComponent",overwritePolicy:i.r.WARN})}}const a=(0,o.Z)(n)},37687:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var i=r(90537),o=r(1875);class n extends i.Z{constructor(){super({name:"ChartControlPanel"})}}const a=(0,o.Z)(n)},74464:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var i=r(90537),o=r(1875);class n extends i.Z{constructor(){super({name:"ChartTransformProps",overwritePolicy:i.r.WARN})}}const a=(0,o.Z)(n)},16355:(e,t,r)=>{"use strict";var i,o;r.d(t,{cg:()=>i,Tr:()=>o,ZP:()=>n}),function(e){e.INTERACTIVE_CHART="INTERACTIVE_CHART",e.NATIVE_FILTER="NATIVE_FILTER"}(i||(i={})),function(e){e.EXPLORE="EXPLORE",e.DASHBOARD="DASHBOARD",e.FILTER_BAR="FILTER_BAR",e.FILTER_CONFIG_MODAL="FILTER_CONFIG_MODAL",e.EMBEDDED="EMBEDDED"}(o||(o={}));const n={}},28062:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a,DEFAULT_NAMESPACE:()=>l,getNamespace:()=>c,getColor:()=>d,getScale:()=>u});var i=r(97466),o=r(81545),n=r(86041);class a{constructor(e){this.name=void 0,this.forcedItems=void 0,this.scales=void 0,this.name=e,this.scales={},this.forcedItems={}}getScale(e){var t,r;const n=null!=(t=null!=e?e:(0,o.Z)().getDefaultKey())?t:"",a=(0,o.Z)().get(n);return new i.Z(null!=(r=null==a?void 0:a.colors)?r:[],this.forcedItems)}setColor(e,t){return this.forcedItems[(0,n.Z)(e)]=t,this}resetColors(){this.forcedItems={}}}const s={},l="GLOBAL";function c(e=l){const t=s[e];if(t)return t;const r=new a(e);return s[e]=r,r}function d(e,t,r){return c(r).getScale(t).getColor(e)}function u(e,t){return c(t).getScale(e)}},97466:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(99481),o=r(54732),n=r(86041);class a extends o.Z{constructor(e,t){super((e=>this.getColor(e))),this.colors=void 0,this.scale=void 0,this.parentForcedColors=void 0,this.forcedColors=void 0,this.colors=e,this.scale=(0,i.Z)(),this.scale.range(e),this.parentForcedColors=t,this.forcedColors={}}getColor(e){const t=(0,n.Z)(e),r=this.parentForcedColors&&this.parentForcedColors[t];if(r)return r;return this.forcedColors[t]||this.scale(t)}setColor(e,t){return this.forcedColors[(0,n.Z)(e)]=t,this}getColorMap(){const e={};return this.scale.domain().forEach((t=>{e[t.toString()]=this.scale(t)})),{...e,...this.forcedColors,...this.parentForcedColors}}copy(){const e=new a(this.scale.range(),this.parentForcedColors);return e.forcedColors={...this.forcedColors},e.domain(this.domain()),e.unknown(this.unknown()),e}domain(e){return void 0===e?this.scale.domain():(this.scale.domain(e),this)}range(e){return void 0===e?this.scale.range():(this.colors=e,this.scale.range(e),this)}unknown(e){return void 0===e?this.scale.unknown():(this.scale.unknown(e),this)}}const s=a},67869:(e,t,r)=>{"use strict";r.d(t,{E8:()=>_,CW:()=>d.Z,kI:()=>i,A5:()=>o.Z,Gz:()=>u.Z,Ys:()=>m.Z,$5:()=>p.Z,Dg:()=>h.Z,XF:()=>g.Z,gE:()=>n.Z,yE:()=>f.Z,zR:()=>c.Z,UM:()=>y.Z,Bs:()=>v.Z,T8:()=>l.Z,B_:()=>a.Z,Qg:()=>b.Q,j3:()=>s.Z});var i=r(28062),o=r(97466),n=r(15226),a=r(81545),s=r(45511),l=r(2995),c=r(98195),d=r(27965),u=r(86698),m=r(69224),p=r(77781),h=r(64236),g=r(65445),f=r(36361),y=r(132),v=r(31225),b=r(25130);const _="#00A699"},86041:(e,t,r)=>{"use strict";function i(e){return String(e).trim()}r.d(t,{Z:()=>i})},25130:(e,t,r)=>{"use strict";r.d(t,{Q:()=>o});const i=/^rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/;function o(e,t=186){let r=0,o=0,n=0;if(e.length>7){const t=i.exec(e);if(!t)throw new Error(`Invalid color: ${e}`);r=parseInt(t[1],10),o=parseInt(t[2],10),n=parseInt(t[3],10)}else{let t=e;if(t.startsWith("#")&&(t=t.substring(1)),3===t.length&&(t=[t[0],t[0],t[1],t[1],t[2],t[2]].join("")),6!==t.length)throw new Error(`Invalid color: ${e}`);r=parseInt(t.slice(0,2),16),o=parseInt(t.slice(2,4),16),n=parseInt(t.slice(4,6),16)}return.299*r+.587*o+.114*n>t?"#000":"#FFF"}},68122:(e,t,r)=>{"use strict";r.d(t,{o:()=>i,M:()=>o});const i=250,o=500},8608:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var i=r(62761);function o(e,t,r){let i=e,o=t(i);for(;!r(o);)i-=1,o=t(i);return i}function n(e){const{idealFontSize:t,maxWidth:r,maxHeight:n,style:a,...s}=e;let l;if(null!=t)l=t;else{if(null==n)throw new Error("You must specify at least one of maxHeight or idealFontSize");l=Math.floor(n)}function c(e){return(0,i.Z)({...s,style:{...a,fontSize:`${e}px`}})}return null!=r&&(l=o(l,c,(e=>e.width<=r))),null!=n&&(l=o(l,c,(e=>e.height<=n))),l}},62761:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var i=r(10660),o=r(61888),n=r(66529);function a(e,t){const{text:r,className:a,style:s,container:l}=e;if(0===r.length)return{height:0,width:0};const c=n.Y.createInContainer(l),d=n.S.createInContainer(c);(0,i.Z)(d,{className:a,style:s,text:r});const u=(0,o.Z)(d,t);return setTimeout((()=>{n.S.removeFromContainer(c),n.Y.removeFromContainer(l)}),500),u}},80644:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});const i={isDynamic:!0,multiplier:1};function o(e){return"auto"===e||"100%"===e?i:"string"==typeof e&&e.length>0&&"%"===e[e.length-1]?{isDynamic:!0,multiplier:parseFloat(e)/100}:{isDynamic:!1,value:"number"==typeof e?e:parseFloat(e)}}},81847:(e,t,r)=>{"use strict";r.d(t,{vO:()=>n,YW:()=>a,mc:()=>s});const i={},o=e=>`__superset__/${e}`;async function n(e,t){const r=o(e);if(!window[r]&&!i[e]){const o=t();i[e]=o,window[r]=await o}return i[e]}async function a(e){return Promise.all(Object.entries(e).map((([e,t])=>n(e,t))))}function s(){Object.keys(i).forEach((e=>{delete window[o(e)],delete i[e]}))}},5352:(e,t,r)=>{"use strict";r.r(t),r.d(t,{AnnotationOpacity:()=>ge.TJ,AnnotationSourceType:()=>ge.u$,AnnotationStyle:()=>ge.QW,AnnotationType:()=>ge.JJ,ApiLegacy:()=>i,ApiV1:()=>o,AppSection:()=>dt.Tr,BRAND_COLOR:()=>ze.E8,Behavior:()=>dt.cg,BuildQuery:()=>je.BuildQuery,CategoricalAirbnb:()=>ze.CW,CategoricalColorNamespace:()=>ze.kI,CategoricalColorScale:()=>ze.A5,CategoricalD3:()=>ze.Gz,CategoricalEcharts:()=>ze.Ys,CategoricalGoogle:()=>ze.$5,CategoricalLyft:()=>ze.Dg,CategoricalPreset:()=>ze.XF,CategoricalScheme:()=>ze.gE,CategoricalSuperset:()=>ze.yE,ChartClient:()=>Qe,ChartDataProvider:()=>ct,ChartFrame:()=>gt,ChartMetadata:()=>Xe.Z,ChartPlugin:()=>Je.Z,ChartProps:()=>et.Z,ColorSchemeRegistry:()=>ze.zR,ComparisionType:()=>R.pF,DTTM_ALIAS:()=>ae.W3,DatasourceKey:()=>pe.Z,DatasourceType:()=>T.i,EXTRA_FORM_DATA_APPEND_KEYS:()=>ae.Ci,EXTRA_FORM_DATA_OVERRIDE_EXTRA_KEYS:()=>ae.fn,EXTRA_FORM_DATA_OVERRIDE_KEYS:()=>ae.Ay,EXTRA_FORM_DATA_OVERRIDE_REGULAR_KEYS:()=>ae.NU,EXTRA_FORM_DATA_OVERRIDE_REGULAR_MAPPINGS:()=>ae.gn,EmotionCacheProvider:()=>qe.zo,ExtensibleFunction:()=>n.Z,FAST_DEBOUNCE:()=>At.o,FeatureFlag:()=>_.T,GenericDataType:()=>w.Z,LOCAL_PREFIX:()=>Ae.D,NumberFormats:()=>ye.Z,NumberFormatter:()=>ve.Z,NumberFormatterRegistry:()=>_e.Z,OverwritePolicy:()=>l.r,PREVIEW_TIME:()=>Se.F,PREVIEW_VALUE:()=>ve.G,PandasAxis:()=>y,Plugin:()=>a.Z,Preset:()=>s.Z,QueryMode:()=>S.nJ,Registry:()=>l.Z,RegistryWithDefaultKey:()=>c.Z,RollingType:()=>R.su,SLOW_DEBOUNCE:()=>At.M,SafeMarkdown:()=>St.Z,SequentialCommon:()=>ze.UM,SequentialD3:()=>ze.Bs,SequentialScheme:()=>ze.T8,SuperChart:()=>it.Z,SupersetApiError:()=>fe.P,SupersetApiErrorType:()=>fe.M,SupersetClient:()=>Y.Z,SupersetClientClass:()=>H.Z,ThemeProvider:()=>qe.f6,TimeFormats:()=>Ae.Z,TimeFormatter:()=>Se.Z,TimeGranularity:()=>Me.A,TooltipFrame:()=>Ct,TooltipTable:()=>Et,WithLegend:()=>_t,__hack_reexport_AdvancedAnalytics:()=>R.ZP,__hack_reexport_Column:()=>C.Z,__hack_reexport_Datasource:()=>T.Z,__hack_reexport_Metric:()=>E.Z,__hack_reexport_Query:()=>B,__hack_reexport_QueryFormData:()=>S.ZP,__hack_reexport_QueryResponse:()=>w.C,__hack_reexport_Time:()=>z,__hack_reexport_chart_Base:()=>dt.ZP,__hack_reexport_chart_QueryResponse:()=>mt,__hack_reexport_chart_TransformFunction:()=>ut,__hack_reexport_connection:()=>j,__hack_reexport_dimension:()=>Be,__hack_reexport_jed:()=>G,__hack_reexport_trasnslation:()=>W,addLocaleData:()=>q.oK,addTranslation:()=>q.Zt,addTranslations:()=>q.hk,buildQueryContext:()=>se.Z,buildQueryObject:()=>le.Z,callApi:()=>V.Z,computeMaxFontSize:()=>Oe.Z,configure:()=>q.jQ,convertFilter:()=>ce.Z,convertKeysToCamelCase:()=>d.Z,createD3NumberFormatter:()=>Ze.Z,createD3TimeFormatter:()=>Re.Z,createDurationFormatter:()=>Te.Z,createEmotionCache:()=>qe.S9,createLoadableRenderer:()=>tt.Z,createMultiFormatter:()=>De.Z,createSiAtMostNDigitFormatter:()=>xe,createSmartNumberFormatter:()=>Ee.Z,css:()=>qe.iv,defineSharedModule:()=>K.vO,defineSharedModules:()=>K.YW,emotionCache:()=>qe.Yi,ensureIsArray:()=>u.Z,ensureIsInt:()=>m.Z,evalExpression:()=>wt.f,extractTimegrain:()=>de.Z,formatNumber:()=>be.uf,formatTime:()=>we.mr,formatTimeRange:()=>we.ns,getCategoricalSchemeRegistry:()=>ze.B_,getChartBuildQueryRegistry:()=>je.Z,getChartComponentRegistry:()=>ot.Z,getChartControlPanelRegistry:()=>nt.Z,getChartMetadataRegistry:()=>Ke.Z,getChartTransformPropsRegistry:()=>at.Z,getColumnLabel:()=>ue.Z,getContrastingColor:()=>ze.Qg,getMetricLabel:()=>me.Z,getMultipleTextDimensions:()=>Le.Z,getNumberFormatter:()=>be.JB,getNumberFormatterRegistry:()=>be.ZP,getSequentialSchemeRegistry:()=>ze.j3,getTextDimension:()=>Fe.Z,getTimeFormatter:()=>we.bt,getTimeFormatterForGranularity:()=>we.uh,getTimeFormatterRegistry:()=>we.ZP,getTimeRangeFormatter:()=>we.Rg,isAdhocMetricSimple:()=>E.n,isBinaryAdhocFilter:()=>x.kC,isBinaryOperator:()=>A.VU,isDefined:()=>p.Z,isDruidFormData:()=>S.zU,isEventAnnotationLayer:()=>ge.pD,isFeatureEnabled:()=>_.c,isFormulaAnnotationLayer:()=>ge.x5,isIntervalAnnotationLayer:()=>ge.Ry,isPhysicalColumn:()=>C.s,isPostProcessingAggregation:()=>D,isPostProcessingBoxplot:()=>P,isPostProcessingCompare:()=>I,isPostProcessingContribution:()=>N,isPostProcessingCum:()=>O,isPostProcessingDiff:()=>F,isPostProcessingPivot:()=>k,isPostProcessingProphet:()=>M,isPostProcessingResample:()=>$,isPostProcessingRolling:()=>L,isPostProcessingSort:()=>U,isRecordAnnotationResult:()=>ge.$c,isRequired:()=>h.Z,isSavedMetric:()=>S.AG,isSetAdhocFilter:()=>x.VK,isSetOperator:()=>A.XA,isSimpleAdhocFilter:()=>x.Ki,isTableAnnotationLayer:()=>ge.mn,isTimeseriesAnnotationLayer:()=>ge.nl,isTimeseriesAnnotationResult:()=>ge.b4,isUnaryAdhocFilter:()=>x._l,isUnaryOperator:()=>A.CW,isValidExpression:()=>wt.$,jsx:()=>qe.tZ,legacyValidateInteger:()=>Ge.Z,legacyValidateNumber:()=>We.Z,logging:()=>v.Z,makeApi:()=>ie.Z,makeSingleton:()=>g.Z,mergeMargin:()=>Ue,normalizeOrderBy:()=>he.Z,parseLength:()=>$e.Z,promiseTimeout:()=>f,reactify:()=>rt.Z,removeDuplicates:()=>b.Z,reset:()=>K.mc,resetTranslation:()=>q.sq,seed:()=>Z.D,seedRandom:()=>Z.b,smartDateDetailedFormatter:()=>Ne.Z,smartDateFormatter:()=>Pe.Z,smartDateVerboseFormatter:()=>ke.Z,styled:()=>qe.iK,supersetTheme:()=>qe.K6,t:()=>q.t,tn:()=>q.tn,useTheme:()=>qe.Fg,validateInteger:()=>Ve.Z,validateNonEmpty:()=>He.Z,validateNumber:()=>Ye.Z,withTheme:()=>qe.Zz});var i={};r.r(i),r.d(i,{__hack_reexport_query_api_legacy:()=>re,fetchExploreJson:()=>J,getDatasourceMetadata:()=>te,getFormData:()=>ee});var o={};r.r(o),r.d(o,{default:()=>ne,getChartData:()=>oe});var n=r(54732),a=r(91189),s=r(46449),l=r(90537),c=r(29243),d=r(78036),u=r(55786),m=r(77675),p=r(37731),h=r(49714),g=r(1875);function f(e,t){return new Promise((r=>{setTimeout((()=>{r(e())}),t)}))}var y,v=r(68492),b=r(74765),_=r(93185),Z=r(70406),T=r(46078),C=r(72813),x=r(46306),E=r(62446),A=r(31612),S=r(20620),w=r(88889),R=r(62363);function D(e){return"aggregation"===(null==e?void 0:e.operation)}function P(e){return"boxplot"===(null==e?void 0:e.operation)}function N(e){return"contribution"===(null==e?void 0:e.operation)}function k(e){return"pivot"===(null==e?void 0:e.operation)}function M(e){return"prophet"===(null==e?void 0:e.operation)}function F(e){return"diff"===(null==e?void 0:e.operation)}function L(e){return"rolling"===(null==e?void 0:e.operation)}function O(e){return"cum"===(null==e?void 0:e.operation)}function I(e){return"compare"===(null==e?void 0:e.operation)}function U(e){return"sort"===(null==e?void 0:e.operation)}function $(e){return"resample"===(null==e?void 0:e.operation)}!function(e){e[e.Row=0]="Row",e[e.Column=1]="Column"}(y||(y={}));const B={},z={};var q=r(61988);const G={},W={};var V=r(97065),Y=r(31069),H=r(99619);const j={};var K=r(81847),Q=r(94435),X=r.n(Q);async function J({client:e=Y.Z,method:t="POST",requestConfig:r,endpoint:i="/superset/explore_json/",formData:o}){const{json:n}=await e.request({...r,method:t,endpoint:i,searchParams:"GET"===t?new(X())({form_data:JSON.stringify(o)}):void 0,postPayload:"POST"===t?{form_data:o}:void 0});return n}function ee({client:e=Y.Z,sliceId:t,overrideFormData:r,requestConfig:i}){const o=e.get({endpoint:`/api/v1/form_data/?slice_id=${t}`,...i}).then((({json:e})=>e));return r?o.then((e=>({...e,...r}))):o}function te({client:e=Y.Z,datasourceKey:t,requestConfig:r}){return e.get({endpoint:`/superset/fetch_datasource_metadata?datasourceKey=${t}`,...r}).then((e=>e.json))}const re={};var ie=r(22102);const oe=(0,ie.Z)({method:"POST",endpoint:"/api/v1/chart/data"}),ne={getChartData:oe};var ae=r(5364),se=r(61654),le=r(12727),ce=r(78483),de=r(5031),ue=r(10581),me=r(56652),pe=r(67706),he=r(82028),ge=r(34804),fe=r(18014),ye=r(45636),ve=r(77809),be=r(67190),_e=r(18212),Ze=r(43851),Te=r(75430),Ce=r(16722);function xe(e={}){const{description:t,n:r=3,id:i,label:o}=e,n=(0,Ce.WU)(`.${r}s`);return new ve.Z({description:t,formatFunc:e=>{const t=n(e);return t.slice(-1)<"A"?parseFloat(t).toString():t},id:null!=i?i:`si_at_most_${r}_digit`,label:null!=o?o:`SI with at most ${r} significant digits`})}var Ee=r(84986),Ae=r(42846),Se=r(69244),we=r(51115),Re=r(69),De=r(11538),Pe=r(78900),Ne=r(62720),ke=r(40962),Me=r(18010),Fe=r(62761),Le=r(2445),Oe=r(8608);function Ie(e,t=0,r=0){return Number.isNaN(t)||null===t?r:Number.isNaN(r)||null===r?t:e(t,r)}function Ue(e={},t={},r="expand"){const{top:i,left:o,bottom:n,right:a}=e,s="expand"===r?Math.max:Math.min;return{bottom:Ie(s,n,t.bottom),left:Ie(s,o,t.left),right:Ie(s,a,t.right),top:Ie(s,i,t.top)}}var $e=r(80644);const Be={};var ze=r(67869),qe=r(51995),Ge=r(75294),We=r(99298),Ve=r(33444),Ye=r(872),He=r(95826),je=r(19427),Ke=r(11064);class Qe{constructor(e={}){this.client=void 0;const{client:t=Y.Z}=e;this.client=t}loadFormData(e,t){return"sliceId"in e?this.client.get({endpoint:`/api/v1/form_data/?slice_id=${e.sliceId}`,...t}).then((e=>e.json)).then((t=>({...t,...e.formData}))):e.formData?Promise.resolve(e.formData):Promise.reject(new Error("At least one of sliceId or formData must be specified"))}async loadQueryData(e,t){const{viz_type:r}=e,i=(0,Ke.Z)(),o=(0,je.Z)();if(i.has(r)){var n;const{useLegacyApi:a}=i.get(r),s=null!=(n=await o.get(r))?n:()=>e,l=a?{endpoint:"/superset/explore_json/",postPayload:{form_data:s(e)},...t}:{endpoint:"/api/v1/chart/data",jsonPayload:{query_context:s(e)},...t};return this.client.post(l).then((e=>Array.isArray(e.json)?e.json:[e.json]))}return Promise.reject(new Error(`Unknown chart type: ${r}`))}loadDatasource(e,t){return this.client.get({endpoint:`/superset/fetch_datasource_metadata?datasourceKey=${e}`,...t}).then((e=>e.json))}loadAnnotation(e){return(0,p.Z)(e.sourceType)?Promise.reject(new Error("This feature is not implemented yet.")):Promise.resolve({})}loadAnnotations(e){return Array.isArray(e)&&e.length>0?Promise.all(e.map((e=>this.loadAnnotation(e)))).then((t=>e.reduce(((e,r,i)=>{const o=e;return o[r.name]=t[i],o}),{}))):Promise.resolve({})}loadChartData(e){return this.loadFormData(e).then((e=>Promise.all([this.loadAnnotations(e.annotation_layers),this.loadDatasource(e.datasource),this.loadQueryData(e)]).then((([t,r,i])=>({annotationData:t,datasource:r,formData:e,queriesData:i})))))}}var Xe=r(48805),Je=r(84912),et=r(9330),tt=r(89453),rt=r(43323),it=r(88274),ot=r(54085),nt=r(37687),at=r(74464),st=r(67294);class lt extends st.PureComponent{constructor(e){super(e),this.chartClient=void 0,this.handleFetchData=()=>{const{loadDatasource:e,formDataRequestOptions:t,datasourceRequestOptions:r,queryRequestOptions:i}=this.props;this.setState({status:"loading"},(()=>{try{this.chartClient.loadFormData(this.extractSliceIdAndFormData(),t).then((t=>Promise.all([e?this.chartClient.loadDatasource(t.datasource,r):Promise.resolve(void 0),this.chartClient.loadQueryData(t,i)]).then((([e,r])=>({datasource:e,formData:t,queriesData:r}))))).then(this.handleReceiveData).catch(this.handleError)}catch(e){this.handleError(e)}}))},this.handleReceiveData=e=>{const{onLoaded:t}=this.props;t&&t(e),this.setState({payload:e,status:"loaded"})},this.handleError=e=>{const{onError:t}=this.props;t&&t(e),this.setState({error:e,status:"error"})},this.state={status:"uninitialized"},this.chartClient=new Qe({client:e.client})}componentDidMount(){this.handleFetchData()}componentDidUpdate(e){const{formData:t,sliceId:r}=this.props;t===e.formData&&r===e.sliceId||this.handleFetchData()}extractSliceIdAndFormData(){const{formData:e,sliceId:t}=this.props;return e?{formData:e}:{sliceId:t}}render(){const{children:e}=this.props,{status:t,payload:r,error:i}=this.state;switch(t){case"loading":return e({loading:!0});case"loaded":return e({payload:r});case"error":return e({error:i});default:return null}}}const ct=lt;var dt=r(16355);const ut={},mt={};var pt=r(11965);function ht(e){return(0,p.Z)(e)&&"number"==typeof e}class gt extends st.PureComponent{render(){const{contentWidth:e,contentHeight:t,width:r,height:i,renderContent:o}=this.props,n=ht(e)&&e>r,a=ht(t)&&t>i;return n||a?(0,pt.tZ)("div",{style:{height:i,overflowX:n?"auto":"hidden",overflowY:a?"auto":"hidden",width:r}},o({height:Math.max(null!=t?t:0,i),width:Math.max(null!=e?e:0,r)})):o({height:i,width:r})}}gt.defaultProps={renderContent(){}};var ft=r(86170);const yt={display:"flex",flexGrow:0,flexShrink:0,order:-1},vt={flexBasis:"auto",flexGrow:1,flexShrink:1,position:"relative"};class bt extends st.PureComponent{getContainerDirection(){const{position:e}=this.props;return"left"===e?"row":"right"===e?"row-reverse":"bottom"===e?"column-reverse":"column"}getLegendJustifyContent(){const{legendJustifyContent:e,position:t}=this.props;return e||("left"===t||"right"===t?"flex-start":"flex-end")}render(){const{className:e,debounceTime:t,width:r,height:i,position:o,renderChart:n,renderLegend:a}=this.props,s="left"===o||"right"===o,l={display:"flex",flexDirection:this.getContainerDirection(),height:i,width:r},c={...vt};s?c.width=0:c.height=0;const d=s?"column":"row",u={...yt,flexDirection:d,justifyContent:this.getLegendJustifyContent()};return(0,pt.tZ)("div",{className:`with-legend ${e}`,style:l},a&&(0,pt.tZ)("div",{className:"legend-container",style:u},a({direction:d})),(0,pt.tZ)("div",{className:"main-container",style:c},(0,pt.tZ)(ft.Z,{debounceTime:t},(e=>e.width>0&&e.height>0?n(e):null))))}}bt.defaultProps={className:"",height:"auto",position:"top",width:"auto"};const _t=bt,Zt={padding:8};class Tt extends st.PureComponent{render(){const{className:e,children:t}=this.props;return(0,pt.tZ)("div",{className:e,style:Zt},t)}}Tt.defaultProps={className:""};const Ct=Tt,xt={paddingLeft:8,textAlign:"right"};class Et extends st.PureComponent{render(){const{className:e,data:t}=this.props;return(0,pt.tZ)("table",{className:e},(0,pt.tZ)("tbody",null,t.map((({key:e,keyColumn:t,keyStyle:r,valueColumn:i,valueStyle:o})=>(0,pt.tZ)("tr",{key:e},(0,pt.tZ)("td",{style:r},null!=t?t:e),(0,pt.tZ)("td",{style:o?{...xt,...o}:xt},i))))))}}Et.defaultProps={className:"",data:[]};var At=r(68122),St=r(78186),wt=r(60524)},60524:(e,t,r)=>{"use strict";r.d(t,{f:()=>s,$:()=>l}),r(15306);var i=r(22087),o=r.n(i);const n=[[new RegExp(/==/g),"Eq"],[new RegExp(/>=/g),"Gte"],[new RegExp(/<=/g),"Lte"],[new RegExp(/>/g),"Gt"],[new RegExp(/</g),"Lt"]],a=[{type:3,token:"x",show:"x",value:"x"},{type:2,token:"&",show:"&",value:(e,t)=>e&t},{type:2,token:"|",show:"|",value:(e,t)=>e|t},{type:2,token:"and",show:"and",value:(e,t)=>e&&t},{type:2,token:"xor",show:"xor",value:(e,t)=>e^t},{type:2,token:"or",show:"or",value:(e,t)=>Number(e||t)},{type:2,token:"Eq",show:"Eq",value:(e,t)=>Number(e===t)},{type:2,token:"Lt",show:"Lt",value:(e,t)=>Number(e<t)},{type:2,token:"Lte",show:"Lte",value:(e,t)=>Number(e<=t)},{type:2,token:"Gt",show:"Gt",value:(e,t)=>Number(e>t)},{type:2,token:"Gte",show:"Gte",value:(e,t)=>Number(e>=t)}];function s(e,t){var r;let i=e;n.forEach((([e,t])=>{i=i.replace(e,t)}));const s=String(i).split("=");return i=null!=(r=s[1])?r:s[0],Number(o().eval(i,a,{x:t}))}function l(e){try{s(e,0)}catch(e){return!1}return!0}},91189:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});class i{constructor(){this.config=void 0,this.config={}}resetConfig(){return this.config={},this}configure(e,t=!1){return this.config=t?e:{...this.config,...e},this}register(){return this}unregister(){return this}}},46449:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});class i{constructor(e={}){this.name=void 0,this.description=void 0,this.presets=void 0,this.plugins=void 0;const{name:t="",description:r="",presets:i=[],plugins:o=[]}=e;this.name=t,this.description=r,this.presets=i,this.plugins=o}register(){return this.presets.forEach((e=>{e.register()})),this.plugins.forEach((e=>{e.register()})),this}}},5031:(e,t,r)=>{"use strict";function i(e){const{time_grain_sqla:t,extra_filters:r,extra_form_data:i}=e;if(null!=i&&i.time_grain_sqla)return i.time_grain_sqla;const o=(r||[]).filter((e=>"__time_grain"===e.col));return o.length?o[0].val:t}r.d(t,{Z:()=>i})},82028:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(41609),o=r.n(i),n=r(51584),a=r.n(n);function s(e){if(Array.isArray(e.orderby)&&e.orderby.length>0){const t=e.orderby[0];if(Array.isArray(t)&&2===t.length&&!o()(t[0])&&a()(t[1]))return e}const t={...e};delete t.timeseries_limit_metric,delete t.legacy_order_by,delete t.order_desc,delete t.orderby;const r=!e.order_desc;return void 0===e.timeseries_limit_metric||null===e.timeseries_limit_metric||o()(e.timeseries_limit_metric)?void 0===e.legacy_order_by||null===e.legacy_order_by||o()(e.legacy_order_by)?Array.isArray(e.metrics)&&e.metrics.length>0?{...t,orderby:[[e.metrics[0],r]]}:t:{...t,orderby:[[e.legacy_order_by,r]]}:{...t,orderby:[[e.timeseries_limit_metric,r]]}}},62363:(e,t,r)=>{"use strict";var i,o;r.d(t,{su:()=>i,pF:()=>o,ZP:()=>n}),function(e){e.Mean="mean",e.Sum="sum",e.Std="std",e.Cumsum="cumsum"}(i||(i={})),function(e){e.Values="values",e.Difference="difference",e.Percentage="percentage",e.Ratio="ratio"}(o||(o={}));const n={}},34804:(e,t,r)=>{"use strict";var i,o,n,a;function s(e){return e.annotationType===i.Formula}function l(e){return e.annotationType===i.Event}function c(e){return e.annotationType===i.Interval}function d(e){return e.annotationType===i.Timeseries}function u(e){return e.sourceType===o.Table}function m(e){return Array.isArray(e)}function p(e){return"columns"in e&&"records"in e}r.d(t,{JJ:()=>i,u$:()=>o,TJ:()=>n,QW:()=>a,x5:()=>s,pD:()=>l,Ry:()=>c,nl:()=>d,mn:()=>u,b4:()=>m,$c:()=>p}),function(e){e.Event="EVENT",e.Formula="FORMULA",e.Interval="INTERVAL",e.Timeseries="TIME_SERIES"}(i||(i={})),function(e){e.Line="line",e.Native="NATIVE",e.Table="table",e.Undefined=""}(o||(o={})),function(e){e.High="opacityHigh",e.Low="opacityLow",e.Medium="opacityMedium",e.Undefined=""}(n||(n={})),function(e){e.Dashed="dashed",e.Dotted="dotted",e.Solid="solid",e.LongDashed="longDashed"}(a||(a={}))},88889:(e,t,r)=>{"use strict";var i;r.d(t,{Z:()=>i,C:()=>o}),function(e){e[e.NUMERIC=0]="NUMERIC",e[e.STRING=1]="STRING",e[e.TEMPORAL=2]="TEMPORAL",e[e.BOOLEAN=3]="BOOLEAN"}(i||(i={}));const o={}},62720:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});const i=(0,r(11538).Z)({id:"smart_date_detailed",label:"Detailed adaptive formatter",formats:{millisecond:"%Y-%m-%d %H:%M:%S.%L",second:"%Y-%m-%d %H:%M:%S",minute:"%Y-%m-%d %H:%M",hour:"%Y-%m-%d %H:%M",day:"%Y-%m-%d",week:"%Y-%m-%d",month:"%Y-%m-%d",year:"%Y"}})},78036:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var i=r(68929),o=r.n(i),n=r(68630),a=r.n(n),s=r(67523),l=r.n(s);function c(e){if(null==e)return e;if(a()(e))return l()(e,((e,t)=>o()(t)));throw new Error(`Cannot convert input that is not a plain object: ${e}`)}},77675:(e,t,r)=>{"use strict";function i(e,t){const r=parseInt(String(e),10),i=void 0===t?NaN:t;return Number.isNaN(r)?i:r}r.d(t,{Z:()=>i})},37731:(e,t,r)=>{"use strict";function i(e){return null!=e}r.d(t,{Z:()=>i})},70406:(e,t,r)=>{"use strict";r.d(t,{D:()=>a,b:()=>s});var i=r(36377),o=r.n(i);let n=o()("superset-ui");function a(e){return n=o()(e),n}function s(){return n()}},75294:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var i=r(61988);function o(e){return!(!e||!Number.isNaN(Number(e))&&parseInt(e,10)===Number(e))&&(0,i.t)("is expected to be an integer")}},99298:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var i=r(61988);function o(e){return!(!e||!Number.isNaN(Number(e)))&&(0,i.t)("is expected to be a number")}},33444:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var i=r(61988);function o(e){return!("string"==typeof e&&e.trim().length>0&&Number.isInteger(Number(e.trim()))||"number"==typeof e&&Number.isInteger(e))&&(0,i.t)("is expected to be an integer")}},95826:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var i=r(61988);function o(e){return!!(null==e||""===e||Array.isArray(e)&&0===e.length)&&(0,i.t)("cannot be empty")}},872:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var i=r(61988);function o(e){return!("string"==typeof e&&e.trim().length>0&&Number.isFinite(Number(e.trim()))||"number"==typeof e&&Number.isFinite(e))&&(0,i.t)("is expected to be a number")}},14278:(e,t,r)=>{"use strict";r.d(t,{Zn:()=>g,gp:()=>f,EM:()=>Z});var i=r(14176),o=r.n(i),n=r(67294),a=r(11064),s=r(22102),l=r(81847),c=r(68492),d=r(91877),u=r(93185),m=r(11965);const p=(0,a.Z)(),h={loading:!0,dynamicPlugins:{},keys:[],mountedPluginMetadata:{},fetchAll:()=>{}},g=n.createContext(h),f=()=>(0,n.useContext)(g);function y(){return{keys:p.keys(),mountedPluginMetadata:o()(p.getMap(),(e=>void 0===e))}}function v(e,t){switch(t.type){case"begin":{const r={...e.dynamicPlugins};return t.keys.forEach((e=>{r[e]={key:e,error:null,mounting:!0}})),{...e,loading:t.keys.length>0,dynamicPlugins:r}}case"complete":return{...e,loading:Object.values(e.dynamicPlugins).some((e=>e.mounting&&e.key!==t.key)),dynamicPlugins:{...e.dynamicPlugins,[t.key]:{key:t.key,mounting:!1,error:t.error}}};case"changed keys":return{...e,...y()};default:return e}}const b=(0,s.Z)({method:"GET",endpoint:"/dynamic-plugins/api/read"}),_={react:()=>Promise.resolve().then(r.t.bind(r,67294,19)),lodash:()=>r.e(1216).then(r.t.bind(r,96486,23)),"react-dom":()=>Promise.resolve().then(r.t.bind(r,73935,19)),"@superset-ui/chart-controls":()=>r.e(485).then(r.bind(r,60485)),"@superset-ui/core":()=>Promise.resolve().then(r.bind(r,5352))},Z=({children:e})=>{const[t,r]=(0,n.useReducer)(v,h,(e=>({...e,...y(),fetchAll:i,loading:(0,d.cr)(u.T.DYNAMIC_PLUGINS)})));async function i(){try{await(0,l.YW)(_);const{result:e}=await b({});r({type:"begin",keys:e.map((e=>e.key))}),await Promise.all(e.map((async e=>{let t=null;try{await import(e.bundle_url)}catch(r){c.Z.error(`Failed to load plugin ${e.key} with the following error:`,r.stack),t=r}r({type:"complete",key:e.key,error:t})})))}catch(e){c.Z.error("Failed to load dynamic plugins",e.stack||e)}}return(0,n.useEffect)((()=>{(0,d.cr)(u.T.DYNAMIC_PLUGINS)&&i();const e=()=>{r({type:"changed keys"})};return p.addListener(e),()=>{p.removeListener(e)}}),[]),(0,m.tZ)(g.Provider,{value:t},e)}},1510:(e,t,r)=>{"use strict";r.d(t,{zi:()=>d,on:()=>u,vk:()=>m,X3:()=>p,Rz:()=>f});var i=r(5364),o=r(16355),n=r(93185),a=r(70400),s=r(91877),l=r(81255),c=r(80621);const d=({datasetId:e,cascadingFilters:t={},groupby:r,inputRef:i,defaultDataMask:o,controlValues:n,filterType:s,sortMetric:l,adhoc_filters:c,time_range:d,granularity_sqla:u,type:m})=>{var p;const h={};return e&&(h.datasource=`${e}__table`),r&&(h.groupby=[r]),l&&(h.sortMetric=l),{...n,...h,adhoc_filters:null!=c?c:[],extra_filters:[],extra_form_data:t,granularity_sqla:u,metrics:["count"],row_limit:1e3,showSearch:!0,defaultValue:null==o||null==(p=o.filterState)?void 0:p.value,time_range:d,time_range_endpoints:["inclusive","exclusive"],url_params:(0,a.Z)("regular"),inView:!0,viz_type:s,inputRef:i,type:m}};function u(e={},t={}){const r={};return i.Ci.forEach((i=>{const o=[...e[i]||[],...t[i]||[]];o.length&&(r[i]=o)})),i.Ay.forEach((i=>{const o=e[i];void 0!==o&&(r[i]=o);const n=t[i];void 0!==n&&(r[i]=n)})),r}function m(e,t,r){let i={};return r.forEach((t=>{var r,o;i=u(i,null!=(r=null==(o=e[t])?void 0:o.extraFormData)?r:{})})),i}function p(e){return!e.includes(o.cg.NATIVE_FILTER)||(0,s.cr)(n.T.DASHBOARD_FILTERS_EXPERIMENTAL)&&(0,s.cr)(n.T.DASHBOARD_CROSS_FILTERS)&&e.includes(o.cg.INTERACTIVE_CHART)}const h=(e,t)=>e[t].type===l.gn,g=(e,t,r,i,o)=>{e[r].type===l.dW&&t.includes(e[r].meta.chartId)&&i.forEach(o.add,o),0===e[r].children.length||h(e,r)&&o.has(r)||e[r].children.forEach((r=>g(e,t,r,h(e,r)?[...i,r]:i,o)))},f=(e,t)=>{const r=e[c._4].children[0],i=r!==c.PV,o=new Set;var n;return i?null==(n=e[r].children)||n.forEach((r=>g(e,t,r,[r],o))):Object.values(e).filter((e=>e.type===l.gn)).forEach((r=>g(e,t,r.id,[r.id],o))),o}},81255:(e,t,r)=>{"use strict";r.d(t,{dW:()=>i,BA:()=>o,Vl:()=>n,BG:()=>a,U0:()=>s,hE:()=>l,Nc:()=>c,xh:()=>d,F0:()=>u,Os:()=>m,yR:()=>p,gn:()=>h,ZP:()=>g});const i="CHART",o="COLUMN",n="HEADER",a="GRID",s="ROOT",l="DIVIDER",c="HEADER",d="MARKDOWN",u="NEW_COMPONENT_SOURCE",m="ROW",p="TABS",h="TAB",g={CHART_TYPE:i,COLUMN_TYPE:o,DASHBOARD_HEADER_TYPE:n,DASHBOARD_GRID_TYPE:a,DASHBOARD_ROOT_TYPE:s,DIVIDER_TYPE:l,HEADER_TYPE:c,MARKDOWN_TYPE:d,NEW_COMPONENT_SOURCE_TYPE:u,ROW_TYPE:m,TABS_TYPE:p,TAB_TYPE:h}},70400:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var i=r(17563);const o=new Set(["standalone","edit"]);function n(e){const t=i.parse(window.location.search);return Object.entries(t).reduce(((t,[r,i])=>"regular"===e&&o.has(r)||"reserved"===e&&!o.has(r)?t:Array.isArray(i)?{...t,[r]:i[0]}:{...t,[r]:i}),{})}},13284:(e,t,r)=>{"use strict";r.d(t,{UB:()=>Z,ZP:()=>q});var i,o=r(5872),n=r.n(o),a=r(67294),s=r(74221),l=r(94184),c=r.n(l),d=r(61988),u=r(51995),m=r(11965),p=r(82191),h=r(37921),g=r(14278),f=r(38097),y=r(1510),v=r(64239);!function(e){e.ALL_CHARTS="ALL_CHARTS",e.CATEGORY="CATEGORY",e.TAGS="TAGS",e.RECOMMENDED_TAGS="RECOMMENDED_TAGS"}(i||(i={}));const b=["line","big_number","big_number_total","table","pivot_table_v2","echarts_timeseries_line","echarts_area","echarts_timeseries_bar","echarts_timeseries_scatter","pie","mixed_timeseries","filter_box","dist_bar","area","bar","deck_polygon","time_table","histogram","deck_scatter","deck_hex","time_pivot","deck_arc","heatmap","deck_grid","dual_line","deck_screengrid","line_multi","treemap","box_plot","sunburst","sankey","word_cloud","mapbox","kepler","cal_heatmap","rose","bubble","deck_geojson","horizon","deck_multi","compare","partition","event_flow","deck_path","graph_chart","world_map","paired_ttest","para","country_map"],_=new Set(b),Z=1090,T=(0,d.t)("Other"),C=(0,d.t)("All charts"),x=[(0,d.t)("Popular"),(0,d.t)("ECharts"),(0,d.t)("Advanced-Analytics")],E=u.iK.div`
  ${({isSelectedVizMetadata:e})=>`\n    display: grid;\n    grid-template-rows: ${e?"auto minmax(100px, 1fr) minmax(200px, 35%)":"auto minmax(100px, 1fr)"};\n    // em is used here because the sidebar should be sized to fit the longest standard tag\n    grid-template-columns: minmax(14em, auto) 5fr;\n    grid-template-areas:\n      'sidebar search'\n      'sidebar main'\n      'details details';\n    height: 70vh;\n    overflow: auto;\n  `}
`,A=u.iK.h3`
  margin-top: 0;
  margin-bottom: ${({theme:e})=>2*e.gridUnit}px;
  font-size: ${({theme:e})=>e.typography.sizes.l}px;
  font-weight: ${({theme:e})=>e.typography.weights.bold};
  line-height: ${({theme:e})=>6*e.gridUnit}px;
`,S=u.iK.div`
  grid-area: sidebar;
  display: flex;
  flex-direction: column;
  border-right: 1px solid ${({theme:e})=>e.colors.grayscale.light2};
  overflow: auto;

  .ant-collapse .ant-collapse-item {
    .ant-collapse-header {
      font-size: ${({theme:e})=>e.typography.sizes.s}px;
      color: ${({theme:e})=>e.colors.grayscale.base};
      padding-left: ${({theme:e})=>2*e.gridUnit}px;
      padding-bottom: ${({theme:e})=>e.gridUnit}px;
    }
    .ant-collapse-content .ant-collapse-content-box {
      display: flex;
      flex-direction: column;
      padding: 0 ${({theme:e})=>2*e.gridUnit}px;
    }
  }
`,w=u.iK.div`
  grid-area: main;
  overflow-y: auto;
`,R=u.iK.div`
  ${({theme:e})=>`\n    grid-area: search;\n    margin-top: ${3*e.gridUnit}px;\n    margin-bottom: ${e.gridUnit}px;\n    margin-left: ${3*e.gridUnit}px;\n    margin-right: ${3*e.gridUnit}px;\n    .ant-input-affix-wrapper {\n      padding-left: ${2*e.gridUnit}px;\n    }\n  `}
`,D=u.iK.div`
  display: flex;
  justify-content: center;
  align-items: center;
  color: ${({theme:e})=>e.colors.grayscale.base};
`,P=u.iK.button`
  ${({theme:e})=>`\n    all: unset; // remove default button styles\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    cursor: pointer;\n    margin: ${e.gridUnit}px 0;\n    padding: 0 ${e.gridUnit}px;\n    border-radius: ${e.borderRadius}px;\n    line-height: 2em;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n    position: relative;\n\n    &:focus {\n      outline: initial;\n    }\n\n    &.selected {\n      background-color: ${e.colors.primary.dark1};\n      color: ${e.colors.primary.light5};\n\n      svg {\n        color: ${e.colors.primary.light5};\n      }\n\n      &:hover {\n        .cancel {\n          visibility: visible;\n        }\n      }\n    }\n\n    & span:first-of-type svg {\n      margin-top: ${1.5*e.gridUnit}px;\n    }\n\n    .cancel {\n      visibility: hidden;\n    }\n  `}
`,N=u.iK.div`
  overflow: auto;
  display: grid;
  grid-template-columns: repeat(
    auto-fill,
    ${({theme:e})=>24*e.gridUnit}px
  );
  grid-auto-rows: max-content;
  justify-content: space-evenly;
  grid-gap: ${({theme:e})=>2*e.gridUnit}px;
  justify-items: center;
  // for some reason this padding doesn't seem to apply at the bottom of the container. Why is a mystery.
  padding: ${({theme:e})=>2*e.gridUnit}px;
`,k=e=>m.iv`
  grid-area: details;
  border-top: 1px solid ${e.colors.grayscale.light2};
`,M=e=>m.iv`
  padding: ${4*e.gridUnit}px;
  display: grid;
  grid-template-columns: 1fr 1fr;
  grid-template-rows: auto auto 1fr;
  grid-template-areas:
    'viz-name examples-header'
    'viz-tags examples'
    'description examples';
`,F=u.iK.div`
  grid-area: viz-tags;
  width: ${({theme:e})=>120*e.gridUnit}px;
  padding-right: ${({theme:e})=>14*e.gridUnit}px;
  padding-bottom: ${({theme:e})=>2*e.gridUnit}px;
`,L=u.iK.p`
  grid-area: description;
  overflow: auto;
  padding-right: ${({theme:e})=>14*e.gridUnit}px;
  margin: 0;
`,O=u.iK.div`
  grid-area: examples;
  display: flex;
  flex-direction: row;
  flex-wrap: nowrap;
  overflow: auto;
  gap: ${({theme:e})=>4*e.gridUnit}px;

  img {
    height: 100%;
    border-radius: ${({theme:e})=>e.gridUnit}px;
    border: 1px solid ${({theme:e})=>e.colors.grayscale.light2};
  }
`,I=e=>m.iv`
  cursor: pointer;
  width: ${24*e.gridUnit}px;

  img {
    min-width: ${24*e.gridUnit}px;
    min-height: ${24*e.gridUnit}px;
    border: 1px solid ${e.colors.grayscale.light2};
    border-radius: ${e.gridUnit}px;
    transition: border-color ${e.transitionTiming};
  }

  &.selected img {
    border: 2px solid ${e.colors.primary.light2};
  }

  &:hover:not(.selected) img {
    border: 1px solid ${e.colors.grayscale.light1};
  }

  .viztype-label {
    margin-top: ${2*e.gridUnit}px;
    text-align: center;
  }
`;function U(e){return _.has(e.key)?b.indexOf(e.key):b.length}const $=({entry:e,selectedViz:t,setSelectedViz:r})=>{const i=(0,u.Fg)(),{key:o,value:n}=e,a=t===e.key;return(0,m.tZ)("div",{role:"button",css:I(i),tabIndex:0,className:a?"selected":"",onClick:()=>r(o)},(0,m.tZ)("img",{alt:n.name,width:"100%",className:"viztype-selector "+(a?"selected":""),src:n.thumbnail}),(0,m.tZ)("div",{className:"viztype-label"},n.name))},B=({vizEntries:e,...t})=>(0,m.tZ)(N,null,e.map((e=>(0,m.tZ)($,n()({key:e.key},t,{entry:e}))))),z=({selector:e,sectionId:t,icon:r,isSelected:i,onClick:o,className:n})=>{const s=(0,a.useRef)(null);return(0,a.useEffect)((()=>{i&&queueMicrotask((()=>(0,v.default)(s.current,{behavior:"smooth",scrollMode:"if-needed"})))}),[]),(0,m.tZ)(P,{ref:s,key:e,name:e,className:c()(n,i&&"selected"),onClick:()=>o(e,t)},r,e)};function q(e){var t;const{selectedViz:r,onChange:o,className:n}=e,{mountedPluginMetadata:l}=(0,g.gp)(),c=(0,a.useRef)(),[u,v]=(0,a.useState)(""),[b,_]=(0,a.useState)(!0),Z=b&&!!u,P=r?l[r]:null,N=(0,a.useMemo)((()=>{const e=Object.entries(l).map((([e,t])=>({key:e,value:t}))).filter((({value:e})=>(0,y.X3)(e.behaviors||[])&&!e.deprecated));return e.sort(((e,t)=>U(e)-U(t))),e}),[l]),I=(0,a.useMemo)((()=>{const e={};return N.forEach((t=>{const r=t.value.category||T;e[r]||(e[r]=[]),e[r].push(t)})),e}),[N]),$=(0,a.useMemo)((()=>Object.keys(I).sort(((e,t)=>e===T?1:t===T?-1:e.localeCompare(t)))),[I]),q=(0,a.useMemo)((()=>{const e={};return N.forEach((t=>{(t.value.tags||[]).forEach((r=>{e[r]||(e[r]=[]),e[r].push(t)}))})),e}),[N]),G=(0,a.useMemo)((()=>Object.keys(q).sort(((e,t)=>e.localeCompare(t))).filter((e=>-1===x.indexOf(e)))),[q]),W=(0,a.useMemo)((()=>N.sort(((e,t)=>e.key.localeCompare(t.key)))),[N]),[V,Y]=(0,a.useState)((()=>(null==P?void 0:P.category)||x[0])),[H,j]=(0,a.useState)((()=>null!=P&&P.category?i.CATEGORY:i.RECOMMENDED_TAGS)),K=(0,a.useMemo)((()=>new s.Z(N,{ignoreLocation:!0,threshold:.3,keys:["value.name","value.tags","value.description"]})),[N]),Q=(0,a.useMemo)((()=>""===u.trim()?[]:K.search(u).map((e=>e.item))),[u,K]),X=(0,a.useCallback)((()=>{_(!0)}),[]),J=(0,a.useCallback)((e=>v(e.target.value)),[]),ee=(0,a.useCallback)((()=>{_(!1),v(""),c.current.blur()}),[]),te=(0,a.useCallback)(((e,t)=>{b&&ee(),Y(e),j(t);const r=P&&((e,t)=>t===e.category||t===T&&null==e.category||(e.tags||[]).indexOf(t)>-1)(P,e);e===V||r||o(null)}),[ee,b,V,P,o]),re=(0,a.useMemo)((()=>({[i.RECOMMENDED_TAGS]:{title:(0,d.t)("Recommended tags"),icon:(0,m.tZ)(f.Z.Tags,null),selectors:x},[i.CATEGORY]:{title:(0,d.t)("Category"),icon:(0,m.tZ)(f.Z.Category,null),selectors:$},[i.TAGS]:{title:(0,d.t)("Tags"),icon:(0,m.tZ)(f.Z.Tags,null),selectors:G}})),[$,G]);return(0,m.tZ)(E,{className:n,isSelectedVizMetadata:Boolean(P)},(0,m.tZ)(S,null,(0,m.tZ)(z,{css:({gridUnit:e})=>m.iv`
              margin: ${2*e}px;
              margin-bottom: 0;
            `,sectionId:i.ALL_CHARTS,selector:C,icon:(0,m.tZ)(f.Z.Ballot,null),isSelected:!Z&&C===V&&i.ALL_CHARTS===H,onClick:te}),(0,m.tZ)(p.UO,{expandIconPosition:"right",ghost:!0,defaultActiveKey:Object.keys(re)},Object.keys(re).map((e=>{const t=re[e];return(0,m.tZ)(p.UO.Panel,{header:(0,m.tZ)("span",{className:"header"},t.title),key:e},t.selectors.map((r=>(0,m.tZ)(z,{key:r,selector:r,sectionId:e,icon:t.icon,isSelected:!Z&&r===V&&e===H,onClick:te}))))})))),(0,m.tZ)(R,null,(0,m.tZ)(p.II,{type:"text",ref:c,value:u,placeholder:(0,d.t)("Search all charts"),onChange:J,onFocus:X,prefix:(0,m.tZ)(D,null,(0,m.tZ)(f.Z.Search,{iconSize:"m"})),suffix:(0,m.tZ)(D,null,u&&(0,m.tZ)(f.Z.XLarge,{iconSize:"m",onClick:ee}))})),(0,m.tZ)(w,null,(0,m.tZ)(B,{vizEntries:Z?Q:V===C&&H===i.ALL_CHARTS?W:H===i.CATEGORY&&I[V]?I[V]:H!==i.TAGS&&H!==i.RECOMMENDED_TAGS||!q[V]?[]:q[V],selectedViz:r,setSelectedViz:o})),P?(0,m.tZ)("div",{css:e=>[k(e),M(e)]},(0,m.tZ)(a.Fragment,null,(0,m.tZ)(A,{css:m.iv`
                grid-area: viz-name;
              `},null==P?void 0:P.name),(0,m.tZ)(F,null,null==P?void 0:P.tags.map((e=>(0,m.tZ)(h.Z,{key:e},e)))),(0,m.tZ)(L,null,(null==P?void 0:P.description)||(0,d.t)("No description available.")),(0,m.tZ)(A,{css:m.iv`
                grid-area: examples-header;
              `},!(null==P||null==(t=P.exampleGallery)||!t.length)&&(0,d.t)("Examples")),(0,m.tZ)(O,null,((null==P?void 0:P.exampleGallery)||[]).map((e=>(0,m.tZ)("img",{src:e.url,alt:e.caption,title:e.caption})))))):null)}},75042:()=>{}}]);