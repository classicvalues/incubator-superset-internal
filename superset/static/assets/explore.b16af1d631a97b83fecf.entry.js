(()=>{var e,t,a,r,n,o,s,i={90001:(e,t,a)=>{"use strict";var r={};a.r(r),a.d(r,{FETCH_DASHBOARDS_FAILED:()=>D,FETCH_DASHBOARDS_SUCCEEDED:()=>A,REMOVE_SAVE_MODAL_ALERT:()=>j,SAVE_SLICE_FAILED:()=>M,SAVE_SLICE_SUCCESS:()=>U,fetchDashboards:()=>I,fetchDashboardsFailed:()=>k,fetchDashboardsSucceeded:()=>N,removeSaveModalAlert:()=>L,saveSlice:()=>F,saveSliceFailed:()=>$,saveSliceSuccess:()=>P});var n={};a.r(n),a.d(n,{CREATE_NEW_SLICE:()=>be,FETCH_DATASOURCES_STARTED:()=>te,FETCH_DATASOURCES_SUCCEEDED:()=>re,FETCH_DATASOURCE_SUCCEEDED:()=>X,FETCH_FAVE_STAR:()=>ie,POST_DATASOURCE_STARTED:()=>J,SAVE_FAVE_STAR:()=>ce,SET_DATASOURCE:()=>K,SET_DATASOURCES:()=>Q,SET_DATASOURCE_TYPE:()=>B,SET_EXPLORE_CONTROLS:()=>pe,SET_FIELD_VALUE:()=>ue,SLICE_UPDATED:()=>ye,TOGGLE_FAVE_STAR:()=>oe,UPDATE_CHART_TITLE:()=>me,createNewSlice:()=>ve,exploreActions:()=>Se,fetchDatasourceSucceeded:()=>ee,fetchDatasourcesStarted:()=>ae,fetchDatasourcesSucceeded:()=>ne,fetchFaveStar:()=>le,saveFaveStar:()=>de,setControlValue:()=>he,setDatasource:()=>G,setDatasourceType:()=>W,setDatasources:()=>Y,setExploreControls:()=>fe,sliceUpdated:()=>_e,toggleFaveStar:()=>se,updateChartTitle:()=>ge});var o=a(67294),s=a(9060),i=a(14890),l=a(53894),c=a(14670),d=a.n(c),u=a(21173),h=a(9679),p=a(97381),f=a(3741),m=a(23279),g=a.n(m);const b=new class{constructor({callback:e=(()=>{}),sizeThreshold:t=1e3,delayThreshold:a=1e3}){this.queue=[],this.sizeThreshold=t,this.delayThrehold=a,this.trigger=g()(this.trigger.bind(this),this.delayThrehold),this.callback=e}append(e){this.queue.push(e),this.trigger()}trigger(){if(this.queue.length>0){const e=this.queue.splice(0,this.sizeThreshold);this.callback.call(null,e),this.queue.length>0&&this.trigger()}}}({callback:e=>{if(e.length<=0)return;let t="/superset/log/?explode=events";const{source:a,source_id:r}=e[0];if("dashboard"===a?t+=`&dashboard_id=${r}`:"slice"===a&&(t+=`&slice_id=${r}`),navigator.sendBeacon){const a=new FormData;a.append("events",(0,h.o)(e)),navigator.sendBeacon(t,a)}else u.Z.post({endpoint:t,postPayload:{events:e},parseMethod:null})},sizeThreshold:1024,delayThreshold:1e3});let v=0;var y=a(91877),_=a(99543),S=a(72570),E=a(8818);function Z(e=[]){const t=[];return e.forEach((([e,a])=>{const r="danger"===e?E.p.DANGER:"success"===e&&E.p.SUCCESS||E.p.INFO,n=(0,S.fz)({text:a,toastType:r}).payload;t.push(n)})),t}var w=a(12515),C=a(35854),T=a(97488),R=a(61358),x=a(64714),O=a(8868);const A="FETCH_DASHBOARDS_SUCCEEDED";function N(e){return{type:A,choices:e}}const D="FETCH_DASHBOARDS_FAILED";function k(e){return{type:D,userId:e}}function I(e){return function(t){return u.Z.get({endpoint:`/dashboardasync/api/read?_flt_0_owners=${e}`}).then((({json:e})=>{const a=e.pks.map(((t,a)=>({value:t,label:(e.result[a]||{}).dashboard_title})));return t(N(a))})).catch((()=>t(k(e))))}}const M="SAVE_SLICE_FAILED";function $(){return{type:M}}const U="SAVE_SLICE_SUCCESS";function P(e){return{type:U,data:e}}const j="REMOVE_SAVE_MODAL_ALERT";function L(){return{type:j}}function F(e,t){return a=>{const r=(0,w.H6)({formData:e,endpointType:"base",force:!1,curUrl:null,requestParams:t}),n=(0,w.u)({formData:e,force:!1,resultFormat:"json",resultType:"full"});return u.Z.post({url:r,postPayload:{form_data:e,query_context:n}}).then((e=>(a(P(e.json)),e.json))).catch((()=>a($())))}}var z=a(22428),V=a(69856),H=a(60650);const q="/superset/favstar/slice",B="SET_DATASOURCE_TYPE";function W(e){return{type:B,datasourceType:e}}const K="SET_DATASOURCE";function G(e){return{type:K,datasource:e}}const Q="SET_DATASOURCES";function Y(e){return{type:Q,datasources:e}}const J="POST_DATASOURCE_STARTED",X="FETCH_DATASOURCE_SUCCEEDED";function ee(){return{type:X}}const te="FETCH_DATASOURCES_STARTED";function ae(){return{type:te}}const re="FETCH_DATASOURCES_SUCCEEDED";function ne(){return{type:re}}const oe="TOGGLE_FAVE_STAR";function se(e){return{type:oe,isStarred:e}}const ie="FETCH_FAVE_STAR";function le(e){return function(t){u.Z.get({endpoint:`${q}/${e}/count/`}).then((({json:e})=>{e.count>0&&t(se(!0))}))}}const ce="SAVE_FAVE_STAR";function de(e,t){return function(a){const r=t?"unselect":"select";u.Z.get({endpoint:`${q}/${e}/${r}/`}).then((()=>a(se(!t)))).catch((()=>{a((0,S.Gb)((0,H.t)("An error occurred while starring this chart")))}))}}const ue="SET_FIELD_VALUE";function he(e,t,a){return{type:ue,controlName:e,value:t,validationErrors:a}}const pe="UPDATE_EXPLORE_CONTROLS";function fe(e){return{type:pe,formData:e}}const me="UPDATE_CHART_TITLE";function ge(e){return{type:me,sliceName:e}}const be="CREATE_NEW_SLICE";function ve(e,t,a,r,n){return{type:be,can_add:e,can_download:t,can_overwrite:a,slice:r,form_data:n}}const ye="SLICE_UPDATED";function _e(e){return{type:ye,slice:e}}const Se={...S.s2,setDatasourceType:W,setDatasource:G,setDatasources:Y,fetchDatasourcesStarted:ae,fetchDatasourcesSucceeded:ne,toggleFaveStar:se,fetchFaveStar:le,saveFaveStar:de,setControlValue:he,setExploreControls:fe,updateChartTitle:ge,createNewSlice:ve,sliceUpdated:_e},Ee=(0,i.UY)({charts:x.Z,saveModal:function(e={},t){const a={[A]:()=>({...e,dashboards:t.choices}),[D]:()=>({...e,saveModalAlert:`fetching dashboards failed for ${t.userId}`}),[M]:()=>({...e,saveModalAlert:"Failed to save slice"}),[U]:t=>({...e,data:t}),[j]:()=>({...e,saveModalAlert:null})};return t.type in a?a[t.type]():e},dataMask:O.Z,explore:function(e={},t){const a={[z.DYNAMIC_PLUGIN_CONTROLS_READY]:()=>({...e,controls:t.controlsState}),[oe]:()=>({...e,isStarred:t.isStarred}),[J]:()=>({...e,isDatasourceMetaLoading:!0}),[K](){const a={...e.form_data};t.datasource.type!==e.datasource.type&&("table"===t.datasource.type?(a.granularity_sqla=t.datasource.granularity_sqla,a.time_grain_sqla=t.datasource.time_grain_sqla,delete a.druid_time_origin,delete a.granularity):(a.druid_time_origin=t.datasource.druid_time_origin,a.granularity=t.datasource.granularity,delete a.granularity_sqla,delete a.time_grain_sqla));const r={...e.controls};t.datasource.id===e.datasource.id&&t.datasource.type===e.datasource.type||(a.time_range=V.X5,Object.entries(r).forEach((([e,t])=>{("column_name"===t.valueKey||"columns"in t)&&(r[e]={...t,value:void 0},a[e]=void 0)})));const n={...e,controls:r,datasource:t.datasource,datasource_id:t.datasource.id,datasource_type:t.datasource.type};return{...n,form_data:a,controls:(0,C.R3)(n,a)}},[te]:()=>({...e,isDatasourcesLoading:!0}),[Q]:()=>({...e,datasources:t.datasources}),[ue](){const a=e.form_data,{controlName:r,value:n,validationErrors:o}=t;a[r]=n;const s=a.viz_type,i=e.controls[t.controlName]||(0,T.Bx)(t.controlName,s)||{},l={...(0,T.vP)(i,e,t.value)},c={...e,controls:{...e.controls,[t.controlName]:l}},d={};Array.isArray(l.rerender)&&l.rerender.forEach((e=>{d[e]={...(0,T.vP)(c.controls[e],c,c.controls[e].value)}}));const u=l.validationErrors||[];(o||[]).forEach((e=>{u.includes(e)||u.push(e)}));const h=u&&u.length>0,p="viz_type"===t.controlName&&t.value!==e.controls.viz_type.value?(0,C.R3)(e,(0,T.Hu)({...e.controls,viz_type:l})):e.controls;return{...e,form_data:a,triggerRender:l.renderTrigger&&!h,controls:{...p,[t.controlName]:{...l,validationErrors:u},...d}}},[pe]:()=>({...e,controls:(0,C.R3)(e,t.formData)}),[me]:()=>({...e,sliceName:t.sliceName}),[be]:()=>({...e,slice:t.slice,controls:(0,C.R3)(e,t.form_data),can_add:t.can_add,can_download:t.can_download,can_overwrite:t.can_overwrite}),[ye](){var a,r;return{...e,slice:{...e.slice,...t.slice,owners:null!=(a=t.slice.owners)?a:null},sliceName:null!=(r=t.slice.slice_name)?r:e.sliceName}}};return t.type in a?a[t.type]():e},impressionId:(e="")=>e,messageToasts:function(e=[],t){switch(t.type){case S.h:{const{payload:a}=t,r=e.slice();return a.noDuplicate&&r.find((e=>e.text===a.text))?e:[a,...e]}case S.K7:{const{payload:{id:a}}=t;return[...e].filter((e=>e.id!==a))}default:return e}},reports:function(e={},t){const a={[R.jt]:()=>({...t.report.result.reduce(((e,t)=>({...e,[t.id]:t})),{})}),[R.J8](){const a=t.json.result;return a.id=t.json.id,{...e,[t.json.id]:a}},[R.Dr](){const a=t.json.result;return a.id=t.json.id,{...e,[t.json.id]:a}}};return t.type in a?a[t.type]():e}});var Ze=a(37703),we=a(38626),Ce=a(57865),Te=a(68135),Re=a(14278),xe=a(37840),Oe=a(11965),Ae=a(94184),Ne=a.n(Ae),De=a(13423),ke=a(38097);const Ie=xe.iK.div`
  display: flex;
  justify-content: center;
  align-items: center;

  span {
    padding: 0 11px;
  }
`,Me=e=>Oe.iv`
  min-width: ${5*e.gridUnit}px;
  color: ${e.colors.grayscale.base};
`;function $e({toast:e,onCloseToast:t}){const a=(0,o.useRef)(),[r,n]=(0,o.useState)(!1),s=()=>{n(!0)},i=(0,o.useCallback)((()=>{a.current&&clearTimeout(a.current),n((()=>(setTimeout((()=>{t(e.id)}),150),!1)))}),[t,e.id]);(0,o.useEffect)((()=>(setTimeout(s),e.duration>0&&(a.current=setTimeout(i,e.duration)),()=>{a.current&&clearTimeout(a.current)})),[i,e.duration]);let l="toast--success",c=(0,Oe.tZ)(ke.Z.CircleCheckSolid,{css:e=>Me(e)});return e.toastType===E.p.WARNING?(c=(0,Oe.tZ)(ke.Z.WarningSolid,{css:Me}),l="toast--warning"):e.toastType===E.p.DANGER?(c=(0,Oe.tZ)(ke.Z.ErrorSolid,{css:Me}),l="toast--danger"):e.toastType===E.p.INFO&&(c=(0,Oe.tZ)(ke.Z.InfoSolid,{css:Me}),l="toast--info"),(0,Oe.tZ)(Ie,{className:Ne()("alert","toast",r&&"toast--visible",l),role:"alert"},c,(0,Oe.tZ)(De.ZP,{content:e.text}),(0,Oe.tZ)("i",{className:"fa fa-close pull-right pointer",role:"button",tabIndex:0,onClick:i,"aria-label":"Close"}))}const Ue=xe.iK.div`
  max-width: 600px;
  position: fixed;
  bottom: 0px;
  right: 0px;
  margin-right: 50px;
  margin-bottom: 50px;
  z-index: ${({theme:e})=>e.zIndex.max};

  .toast {
    background: ${({theme:e})=>e.colors.grayscale.dark1};
    border-radius: ${({theme:e})=>e.borderRadius};
    box-shadow: 0 2px 4px 0
      fade(
        ${({theme:e})=>e.colors.grayscale.dark2},
        ${({theme:e})=>e.opacity.mediumLight}
      );
    color: ${({theme:e})=>e.colors.grayscale.light5};
    opacity: 0;
    position: relative;
    transform: translateY(-100%);
    white-space: pre-line;
    will-change: transform, opacity;
    transition: transform ${({theme:e})=>e.transitionTiming}s,
      opacity ${({theme:e})=>e.transitionTiming}s;

    &:after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 6px;
      height: 100%;
    }
  }

  .toast > button {
    color: ${({theme:e})=>e.colors.grayscale.light5};
    opacity: 1;
  }

  .toast--visible {
    opacity: 1;
    transform: translateY(0);
  }
`,Pe=(0,Ze.$j)((({messageToasts:e})=>({toasts:e})),(e=>(0,i.DE)({removeToast:S.RS},e)))((function({toasts:e,removeToast:t}){return e.length>0&&(0,Oe.tZ)(Ue,{id:"toast-presenter"},e.map((e=>(0,Oe.tZ)($e,{key:e.id,toast:e,onCloseToast:t}))))}));var je=a(19755),Le=a.n(je),Fe=a(98286),ze=a(92869),Ve=a(67663);function He({code:e,message:t}){return(0,Oe.tZ)(o.Fragment,null,t," ",(0,Oe.tZ)("a",{href:`https://superset.apache.org/docs/miscellaneous/issue-codes#issue-${e}`,rel:"noopener noreferrer",target:"_blank"},(0,Oe.tZ)("i",{className:"fa fa-external-link"})))}var qe=a(91178);const Be=function({error:e,source:t}){const{extra:a,level:r}=e,n=["dashboard","explore"].includes(t),s=n?(0,H.tn)("We’re having trouble loading this visualization. Queries are set to timeout after %s second.","We’re having trouble loading this visualization. Queries are set to timeout after %s seconds.",a.timeout,a.timeout):(0,H.tn)("We’re having trouble loading these results. Queries are set to timeout after %s second.","We’re having trouble loading these results. Queries are set to timeout after %s seconds.",a.timeout,a.timeout),i=(0,Oe.tZ)(o.Fragment,null,(0,Oe.tZ)("p",null,(0,H.t)("This may be triggered by:"),(0,Oe.tZ)("br",null),a.issue_codes.map((e=>(0,Oe.tZ)(He,e))).reduce(((e,t)=>[e,(0,Oe.tZ)("br",null),t]))),n&&a.owners&&(0,Oe.tZ)(o.Fragment,null,(0,Oe.tZ)("br",null),(0,Oe.tZ)("p",null,(0,H.tn)("Please reach out to the Chart Owner for assistance.","Please reach out to the Chart Owners for assistance.",a.owners.length)),(0,Oe.tZ)("p",null,(0,H.tn)("Chart Owner: %s","Chart Owners: %s",a.owners.length,a.owners.join(", "))))),l=`${s}\n${(0,H.t)("This may be triggered by:")}\n${a.issue_codes.map((e=>e.message)).join("\n")}`;return(0,Oe.tZ)(qe.Z,{title:(0,H.t)("Timeout error"),subtitle:s,level:r,source:t,copyText:l,body:i})};var We=a(5872),Ke=a.n(We);const Ge=function({error:e,source:t="dashboard",subtitle:a}){const{extra:r,level:n,message:s}=e,i=["dashboard","explore"].includes(t),l=r&&(0,Oe.tZ)(o.Fragment,null,(0,Oe.tZ)("p",null,(0,H.t)("This may be triggered by:"),(0,Oe.tZ)("br",null),r.issue_codes.map((e=>(0,Oe.tZ)(He,Ke()({},e,{key:e.code})))).reduce(((e,t)=>[e,(0,Oe.tZ)("br",null),t]))),i&&r.owners&&(0,Oe.tZ)(o.Fragment,null,(0,Oe.tZ)("br",null),(0,Oe.tZ)("p",null,(0,H.tn)("Please reach out to the Chart Owner for assistance.","Please reach out to the Chart Owners for assistance.",r.owners.length)),(0,Oe.tZ)("p",null,(0,H.tn)("Chart Owner: %s","Chart Owners: %s",r.owners.length,r.owners.join(", "))))),c=r&&r.issue_codes?`${s}\n${(0,H.t)("This may be triggered by:")}\n${r.issue_codes.map((e=>e.message)).join("\n")}`:s;return(0,Oe.tZ)(qe.Z,{title:(0,H.t)("%s Error",r&&r.engine_name||(0,H.t)("DB engine")),subtitle:a,level:n,source:t,copyText:c,body:l})};var Qe=a(39991),Ye=a.n(Qe);const Je=function({error:e,source:t="sqllab",subtitle:a}){const{extra:r={issue_codes:[]},level:n,message:s}=e,i=(0,H.tn)("This was triggered by:","This may be triggered by:",r.issue_codes.length),l=((e,t)=>{const a={};return e.forEach((e=>{t.forEach((t=>{Ye()(e,t)<=2&&(a[e]||(a[e]=[]),a[e].push(`"${t}"`))}))})),a})(r.undefined_parameters||[],Object.keys(r.template_parameters||{})),c=(0,Oe.tZ)(o.Fragment,null,(0,Oe.tZ)("p",null,Object.keys(l).length>0&&(0,Oe.tZ)(o.Fragment,null,(0,Oe.tZ)("p",null,(0,H.t)("Did you mean:")),(0,Oe.tZ)("ul",null,Object.entries(l).map((([e,t])=>(0,Oe.tZ)("li",null,(0,H.tn)('%(suggestion)s instead of "%(undefinedParameter)s?"','%(firstSuggestions)s or %(lastSuggestion)s instead of "%(undefinedParameter)s"?',t.length,{suggestion:t.join(", "),firstSuggestions:t.slice(0,-1).join(", "),lastSuggestion:t[t.length-1],undefinedParameter:e}))))),(0,Oe.tZ)("br",null)),i,(0,Oe.tZ)("br",null),r.issue_codes.length>0&&r.issue_codes.map((e=>(0,Oe.tZ)(He,e))).reduce(((e,t)=>[e,(0,Oe.tZ)("br",null),t])))),d=`${s}\n${i}\n${r.issue_codes.map((e=>e.message)).join("\n")}`;return(0,Oe.tZ)(qe.Z,{title:(0,H.t)("Parameter error"),subtitle:a,level:n,source:t,copyText:d,body:c})},Xe=function({error:e,source:t="dashboard",subtitle:a}){const{level:r,message:n}=e;return(0,Oe.tZ)(qe.Z,{title:(0,H.t)("Missing dataset"),subtitle:a,level:r,source:t,copyText:n,body:null})};var et=a(69753),tt=a(26009),at=a(45697),rt=a.n(at),nt=a(29119),ot=a(58593),st=a(67337);const it=(e,t)=>{try{const a=localStorage.getItem(e);return JSON.parse(a||"null")||t}catch{return t}},lt=(e,t)=>{try{localStorage.setItem(e,JSON.stringify(t))}catch{}};var ct=a(27600),dt=a(50810),ut=a(2275),ht=a(1510),pt=a(40323);const ft=function(e){var t=[],a=null,r=function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];t=n,a||(a=requestAnimationFrame((function(){a=null,e.apply(void 0,t)})))};return r.cancel=function(){a&&(cancelAnimationFrame(a),a=null)},r};var mt=a(91296),gt=a.n(mt),bt=a(93096),vt=a.n(bt),yt=function(e,t){return yt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])},yt(e,t)};var _t=function(){return _t=Object.assign||function(e){for(var t,a=1,r=arguments.length;a<r;a++)for(var n in t=arguments[a])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},_t.apply(this,arguments)};var St=function(e,t,a,r){switch(t){case"debounce":return gt()(e,a,r);case"throttle":return vt()(e,a,r);default:return e}},Et=function(e){return"function"==typeof e},Zt=function(){return"undefined"==typeof window},wt=function(e){return e instanceof Element||e instanceof HTMLDocument};function Ct(e){void 0===e&&(e={});var t=e.skipOnMount,a=void 0!==t&&t,r=e.refreshMode,n=e.refreshRate,s=void 0===n?1e3:n,i=e.refreshOptions,l=e.handleWidth,c=void 0===l||l,d=e.handleHeight,u=void 0===d||d,h=e.onResize,p=(0,o.useRef)(null),f=(0,o.useRef)(),m=(0,o.useRef)(null),g=(0,o.useRef)(h);(0,o.useEffect)((function(){null===p.current&&(p.current=a)}),[a]);var b=(0,o.useState)({width:void 0,height:void 0}),v=b[0],y=b[1];return(0,o.useEffect)((function(){var e=function(e,t){return ft((function(a){var r=a.width,n=a.height;Et(e)&&e(r,n),t({width:r,height:n})}))}(g.current,y);m.current=St((function(t){(c||u)&&t.forEach((function(t){var a=t&&t.contentRect||{},r=a.width,n=a.height;!p.current&&!Zt()&&e({width:r,height:n}),p.current=!1}))}),r,s,i);var t=new ResizeObserver(m.current);return f.current&&t.observe(f.current),function(){t.disconnect(),e.cancel();var a=m.current;a&&a.cancel&&a.cancel()}}),[r,s,i,c,u,g]),_t({ref:f},v)}!function(e){function t(t){var a=e.call(this,t)||this;a.cancelHandler=function(){a.resizeHandler&&a.resizeHandler.cancel&&(a.resizeHandler.cancel(),a.resizeHandler=null)},a.rafClean=function(){a.raf&&a.raf.cancel&&(a.raf.cancel(),a.raf=null)},a.attachObserver=function(){var e=a.props.targetRef;e&&e.current&&(a.targetRef.current=e.current);var t=a.getElement();t&&(a.observableElement&&a.observableElement===t||(a.observableElement=t,a.resizeObserver.observe(t)))},a.getElement=function(){var e=a.props,t=e.querySelector,r=e.targetDomEl;if(Zt())return null;if(t)return document.querySelector(t);if(r&&wt(r))return r;if(a.targetRef&&wt(a.targetRef.current))return a.targetRef.current;var n=(0,s.findDOMNode)(a);if(!n)return null;switch(a.getRenderType()){case"renderProp":case"childFunction":case"child":case"childArray":return n;default:return n.parentElement}},a.createUpdater=function(){return a.rafClean(),a.raf=ft((function(e){var t=e.width,r=e.height,n=a.props.onResize;n&&Et(n)&&n(t,r),a.setState({width:t,height:r})})),a.raf},a.createResizeHandler=function(e){var t=a.state,r=t.width,n=t.height,o=a.props,s=o.handleWidth,i=void 0===s||s,l=o.handleHeight,c=void 0===l||l;if(i||c){var d=a.createUpdater();e.forEach((function(e){var t=e&&e.contentRect||{},o=t.width,s=t.height,l=i&&r!==o||c&&n!==s;!a.skipOnMount&&l&&!Zt()&&d({width:o,height:s}),a.skipOnMount=!1}))}},a.getRenderType=function(){var e=a.props,t=e.render,r=e.children;return Et(t)?"renderProp":Et(r)?"childFunction":(0,o.isValidElement)(r)?"child":Array.isArray(r)?"childArray":"parent"};var r=t.skipOnMount,n=t.refreshMode,i=t.refreshRate,l=void 0===i?1e3:i,c=t.refreshOptions;return a.state={width:void 0,height:void 0},a.skipOnMount=r,a.raf=null,a.targetRef=(0,o.createRef)(),a.observableElement=null,a.resizeHandler=St(a.createResizeHandler,n,l,c),a.resizeObserver=new ResizeObserver(a.resizeHandler),a}(function(e,t){function a(){this.constructor=e}yt(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)})(t,e),t.prototype.componentDidMount=function(){this.attachObserver()},t.prototype.componentDidUpdate=function(){this.attachObserver()},t.prototype.componentWillUnmount=function(){this.resizeObserver.disconnect(),this.rafClean(),this.cancelHandler()},t.prototype.render=function(){var e,t=this.props,a=t.render,r=t.children,n=t.nodeType,s=void 0===n?"div":n,i=this.state,l={width:i.width,height:i.height,targetRef:this.targetRef};switch(this.getRenderType()){case"renderProp":return a&&a(l);case"childFunction":return(e=r)(l);case"child":if((e=r).type&&"string"==typeof e.type){var c=function(e,t){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(a[r[n]]=e[r[n]])}return a}(l,["targetRef"]);return(0,o.cloneElement)(e,c)}return(0,o.cloneElement)(e,l);case"childArray":return(e=r).map((function(e){return!!e&&(0,o.cloneElement)(e,l)}));default:return o.createElement(s,null)}}}(o.PureComponent);var Tt=a(5144),Rt=a(83527),xt=a(97860),Ot=a(46415),At=a(48600),Nt=a(38270),Dt=a(41609),kt=a.n(Dt),It=a(18446),Mt=a.n(It),$t=a(88306),Ut=a.n($t),Pt=a(14299),jt=a(92252);const Lt=Ut()(((e,t)=>{const a={};return((null==t?void 0:t.controlPanelSections)||[]).forEach((e=>{e.controlSetRows.forEach((e=>{e.forEach((e=>{e&&("string"==typeof e?a[e]=jt.ai[e]:e.name&&e.config&&(a[e.name]=e.config))}))}))})),a}));var Ft=a(68073),zt=a(76962);const Vt={origFormData:rt().object.isRequired,currentFormData:rt().object.isRequired};function Ht(e){if(null==e||""===e)return null;if("object"==typeof e){if(Array.isArray(e)&&0===e.length)return null;const t=Object.keys(e);if(t&&0===t.length)return null}return e}class qt extends o.Component{constructor(e){super(e);const t=this.getDiffs(e),a=(e=>{const t=(0,Pt.Z)().get(e);return Lt(e,t)})(this.props.origFormData.viz_type),r=this.getRowsFromDiffs(t,a);this.state={rows:r,hasDiffs:!kt()(t),controlsMap:a}}UNSAFE_componentWillReceiveProps(e){if(Mt()(this.props,e))return;const t=this.getDiffs(e);this.setState((e=>({rows:this.getRowsFromDiffs(t,e.controlsMap),hasDiffs:!kt()(t)})))}getRowsFromDiffs(e,t){return Object.entries(e).map((([e,a])=>({control:t[e]&&t[e].label||e,before:this.formatValue(a.before,e,t),after:this.formatValue(a.after,e,t)})))}getDiffs(e){const t=e.origFormData,a=e.currentFormData,r=Object.keys(a),n={};return r.forEach((e=>{(t[e]||a[e])&&(["filters","having","having_filters","where"].includes(e)||this.isEqualish(t[e],a[e])||(n[e]={before:t[e],after:a[e]}))})),n}isEqualish(e,t){return Mt()(Ht(e),Ht(t))}formatValue(e,t,a){var r,n,o;return void 0===e?"N/A":null===e?"null":"AdhocFilterControl"===(null==(r=a[t])?void 0:r.type)?e.length?e.map((e=>{const t=e.comparator&&e.comparator.constructor===Array?`[${e.comparator.join(", ")}]`:e.comparator;return`${e.subject} ${e.operator} ${t}`})).join(", "):"[]":"BoundsControl"===(null==(n=a[t])?void 0:n.type)?`Min: ${e[0]}, Max: ${e[1]}`:"CollectionControl"===(null==(o=a[t])?void 0:o.type)?e.map((e=>(0,h.o)(e))).join(", "):"boolean"==typeof e?e?"true":"false":e.constructor===Array?e.length?e.join(", "):"[]":"string"==typeof e||"number"==typeof e?e:(0,h.o)(e)}renderModalBody(){return(0,Oe.tZ)(zt.Z,{columns:[{accessor:"control",Header:"Control"},{accessor:"before",Header:"Before"},{accessor:"after",Header:"After"}],data:this.state.rows,pageSize:50,className:"table-condensed"})}renderTriggerNode(){return(0,Oe.tZ)(ot.u,{id:"difference-tooltip",title:(0,H.t)("Click to see difference")},(0,Oe.tZ)("span",{className:"label label-warning m-l-5",style:{fontSize:"12px"}},(0,H.t)("Altered")))}render(){return this.state.hasDiffs?(0,Oe.tZ)(Ft.Z,{triggerNode:this.renderTriggerNode(),modalTitle:(0,H.t)("Chart changes"),modalBody:this.renderModalBody(),responsive:!0}):null}}qt.propTypes=Vt;const Bt=xe.iK.a`
  font-size: ${({theme:e})=>e.typography.sizes.xl}px;
  display: flex;
  padding: 0 0 0 0.5em;
`,Wt=({itemId:e,isStarred:t,showTooltip:a,saveFaveStar:r,fetchFaveStar:n})=>{var s;s=()=>{n&&n(e)},(0,o.useEffect)(s,[]);const i=(0,o.useCallback)((a=>{a.preventDefault(),r(e,!!t)}),[t,e,r]),l=(0,Oe.tZ)(Bt,{href:"#",onClick:i,className:"fave-unfave-icon",role:"button"},t?(0,Oe.tZ)(ke.Z.FavoriteSelected,{iconSize:"xxl"}):(0,Oe.tZ)(ke.Z.FavoriteUnselected,{iconSize:"xxl"}));return a?(0,Oe.tZ)(ot.u,{id:"fave-unfave-tooltip",title:(0,H.t)("Click to favorite/unfavorite")},l):l};var Kt=a(37921),Gt=a(1836);const Qt=(0,xe.iK)(Kt.Z)`
  text-align: left;
  width: 91px;
`;function Yt({endTime:e,isRunning:t,startTime:a,status:r="success"}){const[n,s]=(0,o.useState)("00:00:00.00"),i=(0,o.useRef)();return(0,o.useEffect)((()=>{const r=()=>{i.current&&(clearInterval(i.current),i.current=void 0)};return t&&(i.current=setInterval((()=>{if(a){const n=e||(0,Gt.zO)();a<n&&s((0,Gt.zQ)(a,n)),t||r()}}),30)),r}),[e,t,a]),(0,Oe.tZ)(Qt,{type:r,role:"timer"},n)}var Jt=a(30381),Xt=a.n(Jt);const ea=({cachedTimestamp:e})=>{const t=e?(0,Oe.tZ)("span",null,(0,H.t)("Loaded data cached"),(0,Oe.tZ)("b",null," ",Xt().utc(e).fromNow())):(0,H.t)("Loaded from cache");return(0,Oe.tZ)("span",null,t,". ",(0,H.t)("Click to force-refresh"))},ta=({className:e,onClick:t,cachedTimestamp:a})=>{const[r,n]=(0,o.useState)(!1),s=r?"primary":"default";return(0,Oe.tZ)(ot.u,{title:(0,Oe.tZ)(ea,{cachedTimestamp:a}),id:"cache-desc-tooltip"},(0,Oe.tZ)(Kt.Z,{className:`${e}`,type:s,onClick:t,onMouseOver:()=>n(!0),onMouseOut:()=>n(!1)},(0,H.t)("cached")," ",(0,Oe.tZ)("i",{className:"fa fa-refresh"})))};a(15306);var aa=a(74069),ra=a(82191),na=a(35932),oa=a(4715),sa=a(15926),ia=a.n(sa),la=a(49238);function ca({slice:e,onHide:t,onSave:a,show:r}){const[n,s]=(0,o.useState)(!1),[i,l]=(0,o.useState)(null),[c,d]=(0,o.useState)(e.slice_name||""),[h,p]=(0,o.useState)(e.description||""),[f,m]=(0,o.useState)(null!=e.cache_timeout?e.cache_timeout:"");function g({error:e,statusText:t,message:a}){let r=e||t||(0,H.t)("An error has occurred");"Forbidden"===a&&(r=(0,H.t)("You do not have permission to edit this chart")),aa.Z.error({title:"Error",content:r,okButtonProps:{danger:!0,className:"btn-danger"}})}const b=(0,o.useCallback)((async function(){try{const t=(await u.Z.get({endpoint:`/api/v1/chart/${e.slice_id}`})).json.result;l(t.owners.map((e=>({value:e.id,label:`${e.first_name} ${e.last_name}`}))))}catch(e){g(await(0,Fe.O)(e))}}),[e.slice_id]),v=(0,o.useMemo)((()=>(e="",t,a)=>{const r=ia().encode({filter:e,page:t,page_size:a});return u.Z.get({endpoint:`/api/v1/chart/related/owners?q=${r}`}).then((e=>({data:e.json.result.map((e=>({value:e.value,label:e.text}))),totalCount:e.json.count})))}),[]),y=async r=>{r.stopPropagation(),r.preventDefault(),s(!0);const n={slice_name:c||null,description:h||null,cache_timeout:f||null};i&&(n.owners=i.map((e=>e.value)));try{const r={...(await u.Z.put({endpoint:`/api/v1/chart/${e.slice_id}`,headers:{"Content-Type":"application/json"},body:JSON.stringify(n)})).json.result,id:e.slice_id};a(r),t()}catch(e){g(await(0,Fe.O)(e))}s(!1)},_=(0,H.t)("Owners");return(0,o.useEffect)((()=>{b()}),[b]),(0,o.useEffect)((()=>{d(e.slice_name||"")}),[e.slice_name]),(0,Oe.tZ)(aa.Z,{show:r,onHide:t,title:"Edit Chart Properties",footer:(0,Oe.tZ)(o.Fragment,null,(0,Oe.tZ)(na.Z,{htmlType:"button",buttonSize:"small",onClick:t,cta:!0},(0,H.t)("Cancel")),(0,Oe.tZ)(na.Z,{htmlType:"button",buttonSize:"small",buttonStyle:"primary",onClick:y,disabled:n||!c,cta:!0},(0,H.t)("Save"))),responsive:!0,wrapProps:{"data-test":"properties-edit-modal"}},(0,Oe.tZ)(la.l0,{onFinish:y,layout:"vertical"},(0,Oe.tZ)(ra.X2,{gutter:16},(0,Oe.tZ)(ra.JX,{xs:24,md:12},(0,Oe.tZ)("h3",null,(0,H.t)("Basic information")),(0,Oe.tZ)(la.xJ,{label:(0,H.t)("Name"),required:!0},(0,Oe.tZ)(ra.II,{"aria-label":(0,H.t)("Name"),name:"name",type:"text",value:c,onChange:e=>{var t;return d(null!=(t=e.target.value)?t:"")}})),(0,Oe.tZ)(la.xJ,{label:(0,H.t)("Description")},(0,Oe.tZ)(ra.Kx,{rows:3,name:"description",value:h,onChange:e=>{var t;return p(null!=(t=e.target.value)?t:"")},style:{maxWidth:"100%"}}),(0,Oe.tZ)("p",{className:"help-block"},(0,H.t)("The description can be displayed as widget headers in the dashboard view. Supports markdown.")))),(0,Oe.tZ)(ra.JX,{xs:24,md:12},(0,Oe.tZ)("h3",null,(0,H.t)("Configuration")),(0,Oe.tZ)(la.xJ,{label:(0,H.t)("Cache timeout")},(0,Oe.tZ)(ra.II,{name:"cacheTimeout",type:"text",value:f,onChange:e=>{var t;const a=null!=(t=e.target.value)?t:"";m(a.replace(/[^0-9]/,""))}}),(0,Oe.tZ)("p",{className:"help-block"},(0,H.t)("Duration (in seconds) of the caching timeout for this chart. Note this defaults to the dataset's timeout if undefined."))),(0,Oe.tZ)("h3",{style:{marginTop:"1em"}},(0,H.t)("Access")),(0,Oe.tZ)(la.xJ,{label:_},(0,Oe.tZ)(oa.P,{ariaLabel:_,mode:"multiple",name:"owners",value:i||[],onChange:l,options:v,disabled:!i,allowClear:!0}),(0,Oe.tZ)("p",{className:"help-block"},(0,H.t)("A list of users who can alter the chart. Searchable by name or username.")))))))}var da=a(10222),ua=a(14114),ha=a(87189),pa=a(76697),fa=a(13433),ma=a(23525);const ga={latestQueryFormData:rt().object.isRequired};class ba extends o.Component{constructor(e){super(e),this.state={height:"400",width:"600",shortUrlId:0},this.handleInputChange=this.handleInputChange.bind(this),this.getCopyUrl=this.getCopyUrl.bind(this),this.onShortUrlSuccess=this.onShortUrlSuccess.bind(this)}onShortUrlSuccess(e){const t=e.substring(e.indexOf("/r/")+3);this.setState((()=>({shortUrlId:t})))}getCopyUrl(){return(0,ma.O)((0,w.vp)(this.props.latestQueryFormData)).then(this.onShortUrlSuccess).catch(this.props.addDangerToast)}handleInputChange(e){const{value:t,name:a}=e.currentTarget,r={};r[a]=t,this.setState(r)}generateEmbedHTML(){const e=`${window.location.origin+(0,w.sW)()}?r=${this.state.shortUrlId}&${ct.KD.standalone.name}=1&height=${this.state.height}`;return`<iframe\n  width="${this.state.width}"\n  height="${this.state.height}"\n  seamless\n  frameBorder="0"\n  scrolling="no"\n  src="${e}"\n>\n</iframe>`}renderPopoverContent(){const e=this.generateEmbedHTML();return(0,Oe.tZ)("div",{id:"embed-code-popover"},(0,Oe.tZ)("div",{className:"row"},(0,Oe.tZ)("div",{className:"col-sm-10"},(0,Oe.tZ)("textarea",{name:"embedCode",value:e,rows:"4",readOnly:!0,className:"form-control input-sm"})),(0,Oe.tZ)("div",{className:"col-sm-2"},(0,Oe.tZ)(fa.Z,{shouldShowText:!1,text:e,copyNode:(0,Oe.tZ)("i",{className:"fa fa-clipboard",title:(0,H.t)("Copy to clipboard")})}))),(0,Oe.tZ)("br",null),(0,Oe.tZ)("div",{className:"row"},(0,Oe.tZ)("div",{className:"col-md-6 col-sm-12"},(0,Oe.tZ)("div",{className:"form-group"},(0,Oe.tZ)("small",null,(0,Oe.tZ)(la.lX,{htmlFor:"embed-height"},(0,H.t)("Height"))),(0,Oe.tZ)("input",{className:"form-control input-sm",type:"text",defaultValue:this.state.height,name:"height",onChange:this.handleInputChange}))),(0,Oe.tZ)("div",{className:"col-md-6 col-sm-12"},(0,Oe.tZ)("div",{className:"form-group"},(0,Oe.tZ)("small",null,(0,Oe.tZ)(la.lX,{htmlFor:"embed-width"},(0,H.t)("Width"))),(0,Oe.tZ)("input",{className:"form-control input-sm",type:"text",defaultValue:this.state.width,name:"width",onChange:this.handleInputChange,id:"embed-width"})))))}render(){return(0,Oe.tZ)(pa.Z,{trigger:"click",placement:"left",onClick:this.getCopyUrl,content:this.renderPopoverContent()},(0,Oe.tZ)(ot.u,{id:"embed-code-tooltip",placement:"top",title:"Embed code",trigger:["hover"]},(0,Oe.tZ)("div",{className:"btn btn-default btn-sm",style:{display:"flex",alignItems:"center",height:30}},(0,Oe.tZ)(ke.Z.Code,{iconSize:"l"}))))}}ba.propTypes=ga;var va=a(56727),ya=a(15423);const _a={onOpenPropertiesModal:rt().func,onOpenInEditor:rt().func,chartStatus:rt().string,latestQueryFormData:rt().object.isRequired,slice:rt().object},Sa="edit_properties",Ea="run_in_sql_lab",Za="download_as_image",wa=e=>{const{datasource:t}=e.latestQueryFormData,a=t&&"table"===t.split("__")[1],{slice:r}=e;return(0,Oe.tZ)(ra.Lt,{trigger:"click",overlay:(0,Oe.tZ)(ra.v2,{onClick:({key:t,domEvent:a})=>{var r;const{slice:n,onOpenInEditor:o,latestQueryFormData:s}=e;switch(t){case Sa:e.onOpenPropertiesModal();break;case Ea:o(s);break;case Za:(0,va.Z)(".panel-body > .chart-container",null!=(r=null==n?void 0:n.slice_name)?r:(0,H.t)("New chart"),{},!0)(a)}},selectable:!1},r&&(0,Oe.tZ)(ra.v2.Item,{key:Sa},(0,H.t)("Edit properties")),(0,Oe.tZ)(ra.v2.Item,{key:"view_query"},(0,Oe.tZ)(Ft.Z,{triggerNode:(0,Oe.tZ)("span",null,(0,H.t)("View query")),modalTitle:(0,H.t)("View query"),modalBody:(0,Oe.tZ)(ya.Z,{latestQueryFormData:e.latestQueryFormData}),draggable:!0,resizable:!0,responsive:!0})),a&&(0,Oe.tZ)(ra.v2.Item,{key:Ea},(0,H.t)("Run in SQL Lab")),(0,Oe.tZ)(ra.v2.Item,{key:Za},(0,H.t)("Download as image")))},(0,Oe.tZ)("div",{role:"button",id:"query",tabIndex:0,className:"btn btn-default btn-sm"},(0,Oe.tZ)("i",{role:"img",className:"fa fa-bars"})))};wa.propTypes=_a;const Ca=(0,Ze.$j)(null,(function(e){return(0,i.DE)({sliceUpdated:_e},e)}))(wa);var Ta={name:"yc7s2v",styles:"display:flex;align-items:center;&:focus, &:focus:active{outline:0;}"};const Ra=e=>{const{icon:t,text:a,tooltip:r,className:n,onTooltipVisibilityChange:o,...s}=e;return(0,Oe.tZ)(ot.u,{id:`${t}-tooltip`,placement:"top",title:r,trigger:["hover"],onVisibleChange:o},(0,Oe.tZ)("div",Ke()({role:"button",tabIndex:0,css:Ta,className:n||"btn btn-default btn-sm",style:{height:30}},s),t,a&&(0,Oe.tZ)("span",{style:{marginLeft:5}},a)))},xa=(0,ua.Z)((e=>{const{actions:t,canDownloadCSV:a,chartStatus:r,latestQueryFormData:n,slice:s,addDangerToast:i}=e,l=(0,H.t)("Copy chart URL to clipboard"),[c,d]=(0,o.useState)(l),u=(0,w.vp)(n),h=(0,ha.n)(u),p=a?w.pe.bind(void 0,{formData:n,resultType:"full",resultFormat:"csv"}):null,f=w.pe.bind(void 0,{formData:n,resultType:"results",resultFormat:"json"}),m=Ne()("btn btn-default btn-sm",{disabled:!a});return(0,Oe.tZ)("div",{className:"btn-group results",role:"group"},n&&(0,Oe.tZ)(o.Fragment,null,(0,Oe.tZ)(Ra,{icon:(0,Oe.tZ)(ke.Z.Link,{iconSize:"l"}),tooltip:c,onClick:async()=>{try{d((0,H.t)("Loading..."));const e=await h();await(0,da.Z)(e),d((0,H.t)("Copied to clipboard!"))}catch(e){d((0,H.t)("Sorry, your browser does not support copying."))}},onTooltipVisibilityChange:e=>!e&&setTimeout((()=>d(l)),200)}),(0,Oe.tZ)(Ra,{icon:(0,Oe.tZ)(ke.Z.Email,{iconSize:"l"}),tooltip:(0,H.t)("Share chart by email"),onClick:async()=>{try{const e=(0,H.t)("Superset Chart"),t=await h(),a=(0,H.t)("%s%s","Check out this chart: ",t);window.location.href=`mailto:?Subject=${e}%20&Body=${a}`}catch(e){i((0,H.t)("Sorry, something went wrong. Try again later."))}}}),(0,Oe.tZ)(ba,{latestQueryFormData:n}),(0,Oe.tZ)(Ra,{icon:(0,Oe.tZ)(ke.Z.FileTextOutlined,{iconSize:"m"}),text:".JSON",tooltip:(0,H.t)("Export to .JSON format"),onClick:f}),(0,Oe.tZ)(Ra,{icon:(0,Oe.tZ)(ke.Z.FileExcelOutlined,{iconSize:"m"}),text:".CSV",tooltip:(0,H.t)("Export to .CSV format"),onClick:p,className:m})),(0,Oe.tZ)(Ca,{latestQueryFormData:n,chartStatus:r,onOpenInEditor:t.redirectSQLLab,onOpenPropertiesModal:t.openPropertiesModal,slice:s}))}));var Oa=a(14086);const Aa={failed:"danger",loading:"warning",success:"success"},Na={actions:rt().object.isRequired,addHistory:rt().func,can_overwrite:rt().bool.isRequired,can_download:rt().bool.isRequired,dashboardId:rt().number,isStarred:rt().bool.isRequired,slice:rt().object,sliceName:rt().string,table_name:rt().string,form_data:rt().object,ownState:rt().object,timeout:rt().number,chart:ut.$6},Da=xe.iK.div`
  display: flex;
  flex-direction: row;
  align-items: center;
  flex-wrap: wrap;
  justify-content: space-between;

  span[role='button'] {
    display: flex;
    height: 100%;
  }

  .title-panel {
    display: flex;
    align-items: center;
  }

  .right-button-panel {
    display: flex;
    align-items: center;

    > .btn-group {
      flex: 0 0 auto;
      margin-left: ${({theme:e})=>e.gridUnit}px;
    }
  }

  .action-button {
    color: ${({theme:e})=>e.colors.grayscale.base};
    margin: 0 ${({theme:e})=>1.5*e.gridUnit}px 0
      ${({theme:e})=>e.gridUnit}px;
  }
`,ka=xe.iK.span`
  display: flex;
  align-items: center;
`;class Ia extends o.PureComponent{constructor(e){super(e),this.state={isPropertiesModalOpen:!1,showingReportModal:!1},this.openPropertiesModal=this.openPropertiesModal.bind(this),this.closePropertiesModal=this.closePropertiesModal.bind(this),this.showReportModal=this.showReportModal.bind(this),this.hideReportModal=this.hideReportModal.bind(this),this.renderReportModal=this.renderReportModal.bind(this),this.fetchChartDashboardData=this.fetchChartDashboardData.bind(this)}componentDidMount(){const{dashboardId:e}=this.props;if(this.canAddReports()){const{user:e,chart:t}=this.props;this.props.fetchUISpecificReport(e.userId,"chart_id","charts",t.id)}e&&this.fetchChartDashboardData()}async fetchChartDashboardData(){const{dashboardId:e,slice:t}=this.props,a=(await u.Z.get({endpoint:`/api/v1/chart/${t.slice_id}`})).json.result.dashboards||[],r=e&&a.length&&a.find((t=>t.id===e));if(r&&r.json_metadata){const e=JSON.parse(r.json_metadata).label_colors||{},t=Rt.getNamespace();Object.keys(e).forEach((a=>{t.setColor(a,e[a])}))}}getSliceName(){return this.props.sliceName||(0,H.t)("%s - untitled",this.props.table_name)}postChartFormData(){this.props.actions.postChartFormData(this.props.form_data,!0,this.props.timeout,this.props.chart.id,this.props.ownState)}openPropertiesModal(){this.setState({isPropertiesModalOpen:!0})}closePropertiesModal(){this.setState({isPropertiesModalOpen:!1})}showReportModal(){this.setState({showingReportModal:!0})}hideReportModal(){this.setState({showingReportModal:!1})}renderReportModal(){return Object.keys(this.props.reports).length?(0,Oe.tZ)(At.Z,{showReportModal:this.showReportModal,hideReportModal:this.hideReportModal,toggleActive:this.props.toggleActive,deleteActiveReport:this.props.deleteActiveReport}):(0,Oe.tZ)(o.Fragment,null,(0,Oe.tZ)("span",{role:"button",title:(0,H.t)("Schedule email report"),tabIndex:0,className:"action-button",onClick:this.showReportModal},(0,Oe.tZ)(ke.Z.Calendar,null)))}canAddReports(){if(!(0,y.cr)(Ot.T.ALERT_REPORTS))return!1;const{user:e}=this.props;return!(null==e||!e.userId)&&Object.keys(e.roles||[]).map((t=>e.roles[t].filter((e=>"menu_access"===e[0]&&"Manage"===e[1]))))[0].length>0}render(){var e,t,a;const{user:r,form_data:n}=this.props,{chartStatus:o,chartUpdateEndTime:s,chartUpdateStartTime:i,latestQueryFormData:l,queriesResponse:c}=this.props.chart,d=null==c?void 0:c[0],u=["failed","rendered","success"].includes(this.props.chart.chartStatus);return(0,Oe.tZ)(Da,{id:"slice-header",className:"panel-title-large"},(0,Oe.tZ)("div",{className:"title-panel"},(0,Oe.tZ)(Nt.Z,{title:this.getSliceName(),canEdit:!this.props.slice||this.props.can_overwrite||((null==(e=this.props.slice)?void 0:e.owners)||[]).includes(null==(t=this.props)||null==(a=t.user)?void 0:a.userId),onSaveTitle:this.props.actions.updateChartTitle}),this.props.slice&&(0,Oe.tZ)(ka,null,r.userId&&(0,Oe.tZ)(Wt,{itemId:this.props.slice.slice_id,fetchFaveStar:this.props.actions.fetchFaveStar,saveFaveStar:this.props.actions.saveFaveStar,isStarred:this.props.isStarred,showTooltip:!0}),this.state.isPropertiesModalOpen&&(0,Oe.tZ)(ca,{show:this.state.isPropertiesModalOpen,onHide:this.closePropertiesModal,onSave:this.props.sliceUpdated,slice:this.props.slice}),(0,Oe.tZ)(ot.u,{id:"edit-desc-tooltip",title:(0,H.t)("Edit chart properties")},(0,Oe.tZ)("span",{"aria-label":(0,H.t)("Edit chart properties"),role:"button",tabIndex:0,className:"edit-desc-icon",onClick:this.openPropertiesModal},(0,Oe.tZ)("i",{className:"fa fa-edit"}))),this.props.chart.sliceFormData&&(0,Oe.tZ)(qt,{className:"altered",origFormData:this.props.chart.sliceFormData,currentFormData:n}))),(0,Oe.tZ)("div",{className:"right-button-panel"},u&&d&&(0,Oe.tZ)(Oa.Z,{rowcount:Number(d.rowcount)||0,limit:Number(n.row_limit)||0}),u&&d&&d.is_cached&&(0,Oe.tZ)(ta,{onClick:this.postChartFormData.bind(this),cachedTimestamp:d.cached_dttm}),(0,Oe.tZ)(Yt,{startTime:i,endTime:s,isRunning:"loading"===o,status:Aa[o]}),this.canAddReports()&&this.renderReportModal(),(0,Oe.tZ)(xt.Z,{show:this.state.showingReportModal,onHide:this.hideReportModal,props:{userId:this.props.user.userId,userEmail:this.props.user.email,chart:this.props.chart,creationMethod:"charts"}}),(0,Oe.tZ)(xa,{actions:{...this.props.actions,openPropertiesModal:this.openPropertiesModal},slice:this.props.slice,canDownloadCSV:this.props.can_download,chartStatus:o,latestQueryFormData:l,queryResponse:d})))}}Ia.propTypes=Na;const Ma=(0,Ze.$j)(null,(function(e){return(0,i.DE)({sliceUpdated:_e,fetchUISpecificReport:R.Aw,toggleActive:R.M,deleteActiveReport:R.MZ},e)}))(Ia);var $a=a(43700),Ua=a(40637),Pa=a(38703),ja=a(50909),La=a(54076);const Fa="results",za="samples",Va={[Fa]:void 0,[za]:void 0},Ha="is_datapanel_open",qa="data",Ba=xe.iK.div`
  display: flex;
  align-items: center;

  span {
    flex-shrink: 0;
  }
`,Wa=xe.iK.div`
  position: relative;
  background-color: ${({theme:e})=>e.colors.grayscale.light5};
  z-index: 5;
  overflow: hidden;
`,Ka=xe.iK.div`
  height: ${({contentHeight:e})=>e}px;
  overflow: hidden;

  .table-condensed {
    height: 100%;
    overflow: auto;
  }
`,Ga=xe.iK.div`
  height: 100%;

  .collapse-inner {
    height: 100%;

    .ant-collapse-item {
      height: 100%;

      .ant-collapse-content {
        height: calc(100% - ${({theme:e})=>8*e.gridUnit}px);

        .ant-collapse-content-box {
          padding-top: 0;
          height: 100%;
        }
      }
    }
  }
`,Qa=xe.iK.pre`
  margin-top: ${({theme:e})=>4*e.gridUnit+"px"};
`,Ya=({queryFormData:e,tableSectionHeight:t,onCollapseChange:a,chartStatus:r,ownState:n,errorMessage:s,queriesResponse:i})=>{const[l,c]=(0,o.useState)(Va),[d,u]=(0,o.useState)({[Fa]:!0,[za]:!0}),[h,p]=(0,o.useState)([]),[f,m]=(0,o.useState)(Va),[g,b]=(0,o.useState)(""),[v,y]=(0,o.useState)(Fa),[_,S]=(0,o.useState)(Va),[E,Z]=(0,o.useState)(it(Ha,!1)),w=(0,o.useMemo)((()=>({[Fa]:(0,La.cD)(l.results),[za]:(0,La.cD)(l.samples)})),[l]),C=(0,o.useCallback)((t=>(u((e=>({...e,[t]:!0}))),(0,z.getChartDataRequest)({formData:e,resultFormat:"json",resultType:t,ownState:n}).then((({json:e})=>{if(e.result.length>1){const a=[];e.result.forEach((e=>{e.data.forEach(((e,t)=>{void 0!==a[t]?a[t]={...a[t],...e}:a[t]=e}))})),c((e=>({...e,[t]:a})))}else c((a=>({...a,[t]:e.result[0].data})));u((e=>({...e,[t]:!1}))),m((e=>({...e,[t]:null})))})).catch((e=>{(0,Fe.O)(e).then((({error:e,message:a})=>{m((r=>({...r,[t]:e||a||(0,H.t)("Sorry, An error occurred")}))),u((e=>({...e,[t]:!1})))}))})))),[e]);(0,o.useEffect)((()=>{lt(Ha,E)}),[E]),(0,o.useEffect)((()=>{S((e=>({...e,[Fa]:!0})))}),[e]),(0,o.useEffect)((()=>{S((e=>({...e,[za]:!0})))}),[null==e?void 0:e.adhoc_filters,null==e?void 0:e.datasource]),(0,o.useEffect)((()=>{if(i&&"success"===r){const{colnames:e}=i[0];p([...e])}}),[i]),(0,o.useEffect)((()=>{if(E&&_.results){if(s)return S((e=>({...e,[Fa]:!1}))),void u((e=>({...e,[Fa]:!1})));"loading"===r?u((e=>({...e,[Fa]:!0}))):(S((e=>({...e,[Fa]:!1}))),C(Fa))}E&&_.samples&&v===za&&(S((e=>({...e,[za]:!1}))),C(za))}),[E,_,C,v,r,s]);const T={[Fa]:(0,ja.C4)(g,w.results),[za]:(0,ja.C4)(g,w.samples)},R={[Fa]:(0,ja._q)(h,l.results),[za]:(0,ja._q)(h,l.samples)},x=e=>{return d[e]?(0,Oe.tZ)(Pa.Z,null):f[e]?(0,Oe.tZ)(Qa,null,f[e]):l[e]?0===(null==(t=l[e])?void 0:t.length)?(0,Oe.tZ)("span",null,"No data"):(0,Oe.tZ)(zt.Z,{columns:R[e],data:T[e],pageSize:50,noDataText:(0,H.t)("No data"),emptyWrapperType:zt.u.Small,className:"table-condensed",isPaginationSticky:!0,showRowCount:!1,small:!0}):s?(0,Oe.tZ)(Qa,null,s):null;var t},O=(0,Oe.tZ)(Ba,null,(0,Oe.tZ)(ja.uy,{data:l[v],loading:d[v]}),(0,Oe.tZ)(ja.m,{data:w[v],columns:h}),(0,Oe.tZ)(ja.HS,{onChangeHandler:b}));return(0,Oe.tZ)(Wa,null,(0,Oe.tZ)(Ka,{contentHeight:t},(0,Oe.tZ)(Ga,null,(0,Oe.tZ)($a.Z,{accordion:!0,bordered:!1,defaultActiveKey:E?qa:void 0,onChange:e=>{a(e),Z(!!e)},bold:!0,ghost:!0,className:"collapse-inner"},(0,Oe.tZ)($a.Z.Panel,{header:(0,H.t)("Data"),key:qa},(0,Oe.tZ)(Ua.ZP,{fullWidth:!1,tabBarExtraContent:O,activeKey:v,onChange:y},(0,Oe.tZ)(Ua.ZP.TabPane,{tab:(0,H.t)("View results"),key:Fa},x(Fa)),(0,Oe.tZ)(Ua.ZP.TabPane,{tab:(0,H.t)("View samples"),key:za},x(za))))))))},Ja={actions:rt().object.isRequired,addHistory:rt().func,onQuery:rt().func,can_overwrite:rt().bool.isRequired,can_download:rt().bool.isRequired,datasource:rt().object,dashboardId:rt().number,column_formats:rt().object,containerId:rt().string.isRequired,height:rt().string.isRequired,width:rt().string.isRequired,isStarred:rt().bool.isRequired,slice:rt().object,sliceName:rt().string,table_name:rt().string,vizType:rt().string.isRequired,form_data:rt().object,ownState:rt().object,standalone:rt().number,timeout:rt().number,refreshOverlayVisible:rt().bool,chart:ut.$6,errorMessage:rt().node,triggerRender:rt().bool},Xa=1.25,er="chart_split_sizes",tr=[90,10],ar=[300,50],rr=xe.iK.div`
  display: flex;
  flex-direction: column;
  align-items: stretch;
  align-content: stretch;
  overflow: auto;
  box-shadow: none;
  height: 100%;

  & > div:last-of-type {
    flex-basis: 100%;
  }

  .gutter {
    border-top: 1px solid ${({theme:e})=>e.colors.grayscale.light2};
    border-bottom: 1px solid ${({theme:e})=>e.colors.grayscale.light2};
    width: ${({theme:e})=>9*e.gridUnit}px;
    margin: ${({theme:e})=>e.gridUnit*Xa}px auto;
  }

  .gutter.gutter-vertical {
    cursor: row-resize;
  }

  .ant-collapse {
    .ant-tabs {
      height: 100%;
      .ant-tabs-nav {
        padding-left: ${({theme:e})=>5*e.gridUnit}px;
        margin: 0;
      }
      .ant-tabs-content-holder {
        overflow: hidden;
        .ant-tabs-content {
          height: 100%;
        }
      }
    }
  }
`,nr=e=>{const t=(0,xe.Fg)(),a=t.gridUnit*Xa,r=t.gridUnit*Xa,{height:n,ref:s}=Ct({refreshMode:"debounce",refreshRate:300}),{width:i,ref:l}=Ct({refreshMode:"debounce",refreshRate:300}),[c,d]=(0,o.useState)(it(er,tr)),{slice:h}=e,p=(0,o.useCallback)((async function(){if(h&&null===h.query_context){const e=(0,w.u)({formData:h.form_data,force:!1,resultFormat:"json",resultType:"full",setDataMask:null,ownState:null});await u.Z.put({endpoint:`/api/v1/chart/${h.slice_id}`,headers:{"Content-Type":"application/json"},body:JSON.stringify({query_context:JSON.stringify(e),query_context_generation:!0})})}}),[h]);(0,o.useEffect)((()=>{p()}),[p]);const f=(0,o.useCallback)((t=>{let o;return o=e.standalone?0:n?n+15:50,(parseInt(e.height,10)-o)*t/100-(r/2+a)}),[r,a,e.height,e.standalone,n]),[m,g]=(0,o.useState)(f(tr[1])),b=(0,o.useCallback)((([,e])=>{g(f(e))}),[f]);(0,o.useEffect)((()=>{b(c)}),[b,c]),(0,o.useEffect)((()=>{lt(er,c)}),[c]);const v=(0,o.useCallback)((()=>{const{chart:t,vizType:a}=e,r="filter_box"===a?f(100)-15:f(c[0])-15,n=i-30;return n>0&&(0,Oe.tZ)(Tt.Z,{width:Math.floor(n),height:r,ownState:e.ownState,annotationData:t.annotationData,chartAlert:t.chartAlert,chartStackTrace:t.chartStackTrace,chartId:t.id,chartStatus:t.chartStatus,triggerRender:e.triggerRender,datasource:e.datasource,errorMessage:e.errorMessage,formData:e.form_data,onQuery:e.onQuery,queriesResponse:t.queriesResponse,refreshOverlayVisible:e.refreshOverlayVisible,setControlValue:e.actions.setControlValue,timeout:e.timeout,triggerQuery:t.triggerQuery,vizType:e.vizType})}),[f,i,e,c]),y=(0,o.useMemo)((()=>(0,Oe.tZ)("div",{className:"panel-body",ref:l},v())),[l,v]),_=(0,o.useMemo)((()=>(0,Oe.tZ)("div",{ref:l},v())),[l,v]),[S,E]=(0,o.useState)(e.chart.latestQueryFormData);if((0,o.useEffect)((()=>{e.triggerRender||E(e.chart.latestQueryFormData)}),[e.chart.latestQueryFormData]),e.standalone){const e="background-transparent";return document.body.className.split(" ").includes(e)||(document.body.className+=` ${e}`),_}const Z=(0,Oe.tZ)(Ma,{ownState:e.ownState,actions:e.actions,addHistory:e.addHistory,can_overwrite:e.can_overwrite,can_download:e.can_download,dashboardId:e.dashboardId,isStarred:e.isStarred,slice:e.slice,sliceName:e.sliceName,table_name:e.table_name,form_data:e.form_data,timeout:e.timeout,chart:e.chart,user:e.user,reports:e.reports});return(0,Oe.tZ)(rr,{className:"panel panel-default chart-container",ref:l},(0,Oe.tZ)("div",{className:"panel-heading",ref:s},Z),"filter_box"===e.vizType?y:(0,Oe.tZ)(pt.Z,{sizes:c,minSize:ar,direction:"vertical",gutterSize:r,onDragEnd:e=>{d(e)},elementStyle:(e,t,r)=>({[e]:`calc(${t}% - ${r+a}px)`})},y,(0,Oe.tZ)(Ya,{ownState:e.ownState,queryFormData:S,tableSectionHeight:m,onCollapseChange:e=>{let t;t=e?[60,40]:tr,d(t)},chartStatus:e.chart.chartStatus,errorMessage:e.errorMessage,queriesResponse:e.chart.queriesResponse})))};nr.propTypes=Ja;const or=nr;var sr=a(78209),ir=a(86852),lr=a(88483),cr=a(88186),dr=a(61357),ur=a(47548);const hr=xe.iK.div`
  height: 100%;
  width: 100%;
  overflow: auto;
  overflow-x: visible;
  overflow-y: auto;
  #controlSections {
    min-height: 100%;
    overflow: visible;
  }
  .nav-tabs {
    flex: 0 0 1;
  }
  .tab-content {
    overflow: auto;
    flex: 1 1 100%;
  }
  .Select__menu {
    max-width: 100%;
  }
  .type-label {
    margin-right: ${({theme:e})=>3*e.gridUnit}px;
    width: ${({theme:e})=>7*e.gridUnit}px;
    display: inline-block;
    text-align: center;
    font-weight: ${({theme:e})=>e.typography.weights.bold};
  }
`,pr=(0,xe.iK)(Ua.ZP)`
  .ant-tabs-nav-list {
    width: ${({fullWidth:e})=>e?"100%":"50%"};
  }
  .ant-tabs-content-holder {
    overflow: visible;
  }
  .ant-tabs-tabpane {
    height: 100%;
  }
`,fr=(e,t)=>e.reduce(((e,a)=>!a.expanded||(e=>!!e.label&&(lr.sections.legacyRegularTime.label===e.label||lr.sections.legacyTimeseriesTime.label===e.label))(a)&&!(e=>{var t;return(null==e||null==(t=e.columns)?void 0:t.some((e=>e.is_dttm)))||e.type===sr.i.Druid})(t)?e:[...e,String(a.label)]),[]);function mr(e){const{exploreState:{datasource:t}}=e,a=[],r=[];return(0,T.Bq)(e.form_data.viz_type,e.datasource_type).forEach((e=>{"data"===e.tabOverride||e.controlSetRows.some((e=>e.some((e=>e&&"object"==typeof e&&"config"in e&&e.config&&(!e.config.renderTrigger||"data"===e.config.tabOverride)))))?a.push(e):r.push(e)})),{expandedQuerySections:fr(a,t),expandedCustomizeSections:fr(r,t),querySections:a,customizeSections:r,loading:!1}}class gr extends o.Component{constructor(e){super(e),this.state={expandedQuerySections:[],expandedCustomizeSections:[],querySections:[],customizeSections:[],loading:!1},this.renderControl=this.renderControl.bind(this),this.renderControlPanelSection=this.renderControlPanelSection.bind(this)}componentDidUpdate(e){this.props.form_data.datasource===e.form_data.datasource&&this.props.form_data.viz_type===e.form_data.viz_type||this.setState(mr(this.props))}UNSAFE_componentWillReceiveProps(e){this.props.form_data.datasource===e.form_data.datasource&&this.props.form_data.viz_type===e.form_data.viz_type||this.setState({loading:!0})}componentDidMount(){this.setState(mr(this.props))}renderControl({name:e,config:t}){var a;const{actions:r,controls:n,chart:o,exploreState:s}=this.props,{visibility:i}=t,l={...t,...n[e],...3===(null==(a=t.mapStateToProps)?void 0:a.length)?t.mapStateToProps(s,n[e],o):void 0,name:e},{validationErrors:c,...d}=l;return i&&!i.call(t,this.props,l)?null:(0,Oe.tZ)(ur.Z,Ke()({key:`control-${e}`,name:e,validationErrors:c,actions:r},d))}renderControlPanelSection(e){const{controls:t}=this.props,{label:a,description:r}=e,n=String(a),s=e.controlSetRows.some((e=>e.some((e=>{const a="string"==typeof e?e:e&&"name"in e?e.name:null;return a&&a in t&&t[a].validationErrors&&t[a].validationErrors.length>0}))));return(0,Oe.tZ)($a.Z.Panel,{css:e=>Oe.iv`
          margin-bottom: 0;
          box-shadow: none;

          &:last-child {
            padding-bottom: ${10*e.gridUnit}px;
          }

          .panel-body {
            margin-left: ${4*e.gridUnit}px;
            padding-bottom: 0px;
          }

          span.label {
            display: inline-block;
          }
        `,header:(0,Oe.tZ)("span",null,(0,Oe.tZ)("span",null,a)," ",r&&(0,Oe.tZ)(cr.V,{label:n,tooltip:r}),s&&(0,Oe.tZ)(cr.V,{label:"validation-errors",bsStyle:"danger",tooltip:"This section contains validation errors"})),key:n},e.controlSetRows.map(((e,t)=>{const a=e.map((e=>e?o.isValidElement(e)?e:e.name&&e.config&&"datasource"!==e.name?this.renderControl(e):null:null)).filter((e=>null!==e));return 0===a.length?null:(0,Oe.tZ)(dr.Z,{key:`controlsetrow-${t}`,controls:a})})))}render(){if(!(0,Pt.Z)().has(this.props.form_data.viz_type)&&this.context.loading||this.state.loading)return(0,Oe.tZ)(Pa.Z,null);const e=this.state.customizeSections.length>0;return(0,Oe.tZ)(hr,null,(0,Oe.tZ)(pr,{id:"controlSections",fullWidth:e},(0,Oe.tZ)(Ua.ZP.TabPane,{key:"query",tab:(0,H.t)("Data")},(0,Oe.tZ)($a.Z,{bordered:!0,activeKey:this.state.expandedQuerySections,expandIconPosition:"right",onChange:e=>{this.setState({expandedQuerySections:(0,ir.Z)(e)})},ghost:!0},this.state.querySections.map(this.renderControlPanelSection))),e&&(0,Oe.tZ)(Ua.ZP.TabPane,{key:"display",tab:(0,H.t)("Customize")},(0,Oe.tZ)($a.Z,{bordered:!0,activeKey:this.state.expandedCustomizeSections,expandIconPosition:"right",onChange:e=>{this.setState({expandedCustomizeSections:(0,ir.Z)(e)})},ghost:!0},this.state.customizeSections.map(this.renderControlPanelSection)))))}}gr.contextType=Re.Zn;const br=(0,Ze.$j)((function(e){const{explore:t,charts:a}=e;return{chart:a[Object.keys(a)[0]],isDatasourceMetaLoading:t.isDatasourceMetaLoading,controls:t.controls,exploreState:t}}),(function(e){return{actions:(0,i.DE)(Se,e)}}))(gr);var vr=a(29487),yr=a(30724),_r=a.n(yr),Sr=a(87183);const Er="save_chart_recent_dashboard",Zr=(0,H.t)("**Select** a dashboard OR **create** a new one"),wr=(0,xe.iK)(aa.Z)`
  .ant-modal-body {
    overflow: visible;
  }
`;class Cr extends o.Component{constructor(e){super(e),this.state={saveToDashboardId:null,newSliceName:e.sliceName,alert:null,action:this.canOverwriteSlice()?"overwrite":"saveas"},this.onDashboardSelectChange=this.onDashboardSelectChange.bind(this),this.onSliceNameChange=this.onSliceNameChange.bind(this),this.changeAction=this.changeAction.bind(this),this.saveOrOverwrite=this.saveOrOverwrite.bind(this)}canOverwriteSlice(){var e,t;return null==(e=this.props.slice)||null==(t=e.owners)?void 0:t.includes(this.props.userId)}componentDidMount(){this.props.actions.fetchDashboards(this.props.userId).then((()=>{const e=this.props.dashboards.map((e=>e.value)),t=sessionStorage.getItem(Er);let a=t&&parseInt(t,10);this.props.dashboardId&&(a=this.props.dashboardId),null!==a&&-1!==e.indexOf(a)&&this.setState({saveToDashboardId:a})}))}onSliceNameChange(e){this.setState({newSliceName:e.target.value})}onDashboardSelectChange(e){const t=e?String(e):void 0,a=e&&"number"==typeof e?e:null;this.setState({saveToDashboardId:a,newDashboardName:t})}changeAction(e){this.setState({action:e})}saveOrOverwrite(e){this.setState({alert:null}),this.props.actions.removeSaveModalAlert();const t={};this.props.slice&&this.props.slice.slice_id&&(t.slice_id=this.props.slice.slice_id),"saveas"!==t.action||""!==this.state.newSliceName?(t.action=this.state.action,t.slice_name=this.state.newSliceName,t.save_to_dashboard_id=this.state.saveToDashboardId,t.new_dashboard_name=this.state.newDashboardName,this.props.actions.saveSlice(this.props.form_data,t).then((t=>{null===t.dashboard_id?sessionStorage.removeItem(Er):sessionStorage.setItem(Er,t.dashboard_id);const a=e?t.dashboard_url:t.slice.slice_url;window.location.assign(a)})),this.props.onHide()):this.setState({alert:(0,H.t)("Please enter a chart name")})}removeAlert(){this.props.alert&&this.props.actions.removeSaveModalAlert(),this.setState({alert:null})}render(){const e=this.state.saveToDashboardId||this.state.newDashboardName;return(0,Oe.tZ)(wr,{show:!0,onHide:this.props.onHide,title:(0,H.t)("Save chart"),footer:(0,Oe.tZ)("div",null,(0,Oe.tZ)(na.Z,{id:"btn_cancel",buttonSize:"small",onClick:this.props.onHide},(0,H.t)("Cancel")),(0,Oe.tZ)(na.Z,{id:"btn_modal_save_goto_dash",buttonSize:"small",disabled:!this.state.newSliceName||!this.state.saveToDashboardId&&!this.state.newDashboardName,onClick:()=>this.saveOrOverwrite(!0)},(0,H.t)("Save & go to dashboard")),(0,Oe.tZ)(na.Z,{id:"btn_modal_save",buttonSize:"small",buttonStyle:"primary",onClick:()=>this.saveOrOverwrite(!1),disabled:!this.state.newSliceName},!this.canOverwriteSlice()&&this.props.slice?(0,H.t)("Save as new chart"):(0,H.t)("Save")))},(0,Oe.tZ)(la.l0,{layout:"vertical"},(this.state.alert||this.props.alert)&&(0,Oe.tZ)(vr.Z,{type:"warning",message:(0,Oe.tZ)(o.Fragment,null,this.state.alert?this.state.alert:this.props.alert,(0,Oe.tZ)("i",{role:"button","aria-label":"Remove alert",tabIndex:0,className:"fa fa-close pull-right",onClick:this.removeAlert.bind(this),style:{cursor:"pointer"}}))}),(0,Oe.tZ)(la.xJ,null,(0,Oe.tZ)(Sr.Y,{id:"overwrite-radio",disabled:!this.canOverwriteSlice(),checked:"overwrite"===this.state.action,onChange:()=>this.changeAction("overwrite")},(0,H.t)("Save (Overwrite)")),(0,Oe.tZ)(Sr.Y,{id:"saveas-radio",checked:"saveas"===this.state.action,onChange:()=>this.changeAction("saveas")}," ",(0,H.t)("Save as ..."),"  ")),(0,Oe.tZ)("hr",null),(0,Oe.tZ)(la.xJ,{label:(0,H.t)("Chart name"),required:!0},(0,Oe.tZ)(ra.II,{name:"new_slice_name",type:"text",placeholder:"Name",value:this.state.newSliceName,onChange:this.onSliceNameChange})),(0,Oe.tZ)(la.xJ,{label:(0,H.t)("Add to dashboard")},(0,Oe.tZ)(oa.P,{allowClear:!0,allowNewOptions:!0,ariaLabel:(0,H.t)("Select a dashboard"),options:this.props.dashboards,onChange:this.onDashboardSelectChange,value:e||void 0,placeholder:(0,Oe.tZ)(_r(),{source:Zr,renderers:{paragraph:"span"}})}))))}}const Tr=(0,Ze.$j)((function({explore:e,saveModal:t}){var a;return{datasource:e.datasource,slice:e.slice,userId:null==(a=e.user)?void 0:a.userId,dashboards:t.dashboards,alert:t.saveModalAlert}}),(()=>({})))(Cr);var Rr=a(37488);const xr={canAdd:rt().bool.isRequired,onQuery:rt().func.isRequired,onSave:rt().func,onStop:rt().func,loading:rt().bool,chartIsStale:rt().bool,errorMessage:rt().node};function Or({canAdd:e,onQuery:t,onSave:a,onStop:r,loading:n,chartIsStale:o,errorMessage:s}){let i="tertiary";s?i="danger":o&&(i="primary");const l=!!s||n,c=n?(0,Oe.tZ)(na.Z,{onClick:r,buttonStyle:"warning",buttonSize:"small",disabled:!e},(0,Oe.tZ)("i",{className:"fa fa-stop-circle-o"})," ",(0,H.t)("Stop")):(0,Oe.tZ)(na.Z,{buttonSize:"small",onClick:t,buttonStyle:i,disabled:!!s},(0,Oe.tZ)("i",{className:"fa fa-bolt"})," ",(0,H.t)("Run")),d=(0,xe.Fg)();return(0,Oe.tZ)("div",{css:(0,Oe.iv)({display:"flex",flexShrink:0,flexDirection:"row",alignItems:"center",paddingTop:2*d.gridUnit,paddingRight:2*d.gridUnit,paddingBottom:0,paddingLeft:4*d.gridUnit,"& button":{width:100},".errMsg":{marginLeft:4*d.gridUnit}},"","")},(0,Oe.tZ)(Rr.Z,{className:"query-and-save"},c,(0,Oe.tZ)(na.Z,{buttonStyle:"tertiary",buttonSize:"small","data-target":"#save_modal","data-toggle":"modal",disabled:l,onClick:a},(0,Oe.tZ)("i",{className:"fa fa-plus-circle"})," ",(0,H.t)("Save"))),s&&(0,Oe.tZ)("span",{className:"errMsg"}," ",(0,Oe.tZ)(ot.u,{id:"query-error-tooltip",placement:"right",title:s},(0,Oe.tZ)("i",{className:"fa fa-exclamation-circle text-danger fa-lg"}))))}Or.propTypes=xr,Or.defaultProps={onStop:()=>{},onSave:()=>{}};var Ar=a(90233),Nr=a(27034),Dr=a(42753),kr=a(99963);const Ir=xe.iK.div`
  display: flex;
  align-items: center;
  width: 100%;
  height: ${({theme:e})=>6*e.gridUnit}px;
  cursor: pointer;

  > div {
    width: 100%;
  }

  :hover {
    background-color: ${({theme:e})=>e.colors.grayscale.light2};
  }
`;function Mr(e){const{labelRef:t,showTooltip:a,type:r,value:n}=e,[{isDragging:o},s]=(0,Nr.c)({item:{value:e.value,type:e.type},collect:e=>({isDragging:e.isDragging()})}),i={labelRef:t,showTooltip:!o&&a,showType:!0};return(0,Oe.tZ)(Ir,{ref:s},r===Dr.g.Column?(0,Oe.tZ)(kr.l,Ke()({column:n},i)):(0,Oe.tZ)(kr.B,Ke()({metric:n},i)))}const $r=xe.iK.button`
  background: none;
  border: none;
  text-decoration: underline;
  color: ${({theme:e})=>e.colors.primary.dark1};
`,Ur=xe.iK.div`
  text-align: center;
  padding-top: 2px;
`,Pr=xe.iK.div`
  ${({theme:e})=>Oe.iv`
    background-color: ${e.colors.grayscale.light4};
    position: relative;
    height: 100%;
    display: flex;
    flex-direction: column;
    max-height: 100%;
    .ant-collapse {
      height: auto;
    }
    .field-selections {
      padding: 0 0 ${4*e.gridUnit}px;
      overflow: auto;
    }
    .field-length {
      margin-bottom: ${2*e.gridUnit}px;
      font-size: ${e.typography.sizes.s}px;
      color: ${e.colors.grayscale.light1};
    }
    .form-control.input-md {
      width: calc(100% - ${4*e.gridUnit}px);
      height: ${8*e.gridUnit}px;
      margin: ${2*e.gridUnit}px auto;
    }
    .type-label {
      font-weight: ${e.typography.weights.light};
      font-size: ${e.typography.sizes.s}px;
      color: ${e.colors.grayscale.base};
    }
    .Control {
      padding-bottom: 0;
    }
  `};
`,jr=xe.iK.div`
  overflow: hidden;
  text-overflow: ellipsis;

  & > span {
    white-space: nowrap;
  }

  .option-label {
    display: inline;
  }

  .metric-option {
    & > svg {
      min-width: ${({theme:e})=>4*e.gridUnit+"px"};
    }
    & > .option-label {
      overflow: hidden;
      text-overflow: ellipsis;
    }
  }
`,Lr=e=>{const t=(0,o.useRef)(null),[a,r]=(0,o.useState)(!0),n={labelRef:t,showTooltip:a};return(0,Oe.tZ)(jr,{onMouseEnter:()=>{const e=!!(t&&t.current&&t.current.scrollWidth>t.current.clientWidth);e!==a&&r(e)},onMouseLeave:()=>{r(!0)},className:e.className},o.cloneElement(e.children,n))},Fr=(0,y.cr)(Ot.T.ENABLE_EXPLORE_DRAG_AND_DROP);function zr({datasource:e,controls:{datasource:t},actions:a}){const{columns:r,metrics:n}=e,s=(0,o.useMemo)((()=>[...r].sort(((e,t)=>e.is_dttm&&!t.is_dttm?-1:t.is_dttm&&!e.is_dttm?1:0))),[r]),[i,l]=(0,o.useState)(""),[c,d]=(0,o.useState)({columns:s,metrics:n}),[u,h]=(0,o.useState)(!1),[p,f]=(0,o.useState)(!1),m=(0,o.useMemo)((()=>g()((e=>{d(""!==e?{columns:(0,Ar.Lu)(s,e,{keys:[{key:"verbose_name",threshold:Ar.tL.CONTAINS},{key:"column_name",threshold:Ar.tL.CONTAINS},{key:e=>[e.description,e.expression].map((e=>(null==e?void 0:e.replace(/[_\n\s]+/g," "))||"")),threshold:Ar.tL.CONTAINS,maxRanking:Ar.tL.CONTAINS}],keepDiacritics:!0}),metrics:(0,Ar.Lu)(n,e,{keys:[{key:"verbose_name",threshold:Ar.tL.CONTAINS},{key:"metric_name",threshold:Ar.tL.CONTAINS},{key:e=>[e.description,e.expression].map((e=>(null==e?void 0:e.replace(/[_\n\s]+/g," "))||"")),threshold:Ar.tL.CONTAINS,maxRanking:Ar.tL.CONTAINS}],keepDiacritics:!0,baseSort:(e,t)=>Number(t.item.is_certified)-Number(e.item.is_certified)||String(e.rankedValue).localeCompare(t.rankedValue)})}:{columns:s,metrics:n})}),ct.oP)),[s,n]);(0,o.useEffect)((()=>{d({columns:s,metrics:n}),l("")}),[s,e,n]);const b=(0,o.useMemo)((()=>u?c.metrics:c.metrics.slice(0,50)),[c.metrics,u]),v=(0,o.useMemo)((()=>(p?c.columns:c.columns.slice(0,50)).sort(((e,t)=>t.is_certified-e.is_certified))),[c.columns,p]),y=(0,o.useMemo)((()=>(0,Oe.tZ)(o.Fragment,null,(0,Oe.tZ)(ra.II,{allowClear:!0,onChange:e=>{l(e.target.value),m(e.target.value)},value:i,className:"form-control input-md",placeholder:(0,H.t)("Search Metrics & Columns")}),(0,Oe.tZ)("div",{className:"field-selections"},(0,Oe.tZ)($a.Z,{bordered:!0,defaultActiveKey:["metrics","column"],expandIconPosition:"right",ghost:!0},(0,Oe.tZ)($a.Z.Panel,{header:(0,Oe.tZ)("span",{className:"header"},(0,H.t)("Metrics")),key:"metrics"},(0,Oe.tZ)("div",{className:"field-length"},(0,H.t)("Showing %s of %s",b.length,c.metrics.length)),b.map((e=>(0,Oe.tZ)(Lr,{key:e.metric_name,className:"column"},Fr?(0,Oe.tZ)(Mr,{value:e,type:Dr.g.Metric}):(0,Oe.tZ)(kr.B,{metric:e,showType:!0})))),c.metrics.length>50?(0,Oe.tZ)(Ur,null,(0,Oe.tZ)($r,{onClick:()=>h(!u)},u?(0,H.t)("Show less..."):(0,H.t)("Show all..."))):(0,Oe.tZ)(o.Fragment,null)),(0,Oe.tZ)($a.Z.Panel,{header:(0,Oe.tZ)("span",{className:"header"},(0,H.t)("Columns")),key:"column"},(0,Oe.tZ)("div",{className:"field-length"},(0,H.t)("Showing %s of %s",v.length,c.columns.length)),v.map((e=>(0,Oe.tZ)(Lr,{key:e.column_name,className:"column"},Fr?(0,Oe.tZ)(Mr,{value:e,type:Dr.g.Column}):(0,Oe.tZ)(kr.l,{column:e,showType:!0})))),c.columns.length>50?(0,Oe.tZ)(Ur,null,(0,Oe.tZ)($r,{onClick:()=>f(!p)},p?(0,H.t)("Show Less..."):(0,H.t)("Show all..."))):(0,Oe.tZ)(o.Fragment,null)))))),[v,i,c.columns.length,c.metrics.length,b,m,p,u]);return(0,Oe.tZ)(Pr,null,(0,Oe.tZ)(ur.Z,Ke()({},t,{name:"datasource",actions:a})),null!=e.id&&y)}const Vr={...or.propTypes,height:rt().string,width:rt().string,actions:rt().object.isRequired,datasource_type:rt().string.isRequired,dashboardId:rt().number,isDatasourceMetaLoading:rt().bool.isRequired,chart:ut.$6.isRequired,slice:rt().object,sliceName:rt().string,controls:rt().object.isRequired,forcedHeight:rt().string,form_data:rt().object.isRequired,standalone:rt().number.isRequired,timeout:rt().number,impressionId:rt().string,vizType:rt().string},Hr=xe.iK.div`
  background: ${({theme:e})=>e.colors.grayscale.light5};
  text-align: left;
  position: relative;
  width: 100%;
  max-height: 100%;
  display: flex;
  flex-direction: row;
  flex-wrap: nowrap;
  flex-basis: 100vh;
  align-items: stretch;
  border-top: 1px solid ${({theme:e})=>e.colors.grayscale.light2};
  .explore-column {
    display: flex;
    flex-direction: column;
    padding: ${({theme:e})=>2*e.gridUnit}px 0;
    max-height: 100%;
  }
  .data-source-selection {
    background-color: ${({theme:e})=>e.colors.grayscale.light4};
    padding: ${({theme:e})=>2*e.gridUnit}px 0;
    border-right: 1px solid ${({theme:e})=>e.colors.grayscale.light2};
  }
  .main-explore-content {
    flex: 1;
    min-width: ${({theme:e})=>128*e.gridUnit}px;
    border-left: 1px solid ${({theme:e})=>e.colors.grayscale.light2};
    .panel {
      margin-bottom: 0;
    }
  }
  .controls-column {
    align-self: flex-start;
    padding: 0;
  }
  .title-container {
    position: relative;
    display: flex;
    flex-direction: row;
    padding: 0 ${({theme:e})=>2*e.gridUnit}px;
    justify-content: space-between;
    .horizontal-text {
      text-transform: uppercase;
      color: ${({theme:e})=>e.colors.grayscale.light1};
      font-size: ${({theme:e})=>4*e.typography.sizes.s};
    }
  }
  .no-show {
    display: none;
  }
  .vertical-text {
    writing-mode: vertical-rl;
    text-orientation: mixed;
  }
  .sidebar {
    height: 100%;
    background-color: ${({theme:e})=>e.colors.grayscale.light4};
    padding: ${({theme:e})=>2*e.gridUnit}px;
    width: ${({theme:e})=>8*e.gridUnit}px;
  }
  .callpase-icon > svg {
    color: ${({theme:e})=>e.colors.primary.base};
  }
`,qr=()=>({height:window.innerHeight,width:window.innerWidth});function Br(e){const t=(0,Re.gp)().dynamicPlugins[e.vizType],a=t&&t.mounting,r=(0,st.D)(a),n=(0,st.D)(e.controls),[s,i]=(0,o.useState)(e.controls),l=function({delayMs:e=250}={}){const[t,a]=(0,o.useState)(qr());return(0,o.useEffect)((()=>{const t=g()((()=>a(qr())),e);return window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)}),[]),t}(),[c,d]=(0,o.useState)(!1),[u,h]=(0,o.useState)(!1),p=(0,xe.Fg)(),m=`${l.width}px`,b=e.standalone?0:90,v=e.forcedHeight?`${e.forcedHeight}px`:l.height-b+"px",y="controls_width",S="datasource_width",E={controls_width:320,datasource_width:300},Z=(0,o.useCallback)((({isReplace:t=!1,title:a}={})=>{const r=e.dashboardId?{...e.form_data,dashboardId:e.dashboardId}:e.form_data,n={...r},o=(0,w.vp)(r,e.standalone?ct.KD.standalone.name:null,!1);try{t?window.history.replaceState(n,a,o):window.history.pushState(n,a,o)}catch(e){console.warn("Failed at altering browser history",n,a,o)}}),[e.form_data,e.standalone]);function C(){const t=window.history.state;t&&Object.keys(t).length&&(e.actions.setExploreControls(t),e.actions.postChartFormData(t,!1,e.timeout,e.chart.id))}const R=(0,o.useCallback)((()=>{e.actions.triggerQuery(!0,e.chart.id),Z(),i(e.controls)}),[e.controls,Z,e.actions,e.chart.id]);function x(t){if(t.ctrlKey||t.metaKey){const a="Enter"===t.key||13===t.keyCode,r="s"===t.key||83===t.keyCode;a?R():r&&e.slice&&e.actions.saveSlice(e.form_data,{action:"overwrite",slice_id:e.slice.slice_id,slice_name:e.slice.slice_name,add_to_dash:"noSave",goto_dash:!1}).then((({data:e})=>{window.location=e.slice.slice_url}))}}function O(){d(!c)}function A(){h(!u)}(0,o.useEffect)((()=>(e.actions.logEvent(f.$b),Z({isReplace:!0}),window.addEventListener("popstate",C),document.addEventListener("keydown",x),()=>{window.removeEventListener("popstate",C),document.removeEventListener("keydown",x)})),[]),(0,o.useEffect)((()=>{r&&!a&&e.actions.dynamicPluginControlsReady()}),[a]),(0,o.useEffect)((()=>{Object.values(e.controls).some((e=>e.validationErrors&&e.validationErrors.length>0))||e.actions.triggerQuery(!0,e.chart.id)}),[]);const N=()=>{e.actions.updateQueryFormData((0,T.Hu)(e.controls),e.chart.id),e.actions.renderTriggered((new Date).getTime(),e.chart.id),Z()};(0,o.useEffect)((()=>{n&&(!e.controls.datasource||null!=n.datasource&&e.controls.datasource.value===n.datasource.value||(0,dt.QR)(e.form_data.datasource,!0),Object.keys(e.controls).filter((t=>void 0!==n[t]&&!(0,_.JB)(e.controls[t].value,n[t].value))).some((t=>e.controls[t].renderTrigger))&&N())}),[e.controls,e.ownState]);const D=(0,o.useMemo)((()=>!!s&&Object.keys(e.controls).filter((t=>void 0!==s[t]&&!(0,_.JB)(e.controls[t].value,s[t].value))).some((t=>!e.controls[t].renderTrigger&&!e.controls[t].dontRefreshOnChange))),[s,e.controls]);function k(){const t=Object.values(e.controls).filter((e=>e.validationErrors&&e.validationErrors.length>0));if(0===t.length)return null;const a=t.map((e=>e.validationErrors)),r=[...new Set(a.flat())].map((e=>[t.filter((t=>{var a;return null==(a=t.validationErrors)?void 0:a.includes(e)})).map((e=>e.label)),e])).map((([e,t])=>(0,Oe.tZ)("div",{key:t},e.length>1?(0,H.t)("Controls labeled "):(0,H.t)("Control labeled "),(0,Oe.tZ)("strong",null,` ${e.join(", ")}`),(0,Oe.tZ)("span",null,": ",t))));let n;return r.length>0&&(n=(0,Oe.tZ)("div",{style:{textAlign:"left"}},r)),n}function I(){return(0,Oe.tZ)(or,Ke()({width:m,height:v},e,{errorMessage:k(),refreshOverlayVisible:D,addHistory:Z,onQuery:R}))}function M(e){return it(e,E[e])}function $(e,t){const a=Number(M(e))+t.width;lt(e,a)}return(0,o.useEffect)((()=>{void 0!==e.ownState&&(R(),N())}),[e.ownState]),D&&e.actions.logEvent(f.Ep),e.standalone?I():(0,Oe.tZ)(Hr,{id:"explore-container",height:v},(0,Oe.tZ)(Oe.xB,{styles:Oe.iv`
          .navbar {
            margin-bottom: 0;
          }
          body {
            height: 100vh;
            max-height: 100vh;
            overflow: hidden;
          }
          #app-menu,
          #app {
            flex: 1 1 auto;
          }
          #app {
            flex-basis: 100%;
            overflow: hidden;
            height: 100%;
          }
          #app-menu {
            flex-shrink: 0;
          }
        `}),c&&(0,Oe.tZ)(Tr,{onHide:O,actions:e.actions,form_data:e.form_data,sliceName:e.sliceName,dashboardId:e.dashboardId}),(0,Oe.tZ)(nt.e,{onResizeStop:(e,t,a,r)=>$(S,r),defaultSize:{width:M(S),height:"100%"},minWidth:E.datasource_width,maxWidth:"33%",enable:{right:!0},className:u?"no-show":"explore-column data-source-selection"},(0,Oe.tZ)("div",{className:"title-container"},(0,Oe.tZ)("span",{className:"horizont al-text"},(0,H.t)("Dataset")),(0,Oe.tZ)("span",{role:"button",tabIndex:0,className:"action-button",onClick:A},(0,Oe.tZ)(ke.Z.Expand,{className:"collapse-icon",iconColor:p.colors.primary.base,iconSize:"l"}))),(0,Oe.tZ)(zr,{datasource:e.datasource,controls:e.controls,actions:e.actions})),u?(0,Oe.tZ)("div",{className:"sidebar",onClick:A,role:"button",tabIndex:0},(0,Oe.tZ)("span",{role:"button",tabIndex:0,className:"action-button"},(0,Oe.tZ)(ot.u,{title:(0,H.t)("Open Datasource tab")},(0,Oe.tZ)(ke.Z.Collapse,{className:"collapse-icon",iconColor:p.colors.primary.base,iconSize:"l"}))),(0,Oe.tZ)(ke.Z.DatasetPhysical,{css:(0,Oe.iv)({marginTop:2*p.gridUnit},"",""),iconSize:"l",iconColor:p.colors.grayscale.base})):null,(0,Oe.tZ)(nt.e,{onResizeStop:(e,t,a,r)=>$(y,r),defaultSize:{width:M(y),height:"100%"},minWidth:E.controls_width,maxWidth:"33%",enable:{right:!0},className:"col-sm-3 explore-column controls-column"},(0,Oe.tZ)(Or,{canAdd:!(!e.can_add&&!e.can_overwrite),onQuery:R,onSave:O,onStop:function(){e.chart&&e.chart.queryController&&e.chart.queryController.abort()},loading:"loading"===e.chart.chartStatus,chartIsStale:D,errorMessage:k(),datasourceType:e.datasource_type}),(0,Oe.tZ)(br,{actions:e.actions,form_data:e.form_data,controls:e.controls,datasource_type:e.datasource_type,isDatasourceMetaLoading:e.isDatasourceMetaLoading})),(0,Oe.tZ)("div",{className:Ne()("main-explore-content",u?"col-sm-9":"col-sm-7")},I()))}Br.propTypes=Vr;const Wr=(0,Ze.$j)((function(e){var t,a,r,n;const{explore:o,charts:s,impressionId:i,dataMask:l,reports:c}=e,d=(0,T.Hu)(o.controls);d.extra_form_data=(0,ht.on)({...d.extra_form_data},{...null==(t=l[null!=(a=d.slice_id)?a:0])?void 0:t.ownState});const u=s[Object.keys(s)[0]];return{isDatasourceMetaLoading:o.isDatasourceMetaLoading,datasource:o.datasource,datasource_type:o.datasource.type,datasourceId:o.datasource_id,dashboardId:o.form_data?o.form_data.dashboardId:void 0,controls:o.controls,can_overwrite:!!o.can_overwrite,can_add:!!o.can_add,can_download:!!o.can_download,column_formats:o.datasource?o.datasource.column_formats:null,containerId:o.slice?`slice-container-${o.slice.slice_id}`:"slice-container",isStarred:o.isStarred,slice:o.slice,sliceName:o.sliceName,triggerRender:o.triggerRender,form_data:d,table_name:d.datasource_name,vizType:d.viz_type,standalone:o.standalone,forcedHeight:o.forced_height,chart:u,timeout:o.common.conf.SUPERSET_WEBSERVER_TIMEOUT,ownState:null==(r=l[null!=(n=d.slice_id)?n:0])?void 0:r.ownState,impressionId:i,user:o.user,reports:c}}),(function(e){const t={...n,...r,...z,...p};return{actions:(0,i.DE)(t,e)}}))(Br);Le()(document).ready((function(){Le()(":checkbox[data-checkbox-api-prefix]").change((function(){const e=Le()(this);var t,a;t=e.data("checkbox-api-prefix"),a=`#${e.attr("id")}`,u.Z.get({endpoint:t+Le()(a)[0].checked}).then((()=>{})).catch((e=>(0,Fe.O)(e).then((e=>{e&&e.message&&function(e){const t=e.severity||"info";Le()('<div class="alert"> <button type="button" class="close" data-dismiss="alert">×</button> </div>').addClass(`alert-${t}`).append(e.message||"").appendTo(Le()("#alert-container"))}(e)}))))})),Le()("#language-picker a").click((function(e){e.preventDefault(),u.Z.get({url:e.currentTarget.href,parseMethod:null}).then((()=>{window.location.reload()}))}))})),window.$=Le(),window.jQuery=Le(),a(57915),function(){const e=(0,ze.Z)();e.registerValue(Ve.C.FRONTEND_TIMEOUT_ERROR,Be),e.registerValue(Ve.C.BACKEND_TIMEOUT_ERROR,Be),e.registerValue(Ve.C.DATABASE_NOT_FOUND_ERROR,Ge),e.registerValue(Ve.C.GENERIC_DB_ENGINE_ERROR,Ge),e.registerValue(Ve.C.GENERIC_BACKEND_ERROR,Ge),e.registerValue(Ve.C.COLUMN_DOES_NOT_EXIST_ERROR,Ge),e.registerValue(Ve.C.TABLE_DOES_NOT_EXIST_ERROR,Ge),e.registerValue(Ve.C.MISSING_TEMPLATE_PARAMS_ERROR,Je),e.registerValue(Ve.C.INVALID_TEMPLATE_PARAMS_ERROR,Je),e.registerValue(Ve.C.RESULTS_BACKEND_NOT_CONFIGURED_ERROR,Ge),e.registerValue(Ve.C.DML_NOT_ALLOWED_ERROR,Ge),e.registerValue(Ve.C.INVALID_CTAS_QUERY_ERROR,Ge),e.registerValue(Ve.C.INVALID_CVAS_QUERY_ERROR,Ge),e.registerValue(Ve.C.QUERY_SECURITY_ACCESS_ERROR,Ge),e.registerValue(Ve.C.CONNECTION_INVALID_HOSTNAME_ERROR,Ge),e.registerValue(Ve.C.RESULTS_BACKEND_ERROR,Ge),e.registerValue(Ve.C.ASYNC_WORKERS_ERROR,Ge),e.registerValue(Ve.C.SQLLAB_TIMEOUT_ERROR,Ge),e.registerValue(Ve.C.CONNECTION_PORT_CLOSED_ERROR,Ge),e.registerValue(Ve.C.CONNECTION_HOST_DOWN_ERROR,Ge),e.registerValue(Ve.C.CONNECTION_INVALID_USERNAME_ERROR,Ge),e.registerValue(Ve.C.CONNECTION_INVALID_PASSWORD_ERROR,Ge),e.registerValue(Ve.C.CONNECTION_ACCESS_DENIED_ERROR,Ge),e.registerValue(Ve.C.CONNECTION_UNKNOWN_DATABASE_ERROR,Ge),e.registerValue(Ve.C.SCHEMA_DOES_NOT_EXIST_ERROR,Ge),e.registerValue(Ve.C.OBJECT_DOES_NOT_EXIST_ERROR,Ge),e.registerValue(Ve.C.SYNTAX_ERROR,Ge),e.registerValue(Ve.C.CONNECTION_DATABASE_PERMISSIONS_ERROR,Ge),e.registerValue(Ve.C.FAILED_FETCHING_DATASOURCE_INFO_ERROR,Xe)}(),(0,et.Z)();const Kr=document.getElementById("app"),Gr=JSON.parse(Kr.getAttribute("data-bootstrap"));(0,y.fG)(Gr.common.feature_flags);const Qr=function(e){const{form_data:t}=e,{slice:a}=e,r=a?a.slice_name:null,n={...e,sliceName:r,common:{flash_messages:e.common.flash_messages,conf:e.common.conf},isDatasourceMetaLoading:!1,isStarred:!1,controls:(0,C.R3)(e,t)};Object.entries(n.controls).forEach((([e,t])=>{n.controls[e]=(0,T.RO)(t,n)}));const o=a?(0,T.Hu)((0,C.R3)(e,a.form_data)):null,s=(0,w.Jp)(e);return{charts:{[s]:{id:s,chartAlert:null,chartStatus:null,chartStackTrace:null,chartUpdateEndTime:null,chartUpdateStartTime:0,latestQueryFormData:(0,T.Hu)(n.controls),sliceFormData:o,queryController:null,queriesResponse:null,triggerQuery:!1,lastRendered:0}},saveModal:{dashboards:[],saveModalAlert:null},explore:n,impressionId:d().generate(),messageToasts:Z((e.common||{}).flash_messages||[])}}(Gr),Yr=(0,i.MT)(Ee,Qr,(0,i.qC)((0,i.md)(l.Z,(e=>t=>a=>{var r;if(a.type!==p.LOG_EVENT)return t(a);const{dashboardInfo:n,explore:o,impressionId:s,dashboardLayout:i}=e.getState();let l={impression_id:s,version:"v2"};n?l={source:"dashboard",source_id:n.id,...l}:o&&(l={source:"explore",source_id:o.slice?o.slice.slice_id:0,...l});const{eventName:c}=a.payload;let{eventData:u={}}=a.payload;if(u={...l,ts:(new Date).getTime(),event_name:c,...u},f.TY.has(c)?u={...u,event_type:"timing",trigger_event:v}:(v=d().generate(),u={...u,event_type:"user",event_id:v,visibility:document.visibilityState}),u.target_id&&null!=i&&null!=(r=i.present)&&r[u.target_id]){const{meta:e}=i.present[u.target_id];u.target_name=e.chartId?e.sliceName:e.text}return b.append(u),u})),(0,_.hU)(!1)));s.render((0,Oe.tZ)((({store:e})=>(0,Oe.tZ)(Ze.zt,{store:e},(0,Oe.tZ)(we.W,{backend:Ce.PD},(0,Oe.tZ)(Te.a,{theme:tt.r},(0,Oe.tZ)(Re.EM,null,(0,Oe.tZ)(Wr,null),(0,Oe.tZ)(Pe,null)))))),{store:Yr}),document.getElementById("app"))},16737:(e,t,a)=>{"use strict";function r(e){return e.map((e=>[e,e.toString()]))}function n(e,t){return`${e}__${t}`}a.d(t,{mG:()=>r,n_:()=>n})},61358:(e,t,a)=>{"use strict";a.d(t,{jt:()=>c,Aw:()=>d,J8:()=>h,cq:()=>p,Dr:()=>f,Me:()=>m,M:()=>g,MZ:()=>b});var r=a(21173),n=a(60650),o=a(15926),s=a.n(o),i=a(98286),l=a(72570);const c="SET_REPORT";function d(e,t,a,o){const i=s().encode({filters:[{col:t,opr:"eq",value:o},{col:"creation_method",opr:"eq",value:a},{col:"created_by",opr:"rel_o_m",value:e}]});return function(e){return r.Z.get({endpoint:`/api/v1/report/?q=${i}`}).then((({json:t})=>{e({type:c,report:t})})).catch((()=>e((0,l.Gb)((0,n.t)("There was an issue fetching reports attached to this dashboard.")))))}}const u=(e,t)=>{const a=t(),{user:r,dashboardInfo:n,charts:o,explore:s}=a;if(n)e(d(r.userId,"dashboard_id","dashboards",n.id));else{const[t]=Object.keys(o);e(d(s.user.userId,"chart_id","charts",o[t].id))}},h="ADD_REPORT",p=e=>t=>r.Z.post({endpoint:"/api/v1/report/",jsonPayload:e}).then((({json:e})=>{t({type:h,json:e}),t((0,l.ws)((0,n.t)("The report has been created")))})).catch((async e=>{const a=(await(0,i.O)(e)).message,r=a[Object.keys(a)[0]];t((0,l.Gb)((0,n.t)("An error occurred while editing this report: %s",r)))})),f="EDIT_REPORT";function m(e,t){return function(a){r.Z.put({endpoint:`/api/v1/report/${e}`,jsonPayload:t}).then((({json:e})=>{a({type:f,json:e})})).catch((()=>a((0,l.Gb)((0,n.t)("An error occurred while editing this report.")))))}}function g(e,t){return function(a){return r.Z.put({endpoint:encodeURI(`/api/v1/report/${e.id}`),headers:{"Content-Type":"application/json"},body:JSON.stringify({active:t})}).catch((()=>{a((0,l.Gb)((0,n.t)("We were unable to active or deactivate this report.")))})).finally((()=>{a(u)}))}}function b(e){return function(t){return r.Z.delete({endpoint:encodeURI(`/api/v1/report/${e.id}`)}).catch((()=>{t((0,l.Gb)((0,n.t)("Your report could not be deleted")))})).finally((()=>{t(u),t((0,l.ws)((0,n.t)("Deleted: %s",e.name)))}))}}},91296:(e,t,a)=>{var r=/^\s+|\s+$/g,n=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,s=/^0o[0-7]+$/i,i=parseInt,l="object"==typeof a.g&&a.g&&a.g.Object===Object&&a.g,c="object"==typeof self&&self&&self.Object===Object&&self,d=l||c||Function("return this")(),u=Object.prototype.toString,h=Math.max,p=Math.min,f=function(){return d.Date.now()};function m(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function g(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==u.call(e)}(e))return NaN;if(m(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=m(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(r,"");var a=o.test(e);return a||s.test(e)?i(e.slice(2),a?2:8):n.test(e)?NaN:+e}e.exports=function(e,t,a){var r,n,o,s,i,l,c=0,d=!1,u=!1,b=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function v(t){var a=r,o=n;return r=n=void 0,c=t,s=e.apply(o,a)}function y(e){return c=e,i=setTimeout(S,t),d?v(e):s}function _(e){var a=e-l;return void 0===l||a>=t||a<0||u&&e-c>=o}function S(){var e=f();if(_(e))return E(e);i=setTimeout(S,function(e){var a=t-(e-l);return u?p(a,o-(e-c)):a}(e))}function E(e){return i=void 0,b&&r?v(e):(r=n=void 0,s)}function Z(){var e=f(),a=_(e);if(r=arguments,n=this,l=e,a){if(void 0===i)return y(l);if(u)return i=setTimeout(S,t),v(l)}return void 0===i&&(i=setTimeout(S,t)),s}return t=g(t)||0,m(a)&&(d=!!a.leading,o=(u="maxWait"in a)?h(g(a.maxWait)||0,t):o,b="trailing"in a?!!a.trailing:b),Z.cancel=function(){void 0!==i&&clearTimeout(i),c=0,r=l=n=i=void 0},Z.flush=function(){return void 0===i?s:E(f())},Z}},93096:(e,t,a)=>{var r="Expected a function",n=/^\s+|\s+$/g,o=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,i=/^0o[0-7]+$/i,l=parseInt,c="object"==typeof a.g&&a.g&&a.g.Object===Object&&a.g,d="object"==typeof self&&self&&self.Object===Object&&self,u=c||d||Function("return this")(),h=Object.prototype.toString,p=Math.max,f=Math.min,m=function(){return u.Date.now()};function g(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function b(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==h.call(e)}(e))return NaN;if(g(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=g(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(n,"");var a=s.test(e);return a||i.test(e)?l(e.slice(2),a?2:8):o.test(e)?NaN:+e}e.exports=function(e,t,a){var n=!0,o=!0;if("function"!=typeof e)throw new TypeError(r);return g(a)&&(n="leading"in a?!!a.leading:n,o="trailing"in a?!!a.trailing:o),function(e,t,a){var n,o,s,i,l,c,d=0,u=!1,h=!1,v=!0;if("function"!=typeof e)throw new TypeError(r);function y(t){var a=n,r=o;return n=o=void 0,d=t,i=e.apply(r,a)}function _(e){return d=e,l=setTimeout(E,t),u?y(e):i}function S(e){var a=e-c;return void 0===c||a>=t||a<0||h&&e-d>=s}function E(){var e=m();if(S(e))return Z(e);l=setTimeout(E,function(e){var a=t-(e-c);return h?f(a,s-(e-d)):a}(e))}function Z(e){return l=void 0,v&&n?y(e):(n=o=void 0,i)}function w(){var e=m(),a=S(e);if(n=arguments,o=this,c=e,a){if(void 0===l)return _(c);if(h)return l=setTimeout(E,t),y(c)}return void 0===l&&(l=setTimeout(E,t)),i}return t=b(t)||0,g(a)&&(u=!!a.leading,s=(h="maxWait"in a)?p(b(a.maxWait)||0,t):s,v="trailing"in a?!!a.trailing:v),w.cancel=function(){void 0!==l&&clearTimeout(l),d=0,n=c=o=l=void 0},w.flush=function(){return void 0===l?i:Z(m())},w}(e,t,{leading:n,maxWait:t,trailing:o})}},90233:(e,t,a)=>{"use strict";a.d(t,{Lu:()=>l,tL:()=>s});var r=a(87462),n=a(76826),o=a.n(n),s={CASE_SENSITIVE_EQUAL:7,EQUAL:6,STARTS_WITH:5,WORD_STARTS_WITH:4,CONTAINS:3,ACRONYM:2,MATCHES:1,NO_MATCH:0};l.rankings=s;var i=function(e,t){return String(e.rankedValue).localeCompare(String(t.rankedValue))};function l(e,t,a){void 0===a&&(a={});var n=a,o=n.keys,l=n.threshold,d=void 0===l?s.MATCHES:l,h=n.baseSort,f=void 0===h?i:h,m=n.sorter,g=void 0===m?function(e){return e.sort((function(e,t){return function(e,t,a){var r=e.rank,n=e.keyIndex,o=t.rank,s=t.keyIndex;return r===o?n===s?a(e,t):n<s?-1:1:r>o?-1:1}(e,t,f)}))}:m,b=e.reduce((function(e,n,i){var l=function(e,t,a,r){return t?function(e,t){for(var a=[],r=0,n=t.length;r<n;r++)for(var o=t[r],s=p(o),i=u(e,o),l=0,c=i.length;l<c;l++)a.push({itemValue:i[l],attributes:s});return a}(e,t).reduce((function(e,t,n){var o=e.rank,i=e.rankedValue,l=e.keyIndex,d=e.keyThreshold,u=t.itemValue,h=t.attributes,p=c(u,a,r),f=i,m=h.minRanking,g=h.maxRanking,b=h.threshold;return p<m&&p>=s.MATCHES?p=m:p>g&&(p=g),p>o&&(o=p,l=n,d=b,f=u),{rankedValue:f,rank:o,keyIndex:l,keyThreshold:d}}),{rankedValue:e,rank:s.NO_MATCH,keyIndex:-1,keyThreshold:r.threshold}):{rankedValue:e,rank:c(e,a,r),keyIndex:-1,keyThreshold:r.threshold}}(n,o,t,a),h=l.rank,f=l.keyThreshold;return h>=(void 0===f?d:f)&&e.push((0,r.Z)({},l,{item:n,index:i})),e}),[]);return g(b).map((function(e){return e.item}))}function c(e,t,a){return e=d(e,a),(t=d(t,a)).length>e.length?s.NO_MATCH:e===t?s.CASE_SENSITIVE_EQUAL:(e=e.toLowerCase())===(t=t.toLowerCase())?s.EQUAL:e.startsWith(t)?s.STARTS_WITH:e.includes(" "+t)?s.WORD_STARTS_WITH:e.includes(t)?s.CONTAINS:1===t.length?s.NO_MATCH:(r=e,n="",r.split(" ").forEach((function(e){e.split("-").forEach((function(e){n+=e.substr(0,1)}))})),n).includes(t)?s.ACRONYM:function(e,t){var a=0,r=0;function n(e,t,r){for(var n=r,o=t.length;n<o;n++)if(t[n]===e)return a+=1,n+1;return-1}var o,i,l=n(t[0],e,0);if(l<0)return s.NO_MATCH;r=l;for(var c=1,d=t.length;c<d;c++)if(!((r=n(t[c],e,r))>-1))return s.NO_MATCH;return o=1/(r-l),i=a/t.length,s.MATCHES+i*o}(e,t);var r,n}function d(e,t){return e=""+e,t.keepDiacritics||(e=o()(e)),e}function u(e,t){var a;if("object"==typeof t&&(t=t.key),"function"==typeof t)a=t(e);else if(null==e)a=null;else if(Object.hasOwnProperty.call(e,t))a=e[t];else{if(t.includes("."))return function(e,t){for(var a=e.split("."),r=[t],n=0,o=a.length;n<o;n++){for(var s=a[n],i=[],l=0,c=r.length;l<c;l++){var d=r[l];if(null!=d)if(Object.hasOwnProperty.call(d,s)){var u=d[s];null!=u&&i.push(u)}else"*"===s&&(i=i.concat(d))}r=i}if(Array.isArray(r[0])){var h=[];return h.concat.apply(h,r)}return r}(t,e);a=null}return null==a?[]:Array.isArray(a)?a:[String(a)]}var h={maxRanking:1/0,minRanking:-1/0};function p(e){return"string"==typeof e?h:(0,r.Z)({},h,e)}},76826:e=>{var t={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",Ấ:"A",Ắ:"A",Ẳ:"A",Ẵ:"A",Ặ:"A",Æ:"AE",Ầ:"A",Ằ:"A",Ȃ:"A",Ç:"C",Ḉ:"C",È:"E",É:"E",Ê:"E",Ë:"E",Ế:"E",Ḗ:"E",Ề:"E",Ḕ:"E",Ḝ:"E",Ȇ:"E",Ì:"I",Í:"I",Î:"I",Ï:"I",Ḯ:"I",Ȋ:"I",Ð:"D",Ñ:"N",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",Ố:"O",Ṍ:"O",Ṓ:"O",Ȏ:"O",Ù:"U",Ú:"U",Û:"U",Ü:"U",Ý:"Y",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",ấ:"a",ắ:"a",ẳ:"a",ẵ:"a",ặ:"a",æ:"ae",ầ:"a",ằ:"a",ȃ:"a",ç:"c",ḉ:"c",è:"e",é:"e",ê:"e",ë:"e",ế:"e",ḗ:"e",ề:"e",ḕ:"e",ḝ:"e",ȇ:"e",ì:"i",í:"i",î:"i",ï:"i",ḯ:"i",ȋ:"i",ð:"d",ñ:"n",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",ố:"o",ṍ:"o",ṓ:"o",ȏ:"o",ù:"u",ú:"u",û:"u",ü:"u",ý:"y",ÿ:"y",Ā:"A",ā:"a",Ă:"A",ă:"a",Ą:"A",ą:"a",Ć:"C",ć:"c",Ĉ:"C",ĉ:"c",Ċ:"C",ċ:"c",Č:"C",č:"c",C̆:"C",c̆:"c",Ď:"D",ď:"d",Đ:"D",đ:"d",Ē:"E",ē:"e",Ĕ:"E",ĕ:"e",Ė:"E",ė:"e",Ę:"E",ę:"e",Ě:"E",ě:"e",Ĝ:"G",Ǵ:"G",ĝ:"g",ǵ:"g",Ğ:"G",ğ:"g",Ġ:"G",ġ:"g",Ģ:"G",ģ:"g",Ĥ:"H",ĥ:"h",Ħ:"H",ħ:"h",Ḫ:"H",ḫ:"h",Ĩ:"I",ĩ:"i",Ī:"I",ī:"i",Ĭ:"I",ĭ:"i",Į:"I",į:"i",İ:"I",ı:"i",Ĳ:"IJ",ĳ:"ij",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",Ḱ:"K",ḱ:"k",K̆:"K",k̆:"k",Ĺ:"L",ĺ:"l",Ļ:"L",ļ:"l",Ľ:"L",ľ:"l",Ŀ:"L",ŀ:"l",Ł:"l",ł:"l",Ḿ:"M",ḿ:"m",M̆:"M",m̆:"m",Ń:"N",ń:"n",Ņ:"N",ņ:"n",Ň:"N",ň:"n",ŉ:"n",N̆:"N",n̆:"n",Ō:"O",ō:"o",Ŏ:"O",ŏ:"o",Ő:"O",ő:"o",Œ:"OE",œ:"oe",P̆:"P",p̆:"p",Ŕ:"R",ŕ:"r",Ŗ:"R",ŗ:"r",Ř:"R",ř:"r",R̆:"R",r̆:"r",Ȓ:"R",ȓ:"r",Ś:"S",ś:"s",Ŝ:"S",ŝ:"s",Ş:"S",Ș:"S",ș:"s",ş:"s",Š:"S",š:"s",Ţ:"T",ţ:"t",ț:"t",Ț:"T",Ť:"T",ť:"t",Ŧ:"T",ŧ:"t",T̆:"T",t̆:"t",Ũ:"U",ũ:"u",Ū:"U",ū:"u",Ŭ:"U",ŭ:"u",Ů:"U",ů:"u",Ű:"U",ű:"u",Ų:"U",ų:"u",Ȗ:"U",ȗ:"u",V̆:"V",v̆:"v",Ŵ:"W",ŵ:"w",Ẃ:"W",ẃ:"w",X̆:"X",x̆:"x",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Y̆:"Y",y̆:"y",Ź:"Z",ź:"z",Ż:"Z",ż:"z",Ž:"Z",ž:"z",ſ:"s",ƒ:"f",Ơ:"O",ơ:"o",Ư:"U",ư:"u",Ǎ:"A",ǎ:"a",Ǐ:"I",ǐ:"i",Ǒ:"O",ǒ:"o",Ǔ:"U",ǔ:"u",Ǖ:"U",ǖ:"u",Ǘ:"U",ǘ:"u",Ǚ:"U",ǚ:"u",Ǜ:"U",ǜ:"u",Ứ:"U",ứ:"u",Ṹ:"U",ṹ:"u",Ǻ:"A",ǻ:"a",Ǽ:"AE",ǽ:"ae",Ǿ:"O",ǿ:"o",Þ:"TH",þ:"th",Ṕ:"P",ṕ:"p",Ṥ:"S",ṥ:"s",X́:"X",x́:"x",Ѓ:"Г",ѓ:"г",Ќ:"К",ќ:"к",A̋:"A",a̋:"a",E̋:"E",e̋:"e",I̋:"I",i̋:"i",Ǹ:"N",ǹ:"n",Ồ:"O",ồ:"o",Ṑ:"O",ṑ:"o",Ừ:"U",ừ:"u",Ẁ:"W",ẁ:"w",Ỳ:"Y",ỳ:"y",Ȁ:"A",ȁ:"a",Ȅ:"E",ȅ:"e",Ȉ:"I",ȉ:"i",Ȍ:"O",ȍ:"o",Ȑ:"R",ȑ:"r",Ȕ:"U",ȕ:"u",B̌:"B",b̌:"b",Č̣:"C",č̣:"c",Ê̌:"E",ê̌:"e",F̌:"F",f̌:"f",Ǧ:"G",ǧ:"g",Ȟ:"H",ȟ:"h",J̌:"J",ǰ:"j",Ǩ:"K",ǩ:"k",M̌:"M",m̌:"m",P̌:"P",p̌:"p",Q̌:"Q",q̌:"q",Ř̩:"R",ř̩:"r",Ṧ:"S",ṧ:"s",V̌:"V",v̌:"v",W̌:"W",w̌:"w",X̌:"X",x̌:"x",Y̌:"Y",y̌:"y",A̧:"A",a̧:"a",B̧:"B",b̧:"b",Ḑ:"D",ḑ:"d",Ȩ:"E",ȩ:"e",Ɛ̧:"E",ɛ̧:"e",Ḩ:"H",ḩ:"h",I̧:"I",i̧:"i",Ɨ̧:"I",ɨ̧:"i",M̧:"M",m̧:"m",O̧:"O",o̧:"o",Q̧:"Q",q̧:"q",U̧:"U",u̧:"u",X̧:"X",x̧:"x",Z̧:"Z",z̧:"z"},a=Object.keys(t).join("|"),r=new RegExp(a,"g"),n=new RegExp(a,""),o=function(e){return e.replace(r,(function(e){return t[e]}))};e.exports=o,e.exports.has=function(e){return!!e.match(n)},e.exports.remove=o},29432:(e,t,a)=>{"use strict";a.d(t,{hb:()=>p,QU:()=>f,Es:()=>m,JL:()=>g});var r,n=a(85639),o=a(67294);!function(e){e.LOADING="loading",e.COMPLETE="complete",e.ERROR="error"}(r||(r={}));const s={status:r.LOADING,result:null,error:null};function i(e,t){return(0,o.useMemo)((()=>{if(e.status!==r.COMPLETE)return e;try{return{...e,result:t(e.result)}}catch(e){return{status:r.ERROR,result:null,error:e}}}),[e,t])}const l=e=>e.result;function c(e){return i(function(e){const[t,a]=(0,o.useState)(s),i=(0,o.useRef)((()=>{}));return(0,o.useEffect)((()=>{a(s),i.current();let t=!1;return i.current=()=>{t=!0},(0,n.Z)({method:"GET",endpoint:e})({}).then((e=>{t||a({status:r.COMPLETE,result:e,error:null})})).catch((e=>{t||a({status:r.ERROR,result:null,error:e})})),()=>{t=!0}}),[e]),t}(e),l)}var d=a(15926);function u({owners:e}){return e?e.map((e=>`${e.first_name} ${e.last_name}`)):null}const h=a.n(d)().encode({columns:["owners.first_name","owners.last_name"],keys:["none"]});function p(e){return i(c(`/api/v1/chart/${e}?q=${h}`),u)}const f=e=>i(c(`/api/v1/dashboard/${e}`),(e=>({...e,metadata:e.json_metadata&&JSON.parse(e.json_metadata)||{},position_data:e.position_json&&JSON.parse(e.position_json)}))),m=e=>c(`/api/v1/dashboard/${e}/charts`),g=e=>c(`/api/v1/dashboard/${e}/datasets`)},17198:(e,t,a)=>{"use strict";a.d(t,{Z:()=>h});var r=a(37840),n=a(60650),o=a(67294),s=a(82191),i=a(74069),l=a(49238),c=a(11965);const d=r.iK.div`
  padding-top: 8px;
  width: 50%;
  label {
    color: ${({theme:e})=>e.colors.grayscale.light1};
    text-transform: uppercase;
  }
`,u=r.iK.div`
  line-height: 40px;
  padding-top: 16px;
`;function h({description:e,onConfirm:t,onHide:a,open:r,title:h}){const[p,f]=(0,o.useState)(!0),[m,g]=(0,o.useState)(""),b=()=>{g(""),t()};return(0,c.tZ)(i.Z,{disablePrimaryButton:p,onHide:()=>{g(""),a()},onHandledPrimaryAction:b,primaryButtonName:(0,n.t)("delete"),primaryButtonType:"danger",show:r,title:h},(0,c.tZ)(u,null,e),(0,c.tZ)(d,null,(0,c.tZ)(l.lX,{htmlFor:"delete"},(0,n.t)('Type "%s" to confirm',(0,n.t)("DELETE"))),(0,c.tZ)(s.II,{type:"text",id:"delete",autoComplete:"off",value:m,onChange:e=>{var t;const a=null!=(t=e.target.value)?t:"";f(a.toUpperCase()!==(0,n.t)("DELETE")),g(a)},onPressEnter:()=>{p||b()}})))}},14278:(e,t,a)=>{"use strict";a.d(t,{Zn:()=>m,gp:()=>g,EM:()=>S});var r=a(14176),n=a.n(r),o=a(67294),s=a(38849),i=a(85639),l=a(17390),c=a(23099),d=a(91877),u=a(46415),h=a(11965);const p=(0,s.Z)(),f={loading:!0,dynamicPlugins:{},keys:[],mountedPluginMetadata:{},fetchAll:()=>{}},m=o.createContext(f),g=()=>(0,o.useContext)(m);function b(){return{keys:p.keys(),mountedPluginMetadata:n()(p.getMap(),(e=>void 0===e))}}function v(e,t){switch(t.type){case"begin":{const a={...e.dynamicPlugins};return t.keys.forEach((e=>{a[e]={key:e,error:null,mounting:!0}})),{...e,loading:t.keys.length>0,dynamicPlugins:a}}case"complete":return{...e,loading:Object.values(e.dynamicPlugins).some((e=>e.mounting&&e.key!==t.key)),dynamicPlugins:{...e.dynamicPlugins,[t.key]:{key:t.key,mounting:!1,error:t.error}}};case"changed keys":return{...e,...b()};default:return e}}const y=(0,i.Z)({method:"GET",endpoint:"/dynamic-plugins/api/read"}),_={react:()=>Promise.resolve().then(a.t.bind(a,67294,19)),lodash:()=>Promise.resolve().then(a.t.bind(a,96486,23)),"react-dom":()=>Promise.resolve().then(a.t.bind(a,9060,19)),"@superset-ui/chart-controls":()=>Promise.all([a.e(1216),a.e(7211),a.e(7017),a.e(8483),a.e(5042)]).then(a.bind(a,88483)),"@superset-ui/core":()=>Promise.all([a.e(1216),a.e(7211),a.e(7017),a.e(6439)]).then(a.bind(a,67017))},S=({children:e})=>{const[t,a]=(0,o.useReducer)(v,f,(e=>({...e,...b(),fetchAll:r,loading:(0,d.cr)(u.T.DYNAMIC_PLUGINS)})));async function r(){try{await(0,l.YW)(_);const{result:e}=await y({});a({type:"begin",keys:e.map((e=>e.key))}),await Promise.all(e.map((async e=>{let t=null;try{await import(e.bundle_url)}catch(a){c.Z.error(`Failed to load plugin ${e.key} with the following error:`,a.stack),t=a}a({type:"complete",key:e.key,error:t})})))}catch(e){c.Z.error("Failed to load dynamic plugins",e.stack||e)}}return(0,o.useEffect)((()=>{(0,d.cr)(u.T.DYNAMIC_PLUGINS)&&r();const e=()=>{a({type:"changed keys"})};return p.addListener(e),()=>{p.removeListener(e)}}),[]),(0,h.tZ)(m.Provider,{value:t},e)}},1510:(e,t,a)=>{"use strict";a.d(t,{zi:()=>d,on:()=>u,vk:()=>h,X3:()=>p,Rz:()=>g});var r=a(92134),n=a(52686),o=a(46415),s=a(70400),i=a(91877),l=a(81255),c=a(80621);const d=({datasetId:e,cascadingFilters:t={},groupby:a,inputRef:r,defaultDataMask:n,controlValues:o,filterType:i,sortMetric:l,adhoc_filters:c,time_range:d,granularity_sqla:u,type:h})=>{var p;const f={};return e&&(f.datasource=`${e}__table`),a&&(f.groupby=[a]),l&&(f.sortMetric=l),{...o,...f,adhoc_filters:null!=c?c:[],extra_filters:[],extra_form_data:t,granularity_sqla:u,metrics:["count"],row_limit:1e3,showSearch:!0,defaultValue:null==n||null==(p=n.filterState)?void 0:p.value,time_range:d,time_range_endpoints:["inclusive","exclusive"],url_params:(0,s.Z)("regular"),inView:!0,viz_type:i,inputRef:r,type:h}};function u(e={},t={}){const a={};return r.Ci.forEach((r=>{const n=[...e[r]||[],...t[r]||[]];n.length&&(a[r]=n)})),r.Ay.forEach((r=>{const n=e[r];void 0!==n&&(a[r]=n);const o=t[r];void 0!==o&&(a[r]=o)})),a}function h(e,t,a){let r={};return a.forEach((t=>{var a,n;r=u(r,null!=(a=null==(n=e[t])?void 0:n.extraFormData)?a:{})})),r}function p(e){return!e.includes(n.cg.NATIVE_FILTER)||(0,i.cr)(o.T.DASHBOARD_FILTERS_EXPERIMENTAL)&&(0,i.cr)(o.T.DASHBOARD_CROSS_FILTERS)&&e.includes(n.cg.INTERACTIVE_CHART)}const f=(e,t)=>e[t].type===l.gn,m=(e,t,a,r,n)=>{e[a].type===l.dW&&t.includes(e[a].meta.chartId)&&r.forEach(n.add,n),0===e[a].children.length||f(e,a)&&n.has(a)||e[a].children.forEach((a=>m(e,t,a,f(e,a)?[...r,a]:r,n)))},g=(e,t)=>{const a=e[c._4].children[0],r=a!==c.PV,n=new Set;var o;return r?null==(o=e[a].children)||o.forEach((a=>m(e,t,a,[a],n))):Object.values(e).filter((e=>e.type===l.gn)).forEach((a=>m(e,t,a.id,[a.id],n))),n}},81255:(e,t,a)=>{"use strict";a.d(t,{dW:()=>r,BA:()=>n,Vl:()=>o,BG:()=>s,U0:()=>i,hE:()=>l,Nc:()=>c,xh:()=>d,F0:()=>u,Os:()=>h,yR:()=>p,gn:()=>f,ZP:()=>m});const r="CHART",n="COLUMN",o="HEADER",s="GRID",i="ROOT",l="DIVIDER",c="HEADER",d="MARKDOWN",u="NEW_COMPONENT_SOURCE",h="ROW",p="TABS",f="TAB",m={CHART_TYPE:r,COLUMN_TYPE:n,DASHBOARD_HEADER_TYPE:o,DASHBOARD_GRID_TYPE:s,DASHBOARD_ROOT_TYPE:i,DIVIDER_TYPE:l,HEADER_TYPE:c,MARKDOWN_TYPE:d,NEW_COMPONENT_SOURCE_TYPE:u,ROW_TYPE:h,TABS_TYPE:p,TAB_TYPE:f}},70400:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});var r=a(17563);const n=new Set(["standalone","edit"]);function o(e){const t=r.parse(window.location.search);return Object.entries(t).reduce(((t,[a,r])=>"regular"===e&&n.has(a)||"reserved"===e&&!n.has(a)?t:Array.isArray(r)?{...t,[a]:r[0]}:{...t,[a]:r}),{})}},13284:(e,t,a)=>{"use strict";a.d(t,{UB:()=>S,ZP:()=>V});var r,n=a(5872),o=a.n(n),s=a(67294),i=a(74221),l=a(94184),c=a.n(l),d=a(60650),u=a(37840),h=a(11965),p=a(82191),f=a(37921),m=a(14278),g=a(38097),b=a(1510),v=a(64239);!function(e){e.ALL_CHARTS="ALL_CHARTS",e.CATEGORY="CATEGORY",e.TAGS="TAGS",e.RECOMMENDED_TAGS="RECOMMENDED_TAGS"}(r||(r={}));const y=["line","big_number","big_number_total","table","pivot_table_v2","echarts_timeseries_line","echarts_area","echarts_timeseries_bar","echarts_timeseries_scatter","pie","mixed_timeseries","filter_box","dist_bar","area","bar","deck_polygon","time_table","histogram","deck_scatter","deck_hex","time_pivot","deck_arc","heatmap","deck_grid","dual_line","deck_screengrid","line_multi","treemap","box_plot","sunburst","sankey","word_cloud","mapbox","kepler","cal_heatmap","rose","bubble","deck_geojson","horizon","deck_multi","compare","partition","event_flow","deck_path","graph_chart","world_map","paired_ttest","para","country_map"],_=new Set(y),S=1090,E=(0,d.t)("Other"),Z=(0,d.t)("All charts"),w=[(0,d.t)("Popular"),(0,d.t)("ECharts"),(0,d.t)("Advanced-Analytics")],C=u.iK.div`
  ${({isSelectedVizMetadata:e})=>`\n    display: grid;\n    grid-template-rows: ${e?"auto minmax(100px, 1fr) minmax(200px, 35%)":"auto minmax(100px, 1fr)"};\n    // em is used here because the sidebar should be sized to fit the longest standard tag\n    grid-template-columns: minmax(14em, auto) 5fr;\n    grid-template-areas:\n      'sidebar search'\n      'sidebar main'\n      'details details';\n    height: 70vh;\n    overflow: auto;\n  `}
`,T=u.iK.h3`
  margin-top: 0;
  margin-bottom: ${({theme:e})=>2*e.gridUnit}px;
  font-size: ${({theme:e})=>e.typography.sizes.l}px;
  font-weight: ${({theme:e})=>e.typography.weights.bold};
  line-height: ${({theme:e})=>6*e.gridUnit}px;
`,R=u.iK.div`
  grid-area: sidebar;
  display: flex;
  flex-direction: column;
  border-right: 1px solid ${({theme:e})=>e.colors.grayscale.light2};
  overflow: auto;

  .ant-collapse .ant-collapse-item {
    .ant-collapse-header {
      font-size: ${({theme:e})=>e.typography.sizes.s}px;
      color: ${({theme:e})=>e.colors.grayscale.base};
      padding-left: ${({theme:e})=>2*e.gridUnit}px;
      padding-bottom: ${({theme:e})=>e.gridUnit}px;
    }
    .ant-collapse-content .ant-collapse-content-box {
      display: flex;
      flex-direction: column;
      padding: 0 ${({theme:e})=>2*e.gridUnit}px;
    }
  }
`,x=u.iK.div`
  grid-area: main;
  overflow-y: auto;
`,O=u.iK.div`
  ${({theme:e})=>`\n    grid-area: search;\n    margin-top: ${3*e.gridUnit}px;\n    margin-bottom: ${e.gridUnit}px;\n    margin-left: ${3*e.gridUnit}px;\n    margin-right: ${3*e.gridUnit}px;\n    .ant-input-affix-wrapper {\n      padding-left: ${2*e.gridUnit}px;\n    }\n  `}
`,A=u.iK.div`
  display: flex;
  justify-content: center;
  align-items: center;
  color: ${({theme:e})=>e.colors.grayscale.base};
`,N=u.iK.button`
  ${({theme:e})=>`\n    all: unset; // remove default button styles\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    cursor: pointer;\n    margin: ${e.gridUnit}px 0;\n    padding: 0 ${e.gridUnit}px;\n    border-radius: ${e.borderRadius}px;\n    line-height: 2em;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n    position: relative;\n\n    &:focus {\n      outline: initial;\n    }\n\n    &.selected {\n      background-color: ${e.colors.primary.dark1};\n      color: ${e.colors.primary.light5};\n\n      svg {\n        color: ${e.colors.primary.light5};\n      }\n\n      &:hover {\n        .cancel {\n          visibility: visible;\n        }\n      }\n    }\n\n    & span:first-of-type svg {\n      margin-top: ${1.5*e.gridUnit}px;\n    }\n\n    .cancel {\n      visibility: hidden;\n    }\n  `}
`,D=u.iK.div`
  overflow: auto;
  display: grid;
  grid-template-columns: repeat(
    auto-fill,
    ${({theme:e})=>24*e.gridUnit}px
  );
  grid-auto-rows: max-content;
  justify-content: space-evenly;
  grid-gap: ${({theme:e})=>2*e.gridUnit}px;
  justify-items: center;
  // for some reason this padding doesn't seem to apply at the bottom of the container. Why is a mystery.
  padding: ${({theme:e})=>2*e.gridUnit}px;
`,k=e=>h.iv`
  grid-area: details;
  border-top: 1px solid ${e.colors.grayscale.light2};
`,I=e=>h.iv`
  padding: ${4*e.gridUnit}px;
  display: grid;
  grid-template-columns: 1fr 1fr;
  grid-template-rows: auto auto 1fr;
  grid-template-areas:
    'viz-name examples-header'
    'viz-tags examples'
    'description examples';
`,M=u.iK.div`
  grid-area: viz-tags;
  width: ${({theme:e})=>120*e.gridUnit}px;
  padding-right: ${({theme:e})=>14*e.gridUnit}px;
  padding-bottom: ${({theme:e})=>2*e.gridUnit}px;
`,$=u.iK.p`
  grid-area: description;
  overflow: auto;
  padding-right: ${({theme:e})=>14*e.gridUnit}px;
  margin: 0;
`,U=u.iK.div`
  grid-area: examples;
  display: flex;
  flex-direction: row;
  flex-wrap: nowrap;
  overflow: auto;
  gap: ${({theme:e})=>4*e.gridUnit}px;

  img {
    height: 100%;
    border-radius: ${({theme:e})=>e.gridUnit}px;
    border: 1px solid ${({theme:e})=>e.colors.grayscale.light2};
  }
`,P=e=>h.iv`
  cursor: pointer;
  width: ${24*e.gridUnit}px;

  img {
    min-width: ${24*e.gridUnit}px;
    min-height: ${24*e.gridUnit}px;
    border: 1px solid ${e.colors.grayscale.light2};
    border-radius: ${e.gridUnit}px;
    transition: border-color ${e.transitionTiming};
  }

  &.selected img {
    border: 2px solid ${e.colors.primary.light2};
  }

  &:hover:not(.selected) img {
    border: 1px solid ${e.colors.grayscale.light1};
  }

  .viztype-label {
    margin-top: ${2*e.gridUnit}px;
    text-align: center;
  }
`;function j(e){return _.has(e.key)?y.indexOf(e.key):y.length}const L=({entry:e,selectedViz:t,setSelectedViz:a})=>{const r=(0,u.Fg)(),{key:n,value:o}=e,s=t===e.key;return(0,h.tZ)("div",{role:"button",css:P(r),tabIndex:0,className:s?"selected":"",onClick:()=>a(n)},(0,h.tZ)("img",{alt:o.name,width:"100%",className:"viztype-selector "+(s?"selected":""),src:o.thumbnail}),(0,h.tZ)("div",{className:"viztype-label"},o.name))},F=({vizEntries:e,...t})=>(0,h.tZ)(D,null,e.map((e=>(0,h.tZ)(L,o()({key:e.key},t,{entry:e}))))),z=({selector:e,sectionId:t,icon:a,isSelected:r,onClick:n,className:o})=>{const i=(0,s.useRef)(null);return(0,s.useEffect)((()=>{r&&queueMicrotask((()=>(0,v.default)(i.current,{behavior:"smooth",scrollMode:"if-needed"})))}),[]),(0,h.tZ)(N,{ref:i,key:e,name:e,className:c()(o,r&&"selected"),onClick:()=>n(e,t)},a,e)};function V(e){var t;const{selectedViz:a,onChange:n,className:o}=e,{mountedPluginMetadata:l}=(0,m.gp)(),c=(0,s.useRef)(),[u,v]=(0,s.useState)(""),[y,_]=(0,s.useState)(!0),S=y&&!!u,N=a?l[a]:null,D=(0,s.useMemo)((()=>{const e=Object.entries(l).map((([e,t])=>({key:e,value:t}))).filter((({value:e})=>(0,b.X3)(e.behaviors||[])&&!e.deprecated));return e.sort(((e,t)=>j(e)-j(t))),e}),[l]),P=(0,s.useMemo)((()=>{const e={};return D.forEach((t=>{const a=t.value.category||E;e[a]||(e[a]=[]),e[a].push(t)})),e}),[D]),L=(0,s.useMemo)((()=>Object.keys(P).sort(((e,t)=>e===E?1:t===E?-1:e.localeCompare(t)))),[P]),V=(0,s.useMemo)((()=>{const e={};return D.forEach((t=>{(t.value.tags||[]).forEach((a=>{e[a]||(e[a]=[]),e[a].push(t)}))})),e}),[D]),H=(0,s.useMemo)((()=>Object.keys(V).sort(((e,t)=>e.localeCompare(t))).filter((e=>-1===w.indexOf(e)))),[V]),q=(0,s.useMemo)((()=>D.sort(((e,t)=>e.key.localeCompare(t.key)))),[D]),[B,W]=(0,s.useState)((()=>(null==N?void 0:N.category)||w[0])),[K,G]=(0,s.useState)((()=>null!=N&&N.category?r.CATEGORY:r.RECOMMENDED_TAGS)),Q=(0,s.useMemo)((()=>new i.Z(D,{ignoreLocation:!0,threshold:.3,keys:["value.name","value.tags","value.description"]})),[D]),Y=(0,s.useMemo)((()=>""===u.trim()?[]:Q.search(u).map((e=>e.item))),[u,Q]),J=(0,s.useCallback)((()=>{_(!0)}),[]),X=(0,s.useCallback)((e=>v(e.target.value)),[]),ee=(0,s.useCallback)((()=>{_(!1),v(""),c.current.blur()}),[]),te=(0,s.useCallback)(((e,t)=>{y&&ee(),W(e),G(t);const a=N&&((e,t)=>t===e.category||t===E&&null==e.category||(e.tags||[]).indexOf(t)>-1)(N,e);e===B||a||n(null)}),[ee,y,B,N,n]),ae=(0,s.useMemo)((()=>({[r.RECOMMENDED_TAGS]:{title:(0,d.t)("Recommended tags"),icon:(0,h.tZ)(g.Z.Tags,null),selectors:w},[r.CATEGORY]:{title:(0,d.t)("Category"),icon:(0,h.tZ)(g.Z.Category,null),selectors:L},[r.TAGS]:{title:(0,d.t)("Tags"),icon:(0,h.tZ)(g.Z.Tags,null),selectors:H}})),[L,H]);return(0,h.tZ)(C,{className:o,isSelectedVizMetadata:Boolean(N)},(0,h.tZ)(R,null,(0,h.tZ)(z,{css:({gridUnit:e})=>h.iv`
              margin: ${2*e}px;
              margin-bottom: 0;
            `,sectionId:r.ALL_CHARTS,selector:Z,icon:(0,h.tZ)(g.Z.Ballot,null),isSelected:!S&&Z===B&&r.ALL_CHARTS===K,onClick:te}),(0,h.tZ)(p.UO,{expandIconPosition:"right",ghost:!0,defaultActiveKey:Object.keys(ae)},Object.keys(ae).map((e=>{const t=ae[e];return(0,h.tZ)(p.UO.Panel,{header:(0,h.tZ)("span",{className:"header"},t.title),key:e},t.selectors.map((a=>(0,h.tZ)(z,{key:a,selector:a,sectionId:e,icon:t.icon,isSelected:!S&&a===B&&e===K,onClick:te}))))})))),(0,h.tZ)(O,null,(0,h.tZ)(p.II,{type:"text",ref:c,value:u,placeholder:(0,d.t)("Search all charts"),onChange:X,onFocus:J,prefix:(0,h.tZ)(A,null,(0,h.tZ)(g.Z.Search,{iconSize:"m"})),suffix:(0,h.tZ)(A,null,u&&(0,h.tZ)(g.Z.XLarge,{iconSize:"m",onClick:ee}))})),(0,h.tZ)(x,null,(0,h.tZ)(F,{vizEntries:S?Y:B===Z&&K===r.ALL_CHARTS?q:K===r.CATEGORY&&P[B]?P[B]:K!==r.TAGS&&K!==r.RECOMMENDED_TAGS||!V[B]?[]:V[B],selectedViz:a,setSelectedViz:n})),N?(0,h.tZ)("div",{css:e=>[k(e),I(e)]},(0,h.tZ)(s.Fragment,null,(0,h.tZ)(T,{css:h.iv`
                grid-area: viz-name;
              `},null==N?void 0:N.name),(0,h.tZ)(M,null,null==N?void 0:N.tags.map((e=>(0,h.tZ)(f.Z,{key:e},e)))),(0,h.tZ)($,null,(null==N?void 0:N.description)||(0,d.t)("No description available.")),(0,h.tZ)(T,{css:h.iv`
                grid-area: examples-header;
              `},!(null==N||null==(t=N.exampleGallery)||!t.length)&&(0,d.t)("Examples")),(0,h.tZ)(U,null,((null==N?void 0:N.exampleGallery)||[]).map((e=>(0,h.tZ)("img",{src:e.url,alt:e.caption,title:e.caption})))))):null)}}},l={};function c(e){var t=l[e];if(void 0!==t)return t.exports;var a=l[e]={id:e,loaded:!1,exports:{}};return i[e].call(a.exports,a,a.exports,c),a.loaded=!0,a.exports}c.m=i,c.amdD=function(){throw new Error("define cannot be used indirect")},c.amdO={},e=[],c.O=(t,a,r,n)=>{if(!a){var o=1/0;for(d=0;d<e.length;d++){for(var[a,r,n]=e[d],s=!0,i=0;i<a.length;i++)(!1&n||o>=n)&&Object.keys(c.O).every((e=>c.O[e](a[i])))?a.splice(i--,1):(s=!1,n<o&&(o=n));if(s){e.splice(d--,1);var l=r();void 0!==l&&(t=l)}}return t}n=n||0;for(var d=e.length;d>0&&e[d-1][2]>n;d--)e[d]=e[d-1];e[d]=[a,r,n]},c.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return c.d(t,{a:t}),t},a=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,c.t=function(e,r){if(1&r&&(e=this(e)),8&r)return e;if("object"==typeof e&&e){if(4&r&&e.__esModule)return e;if(16&r&&"function"==typeof e.then)return e}var n=Object.create(null);c.r(n);var o={};t=t||[null,a({}),a([]),a(a)];for(var s=2&r&&e;"object"==typeof s&&!~t.indexOf(s);s=a(s))Object.getOwnPropertyNames(s).forEach((t=>o[t]=()=>e[t]));return o.default=()=>e,c.d(n,o),n},c.d=(e,t)=>{for(var a in t)c.o(t,a)&&!c.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},c.f={},c.e=e=>Promise.all(Object.keys(c.f).reduce(((t,a)=>(c.f[a](e,t),t)),[])),c.u=e=>2441===e?"2441.cf2d2dd99eca21c7005d.entry.js":{3:"e044f7b0a449682b2a0f",57:"3eef258f00447ab2ba56",71:"64dff638ddc03dfb750e",112:"881dd2510f19ed31e172",128:"09816e9eacb28fa9d64d",158:"488593bc94ab7caa58e0",177:"4b03c272091be7836683",183:"3f0101a74920ebdf5721",215:"abe0f2a4a3f69594f00c",310:"77d6d4c65a4250a67f54",312:"ba5d653bdbc1bcc11798",326:"1a52ab475e669fe4abf1",336:"f4bdd4f606d6d7592f7e",347:"5c3072822b5d502ad29e",363:"210381fc4c2bbae6d099",423:"455bf786d306b6ca7dfc",440:"515662946aea2cdc4413",547:"99e633e0140ae81ceaee",597:"20b87c137727ff9aaf87",600:"044558ce92babe1fa2db",666:"7cfa8a340531e36382ca",823:"6c8ca7d9061b3a94554d",826:"0e2f19bbb57b5a8aff83",992:"d71578d87db841083c93",999:"ce189cf323818358d600",1048:"4fa290dfd43374f2589d",1066:"da19dd6d93603c18ccb9",1075:"2572ea51a4adfc4ff9a4",1095:"9566a843a87192040f10",1174:"1033573182d374214540",1185:"63e33afadbeb6e51d8dd",1193:"0f44a5929ed7950a2653",1243:"8a566670ab41255a9fa8",1256:"035f322d4ce964f73de1",1258:"6381160c0229525565fd",1263:"cfe95e8e20298feb874e",1293:"14b3a7ee4cc17de5c441",1351:"2eb1a9ba1648eb7a8193",1391:"5977009ba8ae555059ca",1398:"0c371615e0996614785c",1493:"0c0664678b66d74ba38f",1568:"b2bb81324e29ed5bce61",1573:"c3be8c690992b983b688",1605:"d6a140bf5e3bef201212",1899:"e1eb313fc03e90fa0d70",1921:"1265db17ffcb693ccdfe",1948:"ae3e50ff33d09be269c4",2079:"579cd7268aa39862c290",2085:"8574dda8fec899abc5d7",2089:"13db7039a066b543f45a",2105:"02df5ff9f97c181f9de4",2112:"1d1b4aaac5752d48445e",2264:"5a90b87bf6c82cddd60f",2267:"58a5465f711b4c6b0f0c",2306:"900c59f698d73ea25b60",2403:"ff967bce10197be4d6e0",2439:"92ff10820007284a3594",2646:"3dcaf7b2edc6b26550ba",2698:"e7b7a6eeb3966de7d0c1",2713:"a68c27cd1e12e64ffed4",2797:"5db241c8af5a71f0f30d",2862:"3b3d9babcbbfbfe1a439",2983:"8afbd45ac5fc6d8b4b6d",3037:"b318990d571ceecf7b25",3141:"494a0ca0a1bb39f625bd",3208:"2afd52e561441bd5beb3",3240:"e7218edd46dedf7e1dda",3265:"1671e36958a7bf6f4cfc",3325:"9295baeedc623870f610",3544:"0fb4e4d961165cd76e18",3558:"e2f6e711a397fa768c21",3567:"d77d0432d12254aeeded",3606:"0b65905a659b39cd6909",3609:"29384b4eb03ef16654fb",3720:"c775a4da980d280407d7",3749:"9d45482bb7e08b4be181",3776:"2402c98d9616395eda2c",3871:"b94982d813b3a1874fe0",3955:"dc4fa1a460e1f3bc8df6",3985:"f293395f2172b1317b51",4018:"2fe7c4e27cd6d55cfa8a",4022:"28d8440da84fb8342b9c",4139:"285945130a72bfc46e1d",4192:"e2d59980227e992dc3c7",4214:"ed754c6462c95c95b6df",4266:"5b30930400b0988390e0",4273:"7ddbd55189a7899df93c",4295:"758517b65e2e27969320",4319:"135fa40e026f2f4fd193",4441:"1a55aacc914e888f69eb",4458:"4309988c3c4fa37de107",4473:"05ad27610fbaf0b6a9e7",4474:"b598fc6c061ecd9e6b0d",4486:"598a9fd2876b6257f982",4572:"8833beee488d2f0a51c7",4579:"16ca3c26d224ec2bea51",4625:"51252df40a568e9858e9",4662:"b32dd6447e5fae270c83",4667:"48c3843ffce6d71edad4",4732:"40416b4ab4e61de326ae",4757:"93d740911bd493adf140",4758:"139bfe0e5a3d55b967f5",4794:"604a01412367c61f28d1",4797:"ec310aed295dd6ac6d3e",4810:"c9e88f8bb26309aea9a3",4817:"c6d5f79ba80cd01dc865",4832:"ef14aea5648058059b49",4851:"ddfa921c0ae9aa3cc18b",4972:"c5b4433dc989f0536983",4980:"b6ba2284eab1e8741343",4981:"a591e398113e3a68af10",5019:"b25de202f4b8a5b36ef6",5042:"44297f8d74f4de34448a",5094:"85069f884a4ddb62e3cd",5181:"12fa7e6887f1d967b821",5201:"3ec18a3a291224aa9108",5215:"d96d8f48f1ace1189109",5224:"c47e9d538010833596c1",5226:"6827078f00442327de34",5249:"666b274dce41432ba44f",5278:"e52e2b85f27aabb0e7d3",5281:"bee09c165592668d3f89",5322:"7c40ed3ab5bab0155042",5330:"599272faeb108b72e7f9",5335:"8aa0878ebf5d4ad6ce59",5350:"074a558227a6662abcb5",5359:"2b8c50de5d5c4b38aca0",5367:"21ae5e3e001039f857b3",5507:"f70d497b4e7632b6cc22",5580:"24915749e40e9d761a9c",5592:"e87311d9b096af643f33",5641:"38809faee0024a508b21",5660:"67a428604b39cadb757a",5707:"147d8ca4332836cd578d",5771:"1052f585ff4ae106bee8",5777:"554d568382eb31588d65",5802:"6cc12bb8302843f1d8f2",5816:"280673beea0b5f2fd1e1",5832:"0c735281dd62de64b370",5838:"dbba442e12c14d0a2a2e",5859:"0185df6ec80e9bc0f273",5962:"72dc9794359fb77a60d2",5965:"b9a10228d5ec7775b339",5972:"19c7fc52abf01d211d54",5998:"1ee3b4651923335492d5",6060:"c22c46da376a1eb61f03",6061:"55bf4311a87981b3e733",6126:"91fa0738674c868ec8cc",6150:"dc68c567fc3c38729c6e",6167:"d6258818427262c45fa8",6207:"6910f3c4f0be2cfcd7f9",6254:"fb638befd53ef04822fc",6259:"8f75b003f655fd100031",6303:"ad52f9efd303183abf5e",6358:"276b1e04929b11061b39",6371:"83c9e45ceb3fbb5ac155",6420:"c893ff2534f9ec304fc8",6439:"905054804b5b139d9102",6447:"ae65f54f868cf08677c1",6507:"45af87d3e964f08e8a6b",6668:"55647a5d1bc9e3c671d6",6682:"9becee958a13c31f4d51",6740:"48992332217cebd3a226",6758:"6fcf8c53e0a66334e5b5",6819:"e5d97b6c04bdd4635620",6883:"520bd0ef8bbe299a89fd",6977:"d2b3c9ce6ad0030f20e0",6981:"a398d4d79a48e5730885",7040:"a567f79ae23d4afa0986",7068:"8c18a25a68c77207628a",7183:"5a6c8f84f8386ea3c3ed",7219:"ad87d9d9587c00958bc7",7249:"4073992e83966234ebec",7405:"108895750399ba59f40d",7460:"6a739700fefd3a4fbac2",7584:"f1a7f6c3be667fceb4de",7610:"fe88065240ff7a6e5504",7654:"1cc0055d2d390c30d171",7716:"26ccebd94ddb1fb178f8",7760:"df6139586bc8db9f4686",7803:"fa5606e48db6b49a7a94",7828:"9d94337a65806202ad0a",7832:"cee2356dcffffe29247a",7850:"daed96c9f6d33ebc1f7c",7893:"4651b213a499300c10f9",7922:"5d8ea477355f17a5b790",8130:"b966bed5bac2f791778a",8230:"da3a99279fcaf5fea5b0",8312:"65a7d4d9a4760d7a5210",8349:"7aa90fbe18ad73a1b95a",8398:"602f4d50559d187c1db8",8425:"d4ab2b8d82b74d62566e",8463:"44ea1565bba7d3f2c8f7",8464:"b9638a9383c4c16c53d7",8616:"dee76665d36ed3374636",8682:"689daa7df9dd2c6fa4fd",8695:"01d9bc6edddbf539b1b7",8750:"dc92e0e945b83ec1e05f",8883:"a09378804d20733f3763",8903:"17d98990a92f78ca1fbe",8924:"9bbf28b219c42e28b943",8970:"cc02d84919fe9ecd9cde",9013:"a4b833b1258c7c9a94fd",9034:"6a18debadd1719b56d48",9052:"02f43b9abb68bfc5f39c",9109:"276f36aed8996da1df63",9131:"7262db8c6f956b6cf9b3",9242:"b48bac35b681de0621a5",9305:"34d5c67b5c79995f8a60",9325:"1defe50332e08632f07f",9393:"442f478da05ba19070c4",9483:"b00849bd986fe69d2288",9510:"c5c3e89e58541aa7825b",9558:"d2eaa19757d176a93ab7",9574:"b7d0708ceeb10d6582a8",9767:"ad438ca70361b5e69126",9794:"c13a738c3f6b2ba76ca9",9811:"58200e365253423913d9",9857:"6a190c6f42d0d89b5004",9885:"54c6cf410a7e52c33542",9938:"fae22d9c573612e42777"}[e]+".chunk.js",c.miniCssF=e=>9782===e?"explore.b16af1d631a97b83fecf.entry.css":e+"."+{3:"e044f7b0a449682b2a0f",128:"09816e9eacb28fa9d64d",423:"455bf786d306b6ca7dfc",823:"6c8ca7d9061b3a94554d",1066:"da19dd6d93603c18ccb9",1193:"0f44a5929ed7950a2653",1243:"8a566670ab41255a9fa8",1391:"5977009ba8ae555059ca",1921:"1265db17ffcb693ccdfe",2862:"3b3d9babcbbfbfe1a439",3609:"29384b4eb03ef16654fb",3776:"2402c98d9616395eda2c",4192:"e2d59980227e992dc3c7",4473:"05ad27610fbaf0b6a9e7",5278:"e52e2b85f27aabb0e7d3",5322:"7c40ed3ab5bab0155042",5965:"b9a10228d5ec7775b339",6259:"8f75b003f655fd100031",6358:"276b1e04929b11061b39",7040:"a567f79ae23d4afa0986",7219:"ad87d9d9587c00958bc7",7828:"9d94337a65806202ad0a",7893:"4651b213a499300c10f9",8903:"17d98990a92f78ca1fbe",9574:"b7d0708ceeb10d6582a8",9885:"54c6cf410a7e52c33542"}[e]+".chunk.css",c.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),c.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),c.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r={},n="superset:",c.l=(e,t,a,o)=>{if(r[e])r[e].push(t);else{var s,i;if(void 0!==a)for(var l=document.getElementsByTagName("script"),d=0;d<l.length;d++){var u=l[d];if(u.getAttribute("src")==e||u.getAttribute("data-webpack")==n+a){s=u;break}}s||(i=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,c.nc&&s.setAttribute("nonce",c.nc),s.setAttribute("data-webpack",n+a),s.src=e),r[e]=[t];var h=(t,a)=>{s.onerror=s.onload=null,clearTimeout(p);var n=r[e];if(delete r[e],s.parentNode&&s.parentNode.removeChild(s),n&&n.forEach((e=>e(a))),t)return t(a)},p=setTimeout(h.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=h.bind(null,s.onerror),s.onload=h.bind(null,s.onload),i&&document.head.appendChild(s)}},c.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),c.p="/static/assets/",o=e=>new Promise(((t,a)=>{var r=c.miniCssF(e),n=c.p+r;if(((e,t)=>{for(var a=document.getElementsByTagName("link"),r=0;r<a.length;r++){var n=(s=a[r]).getAttribute("data-href")||s.getAttribute("href");if("stylesheet"===s.rel&&(n===e||n===t))return s}var o=document.getElementsByTagName("style");for(r=0;r<o.length;r++){var s;if((n=(s=o[r]).getAttribute("data-href"))===e||n===t)return s}})(r,n))return t();((e,t,a,r)=>{var n=document.createElement("link");n.rel="stylesheet",n.type="text/css",n.onerror=n.onload=o=>{if(n.onerror=n.onload=null,"load"===o.type)a();else{var s=o&&("load"===o.type?"missing":o.type),i=o&&o.target&&o.target.href||t,l=new Error("Loading CSS chunk "+e+" failed.\n("+i+")");l.code="CSS_CHUNK_LOAD_FAILED",l.type=s,l.request=i,n.parentNode.removeChild(n),r(l)}},n.href=t,document.head.appendChild(n)})(e,n,t,a)})),s={9782:0,3:0,3880:0},c.f.miniCss=(e,t)=>{s[e]?t.push(s[e]):0!==s[e]&&{3:1,128:1,423:1,823:1,1066:1,1193:1,1243:1,1391:1,1921:1,2862:1,3609:1,3776:1,4192:1,4473:1,5278:1,5322:1,5965:1,6259:1,6358:1,7040:1,7219:1,7828:1,7893:1,8903:1,9574:1,9885:1}[e]&&t.push(s[e]=o(e).then((()=>{s[e]=0}),(t=>{throw delete s[e],t})))},(()=>{var e={9782:0,3:0,3880:0};c.f.j=(t,a)=>{var r=c.o(e,t)?e[t]:void 0;if(0!==r)if(r)a.push(r[2]);else if(3!=t){var n=new Promise(((a,n)=>r=e[t]=[a,n]));a.push(r[2]=n);var o=c.p+c.u(t),s=new Error;c.l(o,(a=>{if(c.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var n=a&&("load"===a.type?"missing":a.type),o=a&&a.target&&a.target.src;s.message="Loading chunk "+t+" failed.\n("+n+": "+o+")",s.name="ChunkLoadError",s.type=n,s.request=o,r[1](s)}}),"chunk-"+t,t)}else e[t]=0},c.O.j=t=>0===e[t];var t=(t,a)=>{var r,n,[o,s,i]=a,l=0;if(o.some((t=>0!==e[t]))){for(r in s)c.o(s,r)&&(c.m[r]=s[r]);if(i)var d=i(c)}for(t&&t(a);l<o.length;l++)n=o[l],c.o(e,n)&&e[n]&&e[n][0](),e[o[l]]=0;return c.O(d)},a=globalThis.webpackChunksuperset=globalThis.webpackChunksuperset||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})(),c.O(void 0,[1216,504,7550,2320,4998,7211,8075,7017,7591,9356,4654,8483,4741,741,9691,5379,876,995,9602,8680,323,6962,3853,7843,2825,3375,1958,3389,621,5618],(()=>c(26009)));var d=c.O(void 0,[1216,504,7550,2320,4998,7211,8075,7017,7591,9356,4654,8483,4741,741,9691,5379,876,995,9602,8680,323,6962,3853,7843,2825,3375,1958,3389,621,5618],(()=>c(90001)));d=c.O(d)})();