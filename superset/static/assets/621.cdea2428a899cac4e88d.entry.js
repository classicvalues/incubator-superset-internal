(globalThis.webpackChunksuperset=globalThis.webpackChunksuperset||[]).push([[621,5042,6439],{69753:(e,t,r)=>{"use strict";r.d(t,{Z:()=>yt});var o=r(14299),n=r(26474),a=r(46415),i=r(74779),l=r(48243),s=r(73699),c=r(40758),u=r(90022),d=r(42575),m=r(77512),g=r(48143),f=r(28801),p=r(93775),h=r(92565),b=r(8795),y=r(79909),w=r(93273),k=r(79954),C=r(16915),T=r(65314),_=r(18917),F=r(10773),S=r(97235),Z=r(83009),v=r(90081),x=r(93661),D=r(96082),I=r(82622),R=r(40676),E=r(66121),A=r(63955),M=r(99483),P=r(80772),q=r(28733),N=r(66306),L=r(55778),V=r(47285),U=r(95990),O=r(26425),Q=r(62110),H=r(51873),G=r(84946),B=r(38299),j=r(69774),W=r(54915),X=r(58662),z=r(64405),J=r(79917),K=r(72812),$=r(66116),Y=r(52595),ee=r(15179),te=r(40702),re=r(60650),oe=r(52686),ne=r(69205),ae=r(23274);const ie={defaultValue:null,enableEmptyFilter:!1,inverseSelection:!1,defaultToFirstItem:!1,multiSelect:!0,searchAllOptions:!1,sortAscending:!0},le=(e,t)=>{const{search:r,coltypeMap:o}=(null==t?void 0:t.ownState)||{},{sortAscending:n,sortMetric:a}={...ie,...e};return(0,ne.Z)(e,(e=>{const{columns:t=[],filters:i=[]}=e,l=[];r&&t.forEach((e=>{o[e]===ae.Z.STRING?l.push({col:e,op:"ILIKE",val:`%${r}%`}):o[e]!==ae.Z.NUMERIC||Number.isNaN(Number(r))||l.push({col:e,op:">=",val:Number(r)})}));const s=a?[a]:t;return[{...e,groupby:t,metrics:a?[a]:[],filters:i.concat(l),orderby:a||void 0!==n?s.map((e=>[e,!!n])):[]}]}))};var se=r(42621),ce=r(88483),ue=r(28500);const{enableEmptyFilter:de,inverseSelection:me,multiSelect:ge,defaultToFirstItem:fe,searchAllOptions:pe,sortAscending:he}=ie,be={controlPanelSections:[ce.sections.legacyRegularTime,{label:(0,re.t)("Query"),expanded:!0,controlSetRows:[[{name:"groupby",config:{...ue.Hq.groupby,label:"Column",required:!0}}]]},{label:(0,re.t)("UI Configuration"),expanded:!0,controlSetRows:[[{name:"sortAscending",config:{type:"CheckboxControl",renderTrigger:!0,label:(0,re.t)("Sort ascending"),default:he,description:(0,re.t)("Check for sorting ascending")}}],[{name:"multiSelect",config:{type:"CheckboxControl",label:(0,re.t)("Multiple select"),default:ge,resetConfig:!0,affectsDataMask:!0,renderTrigger:!0,description:(0,re.t)("Allow selecting multiple values")}}],[{name:"enableEmptyFilter",config:{type:"CheckboxControl",label:(0,re.t)("Required"),default:de,renderTrigger:!0,description:(0,re.t)("User must select a value before applying the filter")}}],[{name:"defaultToFirstItem",config:{type:"CheckboxControl",label:(0,re.t)("Default to first item"),default:fe,resetConfig:!0,affectsDataMask:!0,renderTrigger:!0,requiredFirst:!0,description:(0,re.t)("Select first item by default (when using this option, default value canâ€™t be set)")}}],[{name:"inverseSelection",config:{type:"CheckboxControl",renderTrigger:!0,affectsDataMask:!0,label:(0,re.t)("Inverse selection"),default:me,description:(0,re.t)("Exclude selected values")}}],[{name:"searchAllOptions",config:{type:"CheckboxControl",renderTrigger:!0,affectsDataMask:!0,label:(0,re.t)("Search all filter options"),default:pe,description:(0,re.t)("By default, each filter loads at most 1000 choices at the initial page load. Check this box if you have more than 1000 filter values and want to enable dynamically searching that loads filter values as users type (may add stress to your database).")}}]]}],controlOverrides:{groupby:{multi:!1,validators:[se.Z]}}};function ye(e){const{formData:t,height:r,hooks:o,queriesData:n,width:a,behaviors:i,appSection:l,filterState:s,isRefreshing:c}=e,u={...ie,...t},{setDataMask:d=(()=>{}),setFocusedFilter:m=(()=>{}),unsetFocusedFilter:g=(()=>{})}=o,[f]=n,{colnames:p=[],coltypes:h=[],data:b=[]}=f||{};return{filterState:s,coltypeMap:p.reduce(((e,t,r)=>({...e,[t]:h[r]})),{}),appSection:l,width:a,behaviors:i,height:r,data:b,formData:u,isRefreshing:c,setDataMask:d,setFocusedFilter:m,unsetFocusedFilter:g}}var we=r(80757);class ke extends ee.Z{constructor(){const e=new te.Z({name:(0,re.t)("Select filter"),description:(0,re.t)("Select filter plugin using AntD"),behaviors:[oe.cg.INTERACTIVE_CHART,oe.cg.NATIVE_FILTER],enableNoResults:!1,tags:[(0,re.t)("Experimental")],thumbnail:we});super({buildQuery:le,controlPanel:be,loadChart:()=>r.e(5181).then(r.bind(r,45181)),metadata:e,transformProps:ye})}}function Ce(e){const{groupby:t}=e,[r=""]=t||[];return(0,ne.Z)(e,(e=>[{...e,columns:[],groupby:[],metrics:[{aggregate:"MIN",column:{column_name:r,id:1,type_generic:ae.Z.NUMERIC},expressionType:"SIMPLE",hasCustomLabel:!0,label:"min"},{aggregate:"MAX",column:{column_name:r,id:2,type_generic:ae.Z.NUMERIC},expressionType:"SIMPLE",hasCustomLabel:!0,label:"max"}]}]))}const Te={controlPanelSections:[ce.sections.legacyRegularTime,{label:(0,re.t)("Query"),expanded:!0,controlSetRows:[[{name:"groupby",config:{...ue.Hq.groupby,label:"Column",required:!0}}]]},{label:(0,re.t)("UI Configuration"),expanded:!0,controlSetRows:[[{name:"enableEmptyFilter",config:{type:"CheckboxControl",label:(0,re.t)("Required"),default:!1,renderTrigger:!0,description:(0,re.t)("User must select a value for this filter.")}}]]}]};function _e(e){const{formData:t,height:r,hooks:o,queriesData:n,width:a,behaviors:i,filterState:l}=e,{setDataMask:s=(()=>{}),setFocusedFilter:c=(()=>{}),unsetFocusedFilter:u=(()=>{})}=o,{data:d}=n[0];return{data:d,formData:t,behaviors:i,height:r,setDataMask:s,filterState:l,width:a,setFocusedFilter:c,unsetFocusedFilter:u}}var Fe=r(29872);class Se extends ee.Z{constructor(){const e=new te.Z({name:(0,re.t)("Range filter"),description:(0,re.t)("Range filter plugin using AntD"),behaviors:[oe.cg.INTERACTIVE_CHART,oe.cg.NATIVE_FILTER],tags:[(0,re.t)("Experimental")],thumbnail:Fe});super({buildQuery:Ce,controlPanel:Te,loadChart:()=>r.e(326).then(r.bind(r,30326)),metadata:e,transformProps:_e})}}const Ze={controlPanelSections:[{label:(0,re.t)("Query"),expanded:!0,controlSetRows:[[{name:"groupby",config:{...ue.Hq.groupby,label:"Column",required:!0}}]]},{label:(0,re.t)("UI Configuration"),expanded:!0,controlSetRows:[[{name:"enableEmptyFilter",config:{type:"CheckboxControl",label:(0,re.t)("Required"),default:!1,renderTrigger:!0,description:(0,re.t)("User must select a value for this filter.")}}]]}]},ve={defaultValue:null};function xe(e){const{formData:t,height:r,hooks:o,queriesData:n,width:a,behaviors:i,filterState:l}=e,{setDataMask:s=(()=>{}),setFocusedFilter:c=(()=>{}),unsetFocusedFilter:u=(()=>{})}=o,{data:d}=n[0];return{data:d,filterState:l,formData:{...ve,...t},height:r,behaviors:i,setDataMask:s,setFocusedFilter:c,unsetFocusedFilter:u,width:a}}var De=r(29884);class Ie extends ee.Z{constructor(){const e=new te.Z({name:(0,re.t)("Time filter"),description:(0,re.t)("Custom time filter plugin"),behaviors:[oe.cg.INTERACTIVE_CHART,oe.cg.NATIVE_FILTER],thumbnail:De,tags:[(0,re.t)("Experimental")],datasourceCount:0});super({controlPanel:Ze,loadChart:()=>Promise.all([r.e(1216),r.e(4998),r.e(9356),r.e(7843),r.e(3375),r.e(9483)]).then(r.bind(r,89483)),metadata:e,transformProps:xe})}}function Re(e){return(0,ne.Z)(e,(e=>[{result_type:"columns",columns:[],metrics:[],orderby:[]}]))}const Ee={controlPanelSections:[{label:(0,re.t)("UI Configuration"),expanded:!0,controlSetRows:[[{name:"enableEmptyFilter",config:{type:"CheckboxControl",label:(0,re.t)("Required"),default:!1,renderTrigger:!0,description:(0,re.t)("User must select a value for this filter.")}}]]}]},Ae={defaultValue:null};function Me(e){const{behaviors:t,formData:r,height:o,hooks:n,queriesData:a,width:i,filterState:l}=e,{setDataMask:s=(()=>{}),setFocusedFilter:c=(()=>{}),unsetFocusedFilter:u=(()=>{})}=n,{data:d}=a[0];return{filterState:l,behaviors:t,width:i,height:o,data:d,formData:{...Ae,...r},setDataMask:s,setFocusedFilter:c,unsetFocusedFilter:u}}var Pe=r(53041);class qe extends ee.Z{constructor(){const e=new te.Z({name:(0,re.t)("Time column"),description:(0,re.t)("Time column filter plugin"),behaviors:[oe.cg.INTERACTIVE_CHART,oe.cg.NATIVE_FILTER],tags:[(0,re.t)("Experimental")],thumbnail:Pe});super({buildQuery:Re,controlPanel:Ee,loadChart:()=>r.e(4572).then(r.bind(r,24572)),metadata:e,transformProps:Me})}}function Ne(e){return(0,ne.Z)(e,(e=>[{...e,result_type:"columns",columns:[],metrics:[],orderby:[]}]))}const Le={defaultValue:null,multiSelect:!1},{multiSelect:Ve}=Le,Ue={controlPanelSections:[ce.sections.legacyRegularTime,{label:(0,re.t)("Query"),expanded:!0,controlSetRows:[[{name:"groupby",config:{...ue.Hq.groupby,label:"Columns to show",multiple:!0,required:!1}}]]},{label:(0,re.t)("UI Configuration"),expanded:!0,controlSetRows:[[{name:"multiSelect",config:{type:"CheckboxControl",label:(0,re.t)("Multiple select"),default:Ve,affectsDataMask:!0,resetConfig:!0,renderTrigger:!0,description:(0,re.t)("Allow selecting multiple values")}}],[{name:"enableEmptyFilter",config:{type:"CheckboxControl",label:(0,re.t)("Required"),default:!1,renderTrigger:!0,description:(0,re.t)("User must select a value for this filter.")}}]]}]};function Oe(e){const{behaviors:t,formData:r,height:o,hooks:n,queriesData:a,width:i,filterState:l}=e,{setDataMask:s=(()=>{}),setFocusedFilter:c=(()=>{}),unsetFocusedFilter:u=(()=>{})}=n,{data:d}=a[0];return{filterState:l,behaviors:t,width:i,height:o,data:d,formData:{...Le,...r},setDataMask:s,setFocusedFilter:c,unsetFocusedFilter:u}}var Qe=r(43225);class He extends ee.Z{constructor(){const e=new te.Z({name:(0,re.t)("Group By"),description:(0,re.t)("Group By filter plugin"),behaviors:[oe.cg.INTERACTIVE_CHART,oe.cg.NATIVE_FILTER],tags:[(0,re.t)("Experimental")],thumbnail:Qe});super({buildQuery:Ne,controlPanel:Ue,loadChart:()=>r.e(8464).then(r.bind(r,8464)),metadata:e,transformProps:Oe})}}function Ge(e){return(0,ne.Z)(e,(()=>[{result_type:"timegrains",columns:[],metrics:[],orderby:[]}]))}const Be={controlPanelSections:[{label:(0,re.t)("UI Configuration"),expanded:!0,controlSetRows:[[{name:"enableEmptyFilter",config:{type:"CheckboxControl",label:(0,re.t)("Required"),default:!1,renderTrigger:!0,description:(0,re.t)("User must select a value for this filter.")}}]]}]},je={defaultValue:null};function We(e){const{formData:t,height:r,hooks:o,queriesData:n,width:a,filterState:i}=e,{setDataMask:l=(()=>{}),setFocusedFilter:s=(()=>{}),unsetFocusedFilter:c=(()=>{})}=o,{data:u}=n[0];return{filterState:i,width:a,height:r,data:u,formData:{...je,...t},setDataMask:l,setFocusedFilter:s,unsetFocusedFilter:c}}var Xe=r(78292);class ze extends ee.Z{constructor(){const e=new te.Z({name:(0,re.t)("Time grain"),description:(0,re.t)("Time grain filter plugin"),behaviors:[oe.cg.INTERACTIVE_CHART,oe.cg.NATIVE_FILTER],tags:[(0,re.t)("Experimental")],thumbnail:Xe});super({buildQuery:Ge,controlPanel:Be,loadChart:()=>r.e(1948).then(r.bind(r,81948)),metadata:e,transformProps:We})}}var Je=r(89253);const Ke=()=>{};function $e(e){const{datasource:t,formData:r,hooks:o,initialValues:n,queriesData:a,rawDatasource:i={},rawFormData:l,width:s,height:c}=e,{onAddFilter:u=Ke,onFilterMenuOpen:d=Ke,onFilterMenuClose:m=Ke}=o,{sliceId:g,dateFilter:f,instantFiltering:p,showDruidTimeGranularity:h,showDruidTimeOrigin:b,showSqlaTimeColumn:y,showSqlaTimeGranularity:w}=r,{verboseMap:k={}}=t,C=(r.filterConfigs||[]).map((e=>({...e,key:e.column,label:e.label||k[e.column]||e.column})));return{chartId:g,width:s,height:c,datasource:i,filtersChoices:a[0].data,filtersFields:C,instantFiltering:p,onChange:u,onFilterMenuOpen:d,onFilterMenuClose:m,origSelectedValues:n||{},showDateFilter:f,showDruidTimeGrain:h,showDruidTimeOrigin:b,showSqlaTimeColumn:y,showSqlaTimeGrain:w,rawFormData:l}}var Ye,et,tt=r(34168),rt=(r(67294),r(11965));const ot=document.getElementById("app"),nt=JSON.parse(ot.getAttribute("data-bootstrap")),at=!(null==nt||null==(Ye=nt.common)||null==(et=Ye.conf)||!et.DRUID_IS_ACTIVE),it=at?[[{name:"show_druid_time_granularity",config:{type:"CheckboxControl",label:(0,re.t)("Show Druid granularity dropdown"),default:!1,description:(0,re.t)("Check to include Druid granularity dropdown")}}],[{name:"show_druid_time_origin",config:{type:"CheckboxControl",label:(0,re.t)("Show Druid time origin"),default:!1,description:(0,re.t)("Check to include time origin dropdown")}}]]:[],lt={controlPanelSections:[ce.sections.legacyTimeseriesTime,{label:(0,re.t)("Filters configuration"),expanded:!0,controlSetRows:[[{name:"filter_configs",config:{type:"CollectionControl",label:"Filters",description:(0,re.t)("Filter configuration for the filter box"),validators:[],controlName:"FilterBoxItemControl",mapStateToProps:({datasource:e})=>({datasource:e})}}],[(0,rt.tZ)("hr",null)],[{name:"date_filter",config:{type:"CheckboxControl",label:(0,re.t)("Date filter"),default:!0,description:(0,re.t)("Whether to include a time filter")}}],[{name:"instant_filtering",config:{type:"CheckboxControl",label:(0,re.t)("Instant filtering"),renderTrigger:!0,default:!1,description:(0,re.t)("Check to apply filters instantly as they change instead of displaying [Apply] button")}}],[{name:"show_sqla_time_granularity",config:{type:"CheckboxControl",label:at?(0,re.t)("Show SQL time grain dropdown"):(0,re.t)("Show time grain dropdown"),default:!1,description:at?(0,re.t)("Check to include SQL time grain dropdown"):(0,re.t)("Check to include time grain dropdown")}}],[{name:"show_sqla_time_column",config:{type:"CheckboxControl",label:at?(0,re.t)("Show SQL time column"):(0,re.t)("Show time column"),default:!1,description:(0,re.t)("Check to include time column dropdown")}}],...it,["adhoc_filters"]]}],controlOverrides:{adhoc_filters:{label:(0,re.t)("Limit selector values"),description:(0,re.t)("These filters apply to the values available in the dropdowns")}}},st=new te.Z({category:(0,re.t)("Tools"),name:(0,re.t)("Filter box"),description:(0,re.t)("Chart component that lets you add a custom filter UI in your dashboard. When added to dashboard, a filter box lets users specify specific values or ranges to filter charts by. The charts that each filter box is applied to can be fine tuned as well in the dashboard view.\n\n    Note that this plugin is being replaced with the new Filters feature that lives in the dashboard view itself. It's easier to use and has more capabilities!"),thumbnail:tt,useLegacyApi:!0});class ct extends ee.Z{constructor(){super({controlPanel:lt,metadata:st,transformProps:$e,loadChart:()=>Promise.all([r.e(1216),r.e(4998),r.e(9356),r.e(4654),r.e(741),r.e(6962),r.e(7843),r.e(2825),r.e(3375),r.e(3389),r.e(3)]).then(r.bind(r,51777))})}}function ut(e){const{height:t,datasource:r,formData:o,queriesData:n}=e,{columnCollection:a=[],groupby:i,metrics:l,url:s}=o,{records:c,columns:u}=n[0].data,d=(null==i?void 0:i.length)>0;let m;if(d)m=u.map((e=>"object"==typeof e?e:{label:e}));else{const e=r.metrics.reduce(((e,t)=>{const r=e;return r[t.metric_name]=t,r}),{});m=l.map((t=>"object"==typeof t?t:e[t]))}return a.forEach((e=>{const t=e;void 0!==t.timeLag&&null!==t.timeLag&&""!==t.timeLag&&(t.timeLag=parseInt(t.timeLag,10))})),{height:t,data:c,columnConfigs:a,rows:m,rowType:d?"column":"metric",url:s}}var dt=r(24432);const mt=new te.Z({category:(0,re.t)("Table"),name:(0,re.t)("Time-series Table"),description:(0,re.t)("Compare multiple time series charts (as sparklines) and related metrics quickly."),tags:[(0,re.t)("Multi-Variables"),(0,re.t)("Comparison"),(0,re.t)("Legacy"),(0,re.t)("Percentages"),(0,re.t)("Tabular"),(0,re.t)("Text"),(0,re.t)("Trend")],thumbnail:dt,useLegacyApi:!0});class gt extends ee.Z{constructor(){super({metadata:mt,transformProps:ut,loadChart:()=>Promise.all([r.e(1216),r.e(1095),r.e(6962),r.e(423)]).then(r.bind(r,55938))})}}class ft extends n.Z{constructor(){const e=(0,a.c)(a.T.DASHBOARD_FILTERS_EXPERIMENTAL)?[(new He).configure({key:"filter_groupby"})]:[];super({name:"Legacy charts",presets:[new N.kA],plugins:[(new v.Z).configure({key:"area"}),(new x.Z).configure({key:"bar"}),(new i.Z).configure({key:"big_number"}),(new l.Z).configure({key:"big_number_total"}),(new L.Z).configure({key:"box_plot"}),(new D.Z).configure({key:"bubble"}),(new I.Z).configure({key:"bullet"}),(new s.Z).configure({key:"cal_heatmap"}),(new c.Z).configure({key:"chord"}),(new R.Z).configure({key:"compare"}),(new u.Z).configure({key:"country_map"}),(new E.Z).configure({key:"dist_bar"}),(new A.Z).configure({key:"dual_line"}),(new d.Z).configure({key:"event_flow"}),(new ct).configure({key:"filter_box"}),(new V.Z).configure({key:"funnel"}),(new U.Z).configure({key:"treemap_v2"}),(new O.Z).configure({key:"gauge_chart"}),(new Q.Z).configure({key:"graph_chart"}),(new H.Z).configure({key:"radar"}),(new G.Z).configure({key:"mixed_timeseries"}),(new m.Z).configure({key:"heatmap"}),(new g.Z).configure({key:"histogram"}),(new f.Z).configure({key:"horizon"}),(new M.Z).configure({key:"line"}),(new P.Z).configure({key:"line_multi"}),(new p.Z).configure({key:"mapbox"}),(new h.Z).configure({key:"paired_ttest"}),(new b.Z).configure({key:"para"}),(new y.Z).configure({key:"partition"}),(new B.Z).configure({key:"pie"}),(new w.Z).configure({key:"pivot_table"}),(new Je.Z).configure({key:"pivot_table_v2"}),(new k.Z).configure({key:"rose"}),(new C.Z).configure({key:"sankey"}),(new T.Z).configure({key:"sunburst"}),(new _.Z).configure({key:"table"}),(new q.Z).configure({key:"time_pivot"}),(new gt).configure({key:"time_table"}),(new F.Z).configure({key:"treemap"}),(new S.Z).configure({key:"word_cloud"}),(new Z.Z).configure({key:"world_map"}),(new j.Z).configure({key:"echarts_area"}),(new W.Z).configure({key:"echarts_timeseries"}),(new X.Z).configure({key:"echarts_timeseries_bar"}),(new z.Z).configure({key:"echarts_timeseries_line"}),(new J.Z).configure({key:"echarts_timeseries_smooth"}),(new K.Z).configure({key:"echarts_timeseries_scatter"}),(new $.Z).configure({key:"echarts_timeseries_step"}),(new ke).configure({key:"filter_select"}),(new Se).configure({key:"filter_range"}),(new Ie).configure({key:"filter_time"}),(new qe).configure({key:"filter_timecolumn"}),(new ze).configure({key:"filter_timegrain"}),(new Y.Z).configure({key:"tree_chart"}),...e]})}}var pt=r(16737);const ht={controlPanelSections:[{label:(0,re.t)("Code"),controlSetRows:[[{name:"markup_type",config:{type:"SelectControl",label:(0,re.t)("Markup type"),clearable:!1,choices:(0,pt.mG)(["markdown","html"]),default:"markdown",validators:[se.Z],description:(0,re.t)("Pick your favorite markup language")}}],[{name:"code",config:{type:"TextAreaControl",label:(0,re.t)("Code"),description:(0,re.t)("Put your code here"),mapStateToProps:e=>({language:e.controls&&e.controls.markup_type?e.controls.markup_type.value:"markdown"}),default:""}}]]}],controlOverrides:{code:{default:"####Section Title\nA paragraph describing the section of the dashboard, right before the separator line \n\n---------------"}},sectionOverrides:{druidTimeSeries:{controlSetRows:[]},sqlaTimeSeries:{controlSetRows:[]}}},bt={controlPanelSections:[ce.sections.legacyTimeseriesTime,{label:(0,re.t)("Query"),expanded:!0,controlSetRows:[["metrics"],["adhoc_filters"],["groupby"],["limit"],[{name:"column_collection",config:{type:"CollectionControl",label:(0,re.t)("Time series columns"),renderTrigger:!0,validators:[se.Z],controlName:"TimeSeriesColumnControl"}}],["row_limit"],[{name:"url",config:{type:"TextControl",label:(0,re.t)("URL"),description:(0,re.t)("Templated link, it's possible to include {{ metric }} or other values coming from the controls."),default:""}}]]}],controlOverrides:{groupby:{multiple:!1}}};function yt(){(new ft).register(),(0,o.Z)().registerValue("separator",ht).registerValue("time_table",bt)}},75042:()=>{}}]);