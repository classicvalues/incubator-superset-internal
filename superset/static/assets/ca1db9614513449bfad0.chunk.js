/*! For license information please see ca1db9614513449bfad0.chunk.js.LICENSE */
(window.webpackJsonp=window.webpackJsonp||[]).push([[42],{105:function(e,t,r){"use strict";r.d(t,"h",(function(){return o})),r.d(t,"m",(function(){return i})),r.d(t,"g",(function(){return s})),r.d(t,"i",(function(){return l})),r.d(t,"j",(function(){return c})),r.d(t,"n",(function(){return u})),r.d(t,"e",(function(){return d})),r.d(t,"b",(function(){return h})),r.d(t,"o",(function(){return p})),r.d(t,"f",(function(){return f})),r.d(t,"l",(function(){return g})),r.d(t,"c",(function(){return b})),r.d(t,"d",(function(){return m})),r.d(t,"a",(function(){return v})),r.d(t,"k",(function(){return y})),r.d(t,"p",(function(){return O})),r.d(t,"q",(function(){return x}));var n=r(70),a=r.n(n);const o="load_chart",i="render_chart",s="hide_browser_tab",l="mount_dashboard",c="mount_explorer",u="select_dashboard_tab",d="force_refresh_chart",h="change_explore_controls",p="toggle_edit_dashboard",f="force_refresh_dashboard",g="periodic_render_dashboard",b="explore_dashboard_chart",m="export_csv_dashboard_chart",v="change_dashboard_filter",y="omnibar_triggered",O=new a.a([o,i,s]),x=(new a.a([l,u,b,d,m,v,h,p,f,g,y,c]),{getTimestamp:()=>Math.round(window.performance.now())})},1072:function(e,t,r){"use strict";r.d(t,"d",(function(){return l})),r.d(t,"c",(function(){return c})),r.d(t,"e",(function(){return u})),r.d(t,"b",(function(){return d})),r.d(t,"a",(function(){return h})),r.d(t,"f",(function(){return p}));var n=r(43),a=r.n(n),o=r(56),i=r.n(o);function s(e){var t;return i()(t=a()(e)).call(t,(e,t)=>{const r=e;return r[t]=t,r},{})}const l={FORMULA:{value:"FORMULA",label:"Formula"},EVENT:{value:"EVENT",label:"Event",supportNativeSource:!0},INTERVAL:{value:"INTERVAL",label:"Interval",supportNativeSource:!0},TIME_SERIES:{value:"TIME_SERIES",label:"Time series"}},c=s(l),u=c.FORMULA,d={NATIVE:{value:"NATIVE",label:"Superset annotation"}},h=s(d);function p(e){return!!e}},1073:function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=r(54);function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var o=!1,i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.targetId=null,this.internalMonitor=t.getMonitor()}var t,r,i;return t=e,(r=[{key:"receiveHandlerId",value:function(e){this.targetId=e}},{key:"getHandlerId",value:function(){return this.targetId}},{key:"subscribeToStateChange",value:function(e,t){return this.internalMonitor.subscribeToStateChange(e,t)}},{key:"canDrop",value:function(){if(!this.targetId)return!1;Object(n.a)(!o,"You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor");try{return o=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{o=!1}}},{key:"isOver",value:function(e){return!!this.targetId&&this.internalMonitor.isOverTarget(this.targetId,e)}},{key:"getItemType",value:function(){return this.internalMonitor.getItemType()}},{key:"getItem",value:function(){return this.internalMonitor.getItem()}},{key:"getDropResult",value:function(){return this.internalMonitor.getDropResult()}},{key:"didDrop",value:function(){return this.internalMonitor.didDrop()}},{key:"getInitialClientOffset",value:function(){return this.internalMonitor.getInitialClientOffset()}},{key:"getInitialSourceClientOffset",value:function(){return this.internalMonitor.getInitialSourceClientOffset()}},{key:"getSourceClientOffset",value:function(){return this.internalMonitor.getSourceClientOffset()}},{key:"getClientOffset",value:function(){return this.internalMonitor.getClientOffset()}},{key:"getDifferenceFromInitialOffset",value:function(){return this.internalMonitor.getDifferenceFromInitialOffset()}}])&&a(t.prototype,r),i&&a(t,i),e}()},1074:function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var n=r(286),a=r(891),o=r(824);function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s=function(){function e(t){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.hooks=Object(a.a)({dropTarget:function(e,t){r.clearDropTarget(),r.dropTargetOptions=t,Object(o.a)(e)?r.dropTargetRef=e:r.dropTargetNode=e,r.reconnect()}}),this.handlerId=null,this.dropTargetRef=null,this.dropTargetOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDropTarget=null,this.lastConnectedDropTargetOptions=null,this.backend=t}var t,r,s;return t=e,(r=[{key:"reconnect",value:function(){var e=this.didHandlerIdChange()||this.didDropTargetChange()||this.didOptionsChange();e&&this.disconnectDropTarget();var t=this.dropTarget;this.handlerId&&(t?e&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDropTarget=t,this.lastConnectedDropTargetOptions=this.dropTargetOptions,this.unsubscribeDropTarget=this.backend.connectDropTarget(this.handlerId,t,this.dropTargetOptions)):this.lastConnectedDropTarget=t)}},{key:"receiveHandlerId",value:function(e){e!==this.handlerId&&(this.handlerId=e,this.reconnect())}},{key:"didHandlerIdChange",value:function(){return this.lastConnectedHandlerId!==this.handlerId}},{key:"didDropTargetChange",value:function(){return this.lastConnectedDropTarget!==this.dropTarget}},{key:"didOptionsChange",value:function(){return!Object(n.a)(this.lastConnectedDropTargetOptions,this.dropTargetOptions)}},{key:"disconnectDropTarget",value:function(){this.unsubscribeDropTarget&&(this.unsubscribeDropTarget(),this.unsubscribeDropTarget=void 0)}},{key:"clearDropTarget",value:function(){this.dropTargetRef=null,this.dropTargetNode=null}},{key:"connectTarget",get:function(){return this.dropTarget}},{key:"dropTargetOptions",get:function(){return this.dropTargetOptionsInternal},set:function(e){this.dropTargetOptionsInternal=e}},{key:"dropTarget",get:function(){return this.dropTargetNode||this.dropTargetRef&&this.dropTargetRef.current}}])&&i(t.prototype,r),s&&i(t,s),e}()},1075:function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var n=r(54);function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var o=!1,i=!1,s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.sourceId=null,this.internalMonitor=t.getMonitor()}var t,r,s;return t=e,(r=[{key:"receiveHandlerId",value:function(e){this.sourceId=e}},{key:"getHandlerId",value:function(){return this.sourceId}},{key:"canDrag",value:function(){Object(n.a)(!o,"You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return o=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{o=!1}}},{key:"isDragging",value:function(){if(!this.sourceId)return!1;Object(n.a)(!i,"You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return i=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{i=!1}}},{key:"subscribeToStateChange",value:function(e,t){return this.internalMonitor.subscribeToStateChange(e,t)}},{key:"isDraggingSource",value:function(e){return this.internalMonitor.isDraggingSource(e)}},{key:"isOverTarget",value:function(e,t){return this.internalMonitor.isOverTarget(e,t)}},{key:"getTargetIds",value:function(){return this.internalMonitor.getTargetIds()}},{key:"isSourcePublic",value:function(){return this.internalMonitor.isSourcePublic()}},{key:"getSourceId",value:function(){return this.internalMonitor.getSourceId()}},{key:"subscribeToOffsetChange",value:function(e){return this.internalMonitor.subscribeToOffsetChange(e)}},{key:"canDragSource",value:function(e){return this.internalMonitor.canDragSource(e)}},{key:"canDropOnTarget",value:function(e){return this.internalMonitor.canDropOnTarget(e)}},{key:"getItemType",value:function(){return this.internalMonitor.getItemType()}},{key:"getItem",value:function(){return this.internalMonitor.getItem()}},{key:"getDropResult",value:function(){return this.internalMonitor.getDropResult()}},{key:"didDrop",value:function(){return this.internalMonitor.didDrop()}},{key:"getInitialClientOffset",value:function(){return this.internalMonitor.getInitialClientOffset()}},{key:"getInitialSourceClientOffset",value:function(){return this.internalMonitor.getInitialSourceClientOffset()}},{key:"getSourceClientOffset",value:function(){return this.internalMonitor.getSourceClientOffset()}},{key:"getClientOffset",value:function(){return this.internalMonitor.getClientOffset()}},{key:"getDifferenceFromInitialOffset",value:function(){return this.internalMonitor.getDifferenceFromInitialOffset()}}])&&a(t.prototype,r),s&&a(t,s),e}()},1076:function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var n=r(891),a=r(824),o=r(286);function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s=function(){function e(t){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.hooks=Object(n.a)({dragSource:function(e,t){r.clearDragSource(),r.dragSourceOptions=t||null,Object(a.a)(e)?r.dragSourceRef=e:r.dragSourceNode=e,r.reconnectDragSource()},dragPreview:function(e,t){r.clearDragPreview(),r.dragPreviewOptions=t||null,Object(a.a)(e)?r.dragPreviewRef=e:r.dragPreviewNode=e,r.reconnectDragPreview()}}),this.handlerId=null,this.dragSourceRef=null,this.dragSourceOptionsInternal=null,this.dragPreviewRef=null,this.dragPreviewOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDragSource=null,this.lastConnectedDragSourceOptions=null,this.lastConnectedDragPreview=null,this.lastConnectedDragPreviewOptions=null,this.backend=t}var t,r,s;return t=e,(r=[{key:"receiveHandlerId",value:function(e){this.handlerId!==e&&(this.handlerId=e,this.reconnect())}},{key:"reconnect",value:function(){this.reconnectDragSource(),this.reconnectDragPreview()}},{key:"reconnectDragSource",value:function(){var e=this.dragSource,t=this.didHandlerIdChange()||this.didConnectedDragSourceChange()||this.didDragSourceOptionsChange();t&&this.disconnectDragSource(),this.handlerId&&(e?t&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragSource=e,this.lastConnectedDragSourceOptions=this.dragSourceOptions,this.dragSourceUnsubscribe=this.backend.connectDragSource(this.handlerId,e,this.dragSourceOptions)):this.lastConnectedDragSource=e)}},{key:"reconnectDragPreview",value:function(){var e=this.dragPreview,t=this.didHandlerIdChange()||this.didConnectedDragPreviewChange()||this.didDragPreviewOptionsChange();t&&this.disconnectDragPreview(),this.handlerId&&(e?t&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragPreview=e,this.lastConnectedDragPreviewOptions=this.dragPreviewOptions,this.dragPreviewUnsubscribe=this.backend.connectDragPreview(this.handlerId,e,this.dragPreviewOptions)):this.lastConnectedDragPreview=e)}},{key:"didHandlerIdChange",value:function(){return this.lastConnectedHandlerId!==this.handlerId}},{key:"didConnectedDragSourceChange",value:function(){return this.lastConnectedDragSource!==this.dragSource}},{key:"didConnectedDragPreviewChange",value:function(){return this.lastConnectedDragPreview!==this.dragPreview}},{key:"didDragSourceOptionsChange",value:function(){return!Object(o.a)(this.lastConnectedDragSourceOptions,this.dragSourceOptions)}},{key:"didDragPreviewOptionsChange",value:function(){return!Object(o.a)(this.lastConnectedDragPreviewOptions,this.dragPreviewOptions)}},{key:"disconnectDragSource",value:function(){this.dragSourceUnsubscribe&&(this.dragSourceUnsubscribe(),this.dragSourceUnsubscribe=void 0)}},{key:"disconnectDragPreview",value:function(){this.dragPreviewUnsubscribe&&(this.dragPreviewUnsubscribe(),this.dragPreviewUnsubscribe=void 0,this.dragPreviewNode=null,this.dragPreviewRef=null)}},{key:"clearDragSource",value:function(){this.dragSourceNode=null,this.dragSourceRef=null}},{key:"clearDragPreview",value:function(){this.dragPreviewNode=null,this.dragPreviewRef=null}},{key:"connectTarget",get:function(){return this.dragSource}},{key:"dragSourceOptions",get:function(){return this.dragSourceOptionsInternal},set:function(e){this.dragSourceOptionsInternal=e}},{key:"dragPreviewOptions",get:function(){return this.dragPreviewOptionsInternal},set:function(e){this.dragPreviewOptionsInternal=e}},{key:"dragSource",get:function(){return this.dragSourceNode||this.dragSourceRef&&this.dragSourceRef.current}},{key:"dragPreview",get:function(){return this.dragPreviewNode||this.dragPreviewRef&&this.dragPreviewRef.current}}])&&i(t.prototype,r),s&&i(t,s),e}()},1078:function(e,t,r){"use strict";(function(e){function n(e){o.length||(a(),!0),o[o.length]=e}r.d(t,"a",(function(){return n}));var a,o=[],i=0;function s(){for(;i<o.length;){var e=i;if(i+=1,o[e].call(),i>1024){for(var t=0,r=o.length-i;t<r;t++)o[t]=o[t+i];o.length-=i,i=0}}o.length=0,i=0,!1}var l,c,u,d=void 0!==e?e:self,h=d.MutationObserver||d.WebKitMutationObserver;function p(e){return function(){var t=setTimeout(n,0),r=setInterval(n,50);function n(){clearTimeout(t),clearInterval(r),e()}}}"function"==typeof h?(l=1,c=new h(s),u=document.createTextNode(""),c.observe(u,{characterData:!0}),a=function(){l=-l,u.data=l}):a=p(s),n.requestFlush=a,n.makeRequestCallFromTimer=p}).call(this,r(168))},1079:function(e,t,r){var n;!function(r,a){"use strict";function o(){}o.TO_RAD=Math.PI/180,o.TO_DEG=180/Math.PI,o.PI_X2=2*Math.PI,o.PI_DIV4=Math.PI/4;var i=Object.create(o.prototype,{version:{value:"2.0.23"},radius:{value:6378137},minLat:{value:-90},maxLat:{value:90},minLon:{value:-180},maxLon:{value:180},sexagesimalPattern:{value:/^([0-9]{1,3})°\s*([0-9]{1,3}(?:\.(?:[0-9]{1,2}))?)'\s*(([0-9]{1,3}(\.([0-9]{1,4}))?)"\s*)?([NEOSW]?)$/},measures:{value:Object.create(Object.prototype,{m:{value:1},km:{value:.001},cm:{value:100},mm:{value:1e3},mi:{value:1/1609.344},sm:{value:1/1852.216},ft:{value:100/30.48},in:{value:100/2.54},yd:{value:1/.9144}})},prototype:{value:o.prototype},extend:{value:function(e,t){for(var r in e)void 0!==i.prototype[r]&&!0!==t||("function"==typeof e[r]&&"function"==typeof e[r].bind?i.prototype[r]=e[r].bind(i):i.prototype[r]=e[r])}}});void 0===Number.prototype.toRad&&(Number.prototype.toRad=function(){return this*o.TO_RAD}),void 0===Number.prototype.toDeg&&(Number.prototype.toDeg=function(){return this*o.TO_DEG}),i.extend({decimal:{},sexagesimal:{},distance:null,getKeys:function(e){if("[object Array]"==Object.prototype.toString.call(e))return{longitude:e.length>=1?0:void 0,latitude:e.length>=2?1:void 0,elevation:e.length>=3?2:void 0};var t=function(t){var r;return t.every((function(t){return"object"!=typeof e||(!e.hasOwnProperty(t)||(r=t,!1))})),r},r=t(["lng","lon","longitude"]),n=t(["lat","latitude"]),a=t(["alt","altitude","elevation","elev"]);return void 0!==n||void 0!==r||void 0!==a?{latitude:n,longitude:r,elevation:a}:void 0},getLat:function(e,t){return!0===t?e[this.getKeys(e).latitude]:this.useDecimal(e[this.getKeys(e).latitude])},latitude:function(e){return this.getLat.call(this,e)},getLon:function(e,t){return!0===t?e[this.getKeys(e).longitude]:this.useDecimal(e[this.getKeys(e).longitude])},longitude:function(e){return this.getLon.call(this,e)},getElev:function(e){return e[this.getKeys(e).elevation]},elevation:function(e){return this.getElev.call(this,e)},coords:function(e,t){var r={latitude:!0===t?e[this.getKeys(e).latitude]:this.useDecimal(e[this.getKeys(e).latitude]),longitude:!0===t?e[this.getKeys(e).longitude]:this.useDecimal(e[this.getKeys(e).longitude])},n=e[this.getKeys(e).elevation];return void 0!==n&&(r.elevation=n),r},ll:function(e,t){return this.coords.call(this,e,t)},validate:function(e){var t=this.getKeys(e);if(void 0===t||void 0===t.latitude||"undefined"===t.longitude)return!1;var r=e[t.latitude],n=e[t.longitude];return!(void 0===r||!this.isDecimal(r)&&!this.isSexagesimal(r))&&(!(void 0===n||!this.isDecimal(n)&&!this.isSexagesimal(n))&&(r=this.useDecimal(r),n=this.useDecimal(n),!(r<this.minLat||r>this.maxLat||n<this.minLon||n>this.maxLon)))},getDistance:function(e,t,r,n){r=Math.floor(r)||1,n=Math.floor(n)||0;var a,o,s,l,c,u,d,h=this.coords(e),p=this.coords(t),f=6378137,g=6356752.314245,b=1/298.257223563,m=(p.longitude-h.longitude).toRad(),v=Math.atan((1-b)*Math.tan(parseFloat(h.latitude).toRad())),y=Math.atan((1-b)*Math.tan(parseFloat(p.latitude).toRad())),O=Math.sin(v),x=Math.cos(v),w=Math.sin(y),C=Math.cos(y),_=m,j=100;do{var S=Math.sin(_),E=Math.cos(_);if(0===(u=Math.sqrt(C*S*(C*S)+(x*w-O*C*E)*(x*w-O*C*E))))return i.distance=0;a=O*w+x*C*E,o=Math.atan2(u,a),c=a-2*O*w/(l=1-(s=x*C*S/u)*s),isNaN(c)&&(c=0);var k=b/16*l*(4+b*(4-3*l));d=_,_=m+(1-k)*b*s*(o+k*u*(c+k*a*(2*c*c-1)))}while(Math.abs(_-d)>1e-12&&--j>0);if(0===j)return NaN;var T=l*(f*f-g*g)/(g*g),M=T/1024*(256+T*(T*(74-47*T)-128)),R=g*(1+T/16384*(4096+T*(T*(320-175*T)-768)))*(o-M*u*(c+M/4*(a*(2*c*c-1)-M/6*c*(4*u*u-3)*(4*c*c-3))));if(R=R.toFixed(n),void 0!==this.elevation(e)&&void 0!==this.elevation(t)){var A=Math.abs(this.elevation(e)-this.elevation(t));R=Math.sqrt(R*R+A*A)}return this.distance=Math.round(R*Math.pow(10,n)/r)*r/Math.pow(10,n)},getDistanceSimple:function(e,t,r){r=Math.floor(r)||1;var n=Math.round(Math.acos(Math.sin(this.latitude(t).toRad())*Math.sin(this.latitude(e).toRad())+Math.cos(this.latitude(t).toRad())*Math.cos(this.latitude(e).toRad())*Math.cos(this.longitude(e).toRad()-this.longitude(t).toRad()))*this.radius);return i.distance=Math.floor(Math.round(n/r)*r)},getCenter:function(e){var t=e;if("object"==typeof e&&!(e instanceof Array))for(var r in t=[],e)t.push(this.coords(e[r]));if(!t.length)return!1;var n,a,i,s=0,l=0,c=0;t.forEach((function(e){n=this.latitude(e).toRad(),a=this.longitude(e).toRad(),s+=Math.cos(n)*Math.cos(a),l+=Math.cos(n)*Math.sin(a),c+=Math.sin(n)}),this);var u=t.length;return s/=u,l/=u,c/=u,a=Math.atan2(l,s),i=Math.sqrt(s*s+l*l),{latitude:((n=Math.atan2(c,i))*o.TO_DEG).toFixed(6),longitude:(a*o.TO_DEG).toFixed(6)}},getBounds:function(e){if(!e.length)return!1;var t=this.elevation(e[0]),r={maxLat:-1/0,minLat:1/0,maxLng:-1/0,minLng:1/0};void 0!==t&&(r.maxElev=0,r.minElev=1/0);for(var n=0,a=e.length;n<a;++n)r.maxLat=Math.max(this.latitude(e[n]),r.maxLat),r.minLat=Math.min(this.latitude(e[n]),r.minLat),r.maxLng=Math.max(this.longitude(e[n]),r.maxLng),r.minLng=Math.min(this.longitude(e[n]),r.minLng),t&&(r.maxElev=Math.max(this.elevation(e[n]),r.maxElev),r.minElev=Math.min(this.elevation(e[n]),r.minElev));return r},getCenterOfBounds:function(e){var t=this.getBounds(e),r=t.minLat+(t.maxLat-t.minLat)/2,n=t.minLng+(t.maxLng-t.minLng)/2;return{latitude:parseFloat(r.toFixed(6)),longitude:parseFloat(n.toFixed(6))}},getBoundsOfDistance:function(e,t){var r,n,a=this.latitude(e),i=this.longitude(e),s=a.toRad(),l=i.toRad(),c=t/this.radius,u=s-c,d=s+c,h=this.maxLat.toRad(),p=this.minLat.toRad(),f=this.maxLon.toRad(),g=this.minLon.toRad();if(u>p&&d<h){var b=Math.asin(Math.sin(c)/Math.cos(s));(r=l-b)<g&&(r+=o.PI_X2),(n=l+b)>f&&(n-=o.PI_X2)}else u=Math.max(u,p),d=Math.min(d,h),r=g,n=f;return[{latitude:u.toDeg(),longitude:r.toDeg()},{latitude:d.toDeg(),longitude:n.toDeg()}]},isPointInside:function(e,t){for(var r=!1,n=-1,a=t.length,o=a-1;++n<a;o=n)(this.longitude(t[n])<=this.longitude(e)&&this.longitude(e)<this.longitude(t[o])||this.longitude(t[o])<=this.longitude(e)&&this.longitude(e)<this.longitude(t[n]))&&this.latitude(e)<(this.latitude(t[o])-this.latitude(t[n]))*(this.longitude(e)-this.longitude(t[n]))/(this.longitude(t[o])-this.longitude(t[n]))+this.latitude(t[n])&&(r=!r);return r},preparePolygonForIsPointInsideOptimized:function(e){for(var t=0,r=e.length-1;t<e.length;t++)this.longitude(e[r])===this.longitude(e[t])?(e[t].constant=this.latitude(e[t]),e[t].multiple=0):(e[t].constant=this.latitude(e[t])-this.longitude(e[t])*this.latitude(e[r])/(this.longitude(e[r])-this.longitude(e[t]))+this.longitude(e[t])*this.latitude(e[t])/(this.longitude(e[r])-this.longitude(e[t])),e[t].multiple=(this.latitude(e[r])-this.latitude(e[t]))/(this.longitude(e[r])-this.longitude(e[t]))),r=t},isPointInsideWithPreparedPolygon:function(e,t){for(var r=!1,n=this.longitude(e),a=this.latitude(e),o=0,i=t.length-1;o<t.length;o++)(this.longitude(t[o])<n&&this.longitude(t[i])>=n||this.longitude(t[i])<n&&this.longitude(t[o])>=n)&&(r^=n*t[o].multiple+t[o].constant<a),i=o;return r},isInside:function(){return this.isPointInside.apply(this,arguments)},isPointInCircle:function(e,t,r){return this.getDistance(e,t)<r},withinRadius:function(){return this.isPointInCircle.apply(this,arguments)},getRhumbLineBearing:function(e,t){var r=this.longitude(t).toRad()-this.longitude(e).toRad(),n=Math.log(Math.tan(this.latitude(t).toRad()/2+o.PI_DIV4)/Math.tan(this.latitude(e).toRad()/2+o.PI_DIV4));return Math.abs(r)>Math.PI&&(r=r>0?-1*(o.PI_X2-r):o.PI_X2+r),(Math.atan2(r,n).toDeg()+360)%360},getBearing:function(e,t){return t.latitude=this.latitude(t),t.longitude=this.longitude(t),e.latitude=this.latitude(e),e.longitude=this.longitude(e),(Math.atan2(Math.sin(t.longitude.toRad()-e.longitude.toRad())*Math.cos(t.latitude.toRad()),Math.cos(e.latitude.toRad())*Math.sin(t.latitude.toRad())-Math.sin(e.latitude.toRad())*Math.cos(t.latitude.toRad())*Math.cos(t.longitude.toRad()-e.longitude.toRad())).toDeg()+360)%360},getCompassDirection:function(e,t,r){var n,a;switch(a="circle"==r?this.getBearing(e,t):this.getRhumbLineBearing(e,t),Math.round(a/22.5)){case 1:n={exact:"NNE",rough:"N"};break;case 2:n={exact:"NE",rough:"N"};break;case 3:n={exact:"ENE",rough:"E"};break;case 4:n={exact:"E",rough:"E"};break;case 5:n={exact:"ESE",rough:"E"};break;case 6:n={exact:"SE",rough:"E"};break;case 7:n={exact:"SSE",rough:"S"};break;case 8:n={exact:"S",rough:"S"};break;case 9:n={exact:"SSW",rough:"S"};break;case 10:n={exact:"SW",rough:"S"};break;case 11:n={exact:"WSW",rough:"W"};break;case 12:n={exact:"W",rough:"W"};break;case 13:n={exact:"WNW",rough:"W"};break;case 14:n={exact:"NW",rough:"W"};break;case 15:n={exact:"NNW",rough:"N"};break;default:n={exact:"N",rough:"N"}}return n.bearing=a,n},getDirection:function(e,t,r){return this.getCompassDirection.apply(this,arguments)},orderByDistance:function(e,t){return Object.keys(t).map((function(r){var n=this.getDistance(e,t[r]),a=Object.create(t[r]);return a.distance=n,a.key=r,a}),this).sort((function(e,t){return e.distance-t.distance}))},isPointInLine:function(e,t,r){return(this.getDistance(t,e,1,3)+this.getDistance(e,r,1,3)).toFixed(3)==this.getDistance(t,r,1,3)},isPointNearLine:function(e,t,r,n){return this.getDistanceFromLine(e,t,r)<n},getDistanceFromLine:function(e,t,r){var n=this.getDistance(t,e,1,3),a=this.getDistance(e,r,1,3),o=this.getDistance(t,r,1,3),i=Math.acos((n*n+o*o-a*a)/(2*n*o)),s=Math.acos((a*a+o*o-n*n)/(2*a*o));return i>Math.PI/2?n:s>Math.PI/2?a:Math.sin(i)*n},findNearest:function(e,t,r,n){r=r||0,n=n||1;var a=this.orderByDistance(e,t);return 1===n?a[r]:a.splice(r,n)},getPathLength:function(e){for(var t,r=0,n=0,a=e.length;n<a;++n)t&&(r+=this.getDistance(this.coords(e[n]),t)),t=this.coords(e[n]);return r},getSpeed:function(e,t,r){var n=r&&r.unit||"km";"mph"==n?n="mi":"kmh"==n&&(n="km");var a=i.getDistance(e,t)/(1*t.time/1e3-1*e.time/1e3)*3600;return Math.round(a*this.measures[n]*1e4)/1e4},computeDestinationPoint:function(e,t,r,n){var a=this.latitude(e),o=this.longitude(e);n=void 0===n?this.radius:Number(n);var i=Number(t)/n,s=Number(r).toRad(),l=Number(a).toRad(),c=Number(o).toRad(),u=Math.asin(Math.sin(l)*Math.cos(i)+Math.cos(l)*Math.sin(i)*Math.cos(s)),d=c+Math.atan2(Math.sin(s)*Math.sin(i)*Math.cos(l),Math.cos(i)-Math.sin(l)*Math.sin(u));return d=(d+3*Math.PI)%(2*Math.PI)-Math.PI,{latitude:u.toDeg(),longitude:d.toDeg()}},convertUnit:function(e,t,r){if(0===t)return 0;if(void 0===t){if(null===this.distance)throw new Error("No distance was given");if(0===this.distance)return 0;t=this.distance}if(e=e||"m",r=null==r?4:r,void 0!==this.measures[e])return this.round(t*this.measures[e],r);throw new Error("Unknown unit for conversion.")},useDecimal:function(e){if("[object Array]"===Object.prototype.toString.call(e)){var t=this;return e=e.map((function(e){if(t.isDecimal(e))return t.useDecimal(e);if("object"==typeof e){if(t.validate(e))return t.coords(e);for(var r in e)e[r]=t.useDecimal(e[r]);return e}return t.isSexagesimal(e)?t.sexagesimal2decimal(e):e}))}if("object"==typeof e&&this.validate(e))return this.coords(e);if("object"==typeof e){for(var r in e)e[r]=this.useDecimal(e[r]);return e}if(this.isDecimal(e))return parseFloat(e);if(!0===this.isSexagesimal(e))return parseFloat(this.sexagesimal2decimal(e));throw new Error("Unknown format.")},decimal2sexagesimal:function(e){if(e in this.sexagesimal)return this.sexagesimal[e];var t=e.toString().split("."),r=Math.abs(t[0]),n=60*("0."+(t[1]||0)),a=n.toString().split(".");return n=Math.floor(n),a=(60*("0."+(a[1]||0))).toFixed(2),this.sexagesimal[e]=r+"° "+n+"' "+a+'"',this.sexagesimal[e]},sexagesimal2decimal:function(e){if(e in this.decimal)return this.decimal[e];var t=new RegExp(this.sexagesimalPattern).exec(e),r=0,n=0;t&&(r=parseFloat(t[2]/60),n=parseFloat(t[4]/3600)||0);var a=(parseFloat(t[1])+r+n).toFixed(8);return a="S"==t[7]||"W"==t[7]?parseFloat(-a):parseFloat(a),this.decimal[e]=a,a},isDecimal:function(e){return e=e.toString().replace(/\s*/,""),!isNaN(parseFloat(e))&&parseFloat(e)==e},isSexagesimal:function(e){return e=e.toString().replace(/\s*/,""),this.sexagesimalPattern.test(e)},round:function(e,t){var r=Math.pow(10,t);return Math.round(e*r)/r}}),void 0!==e.exports?(e.exports=i,"object"==typeof r&&(r.geolib=i)):void 0===(n=function(){return i}.apply(t,[]))||(e.exports=n)}(this)},111:function(e,t,r){"use strict";r.d(t,"f",(function(){return R})),r.d(t,"d",(function(){return P})),r.d(t,"k",(function(){return I})),r.d(t,"g",(function(){return F})),r.d(t,"e",(function(){return N})),r.d(t,"h",(function(){return L})),r.d(t,"m",(function(){return H})),r.d(t,"a",(function(){return q})),r.d(t,"i",(function(){return z})),r.d(t,"l",(function(){return B})),r.d(t,"c",(function(){return U})),r.d(t,"b",(function(){return $})),r.d(t,"n",(function(){return G})),r.d(t,"j",(function(){return V}));r(277),r(39);var n=r(11),a=r.n(n),o=r(201),i=r.n(o),s=r(55),l=r.n(s),c=r(133),u=r.n(c),d=r(48),h=r.n(d),p=r(43),f=r.n(p),g=r(29),b=r.n(g),m=r(36),v=r.n(m),y=r(0),O=r(301),x=r.n(O),w=r(170),C=r(190),_=r(544),j=r(543),S=r(488),E=r(222),k=r(161),T=r(47),M=r(40);function R(e){const{slice:t}=e;return t?t.slice_id:0}let A=0;function D(e=!1){let t=0;return e&&(t=A%S.b.length,A+=1,0===t&&(t+=1,A+=1)),S.b[t]}function P(e,t,r){if(null==e)return null;const n=r?"annotation_json":"slice_json";return x()(window.location.search).pathname(`/superset/${n}/${e}`).search({form_data:Object(E.a)(t,(e,t)=>null===t?void 0:t)}).toString()}function I(e="base"){var t;return v()(t=["full","json","csv","query","results","samples"]).call(t,e)?"/superset/explore_json/":"/superset/explore/"}function F(e,t,r=!0,n={}){var a;if(!e.datasource)return null;const o=new x.a("/"),i=I(t),s=o.search(!0);b()(a=f()(n)).call(a,e=>{s[e]=n[e]}),s.form_data=Object(E.a)(e),t===k.g.standalone&&(s.standalone=M.j.HIDE_NAV);const l=o.directory(i).search(s).toString();if(!r&&l.length>8e3){return F({datasource:e.datasource,viz_type:e.viz_type},t,!1,{URL_IS_TOO_LONG_TO_SHARE:null})}return l}function N({path:e,qs:t,allowDomainSharding:r=!1}){var n;let a=new x.a({protocol:h()(n=window.location.protocol).call(n,0,-1),hostname:D(r),port:window.location.port?window.location.port:"",path:e});return t&&(a=a.search(t)),a}function L({formData:e,endpointType:t="base",force:r=!1,curUrl:n=null,requestParams:a={},allowDomainSharding:o=!1,method:i="POST"}){if(!e.datasource)return null;let s=N({path:"/",allowDomainSharding:o});n&&(s=x()(x()(n).search()));const l=I(t),c=s.search(!0),{slice_id:u,extra_filters:d,adhoc_filters:h,viz_type:p}=e;if(u){const e={slice_id:u};"GET"===i&&(e.viz_type=p,d&&d.length&&(e.extra_filters=d),h&&h.length&&(e.adhoc_filters=h)),c.form_data=Object(E.a)(e)}r&&(c.force="true"),"csv"===t&&(c.csv="true"),t===k.g.standalone&&(c.standalone="1"),"query"===t&&(c.query="true"),"results"===t&&(c.results="true"),"samples"===t&&(c.samples="true");const g=f()(a);return g.length&&b()(g).call(g,e=>{a.hasOwnProperty(e)&&(c[e]=a[e])}),s.search(c).directory(l).toString()}const H=e=>{const t=Object(w.a)().get(e.viz_type);return!!t&&t.useLegacyApi},q=({formData:e,force:t,resultFormat:r,resultType:n,setDataMask:a})=>{var o;return(null!=(o=Object(C.a)().get(e.viz_type))?o:e=>Object(_.a)(e,e=>[{...e}]))({...e,force:t,result_format:r,result_type:n},{hooks:{setDataMask:a}})},z=({resultType:e,resultFormat:t})=>"csv"===t?t:e;function B(e,t,r="_blank"){if(!e)return;const n=document.createElement("form");n.action=e,n.method="POST",n.target=r;const a=document.createElement("input");a.type="hidden",a.name="csrf_token",a.value=(document.getElementById("csrf_token")||{}).value,n.appendChild(a);const o=document.createElement("input");o.type="hidden",o.name="form_data",o.value=Object(E.a)(t),n.appendChild(o),document.body.appendChild(n),n.submit(),document.body.removeChild(n)}const U=({formData:e,resultFormat:t="json",resultType:r="full",force:n=!1})=>{let a,o;if(H(e)){a=L({formData:e,endpointType:z({resultFormat:t,resultType:r}),allowDomainSharding:!1}),o=e}else a="/api/v1/chart/data",o=q({formData:e,force:n,resultFormat:t,resultType:r});B(a,o)},$=e=>{B(L({formData:e,endpointType:"base",allowDomainSharding:!1}),e)},G=(e,t,r)=>{const n=Object(y.useCallback)(e,r);Object(y.useEffect)(()=>{const e=u()(()=>{n()},t);return()=>{clearTimeout(e)}},[n,t])},V=(e,t,r)=>{const n=T.j.has(t);let o=null!=e?e:"";if(e&&t){o+=` ${t}`;const e=n&&l()(r)?r[0]:r,s=Object(j.a)(r),c=void 0!==e&&i()(Number(e)),u=c?"'":"",[d,h]=n?["(",")"]:["",""],p=a()(s).call(s,e=>`${u}${c?String(e).replace("'","''"):e}${u}`);s.length>0&&(o+=` ${d}${p.join(", ")}${h}`)}return o}},1120:function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=r(11),a=r.n(n),o=(r(0),r(1));function i({controls:e}){const t=12/e.length;return Object(o.f)("div",{className:"row space-1"},a()(e).call(e,(e,r)=>Object(o.f)("div",{className:`col-lg-${t} col-xs-12`,key:r},e)))}},1147:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Checkboard=void 0;var n=i(r(0)),a=i(r(80)),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(1371));function i(e){return e&&e.__esModule?e:{default:e}}var s=t.Checkboard=function(e){var t=e.white,r=e.grey,i=e.size,s=e.renderers,l=e.borderRadius,c=e.boxShadow,u=(0,a.default)({default:{grid:{borderRadius:l,boxShadow:c,absolute:"0px 0px 0px 0px",background:"url("+o.get(t,r,i,s.canvas)+") center left"}}});return n.default.createElement("div",{style:u.grid})};s.defaultProps={size:8,white:"transparent",grey:"rgba(0,0,0,.08)",renderers:{}},t.default=s},1148:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ColorWrap=void 0;var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(0),i=c(o),s=c(r(154)),l=c(r(284));function c(e){return e&&e.__esModule?e:{default:e}}var u=t.ColorWrap=function(e){var t=function(t){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this));return t.handleChange=function(e,r){if(l.default.simpleCheckForValidColor(e)){var n=l.default.toState(e,e.h||t.state.oldHue);t.setState(n),t.props.onChangeComplete&&t.debounce(t.props.onChangeComplete,n,r),t.props.onChange&&t.props.onChange(n,r)}},t.handleSwatchHover=function(e,r){if(l.default.simpleCheckForValidColor(e)){var n=l.default.toState(e,e.h||t.state.oldHue);t.setState(n),t.props.onSwatchHover&&t.props.onSwatchHover(n,r)}},t.state=n({},l.default.toState(e.color,0)),t.debounce=(0,s.default)((function(e,t,r){e(t,r)}),100),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,t),a(r,[{key:"componentWillReceiveProps",value:function(e){this.setState(n({},l.default.toState(e.color,this.state.oldHue)))}},{key:"render",value:function(){var t={};return this.props.onSwatchHover&&(t.onSwatchHover=this.handleSwatchHover),i.default.createElement(e,n({},this.props,this.state,{onChange:this.handleChange},t))}}]),r}(o.PureComponent||o.Component);return t.propTypes=n({},e.propTypes),t.defaultProps=n({},e.defaultProps,{color:{h:250,s:.5,l:.2,a:1}}),t};t.default=u},1149:function(e,t,r){"use strict";r.r(t),r.d(t,"red",(function(){return n})),r.d(t,"pink",(function(){return a})),r.d(t,"purple",(function(){return o})),r.d(t,"deepPurple",(function(){return i})),r.d(t,"indigo",(function(){return s})),r.d(t,"blue",(function(){return l})),r.d(t,"lightBlue",(function(){return c})),r.d(t,"cyan",(function(){return u})),r.d(t,"teal",(function(){return d})),r.d(t,"green",(function(){return h})),r.d(t,"lightGreen",(function(){return p})),r.d(t,"lime",(function(){return f})),r.d(t,"yellow",(function(){return g})),r.d(t,"amber",(function(){return b})),r.d(t,"orange",(function(){return m})),r.d(t,"deepOrange",(function(){return v})),r.d(t,"brown",(function(){return y})),r.d(t,"grey",(function(){return O})),r.d(t,"blueGrey",(function(){return x})),r.d(t,"darkText",(function(){return w})),r.d(t,"lightText",(function(){return C})),r.d(t,"darkIcons",(function(){return _})),r.d(t,"lightIcons",(function(){return j})),r.d(t,"white",(function(){return S})),r.d(t,"black",(function(){return E}));var n={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",a100:"#ff8a80",a200:"#ff5252",a400:"#ff1744",a700:"#d50000"},a={50:"#fce4ec",100:"#f8bbd0",200:"#f48fb1",300:"#f06292",400:"#ec407a",500:"#e91e63",600:"#d81b60",700:"#c2185b",800:"#ad1457",900:"#880e4f",a100:"#ff80ab",a200:"#ff4081",a400:"#f50057",a700:"#c51162"},o={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",a100:"#ea80fc",a200:"#e040fb",a400:"#d500f9",a700:"#aa00ff"},i={50:"#ede7f6",100:"#d1c4e9",200:"#b39ddb",300:"#9575cd",400:"#7e57c2",500:"#673ab7",600:"#5e35b1",700:"#512da8",800:"#4527a0",900:"#311b92",a100:"#b388ff",a200:"#7c4dff",a400:"#651fff",a700:"#6200ea"},s={50:"#e8eaf6",100:"#c5cae9",200:"#9fa8da",300:"#7986cb",400:"#5c6bc0",500:"#3f51b5",600:"#3949ab",700:"#303f9f",800:"#283593",900:"#1a237e",a100:"#8c9eff",a200:"#536dfe",a400:"#3d5afe",a700:"#304ffe"},l={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",a100:"#82b1ff",a200:"#448aff",a400:"#2979ff",a700:"#2962ff"},c={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",a100:"#80d8ff",a200:"#40c4ff",a400:"#00b0ff",a700:"#0091ea"},u={50:"#e0f7fa",100:"#b2ebf2",200:"#80deea",300:"#4dd0e1",400:"#26c6da",500:"#00bcd4",600:"#00acc1",700:"#0097a7",800:"#00838f",900:"#006064",a100:"#84ffff",a200:"#18ffff",a400:"#00e5ff",a700:"#00b8d4"},d={50:"#e0f2f1",100:"#b2dfdb",200:"#80cbc4",300:"#4db6ac",400:"#26a69a",500:"#009688",600:"#00897b",700:"#00796b",800:"#00695c",900:"#004d40",a100:"#a7ffeb",a200:"#64ffda",a400:"#1de9b6",a700:"#00bfa5"},h={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",a100:"#b9f6ca",a200:"#69f0ae",a400:"#00e676",a700:"#00c853"},p={50:"#f1f8e9",100:"#dcedc8",200:"#c5e1a5",300:"#aed581",400:"#9ccc65",500:"#8bc34a",600:"#7cb342",700:"#689f38",800:"#558b2f",900:"#33691e",a100:"#ccff90",a200:"#b2ff59",a400:"#76ff03",a700:"#64dd17"},f={50:"#f9fbe7",100:"#f0f4c3",200:"#e6ee9c",300:"#dce775",400:"#d4e157",500:"#cddc39",600:"#c0ca33",700:"#afb42b",800:"#9e9d24",900:"#827717",a100:"#f4ff81",a200:"#eeff41",a400:"#c6ff00",a700:"#aeea00"},g={50:"#fffde7",100:"#fff9c4",200:"#fff59d",300:"#fff176",400:"#ffee58",500:"#ffeb3b",600:"#fdd835",700:"#fbc02d",800:"#f9a825",900:"#f57f17",a100:"#ffff8d",a200:"#ffff00",a400:"#ffea00",a700:"#ffd600"},b={50:"#fff8e1",100:"#ffecb3",200:"#ffe082",300:"#ffd54f",400:"#ffca28",500:"#ffc107",600:"#ffb300",700:"#ffa000",800:"#ff8f00",900:"#ff6f00",a100:"#ffe57f",a200:"#ffd740",a400:"#ffc400",a700:"#ffab00"},m={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",a100:"#ffd180",a200:"#ffab40",a400:"#ff9100",a700:"#ff6d00"},v={50:"#fbe9e7",100:"#ffccbc",200:"#ffab91",300:"#ff8a65",400:"#ff7043",500:"#ff5722",600:"#f4511e",700:"#e64a19",800:"#d84315",900:"#bf360c",a100:"#ff9e80",a200:"#ff6e40",a400:"#ff3d00",a700:"#dd2c00"},y={50:"#efebe9",100:"#d7ccc8",200:"#bcaaa4",300:"#a1887f",400:"#8d6e63",500:"#795548",600:"#6d4c41",700:"#5d4037",800:"#4e342e",900:"#3e2723"},O={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121"},x={50:"#eceff1",100:"#cfd8dc",200:"#b0bec5",300:"#90a4ae",400:"#78909c",500:"#607d8b",600:"#546e7a",700:"#455a64",800:"#37474f",900:"#263238"},w={primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.54)",disabled:"rgba(0, 0, 0, 0.38)",dividers:"rgba(0, 0, 0, 0.12)"},C={primary:"rgba(255, 255, 255, 1)",secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",dividers:"rgba(255, 255, 255, 0.12)"},_={active:"rgba(0, 0, 0, 0.54)",inactive:"rgba(0, 0, 0, 0.38)"},j={active:"rgba(255, 255, 255, 1)",inactive:"rgba(255, 255, 255, 0.5)"},S="#ffffff",E="#000000";t.default={red:n,pink:a,purple:o,deepPurple:i,indigo:s,blue:l,lightBlue:c,cyan:u,teal:d,green:h,lightGreen:p,lime:f,yellow:g,amber:b,orange:m,deepOrange:v,brown:y,grey:O,blueGrey:x,darkText:w,lightText:C,darkIcons:_,lightIcons:j,white:S,black:E}},1151:function(e,t,r){},1152:function(e,t,r){var n;!function(a){var o=/^\s+/,i=/\s+$/,s=0,l=a.round,c=a.min,u=a.max,d=a.random;function h(e,t){if(t=t||{},(e=e||"")instanceof h)return e;if(!(this instanceof h))return new h(e,t);var r=function(e){var t={r:0,g:0,b:0},r=1,n=null,s=null,l=null,d=!1,h=!1;"string"==typeof e&&(e=function(e){e=e.replace(o,"").replace(i,"").toLowerCase();var t,r=!1;if(M[e])e=M[e],r=!0;else if("transparent"==e)return{r:0,g:0,b:0,a:0,format:"name"};if(t=U.rgb.exec(e))return{r:t[1],g:t[2],b:t[3]};if(t=U.rgba.exec(e))return{r:t[1],g:t[2],b:t[3],a:t[4]};if(t=U.hsl.exec(e))return{h:t[1],s:t[2],l:t[3]};if(t=U.hsla.exec(e))return{h:t[1],s:t[2],l:t[3],a:t[4]};if(t=U.hsv.exec(e))return{h:t[1],s:t[2],v:t[3]};if(t=U.hsva.exec(e))return{h:t[1],s:t[2],v:t[3],a:t[4]};if(t=U.hex8.exec(e))return{r:I(t[1]),g:I(t[2]),b:I(t[3]),a:H(t[4]),format:r?"name":"hex8"};if(t=U.hex6.exec(e))return{r:I(t[1]),g:I(t[2]),b:I(t[3]),format:r?"name":"hex"};if(t=U.hex4.exec(e))return{r:I(t[1]+""+t[1]),g:I(t[2]+""+t[2]),b:I(t[3]+""+t[3]),a:H(t[4]+""+t[4]),format:r?"name":"hex8"};if(t=U.hex3.exec(e))return{r:I(t[1]+""+t[1]),g:I(t[2]+""+t[2]),b:I(t[3]+""+t[3]),format:r?"name":"hex"};return!1}(e));"object"==typeof e&&($(e.r)&&$(e.g)&&$(e.b)?(p=e.r,f=e.g,g=e.b,t={r:255*D(p,255),g:255*D(f,255),b:255*D(g,255)},d=!0,h="%"===String(e.r).substr(-1)?"prgb":"rgb"):$(e.h)&&$(e.s)&&$(e.v)?(n=N(e.s),s=N(e.v),t=function(e,t,r){e=6*D(e,360),t=D(t,100),r=D(r,100);var n=a.floor(e),o=e-n,i=r*(1-t),s=r*(1-o*t),l=r*(1-(1-o)*t),c=n%6;return{r:255*[r,s,i,i,l,r][c],g:255*[l,r,r,s,i,i][c],b:255*[i,i,l,r,r,s][c]}}(e.h,n,s),d=!0,h="hsv"):$(e.h)&&$(e.s)&&$(e.l)&&(n=N(e.s),l=N(e.l),t=function(e,t,r){var n,a,o;function i(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+6*(t-e)*r:r<.5?t:r<2/3?e+(t-e)*(2/3-r)*6:e}if(e=D(e,360),t=D(t,100),r=D(r,100),0===t)n=a=o=r;else{var s=r<.5?r*(1+t):r+t-r*t,l=2*r-s;n=i(l,s,e+1/3),a=i(l,s,e),o=i(l,s,e-1/3)}return{r:255*n,g:255*a,b:255*o}}(e.h,n,l),d=!0,h="hsl"),e.hasOwnProperty("a")&&(r=e.a));var p,f,g;return r=A(r),{ok:d,format:e.format||h,r:c(255,u(t.r,0)),g:c(255,u(t.g,0)),b:c(255,u(t.b,0)),a:r}}(e);this._originalInput=e,this._r=r.r,this._g=r.g,this._b=r.b,this._a=r.a,this._roundA=l(100*this._a)/100,this._format=t.format||r.format,this._gradientType=t.gradientType,this._r<1&&(this._r=l(this._r)),this._g<1&&(this._g=l(this._g)),this._b<1&&(this._b=l(this._b)),this._ok=r.ok,this._tc_id=s++}function p(e,t,r){e=D(e,255),t=D(t,255),r=D(r,255);var n,a,o=u(e,t,r),i=c(e,t,r),s=(o+i)/2;if(o==i)n=a=0;else{var l=o-i;switch(a=s>.5?l/(2-o-i):l/(o+i),o){case e:n=(t-r)/l+(t<r?6:0);break;case t:n=(r-e)/l+2;break;case r:n=(e-t)/l+4}n/=6}return{h:n,s:a,l:s}}function f(e,t,r){e=D(e,255),t=D(t,255),r=D(r,255);var n,a,o=u(e,t,r),i=c(e,t,r),s=o,l=o-i;if(a=0===o?0:l/o,o==i)n=0;else{switch(o){case e:n=(t-r)/l+(t<r?6:0);break;case t:n=(r-e)/l+2;break;case r:n=(e-t)/l+4}n/=6}return{h:n,s:a,v:s}}function g(e,t,r,n){var a=[F(l(e).toString(16)),F(l(t).toString(16)),F(l(r).toString(16))];return n&&a[0].charAt(0)==a[0].charAt(1)&&a[1].charAt(0)==a[1].charAt(1)&&a[2].charAt(0)==a[2].charAt(1)?a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0):a.join("")}function b(e,t,r,n){return[F(L(n)),F(l(e).toString(16)),F(l(t).toString(16)),F(l(r).toString(16))].join("")}function m(e,t){t=0===t?0:t||10;var r=h(e).toHsl();return r.s-=t/100,r.s=P(r.s),h(r)}function v(e,t){t=0===t?0:t||10;var r=h(e).toHsl();return r.s+=t/100,r.s=P(r.s),h(r)}function y(e){return h(e).desaturate(100)}function O(e,t){t=0===t?0:t||10;var r=h(e).toHsl();return r.l+=t/100,r.l=P(r.l),h(r)}function x(e,t){t=0===t?0:t||10;var r=h(e).toRgb();return r.r=u(0,c(255,r.r-l(-t/100*255))),r.g=u(0,c(255,r.g-l(-t/100*255))),r.b=u(0,c(255,r.b-l(-t/100*255))),h(r)}function w(e,t){t=0===t?0:t||10;var r=h(e).toHsl();return r.l-=t/100,r.l=P(r.l),h(r)}function C(e,t){var r=h(e).toHsl(),n=(r.h+t)%360;return r.h=n<0?360+n:n,h(r)}function _(e){var t=h(e).toHsl();return t.h=(t.h+180)%360,h(t)}function j(e){var t=h(e).toHsl(),r=t.h;return[h(e),h({h:(r+120)%360,s:t.s,l:t.l}),h({h:(r+240)%360,s:t.s,l:t.l})]}function S(e){var t=h(e).toHsl(),r=t.h;return[h(e),h({h:(r+90)%360,s:t.s,l:t.l}),h({h:(r+180)%360,s:t.s,l:t.l}),h({h:(r+270)%360,s:t.s,l:t.l})]}function E(e){var t=h(e).toHsl(),r=t.h;return[h(e),h({h:(r+72)%360,s:t.s,l:t.l}),h({h:(r+216)%360,s:t.s,l:t.l})]}function k(e,t,r){t=t||6,r=r||30;var n=h(e).toHsl(),a=360/r,o=[h(e)];for(n.h=(n.h-(a*t>>1)+720)%360;--t;)n.h=(n.h+a)%360,o.push(h(n));return o}function T(e,t){t=t||6;for(var r=h(e).toHsv(),n=r.h,a=r.s,o=r.v,i=[],s=1/t;t--;)i.push(h({h:n,s:a,v:o})),o=(o+s)%1;return i}h.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},getLuminance:function(){var e,t,r,n=this.toRgb();return e=n.r/255,t=n.g/255,r=n.b/255,.2126*(e<=.03928?e/12.92:a.pow((e+.055)/1.055,2.4))+.7152*(t<=.03928?t/12.92:a.pow((t+.055)/1.055,2.4))+.0722*(r<=.03928?r/12.92:a.pow((r+.055)/1.055,2.4))},setAlpha:function(e){return this._a=A(e),this._roundA=l(100*this._a)/100,this},toHsv:function(){var e=f(this._r,this._g,this._b);return{h:360*e.h,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=f(this._r,this._g,this._b),t=l(360*e.h),r=l(100*e.s),n=l(100*e.v);return 1==this._a?"hsv("+t+", "+r+"%, "+n+"%)":"hsva("+t+", "+r+"%, "+n+"%, "+this._roundA+")"},toHsl:function(){var e=p(this._r,this._g,this._b);return{h:360*e.h,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=p(this._r,this._g,this._b),t=l(360*e.h),r=l(100*e.s),n=l(100*e.l);return 1==this._a?"hsl("+t+", "+r+"%, "+n+"%)":"hsla("+t+", "+r+"%, "+n+"%, "+this._roundA+")"},toHex:function(e){return g(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return function(e,t,r,n,a){var o=[F(l(e).toString(16)),F(l(t).toString(16)),F(l(r).toString(16)),F(L(n))];if(a&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)&&o[3].charAt(0)==o[3].charAt(1))return o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0)+o[3].charAt(0);return o.join("")}(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:l(this._r),g:l(this._g),b:l(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+l(this._r)+", "+l(this._g)+", "+l(this._b)+")":"rgba("+l(this._r)+", "+l(this._g)+", "+l(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:l(100*D(this._r,255))+"%",g:l(100*D(this._g,255))+"%",b:l(100*D(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+l(100*D(this._r,255))+"%, "+l(100*D(this._g,255))+"%, "+l(100*D(this._b,255))+"%)":"rgba("+l(100*D(this._r,255))+"%, "+l(100*D(this._g,255))+"%, "+l(100*D(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(R[g(this._r,this._g,this._b,!0)]||!1)},toFilter:function(e){var t="#"+b(this._r,this._g,this._b,this._a),r=t,n=this._gradientType?"GradientType = 1, ":"";if(e){var a=h(e);r="#"+b(a._r,a._g,a._b,a._a)}return"progid:DXImageTransform.Microsoft.gradient("+n+"startColorstr="+t+",endColorstr="+r+")"},toString:function(e){var t=!!e;e=e||this._format;var r=!1,n=this._a<1&&this._a>=0;return t||!n||"hex"!==e&&"hex6"!==e&&"hex3"!==e&&"hex4"!==e&&"hex8"!==e&&"name"!==e?("rgb"===e&&(r=this.toRgbString()),"prgb"===e&&(r=this.toPercentageRgbString()),"hex"!==e&&"hex6"!==e||(r=this.toHexString()),"hex3"===e&&(r=this.toHexString(!0)),"hex4"===e&&(r=this.toHex8String(!0)),"hex8"===e&&(r=this.toHex8String()),"name"===e&&(r=this.toName()),"hsl"===e&&(r=this.toHslString()),"hsv"===e&&(r=this.toHsvString()),r||this.toHexString()):"name"===e&&0===this._a?this.toName():this.toRgbString()},clone:function(){return h(this.toString())},_applyModification:function(e,t){var r=e.apply(null,[this].concat([].slice.call(t)));return this._r=r._r,this._g=r._g,this._b=r._b,this.setAlpha(r._a),this},lighten:function(){return this._applyModification(O,arguments)},brighten:function(){return this._applyModification(x,arguments)},darken:function(){return this._applyModification(w,arguments)},desaturate:function(){return this._applyModification(m,arguments)},saturate:function(){return this._applyModification(v,arguments)},greyscale:function(){return this._applyModification(y,arguments)},spin:function(){return this._applyModification(C,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(k,arguments)},complement:function(){return this._applyCombination(_,arguments)},monochromatic:function(){return this._applyCombination(T,arguments)},splitcomplement:function(){return this._applyCombination(E,arguments)},triad:function(){return this._applyCombination(j,arguments)},tetrad:function(){return this._applyCombination(S,arguments)}},h.fromRatio=function(e,t){if("object"==typeof e){var r={};for(var n in e)e.hasOwnProperty(n)&&(r[n]="a"===n?e[n]:N(e[n]));e=r}return h(e,t)},h.equals=function(e,t){return!(!e||!t)&&h(e).toRgbString()==h(t).toRgbString()},h.random=function(){return h.fromRatio({r:d(),g:d(),b:d()})},h.mix=function(e,t,r){r=0===r?0:r||50;var n=h(e).toRgb(),a=h(t).toRgb(),o=r/100;return h({r:(a.r-n.r)*o+n.r,g:(a.g-n.g)*o+n.g,b:(a.b-n.b)*o+n.b,a:(a.a-n.a)*o+n.a})},h.readability=function(e,t){var r=h(e),n=h(t);return(a.max(r.getLuminance(),n.getLuminance())+.05)/(a.min(r.getLuminance(),n.getLuminance())+.05)},h.isReadable=function(e,t,r){var n,a,o=h.readability(e,t);switch(a=!1,(n=function(e){var t,r;t=((e=e||{level:"AA",size:"small"}).level||"AA").toUpperCase(),r=(e.size||"small").toLowerCase(),"AA"!==t&&"AAA"!==t&&(t="AA");"small"!==r&&"large"!==r&&(r="small");return{level:t,size:r}}(r)).level+n.size){case"AAsmall":case"AAAlarge":a=o>=4.5;break;case"AAlarge":a=o>=3;break;case"AAAsmall":a=o>=7}return a},h.mostReadable=function(e,t,r){var n,a,o,i,s=null,l=0;a=(r=r||{}).includeFallbackColors,o=r.level,i=r.size;for(var c=0;c<t.length;c++)(n=h.readability(e,t[c]))>l&&(l=n,s=h(t[c]));return h.isReadable(e,s,{level:o,size:i})||!a?s:(r.includeFallbackColors=!1,h.mostReadable(e,["#fff","#000"],r))};var M=h.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},R=h.hexNames=function(e){var t={};for(var r in e)e.hasOwnProperty(r)&&(t[e[r]]=r);return t}(M);function A(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function D(e,t){(function(e){return"string"==typeof e&&-1!=e.indexOf(".")&&1===parseFloat(e)})(e)&&(e="100%");var r=function(e){return"string"==typeof e&&-1!=e.indexOf("%")}(e);return e=c(t,u(0,parseFloat(e))),r&&(e=parseInt(e*t,10)/100),a.abs(e-t)<1e-6?1:e%t/parseFloat(t)}function P(e){return c(1,u(0,e))}function I(e){return parseInt(e,16)}function F(e){return 1==e.length?"0"+e:""+e}function N(e){return e<=1&&(e=100*e+"%"),e}function L(e){return a.round(255*parseFloat(e)).toString(16)}function H(e){return I(e)/255}var q,z,B,U=(z="[\\s|\\(]+("+(q="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+q+")[,|\\s]+("+q+")\\s*\\)?",B="[\\s|\\(]+("+q+")[,|\\s]+("+q+")[,|\\s]+("+q+")[,|\\s]+("+q+")\\s*\\)?",{CSS_UNIT:new RegExp(q),rgb:new RegExp("rgb"+z),rgba:new RegExp("rgba"+B),hsl:new RegExp("hsl"+z),hsla:new RegExp("hsla"+B),hsv:new RegExp("hsv"+z),hsva:new RegExp("hsva"+B),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function $(e){return!!U.CSS_UNIT.exec(e)}e.exports?e.exports=h:void 0===(n=function(){return h}.call(t,r,t,e))||(e.exports=n)}(Math)},1153:function(e,t,r){},1154:function(e,t,r){"use strict";r(39);var n=r(11),a=r.n(n),o=r(85),i=r.n(o),s=r(0),l=r.n(s),c=r(195),u=r(42),d=r(51),h=r(68),p=r(15),f=r(101),g=r(352),b=r(41),m=r(71),v=r(121),y=r(1);const O=Object(g.a)(()=>Promise.all([r.e(0),r.e(14),r.e(55)]).then(r.bind(null,2113))),x=Object(d.c)(f.b)`
  .modal-content {
    height: 900px;
    display: flex;
    flex-direction: column;
    align-items: stretch;
  }

  .modal-header {
    flex: 0 1 auto;
  }
  .modal-body {
    flex: 1 1 auto;
    overflow: auto;
  }

  .modal-footer {
    flex: 0 1 auto;
  }
`;function w(e){var t,r;return null!=e&&e.certified_by||null!=e&&e.certification_details?i()({certification:{certified_by:null!=(t=null==e?void 0:e.certified_by)?t:null,details:null!=(r=null==e?void 0:e.certification_details)?r:null}}):null}t.a=Object(v.a)(({addSuccessToast:e,datasource:t,onDatasourceSave:r,onHide:n,show:o})=>{const[i,d]=Object(s.useState)(t),[g,v]=Object(s.useState)([]),[C,_]=Object(s.useState)(!1),j=Object(s.useRef)(null),[S,E]=f.b.useModal(),k=()=>{var t,o,s;const l=(null==(t=i.tableSelector)?void 0:t.schema)||(null==(o=i.databaseSelector)?void 0:o.schema)||i.schema;_(!0),h.a.post({endpoint:"/datasource/save/",postPayload:{data:{...i,schema:l,metrics:null==i?void 0:null==(s=i.metrics)?void 0:a()(s).call(s,e=>({...e,extra:w(e)})),type:i.type||i.datasource_type}}}).then(({json:t})=>{e(Object(p.e)("The dataset has been saved")),r(t),n()}).catch(e=>{_(!1),Object(m.a)(e).then(({error:e})=>{S.error({title:"Error",content:e||Object(p.e)("An error has occurred"),okButtonProps:{danger:!0,className:"btn-danger"}})})})};return Object(y.f)(x,{show:o,onHide:n,title:Object(y.f)("span",null,Object(p.e)("Edit Dataset "),Object(y.f)("strong",null,i.table_name)),footer:Object(y.f)(l.a.Fragment,null,Object(b.c)(b.a.ENABLE_REACT_CRUD_VIEWS)&&Object(y.f)(u.a,{buttonSize:"small",buttonStyle:"default",className:"m-r-5",onClick:()=>{window.location.href=i.edit_url||i.url}},Object(p.e)("Use legacy datasource editor")),Object(y.f)(u.a,{buttonSize:"small",className:"m-r-5",onClick:n},Object(p.e)("Cancel")),Object(y.f)(u.a,{buttonSize:"small",buttonStyle:"primary",onClick:()=>{j.current=S.confirm({title:Object(p.e)("Confirm save"),content:Object(y.f)("div",null,Object(y.f)(c.a,{css:e=>({marginTop:4*e.gridUnit,marginBottom:4*e.gridUnit}),type:"warning",showIcon:!0,message:Object(p.e)("The dataset configuration exposed here\n                affects all the charts using this dataset.\n                Be mindful that changing settings\n                here may affect other charts\n                in undesirable ways.")}),Object(p.e)("Are you sure you want to save and apply changes?")),onOk:k,icon:null})},disabled:C||g.length>0},Object(p.e)("Save"))),responsive:!0},Object(y.f)(O,{showLoadingForImport:!0,height:500,datasource:i,onChange:(e,t)=>{var r;d({...e,metrics:null==e?void 0:a()(r=e.metrics).call(r,e=>({...e,is_certified:(null==e?void 0:e.certified_by)||(null==e?void 0:e.certification_details)}))}),v(t)}}),E)})},1155:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CustomPicker=t.TwitterPicker=t.SwatchesPicker=t.SliderPicker=t.SketchPicker=t.PhotoshopPicker=t.MaterialPicker=t.HuePicker=t.GithubPicker=t.CompactPicker=t.ChromePicker=t.default=t.CirclePicker=t.BlockPicker=t.AlphaPicker=void 0;var n=r(1362);Object.defineProperty(t,"AlphaPicker",{enumerable:!0,get:function(){return v(n).default}});var a=r(1381);Object.defineProperty(t,"BlockPicker",{enumerable:!0,get:function(){return v(a).default}});var o=r(1383);Object.defineProperty(t,"CirclePicker",{enumerable:!0,get:function(){return v(o).default}});var i=r(1385);Object.defineProperty(t,"ChromePicker",{enumerable:!0,get:function(){return v(i).default}});var s=r(1389);Object.defineProperty(t,"CompactPicker",{enumerable:!0,get:function(){return v(s).default}});var l=r(1392);Object.defineProperty(t,"GithubPicker",{enumerable:!0,get:function(){return v(l).default}});var c=r(1394);Object.defineProperty(t,"HuePicker",{enumerable:!0,get:function(){return v(c).default}});var u=r(1396);Object.defineProperty(t,"MaterialPicker",{enumerable:!0,get:function(){return v(u).default}});var d=r(1397);Object.defineProperty(t,"PhotoshopPicker",{enumerable:!0,get:function(){return v(d).default}});var h=r(1403);Object.defineProperty(t,"SketchPicker",{enumerable:!0,get:function(){return v(h).default}});var p=r(1406);Object.defineProperty(t,"SliderPicker",{enumerable:!0,get:function(){return v(p).default}});var f=r(1410);Object.defineProperty(t,"SwatchesPicker",{enumerable:!0,get:function(){return v(f).default}});var g=r(1413);Object.defineProperty(t,"TwitterPicker",{enumerable:!0,get:function(){return v(g).default}});var b=r(1148);Object.defineProperty(t,"CustomPicker",{enumerable:!0,get:function(){return v(b).default}});var m=v(i);function v(e){return e&&e.__esModule?e:{default:e}}t.default=m.default},1324:function(e,t,r){"use strict";r.r(t),r.d(t,"TIME_RANGE",(function(){return $}));var n=r(70),a=r.n(n),o=r(43),i=r.n(o),s=r(29),l=r.n(s),c=r(257),u=r.n(c),d=r(208),h=r.n(d),p=r(34),f=r.n(p),g=r(60),b=r.n(g),m=r(11),v=r.n(m),y=r(55),O=r.n(y),x=r(12),w=r.n(x),C=r(154),_=r.n(C),j=r(0),S=r.n(j),E=r(2),k=r.n(E),T=r(167),M=r(76),R=r(42),A=r(68),D=r(15),P=r(161),I=r(95),F=r(1e3),N=r(1120),L=r(931),H=r(748),q=r(111),z=r(520),B=r(47),U=(r(2116),r(1));const $=B.o.time_range,G={chartId:k.a.number.isRequired,origSelectedValues:k.a.object,datasource:k.a.object.isRequired,instantFiltering:k.a.bool,filtersFields:k.a.arrayOf(k.a.shape({field:k.a.string,label:k.a.string})),filtersChoices:k.a.objectOf(k.a.arrayOf(k.a.shape({id:k.a.string,text:k.a.string,filter:k.a.string,metric:k.a.number}))),onChange:k.a.func,onFilterMenuOpen:k.a.func,onFilterMenuClose:k.a.func,showDateFilter:k.a.bool,showSqlaTimeGrain:k.a.bool,showSqlaTimeColumn:k.a.bool,showDruidTimeGrain:k.a.bool,showDruidTimeOrigin:k.a.bool};class V extends S.a.PureComponent{constructor(e){var t,r,n,a;super(e),this.onCloseDateFilterControl=()=>this.onFilterMenuClose($),this.state={selectedValues:e.origSelectedValues,hasChanged:!1},this.debouncerCache={},this.maxValueCache={},this.changeFilter=w()(t=this.changeFilter).call(t,this),this.onFilterMenuOpen=w()(r=this.onFilterMenuOpen).call(r,this),this.onOpenDateFilterControl=w()(n=this.onOpenDateFilterControl).call(n,this),this.onFilterMenuClose=w()(a=this.onFilterMenuClose).call(a,this)}onFilterMenuOpen(e){return this.props.onFilterMenuOpen(this.props.chartId,e)}onFilterMenuClose(e){return this.props.onFilterMenuClose(this.props.chartId,e)}onOpenDateFilterControl(){return this.onFilterMenuOpen($)}getControlData(e){const{selectedValues:t}=this.state,r={...H.a[e],name:e,key:`control-${e}`,value:t[B.o[e]],actions:{setControlValue:this.changeFilter}},n=r.mapStateToProps;return n?{...r,...n(this.props)}:r}getKnownMax(e,t){return this.maxValueCache[e]=Math.max(this.maxValueCache[e]||0,Object(T.max)(t||this.props.filtersChoices[e]||[],e=>e.metric)),this.maxValueCache[e]}clickApply(){const{selectedValues:e}=this.state;this.setState({hasChanged:!1},()=>{this.props.onChange(e,!1)})}changeFilter(e,t){const r=B.o[e]||e;let n=null;null!==t&&(n=O()(t)?v()(t).call(t,e=>"string"==typeof e?e:e.value):t.value?t.value:t),this.setState(e=>({selectedValues:{...e.selectedValues,[r]:n},hasChanged:!0}),()=>{this.props.instantFiltering&&this.props.onChange({[r]:n},!1)})}debounceLoadOptions(e){return e in this.debouncerCache||(this.debouncerCache[e]=_()((t,r)=>{this.loadOptions(e,t).then(r)},P.e)),this.debouncerCache[e]}transformOptions(e,t){const r=void 0===t?Object(T.max)(e,e=>e.metric):t;return v()(e).call(e,e=>{const t=Math.round(e.metric/r*100),n={backgroundImage:`linear-gradient(to right, lightgrey, lightgrey ${t}%, rgba(0,0,0,0) ${t}%`};let a=e.id;return!0===a?a=P.b:!1===a&&(a=P.a),{value:e.id,label:a,style:n}})}async loadOptions(e,t=""){var r,n,a;const o=t.toLowerCase(),i=b()(r=this.props.filtersFields).call(r,t=>t.key===e).asc,s={...this.props.rawFormData,adhoc_filters:t?[{clause:"WHERE",comparator:null,expressionType:"SQL",sqlExpression:`lower(${e}) like '%${o}%'`}]:null},{json:l}=await A.a.get({url:Object(q.h)({formData:s,endpointType:"json",method:"GET"})}),c=f()(n=(null==l?void 0:null==(a=l.data)?void 0:a[e])||[]).call(n,e=>e.id);return c&&0!==c.length?(o&&h()(c).call(c,(e,t)=>{const r=e.id.toLowerCase(),n=t.id.toLowerCase(),a=u()(n).call(n,o)-u()(r).call(r,o);return 0===a?(e.metric-t.metric)*(i?1:-1):a}),this.transformOptions(c,this.getKnownMax(e,c))):[]}renderDateFilter(){const{showDateFilter:e}=this.props,t=B.n.time_range;return e?Object(U.f)("div",{className:"row space-1"},Object(U.f)("div",{className:"col-lg-12 col-xs-12"},Object(U.f)(F.a,{name:$,label:t,description:Object(D.e)("Select start and end date"),onChange:e=>{this.changeFilter($,e)},onOpenDateFilterControl:this.onOpenDateFilterControl,onCloseDateFilterControl:this.onCloseDateFilterControl,value:this.state.selectedValues[$]||"No filter"}))):null}renderDatasourceFilters(){const{showSqlaTimeGrain:e,showSqlaTimeColumn:t,showDruidTimeGrain:r,showDruidTimeOrigin:n}=this.props,a=[],o=[],i=[];return e&&o.push("time_grain_sqla"),t&&o.push("granularity_sqla"),r&&i.push("granularity"),n&&i.push("druid_time_origin"),o.length&&a.push(Object(U.f)(N.a,{key:"sqla-filters",controls:v()(o).call(o,e=>Object(U.f)(L.a,this.getControlData(e)))})),i.length&&a.push(Object(U.f)(N.a,{key:"druid-filters",controls:v()(i).call(i,e=>Object(U.f)(L.a,this.getControlData(e)))})),a}renderSelect(e){var t,r;const{filtersChoices:n}=this.props,{selectedValues:o}=this.state;this.debouncerCache={},this.maxValueCache={},l()(t=f()(r=i()(o)).call(r,e=>e in n)).call(t,e=>{var t;if(!o[e])return;const r=n[e]||(n[e]=[]),i=new a.a(v()(r).call(r,e=>e.id)),s=O()(o[e])?o[e]:[o[e]];l()(t=f()(s).call(s,e=>null!==e&&!i.has(e))).call(t,t=>{r.unshift({filter:e,id:t,text:t,metric:0})})});const{key:s,label:c,[B.g.MULTIPLE]:u,[B.g.DEFAULT_VALUE]:d,[B.g.CLEARABLE]:h,[B.g.SEARCH_ALL_OPTIONS]:p}=e,g=n[s]||[];let b=o[s]||null;return void 0===b&&d&&(b=u?d.split(";"):d),Object(U.f)(z.a,{cacheOptions:!0,loadOptions:this.debounceLoadOptions(s),defaultOptions:this.transformOptions(g),key:s,placeholder:Object(D.e)("Type or Select [%s]",c),isMulti:u,isClearable:h,value:b,options:this.transformOptions(g),onChange:e=>{e!==b&&this.changeFilter(s,e)},onMenuOpen:()=>this.onFilterMenuOpen(s),onBlur:()=>this.onFilterMenuClose(s),onMenuClose:()=>this.onFilterMenuClose(s),selectWrap:p&&g.length>=B.h?M.a:M.c,noResultsText:Object(D.e)("No results found"),forceOverflow:!0})}renderFilters(){const{filtersFields:e=[]}=this.props;return v()(e).call(e,e=>{const{label:t,key:r}=e;return Object(U.f)("div",{key:r,className:"m-b-5 filter-container"},Object(U.f)(I.a,{htmlFor:`LABEL-${r}`},t),this.renderSelect(e))})}render(){var e;const{instantFiltering:t,width:r,height:n}=this.props;return Object(U.f)("div",{style:{width:r,height:n,overflow:"auto"}},this.renderDateFilter(),this.renderDatasourceFilters(),this.renderFilters(),!t&&Object(U.f)(R.a,{buttonSize:"small",buttonStyle:"primary",onClick:w()(e=this.clickApply).call(e,this),disabled:!this.state.hasChanged},Object(D.e)("Apply")))}}V.propTypes=G,V.defaultProps={origSelectedValues:{},onChange:()=>{},onFilterMenuOpen:()=>{},onFilterMenuClose:()=>{},showDateFilter:!1,showSqlaTimeGrain:!1,showSqlaTimeColumn:!1,showDruidTimeGrain:!1,showDruidTimeOrigin:!1,instantFiltering:!1},t.default=V},1355:function(e,t,r){},1361:function(e,t,r){},1362:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AlphaPicker=void 0;var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=l(r(0)),o=l(r(80)),i=r(145),s=l(r(1380));function l(e){return e&&e.__esModule?e:{default:e}}var c=t.AlphaPicker=function(e){var t=e.rgb,r=e.hsl,s=e.width,l=e.height,c=e.onChange,u=e.direction,d=e.style,h=e.renderers,p=e.pointer,f=e.className,g=void 0===f?"":f,b=(0,o.default)({default:{picker:{position:"relative",width:s,height:l},alpha:{radius:"2px",style:d}}});return a.default.createElement("div",{style:b.picker,className:"alpha-picker "+g},a.default.createElement(i.Alpha,n({},b.alpha,{rgb:t,hsl:r,pointer:p,renderers:h,onChange:c,direction:u})))};c.defaultProps={width:"316px",height:"16px",direction:"horizontal",pointer:s.default},t.default=(0,i.ColorWrap)(c)},1363:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.flattenNames=void 0;var n=s(r(1290)),a=s(r(1094)),o=s(r(765)),i=s(r(491));function s(e){return e&&e.__esModule?e:{default:e}}var l=t.flattenNames=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=[];return(0,i.default)(t,(function(t){Array.isArray(t)?e(t).map((function(e){return r.push(e)})):(0,o.default)(t)?(0,a.default)(t,(function(e,t){!0===e&&r.push(t),r.push(t+"-"+e)})):(0,n.default)(t)&&r.push(t)})),r};t.default=l},1364:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mergeClasses=void 0;var n=i(r(1094)),a=i(r(1714)),o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};function i(e){return e&&e.__esModule?e:{default:e}}var s=t.mergeClasses=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=e.default&&(0,a.default)(e.default)||{};return t.map((function(t){var a=e[t];return a&&(0,n.default)(a,(function(e,t){r[t]||(r[t]={}),r[t]=o({},r[t],a[t])})),t})),r};t.default=s},1365:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.autoprefix=void 0;var n,a=r(1094),o=(n=a)&&n.__esModule?n:{default:n},i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};var s={borderRadius:function(e){return{msBorderRadius:e,MozBorderRadius:e,OBorderRadius:e,WebkitBorderRadius:e,borderRadius:e}},boxShadow:function(e){return{msBoxShadow:e,MozBoxShadow:e,OBoxShadow:e,WebkitBoxShadow:e,boxShadow:e}},userSelect:function(e){return{WebkitTouchCallout:e,KhtmlUserSelect:e,MozUserSelect:e,msUserSelect:e,WebkitUserSelect:e,userSelect:e}},flex:function(e){return{WebkitBoxFlex:e,MozBoxFlex:e,WebkitFlex:e,msFlex:e,flex:e}},flexBasis:function(e){return{WebkitFlexBasis:e,flexBasis:e}},justifyContent:function(e){return{WebkitJustifyContent:e,justifyContent:e}},transition:function(e){return{msTransition:e,MozTransition:e,OTransition:e,WebkitTransition:e,transition:e}},transform:function(e){return{msTransform:e,MozTransform:e,OTransform:e,WebkitTransform:e,transform:e}},absolute:function(e){var t=e&&e.split(" ");return{position:"absolute",top:t&&t[0],right:t&&t[1],bottom:t&&t[2],left:t&&t[3]}},extend:function(e,t){var r=t[e];return r||{extend:e}}},l=t.autoprefix=function(e){var t={};return(0,o.default)(e,(function(e,r){var n={};(0,o.default)(e,(function(e,t){var r=s[t];r?n=i({},n,r(e)):n[t]=e})),t[r]=n})),t};t.default=l},1366:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hover=void 0;var n,a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o=r(0),i=(n=o)&&n.__esModule?n:{default:n};function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var u=t.hover=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"span";return function(r){function n(){var r,o,c;s(this,n);for(var u=arguments.length,d=Array(u),h=0;h<u;h++)d[h]=arguments[h];return o=c=l(this,(r=n.__proto__||Object.getPrototypeOf(n)).call.apply(r,[this].concat(d))),c.state={hover:!1},c.handleMouseOver=function(){return c.setState({hover:!0})},c.handleMouseOut=function(){return c.setState({hover:!1})},c.render=function(){return i.default.createElement(t,{onMouseOver:c.handleMouseOver,onMouseOut:c.handleMouseOut},i.default.createElement(e,a({},c.props,c.state)))},l(c,o)}return c(n,r),n}(i.default.Component)};t.default=u},1367:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.active=void 0;var n,a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o=r(0),i=(n=o)&&n.__esModule?n:{default:n};function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var u=t.active=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"span";return function(r){function n(){var r,o,c;s(this,n);for(var u=arguments.length,d=Array(u),h=0;h<u;h++)d[h]=arguments[h];return o=c=l(this,(r=n.__proto__||Object.getPrototypeOf(n)).call.apply(r,[this].concat(d))),c.state={active:!1},c.handleMouseDown=function(){return c.setState({active:!0})},c.handleMouseUp=function(){return c.setState({active:!1})},c.render=function(){return i.default.createElement(t,{onMouseDown:c.handleMouseDown,onMouseUp:c.handleMouseUp},i.default.createElement(e,a({},c.props,c.state)))},l(c,o)}return c(n,r),n}(i.default.Component)};t.default=u},1368:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e,t){var r={},n=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];r[e]=t};return 0===e&&n("first-child"),e===t-1&&n("last-child"),(0===e||e%2==0)&&n("even"),1===Math.abs(e%2)&&n("odd"),n("nth-child",e),r}},1369:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Alpha=void 0;var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(0),i=u(o),s=u(r(80)),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(1370)),c=u(r(1147));function u(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var p=t.Alpha=function(e){function t(){var e,r,n;d(this,t);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return r=n=h(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),n.handleChange=function(e,t){var r=l.calculateChange(e,t,n.props,n.container);r&&n.props.onChange&&n.props.onChange(r,e)},n.handleMouseDown=function(e){n.handleChange(e,!0),window.addEventListener("mousemove",n.handleChange),window.addEventListener("mouseup",n.handleMouseUp)},n.handleMouseUp=function(){n.unbindEventListeners()},n.unbindEventListeners=function(){window.removeEventListener("mousemove",n.handleChange),window.removeEventListener("mouseup",n.handleMouseUp)},h(n,r)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"render",value:function(){var e=this,t=this.props.rgb,r=(0,s.default)({default:{alpha:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},checkboard:{absolute:"0px 0px 0px 0px",overflow:"hidden",borderRadius:this.props.radius},gradient:{absolute:"0px 0px 0px 0px",background:"linear-gradient(to right, rgba("+t.r+","+t.g+","+t.b+", 0) 0%,\n           rgba("+t.r+","+t.g+","+t.b+", 1) 100%)",boxShadow:this.props.shadow,borderRadius:this.props.radius},container:{position:"relative",height:"100%",margin:"0 3px"},pointer:{position:"absolute",left:100*t.a+"%"},slider:{width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",marginTop:"1px",transform:"translateX(-2px)"}},vertical:{gradient:{background:"linear-gradient(to bottom, rgba("+t.r+","+t.g+","+t.b+", 0) 0%,\n           rgba("+t.r+","+t.g+","+t.b+", 1) 100%)"},pointer:{left:0,top:100*t.a+"%"}},overwrite:n({},this.props.style)},{vertical:"vertical"===this.props.direction,overwrite:!0});return i.default.createElement("div",{style:r.alpha},i.default.createElement("div",{style:r.checkboard},i.default.createElement(c.default,{renderers:this.props.renderers})),i.default.createElement("div",{style:r.gradient}),i.default.createElement("div",{style:r.container,ref:function(t){return e.container=t},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},i.default.createElement("div",{style:r.pointer},this.props.pointer?i.default.createElement(this.props.pointer,this.props):i.default.createElement("div",{style:r.slider}))))}}]),t}(o.PureComponent||o.Component);t.default=p},1370:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.calculateChange=function(e,t,r,n){e.preventDefault();var a=n.clientWidth,o=n.clientHeight,i="number"==typeof e.pageX?e.pageX:e.touches[0].pageX,s="number"==typeof e.pageY?e.pageY:e.touches[0].pageY,l=i-(n.getBoundingClientRect().left+window.pageXOffset),c=s-(n.getBoundingClientRect().top+window.pageYOffset);if("vertical"===r.direction){var u=void 0;if(u=c<0?0:c>o?1:Math.round(100*c/o)/100,r.hsl.a!==u)return{h:r.hsl.h,s:r.hsl.s,l:r.hsl.l,a:u,source:"rgb"}}else{var d=void 0;if(d=l<0?0:l>a?1:Math.round(100*l/a)/100,r.a!==d)return{h:r.hsl.h,s:r.hsl.s,l:r.hsl.l,a:d,source:"rgb"}}return null}},1371:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={},a=t.render=function(e,t,r,n){if("undefined"==typeof document&&!n)return null;var a=n?new n:document.createElement("canvas");a.width=2*r,a.height=2*r;var o=a.getContext("2d");return o?(o.fillStyle=e,o.fillRect(0,0,a.width,a.height),o.fillStyle=t,o.fillRect(0,0,r,r),o.translate(r,r),o.fillRect(0,0,r,r),a.toDataURL()):null};t.get=function(e,t,r,o){var i=e+"-"+t+"-"+r+(o?"-server":""),s=a(e,t,r,o);return n[i]?n[i]:(n[i]=s,s)}},1372:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EditableInput=void 0;var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=r(0),o=s(a),i=s(r(80));function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var c=t.EditableInput=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.handleBlur=function(){r.state.blurValue&&r.setState({value:r.state.blurValue,blurValue:null})},r.handleChange=function(e){r.props.label?r.props.onChange&&r.props.onChange(l({},r.props.label,e.target.value),e):r.props.onChange&&r.props.onChange(e.target.value,e),r.setState({value:e.target.value})},r.handleKeyDown=function(e){var t=String(e.target.value),n=t.indexOf("%")>-1,a=Number(t.replace(/%/g,""));if(!isNaN(a)){var o=r.props.arrowOffset||1;38===e.keyCode&&(null!==r.props.label?r.props.onChange&&r.props.onChange(l({},r.props.label,a+o),e):r.props.onChange&&r.props.onChange(a+o,e),n?r.setState({value:a+o+"%"}):r.setState({value:a+o})),40===e.keyCode&&(null!==r.props.label?r.props.onChange&&r.props.onChange(l({},r.props.label,a-o),e):r.props.onChange&&r.props.onChange(a-o,e),n?r.setState({value:a-o+"%"}):r.setState({value:a-o}))}},r.handleDrag=function(e){if(r.props.dragLabel){var t=Math.round(r.props.value+e.movementX);t>=0&&t<=r.props.dragMax&&r.props.onChange&&r.props.onChange(l({},r.props.label,t),e)}},r.handleMouseDown=function(e){r.props.dragLabel&&(e.preventDefault(),r.handleDrag(e),window.addEventListener("mousemove",r.handleDrag),window.addEventListener("mouseup",r.handleMouseUp))},r.handleMouseUp=function(){r.unbindEventListeners()},r.unbindEventListeners=function(){window.removeEventListener("mousemove",r.handleDrag),window.removeEventListener("mouseup",r.handleMouseUp)},r.state={value:String(e.value).toUpperCase(),blurValue:String(e.value).toUpperCase()},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"componentWillReceiveProps",value:function(e){var t=this.input;e.value!==this.state.value&&(t===document.activeElement?this.setState({blurValue:String(e.value).toUpperCase()}):this.setState({value:String(e.value).toUpperCase(),blurValue:!this.state.blurValue&&String(e.value).toUpperCase()}))}},{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"render",value:function(){var e=this,t=(0,i.default)({default:{wrap:{position:"relative"}},"user-override":{wrap:this.props.style&&this.props.style.wrap?this.props.style.wrap:{},input:this.props.style&&this.props.style.input?this.props.style.input:{},label:this.props.style&&this.props.style.label?this.props.style.label:{}},"dragLabel-true":{label:{cursor:"ew-resize"}}},{"user-override":!0},this.props);return o.default.createElement("div",{style:t.wrap},o.default.createElement("input",{style:t.input,ref:function(t){return e.input=t},value:this.state.value,onKeyDown:this.handleKeyDown,onChange:this.handleChange,onBlur:this.handleBlur,placeholder:this.props.placeholder,spellCheck:"false"}),this.props.label&&!this.props.hideLabel?o.default.createElement("span",{style:t.label,onMouseDown:this.handleMouseDown},this.props.label):null)}}]),t}(a.PureComponent||a.Component);t.default=c},1373:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Hue=void 0;var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=r(0),o=l(a),i=l(r(80)),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(1374));function l(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var d=t.Hue=function(e){function t(){var e,r,n;c(this,t);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return r=n=u(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),n.handleChange=function(e,t){var r=s.calculateChange(e,t,n.props,n.container);r&&n.props.onChange&&n.props.onChange(r,e)},n.handleMouseDown=function(e){n.handleChange(e,!0),window.addEventListener("mousemove",n.handleChange),window.addEventListener("mouseup",n.handleMouseUp)},n.handleMouseUp=function(){n.unbindEventListeners()},u(n,r)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"unbindEventListeners",value:function(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var e=this,t=this.props.direction,r=void 0===t?"horizontal":t,n=(0,i.default)({default:{hue:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius,boxShadow:this.props.shadow},container:{padding:"0 2px",position:"relative",height:"100%",borderRadius:this.props.radius},pointer:{position:"absolute",left:100*this.props.hsl.h/360+"%"},slider:{marginTop:"1px",width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",transform:"translateX(-2px)"}},vertical:{pointer:{left:"0px",top:-100*this.props.hsl.h/360+100+"%"}}},{vertical:"vertical"===r});return o.default.createElement("div",{style:n.hue},o.default.createElement("div",{className:"hue-"+r,style:n.container,ref:function(t){return e.container=t},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},o.default.createElement("style",null,"\n            .hue-horizontal {\n              background: linear-gradient(to right, #f00 0%, #ff0 17%, #0f0\n                33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n              background: -webkit-linear-gradient(to right, #f00 0%, #ff0\n                17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n            }\n\n            .hue-vertical {\n              background: linear-gradient(to top, #f00 0%, #ff0 17%, #0f0 33%,\n                #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n              background: -webkit-linear-gradient(to top, #f00 0%, #ff0 17%,\n                #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n            }\n          "),o.default.createElement("div",{style:n.pointer},this.props.pointer?o.default.createElement(this.props.pointer,this.props):o.default.createElement("div",{style:n.slider}))))}}]),t}(a.PureComponent||a.Component);t.default=d},1374:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.calculateChange=function(e,t,r,n){e.preventDefault();var a=n.clientWidth,o=n.clientHeight,i="number"==typeof e.pageX?e.pageX:e.touches[0].pageX,s="number"==typeof e.pageY?e.pageY:e.touches[0].pageY,l=i-(n.getBoundingClientRect().left+window.pageXOffset),c=s-(n.getBoundingClientRect().top+window.pageYOffset);if("vertical"===r.direction){var u=void 0;if(c<0)u=359;else if(c>o)u=0;else{u=360*(-100*c/o+100)/100}if(r.hsl.h!==u)return{h:u,s:r.hsl.s,l:r.hsl.l,a:r.hsl.a,source:"rgb"}}else{var d=void 0;if(l<0)d=0;else if(l>a)d=359;else{d=360*(100*l/a)/100}if(r.hsl.h!==d)return{h:d,s:r.hsl.s,l:r.hsl.l,a:r.hsl.a,source:"rgb"}}return null}},1375:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Raised=void 0;var n=i(r(0)),a=i(r(2)),o=i(r(80));function i(e){return e&&e.__esModule?e:{default:e}}var s=t.Raised=function(e){var t=e.zDepth,r=e.radius,a=e.background,i=e.children,s=(0,o.default)({default:{wrap:{position:"relative",display:"inline-block"},content:{position:"relative"},bg:{absolute:"0px 0px 0px 0px",boxShadow:"0 "+t+"px "+4*t+"px rgba(0,0,0,.24)",borderRadius:r,background:a}},"zDepth-0":{bg:{boxShadow:"none"}},"zDepth-1":{bg:{boxShadow:"0 2px 10px rgba(0,0,0,.12), 0 2px 5px rgba(0,0,0,.16)"}},"zDepth-2":{bg:{boxShadow:"0 6px 20px rgba(0,0,0,.19), 0 8px 17px rgba(0,0,0,.2)"}},"zDepth-3":{bg:{boxShadow:"0 17px 50px rgba(0,0,0,.19), 0 12px 15px rgba(0,0,0,.24)"}},"zDepth-4":{bg:{boxShadow:"0 25px 55px rgba(0,0,0,.21), 0 16px 28px rgba(0,0,0,.22)"}},"zDepth-5":{bg:{boxShadow:"0 40px 77px rgba(0,0,0,.22), 0 27px 24px rgba(0,0,0,.2)"}},square:{bg:{borderRadius:"0"}},circle:{bg:{borderRadius:"50%"}}},{"zDepth-1":1===t});return n.default.createElement("div",{style:s.wrap},n.default.createElement("div",{style:s.bg}),n.default.createElement("div",{style:s.content},i))};s.propTypes={background:a.default.string,zDepth:a.default.oneOf([0,1,2,3,4,5]),radius:a.default.number},s.defaultProps={background:"#fff",zDepth:1,radius:2},t.default=s},1376:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Saturation=void 0;var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=r(0),o=c(a),i=c(r(80)),s=c(r(930)),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(1377));function c(e){return e&&e.__esModule?e:{default:e}}var u=t.Saturation=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.handleChange=function(e,t){r.props.onChange&&r.throttle(r.props.onChange,l.calculateChange(e,t,r.props,r.container),e)},r.handleMouseDown=function(e){r.handleChange(e,!0),window.addEventListener("mousemove",r.handleChange),window.addEventListener("mouseup",r.handleMouseUp)},r.handleMouseUp=function(){r.unbindEventListeners()},r.throttle=(0,s.default)((function(e,t,r){e(t,r)}),50),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"unbindEventListeners",value:function(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var e=this,t=this.props.style||{},r=t.color,n=t.white,a=t.black,s=t.pointer,l=t.circle,c=(0,i.default)({default:{color:{absolute:"0px 0px 0px 0px",background:"hsl("+this.props.hsl.h+",100%, 50%)",borderRadius:this.props.radius},white:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},black:{absolute:"0px 0px 0px 0px",boxShadow:this.props.shadow,borderRadius:this.props.radius},pointer:{position:"absolute",top:-100*this.props.hsv.v+100+"%",left:100*this.props.hsv.s+"%",cursor:"default"},circle:{width:"4px",height:"4px",boxShadow:"0 0 0 1.5px #fff, inset 0 0 1px 1px rgba(0,0,0,.3),\n            0 0 1px 2px rgba(0,0,0,.4)",borderRadius:"50%",cursor:"hand",transform:"translate(-2px, -2px)"}},custom:{color:r,white:n,black:a,pointer:s,circle:l}},{custom:!!this.props.style});return o.default.createElement("div",{style:c.color,ref:function(t){return e.container=t},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},o.default.createElement("style",null,"\n          .saturation-white {\n            background: -webkit-linear-gradient(to right, #fff, rgba(255,255,255,0));\n            background: linear-gradient(to right, #fff, rgba(255,255,255,0));\n          }\n          .saturation-black {\n            background: -webkit-linear-gradient(to top, #000, rgba(0,0,0,0));\n            background: linear-gradient(to top, #000, rgba(0,0,0,0));\n          }\n        "),o.default.createElement("div",{style:c.white,className:"saturation-white"},o.default.createElement("div",{style:c.black,className:"saturation-black"}),o.default.createElement("div",{style:c.pointer},this.props.pointer?o.default.createElement(this.props.pointer,this.props):o.default.createElement("div",{style:c.circle}))))}}]),t}(a.PureComponent||a.Component);t.default=u},1377:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.calculateChange=function(e,t,r,n){e.preventDefault();var a=n.getBoundingClientRect(),o=a.width,i=a.height,s="number"==typeof e.pageX?e.pageX:e.touches[0].pageX,l="number"==typeof e.pageY?e.pageY:e.touches[0].pageY,c=s-(n.getBoundingClientRect().left+window.pageXOffset),u=l-(n.getBoundingClientRect().top+window.pageYOffset);c<0?c=0:c>o?c=o:u<0?u=0:u>i&&(u=i);var d=100*c/o,h=-100*u/i+100;return{h:r.hsl.h,s:d,v:h,a:r.hsl.a,source:"rgb"}}},1378:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Swatch=void 0;var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=l(r(0)),o=l(r(80)),i=r(1379),s=r(145);function l(e){return e&&e.__esModule?e:{default:e}}var c=t.Swatch=function(e){var t=e.color,r=e.style,i=e.onClick,l=void 0===i?function(){}:i,c=e.onHover,u=e.title,d=void 0===u?t:u,h=e.children,p=e.focus,f=e.focusStyle,g=void 0===f?{}:f,b="transparent"===t,m=(0,o.default)({default:{swatch:n({background:t,height:"100%",width:"100%",cursor:"pointer",position:"relative",outline:"none"},r,p?g:{})}}),v={};return c&&(v.onMouseOver=function(e){return c(t,e)}),a.default.createElement("div",n({style:m.swatch,onClick:function(e){return l(t,e)},title:d,tabIndex:0,onKeyDown:function(e){return 13===e.keyCode&&l(t,e)}},v),h,b&&a.default.createElement(s.Checkboard,{borderRadius:m.swatch.borderRadius,boxShadow:"inset 0 0 0 1px rgba(0,0,0,0.1)"}))};t.default=(0,i.handleFocus)(c)},1379:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.handleFocus=void 0;var n,a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=r(0),s=(n=i)&&n.__esModule?n:{default:n};function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.handleFocus=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"span";return function(r){function n(){var e,t,r;l(this,n);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return t=r=c(this,(e=n.__proto__||Object.getPrototypeOf(n)).call.apply(e,[this].concat(o))),r.state={focus:!1},r.handleFocus=function(){return r.setState({focus:!0})},r.handleBlur=function(){return r.setState({focus:!1})},c(r,t)}return u(n,r),o(n,[{key:"render",value:function(){return s.default.createElement(t,{onFocus:this.handleFocus,onBlur:this.handleBlur},s.default.createElement(e,a({},this.props,this.state)))}}]),n}(s.default.Component)}},1380:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AlphaPointer=void 0;var n=o(r(0)),a=o(r(80));function o(e){return e&&e.__esModule?e:{default:e}}var i=t.AlphaPointer=function(e){var t=e.direction,r=(0,a.default)({default:{picker:{width:"18px",height:"18px",borderRadius:"50%",transform:"translate(-9px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}},vertical:{picker:{transform:"translate(-3px, -9px)"}}},{vertical:"vertical"===t});return n.default.createElement("div",{style:r.picker})};t.default=i},1381:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Block=void 0;var n=c(r(0)),a=c(r(2)),o=c(r(80)),i=c(r(284)),s=r(145),l=c(r(1382));function c(e){return e&&e.__esModule?e:{default:e}}var u=t.Block=function(e){var t=e.onChange,r=e.onSwatchHover,a=e.hex,c=e.colors,u=e.width,d=e.triangle,h=e.className,p=void 0===h?"":h,f="transparent"===a,g=function(e,r){i.default.isValidHex(e)&&t({hex:e,source:"hex"},r)},b=(0,o.default)({default:{card:{width:u,background:"#fff",boxShadow:"0 1px rgba(0,0,0,.1)",borderRadius:"6px",position:"relative"},head:{height:"110px",background:a,borderRadius:"6px 6px 0 0",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},body:{padding:"10px"},label:{fontSize:"18px",color:i.default.getContrastingColor(a),position:"relative"},triangle:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 10px 10px 10px",borderColor:"transparent transparent "+a+" transparent",position:"absolute",top:"-10px",left:"50%",marginLeft:"-10px"},input:{width:"100%",fontSize:"12px",color:"#666",border:"0px",outline:"none",height:"22px",boxShadow:"inset 0 0 0 1px #ddd",borderRadius:"4px",padding:"0 7px",boxSizing:"border-box"}},"hide-triangle":{triangle:{display:"none"}}},{"hide-triangle":"hide"===d});return n.default.createElement("div",{style:b.card,className:"block-picker "+p},n.default.createElement("div",{style:b.triangle}),n.default.createElement("div",{style:b.head},f&&n.default.createElement(s.Checkboard,{borderRadius:"6px 6px 0 0"}),n.default.createElement("div",{style:b.label},a)),n.default.createElement("div",{style:b.body},n.default.createElement(l.default,{colors:c,onClick:g,onSwatchHover:r}),n.default.createElement(s.EditableInput,{style:{input:b.input},value:a,onChange:g})))};u.propTypes={width:a.default.oneOfType([a.default.string,a.default.number]),colors:a.default.arrayOf(a.default.string),triangle:a.default.oneOf(["top","hide"])},u.defaultProps={width:170,colors:["#D9E3F0","#F47373","#697689","#37D67A","#2CCCE4","#555555","#dce775","#ff8a65","#ba68c8"],triangle:"top"},t.default=(0,s.ColorWrap)(u)},1382:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BlockSwatches=void 0;var n=s(r(0)),a=s(r(80)),o=s(r(491)),i=r(145);function s(e){return e&&e.__esModule?e:{default:e}}var l=t.BlockSwatches=function(e){var t=e.colors,r=e.onClick,s=e.onSwatchHover,l=(0,a.default)({default:{swatches:{marginRight:"-10px"},swatch:{width:"22px",height:"22px",float:"left",marginRight:"10px",marginBottom:"10px",borderRadius:"4px"},clear:{clear:"both"}}});return n.default.createElement("div",{style:l.swatches},(0,o.default)(t,(function(e){return n.default.createElement(i.Swatch,{key:e,color:e,style:l.swatch,onClick:r,onHover:s,focusStyle:{boxShadow:"0 0 4px "+e}})})),n.default.createElement("div",{style:l.clear}))};t.default=l},1383:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Circle=void 0;var n=u(r(0)),a=u(r(2)),o=u(r(80)),i=u(r(491)),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(1149)),l=r(145),c=u(r(1384));function u(e){return e&&e.__esModule?e:{default:e}}var d=t.Circle=function(e){var t=e.width,r=e.onChange,a=e.onSwatchHover,s=e.colors,l=e.hex,u=e.circleSize,d=e.circleSpacing,h=e.className,p=void 0===h?"":h,f=(0,o.default)({default:{card:{width:t,display:"flex",flexWrap:"wrap",marginRight:-d,marginBottom:-d}}}),g=function(e,t){return r({hex:e,source:"hex"},t)};return n.default.createElement("div",{style:f.card,className:"circle-picker "+p},(0,i.default)(s,(function(e){return n.default.createElement(c.default,{key:e,color:e,onClick:g,onSwatchHover:a,active:l===e.toLowerCase(),circleSize:u,circleSpacing:d})})))};d.propTypes={width:a.default.oneOfType([a.default.string,a.default.number]),circleSize:a.default.number,circleSpacing:a.default.number},d.defaultProps={width:252,circleSize:28,circleSpacing:14,colors:[s.red[500],s.pink[500],s.purple[500],s.deepPurple[500],s.indigo[500],s.blue[500],s.lightBlue[500],s.cyan[500],s.teal[500],s.green[500],s.lightGreen[500],s.lime[500],s.yellow[500],s.amber[500],s.orange[500],s.deepOrange[500],s.brown[500],s.blueGrey[500]]},t.default=(0,l.ColorWrap)(d)},1384:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CircleSwatch=void 0;var n=s(r(0)),a=r(80),o=s(a),i=r(145);function s(e){return e&&e.__esModule?e:{default:e}}var l=t.CircleSwatch=function(e){var t=e.color,r=e.onClick,a=e.onSwatchHover,s=e.hover,l=e.active,c=e.circleSize,u=e.circleSpacing,d=(0,o.default)({default:{swatch:{width:c,height:c,marginRight:u,marginBottom:u,transform:"scale(1)",transition:"100ms transform ease"},Swatch:{borderRadius:"50%",background:"transparent",boxShadow:"inset 0 0 0 "+c/2+"px "+t,transition:"100ms box-shadow ease"}},hover:{swatch:{transform:"scale(1.2)"}},active:{Swatch:{boxShadow:"inset 0 0 0 3px "+t}}},{hover:s,active:l});return n.default.createElement("div",{style:d.swatch},n.default.createElement(i.Swatch,{style:d.Swatch,color:t,onClick:r,onHover:a,focusStyle:{boxShadow:d.Swatch.boxShadow+", 0 0 5px "+t}}))};l.defaultProps={circleSize:28,circleSpacing:14},t.default=(0,a.handleHover)(l)},1385:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Chrome=void 0;var n=u(r(0)),a=u(r(2)),o=u(r(80)),i=r(145),s=u(r(1386)),l=u(r(1387)),c=u(r(1388));function u(e){return e&&e.__esModule?e:{default:e}}var d=t.Chrome=function(e){var t=e.onChange,r=e.disableAlpha,a=e.rgb,u=e.hsl,d=e.hsv,h=e.hex,p=e.renderers,f=e.className,g=void 0===f?"":f,b=(0,o.default)({default:{picker:{background:"#fff",borderRadius:"2px",boxShadow:"0 0 2px rgba(0,0,0,.3), 0 4px 8px rgba(0,0,0,.3)",boxSizing:"initial",width:"225px",fontFamily:"Menlo"},saturation:{width:"100%",paddingBottom:"55%",position:"relative",borderRadius:"2px 2px 0 0",overflow:"hidden"},Saturation:{radius:"2px 2px 0 0"},body:{padding:"16px 16px 12px"},controls:{display:"flex"},color:{width:"32px"},swatch:{marginTop:"6px",width:"16px",height:"16px",borderRadius:"8px",position:"relative",overflow:"hidden"},active:{absolute:"0px 0px 0px 0px",borderRadius:"8px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.1)",background:"rgba("+a.r+", "+a.g+", "+a.b+", "+a.a+")",zIndex:"2"},toggles:{flex:"1"},hue:{height:"10px",position:"relative",marginBottom:"8px"},Hue:{radius:"2px"},alpha:{height:"10px",position:"relative"},Alpha:{radius:"2px"}},disableAlpha:{color:{width:"22px"},alpha:{display:"none"},hue:{marginBottom:"0px"},swatch:{width:"10px",height:"10px",marginTop:"0px"}}},{disableAlpha:r});return n.default.createElement("div",{style:b.picker,className:"chrome-picker "+g},n.default.createElement("div",{style:b.saturation},n.default.createElement(i.Saturation,{style:b.Saturation,hsl:u,hsv:d,pointer:c.default,onChange:t})),n.default.createElement("div",{style:b.body},n.default.createElement("div",{style:b.controls,className:"flexbox-fix"},n.default.createElement("div",{style:b.color},n.default.createElement("div",{style:b.swatch},n.default.createElement("div",{style:b.active}),n.default.createElement(i.Checkboard,{renderers:p}))),n.default.createElement("div",{style:b.toggles},n.default.createElement("div",{style:b.hue},n.default.createElement(i.Hue,{style:b.Hue,hsl:u,pointer:l.default,onChange:t})),n.default.createElement("div",{style:b.alpha},n.default.createElement(i.Alpha,{style:b.Alpha,rgb:a,hsl:u,pointer:l.default,renderers:p,onChange:t})))),n.default.createElement(s.default,{rgb:a,hsl:u,hex:h,onChange:t,disableAlpha:r})))};d.propTypes={disableAlpha:a.default.bool},d.defaultProps={disableAlpha:!1},t.default=(0,i.ColorWrap)(d)},1386:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChromeFields=void 0;var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=l(r(0)),o=l(r(80)),i=l(r(284)),s=r(145);function l(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var d=t.ChromeFields=function(e){function t(){var e,r,n;c(this,t);for(var a=arguments.length,o=Array(a),s=0;s<a;s++)o[s]=arguments[s];return r=n=u(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),n.state={view:""},n.toggleViews=function(){"hex"===n.state.view?n.setState({view:"rgb"}):"rgb"===n.state.view?n.setState({view:"hsl"}):"hsl"===n.state.view&&(1===n.props.hsl.a?n.setState({view:"hex"}):n.setState({view:"rgb"}))},n.handleChange=function(e,t){e.hex?i.default.isValidHex(e.hex)&&n.props.onChange({hex:e.hex,source:"hex"},t):e.r||e.g||e.b?n.props.onChange({r:e.r||n.props.rgb.r,g:e.g||n.props.rgb.g,b:e.b||n.props.rgb.b,source:"rgb"},t):e.a?(e.a<0?e.a=0:e.a>1&&(e.a=1),n.props.onChange({h:n.props.hsl.h,s:n.props.hsl.s,l:n.props.hsl.l,a:Math.round(100*e.a)/100,source:"rgb"},t)):(e.h||e.s||e.l)&&n.props.onChange({h:e.h||n.props.hsl.h,s:Number(e.s&&e.s||n.props.hsl.s),l:Number(e.l&&e.l||n.props.hsl.l),source:"hsl"},t)},n.showHighlight=function(e){e.target.style.background="#eee"},n.hideHighlight=function(e){e.target.style.background="transparent"},u(n,r)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"componentDidMount",value:function(){1===this.props.hsl.a&&"hex"!==this.state.view?this.setState({view:"hex"}):"rgb"!==this.state.view&&"hsl"!==this.state.view&&this.setState({view:"rgb"})}},{key:"componentWillReceiveProps",value:function(e){1!==e.hsl.a&&"hex"===this.state.view&&this.setState({view:"rgb"})}},{key:"render",value:function(){var e=this,t=(0,o.default)({default:{wrap:{paddingTop:"16px",display:"flex"},fields:{flex:"1",display:"flex",marginLeft:"-6px"},field:{paddingLeft:"6px",width:"100%"},alpha:{paddingLeft:"6px",width:"100%"},toggle:{width:"32px",textAlign:"right",position:"relative"},icon:{marginRight:"-4px",marginTop:"12px",cursor:"pointer",position:"relative"},iconHighlight:{position:"absolute",width:"24px",height:"28px",background:"#eee",borderRadius:"4px",top:"10px",left:"12px",display:"none"},input:{fontSize:"11px",color:"#333",width:"100%",borderRadius:"2px",border:"none",boxShadow:"inset 0 0 0 1px #dadada",height:"21px",textAlign:"center"},label:{textTransform:"uppercase",fontSize:"11px",lineHeight:"11px",color:"#969696",textAlign:"center",display:"block",marginTop:"12px"},svg:{width:"24px",height:"24px",border:"1px transparent solid",borderRadius:"5px"}},disableAlpha:{alpha:{display:"none"}}},this.props,this.state),r=void 0;return"hex"===this.state.view?r=a.default.createElement("div",{style:t.fields,className:"flexbox-fix"},a.default.createElement("div",{style:t.field},a.default.createElement(s.EditableInput,{style:{input:t.input,label:t.label},label:"hex",value:this.props.hex,onChange:this.handleChange}))):"rgb"===this.state.view?r=a.default.createElement("div",{style:t.fields,className:"flexbox-fix"},a.default.createElement("div",{style:t.field},a.default.createElement(s.EditableInput,{style:{input:t.input,label:t.label},label:"r",value:this.props.rgb.r,onChange:this.handleChange})),a.default.createElement("div",{style:t.field},a.default.createElement(s.EditableInput,{style:{input:t.input,label:t.label},label:"g",value:this.props.rgb.g,onChange:this.handleChange})),a.default.createElement("div",{style:t.field},a.default.createElement(s.EditableInput,{style:{input:t.input,label:t.label},label:"b",value:this.props.rgb.b,onChange:this.handleChange})),a.default.createElement("div",{style:t.alpha},a.default.createElement(s.EditableInput,{style:{input:t.input,label:t.label},label:"a",value:this.props.rgb.a,arrowOffset:.01,onChange:this.handleChange}))):"hsl"===this.state.view&&(r=a.default.createElement("div",{style:t.fields,className:"flexbox-fix"},a.default.createElement("div",{style:t.field},a.default.createElement(s.EditableInput,{style:{input:t.input,label:t.label},label:"h",value:Math.round(this.props.hsl.h),onChange:this.handleChange})),a.default.createElement("div",{style:t.field},a.default.createElement(s.EditableInput,{style:{input:t.input,label:t.label},label:"s",value:Math.round(100*this.props.hsl.s)+"%",onChange:this.handleChange})),a.default.createElement("div",{style:t.field},a.default.createElement(s.EditableInput,{style:{input:t.input,label:t.label},label:"l",value:Math.round(100*this.props.hsl.l)+"%",onChange:this.handleChange})),a.default.createElement("div",{style:t.alpha},a.default.createElement(s.EditableInput,{style:{input:t.input,label:t.label},label:"a",value:this.props.hsl.a,arrowOffset:.01,onChange:this.handleChange})))),a.default.createElement("div",{style:t.wrap,className:"flexbox-fix"},r,a.default.createElement("div",{style:t.toggle},a.default.createElement("div",{style:t.icon,onClick:this.toggleViews,ref:function(t){return e.icon=t}},a.default.createElement("svg",{style:t.svg,viewBox:"0 0 24 24",onMouseOver:this.showHighlight,onMouseEnter:this.showHighlight,onMouseOut:this.hideHighlight},a.default.createElement("path",{ref:function(t){return e.iconUp=t},fill:"#333",d:"M12,5.83L15.17,9L16.58,7.59L12,3L7.41,7.59L8.83,9L12,5.83Z"}),a.default.createElement("path",{ref:function(t){return e.iconDown=t},fill:"#333",d:"M12,18.17L8.83,15L7.42,16.41L12,21L16.59,16.41L15.17,15Z"})))))}}]),t}(a.default.Component);t.default=d},1387:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChromePointer=void 0;var n=o(r(0)),a=o(r(80));function o(e){return e&&e.__esModule?e:{default:e}}var i=t.ChromePointer=function(){var e=(0,a.default)({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",transform:"translate(-6px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return n.default.createElement("div",{style:e.picker})};t.default=i},1388:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChromePointerCircle=void 0;var n=o(r(0)),a=o(r(80));function o(e){return e&&e.__esModule?e:{default:e}}var i=t.ChromePointerCircle=function(){var e=(0,a.default)({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}}});return n.default.createElement("div",{style:e.picker})};t.default=i},1389:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Compact=void 0;var n=d(r(0)),a=d(r(2)),o=d(r(80)),i=d(r(491)),s=d(r(284)),l=r(145),c=d(r(1390)),u=d(r(1391));function d(e){return e&&e.__esModule?e:{default:e}}var h=t.Compact=function(e){var t=e.onChange,r=e.onSwatchHover,a=e.colors,d=e.hex,h=e.rgb,p=e.className,f=void 0===p?"":p,g=(0,o.default)({default:{Compact:{background:"#f6f6f6",radius:"4px"},compact:{paddingTop:"5px",paddingLeft:"5px",boxSizing:"initial",width:"240px"},clear:{clear:"both"}}}),b=function(e,r){e.hex?s.default.isValidHex(e.hex)&&t({hex:e.hex,source:"hex"},r):t(e,r)};return n.default.createElement(l.Raised,{style:g.Compact},n.default.createElement("div",{style:g.compact,className:"compact-picker "+f},n.default.createElement("div",null,(0,i.default)(a,(function(e){return n.default.createElement(c.default,{key:e,color:e,active:e.toLowerCase()===d,onClick:b,onSwatchHover:r})})),n.default.createElement("div",{style:g.clear})),n.default.createElement(u.default,{hex:d,rgb:h,onChange:b})))};h.propTypes={colors:a.default.arrayOf(a.default.string)},h.defaultProps={colors:["#4D4D4D","#999999","#FFFFFF","#F44E3B","#FE9200","#FCDC00","#DBDF00","#A4DD00","#68CCCA","#73D8FF","#AEA1FF","#FDA1FF","#333333","#808080","#cccccc","#D33115","#E27300","#FCC400","#B0BC00","#68BC00","#16A5A5","#009CE0","#7B64FF","#FA28FF","#000000","#666666","#B3B3B3","#9F0500","#C45100","#FB9E00","#808900","#194D33","#0C797D","#0062B1","#653294","#AB149E"]},t.default=(0,l.ColorWrap)(h)},1390:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CompactColor=void 0;var n=s(r(0)),a=s(r(80)),o=s(r(284)),i=r(145);function s(e){return e&&e.__esModule?e:{default:e}}var l=t.CompactColor=function(e){var t=e.color,r=e.onClick,s=void 0===r?function(){}:r,l=e.onSwatchHover,c=e.active,u=(0,a.default)({default:{color:{background:t,width:"15px",height:"15px",float:"left",marginRight:"5px",marginBottom:"5px",position:"relative",cursor:"pointer"},dot:{absolute:"5px 5px 5px 5px",background:o.default.getContrastingColor(t),borderRadius:"50%",opacity:"0"}},active:{dot:{opacity:"1"}},"color-#FFFFFF":{color:{boxShadow:"inset 0 0 0 1px #ddd"},dot:{background:"#000"}},transparent:{dot:{background:"#000"}}},{active:c,"color-#FFFFFF":"#FFFFFF"===t,transparent:"transparent"===t});return n.default.createElement(i.Swatch,{style:u.color,color:t,onClick:s,onHover:l,focusStyle:{boxShadow:"0 0 4px "+t}},n.default.createElement("div",{style:u.dot}))};t.default=l},1391:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CompactFields=void 0;var n=i(r(0)),a=i(r(80)),o=r(145);function i(e){return e&&e.__esModule?e:{default:e}}var s=t.CompactFields=function(e){var t=e.hex,r=e.rgb,i=e.onChange,s=(0,a.default)({default:{fields:{display:"flex",paddingBottom:"6px",paddingRight:"5px",position:"relative"},active:{position:"absolute",top:"6px",left:"5px",height:"9px",width:"9px",background:t},HEXwrap:{flex:"6",position:"relative"},HEXinput:{width:"80%",padding:"0px",paddingLeft:"20%",border:"none",outline:"none",background:"none",fontSize:"12px",color:"#333",height:"16px"},HEXlabel:{display:"none"},RGBwrap:{flex:"3",position:"relative"},RGBinput:{width:"70%",padding:"0px",paddingLeft:"30%",border:"none",outline:"none",background:"none",fontSize:"12px",color:"#333",height:"16px"},RGBlabel:{position:"absolute",top:"3px",left:"0px",lineHeight:"16px",textTransform:"uppercase",fontSize:"12px",color:"#999"}}}),l=function(e,t){e.r||e.g||e.b?i({r:e.r||r.r,g:e.g||r.g,b:e.b||r.b,source:"rgb"},t):i({hex:e.hex,source:"hex"},t)};return n.default.createElement("div",{style:s.fields,className:"flexbox-fix"},n.default.createElement("div",{style:s.active}),n.default.createElement(o.EditableInput,{style:{wrap:s.HEXwrap,input:s.HEXinput,label:s.HEXlabel},label:"hex",value:t,onChange:l}),n.default.createElement(o.EditableInput,{style:{wrap:s.RGBwrap,input:s.RGBinput,label:s.RGBlabel},label:"r",value:r.r,onChange:l}),n.default.createElement(o.EditableInput,{style:{wrap:s.RGBwrap,input:s.RGBinput,label:s.RGBlabel},label:"g",value:r.g,onChange:l}),n.default.createElement(o.EditableInput,{style:{wrap:s.RGBwrap,input:s.RGBinput,label:s.RGBlabel},label:"b",value:r.b,onChange:l}))};t.default=s},1392:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Github=void 0;var n=c(r(0)),a=c(r(2)),o=c(r(80)),i=c(r(491)),s=r(145),l=c(r(1393));function c(e){return e&&e.__esModule?e:{default:e}}var u=t.Github=function(e){var t=e.width,r=e.colors,a=e.onChange,s=e.onSwatchHover,c=e.triangle,u=e.className,d=void 0===u?"":u,h=(0,o.default)({default:{card:{width:t,background:"#fff",border:"1px solid rgba(0,0,0,0.2)",boxShadow:"0 3px 12px rgba(0,0,0,0.15)",borderRadius:"4px",position:"relative",padding:"5px",display:"flex",flexWrap:"wrap"},triangle:{position:"absolute",border:"7px solid transparent",borderBottomColor:"#fff"},triangleShadow:{position:"absolute",border:"8px solid transparent",borderBottomColor:"rgba(0,0,0,0.15)"}},"hide-triangle":{triangle:{display:"none"},triangleShadow:{display:"none"}},"top-left-triangle":{triangle:{top:"-14px",left:"10px"},triangleShadow:{top:"-16px",left:"9px"}},"top-right-triangle":{triangle:{top:"-14px",right:"10px"},triangleShadow:{top:"-16px",right:"9px"}},"bottom-left-triangle":{triangle:{top:"35px",left:"10px",transform:"rotate(180deg)"},triangleShadow:{top:"37px",left:"9px",transform:"rotate(180deg)"}},"bottom-right-triangle":{triangle:{top:"35px",right:"10px",transform:"rotate(180deg)"},triangleShadow:{top:"37px",right:"9px",transform:"rotate(180deg)"}}},{"hide-triangle":"hide"===c,"top-left-triangle":"top-left"===c,"top-right-triangle":"top-right"===c,"bottom-left-triangle":"bottom-left"==c,"bottom-right-triangle":"bottom-right"===c}),p=function(e,t){return a({hex:e,source:"hex"},t)};return n.default.createElement("div",{style:h.card,className:"github-picker "+d},n.default.createElement("div",{style:h.triangleShadow}),n.default.createElement("div",{style:h.triangle}),(0,i.default)(r,(function(e){return n.default.createElement(l.default,{color:e,key:e,onClick:p,onSwatchHover:s})})))};u.propTypes={width:a.default.oneOfType([a.default.string,a.default.number]),colors:a.default.arrayOf(a.default.string),triangle:a.default.oneOf(["hide","top-left","top-right","bottom-left","bottom-right"])},u.defaultProps={width:200,colors:["#B80000","#DB3E00","#FCCB00","#008B02","#006B76","#1273DE","#004DCF","#5300EB","#EB9694","#FAD0C3","#FEF3BD","#C1E1C5","#BEDADC","#C4DEF6","#BED3F3","#D4C4FB"],triangle:"top-left"},t.default=(0,s.ColorWrap)(u)},1393:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GithubSwatch=void 0;var n=s(r(0)),a=r(80),o=s(a),i=r(145);function s(e){return e&&e.__esModule?e:{default:e}}var l=t.GithubSwatch=function(e){var t=e.hover,r=e.color,a=e.onClick,s=e.onSwatchHover,l={position:"relative",zIndex:"2",outline:"2px solid #fff",boxShadow:"0 0 5px 2px rgba(0,0,0,0.25)"},c=(0,o.default)({default:{swatch:{width:"25px",height:"25px",fontSize:"0"}},hover:{swatch:l}},{hover:t});return n.default.createElement("div",{style:c.swatch},n.default.createElement(i.Swatch,{color:r,onClick:a,onHover:s,focusStyle:l}))};t.default=(0,a.handleHover)(l)},1394:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HuePicker=void 0;var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=l(r(0)),o=l(r(80)),i=r(145),s=l(r(1395));function l(e){return e&&e.__esModule?e:{default:e}}var c=t.HuePicker=function(e){var t=e.width,r=e.height,s=e.onChange,l=e.hsl,c=e.direction,u=e.pointer,d=e.className,h=void 0===d?"":d,p=(0,o.default)({default:{picker:{position:"relative",width:t,height:r},hue:{radius:"2px"}}});return a.default.createElement("div",{style:p.picker,className:"hue-picker "+h},a.default.createElement(i.Hue,n({},p.hue,{hsl:l,pointer:u,onChange:function(e){return s({a:1,h:e.h,l:.5,s:1})},direction:c})))};c.defaultProps={width:"316px",height:"16px",direction:"horizontal",pointer:s.default},t.default=(0,i.ColorWrap)(c)},1395:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SliderPointer=void 0;var n=o(r(0)),a=o(r(80));function o(e){return e&&e.__esModule?e:{default:e}}var i=t.SliderPointer=function(e){var t=e.direction,r=(0,a.default)({default:{picker:{width:"18px",height:"18px",borderRadius:"50%",transform:"translate(-9px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}},vertical:{picker:{transform:"translate(-3px, -9px)"}}},{vertical:"vertical"===t});return n.default.createElement("div",{style:r.picker})};t.default=i},1396:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Material=void 0;var n=s(r(0)),a=s(r(80)),o=s(r(284)),i=r(145);function s(e){return e&&e.__esModule?e:{default:e}}var l=t.Material=function(e){var t=e.onChange,r=e.hex,s=e.rgb,l=e.className,c=void 0===l?"":l,u=(0,a.default)({default:{material:{width:"98px",height:"98px",padding:"16px",fontFamily:"Roboto"},HEXwrap:{position:"relative"},HEXinput:{width:"100%",marginTop:"12px",fontSize:"15px",color:"#333",padding:"0px",border:"0px",borderBottom:"2px solid "+r,outline:"none",height:"30px"},HEXlabel:{position:"absolute",top:"0px",left:"0px",fontSize:"11px",color:"#999999",textTransform:"capitalize"},Hex:{style:{}},RGBwrap:{position:"relative"},RGBinput:{width:"100%",marginTop:"12px",fontSize:"15px",color:"#333",padding:"0px",border:"0px",borderBottom:"1px solid #eee",outline:"none",height:"30px"},RGBlabel:{position:"absolute",top:"0px",left:"0px",fontSize:"11px",color:"#999999",textTransform:"capitalize"},split:{display:"flex",marginRight:"-10px",paddingTop:"11px"},third:{flex:"1",paddingRight:"10px"}}}),d=function(e,r){e.hex?o.default.isValidHex(e.hex)&&t({hex:e.hex,source:"hex"},r):(e.r||e.g||e.b)&&t({r:e.r||s.r,g:e.g||s.g,b:e.b||s.b,source:"rgb"},r)};return n.default.createElement(i.Raised,null,n.default.createElement("div",{style:u.material,className:"material-picker "+c},n.default.createElement(i.EditableInput,{style:{wrap:u.HEXwrap,input:u.HEXinput,label:u.HEXlabel},label:"hex",value:r,onChange:d}),n.default.createElement("div",{style:u.split,className:"flexbox-fix"},n.default.createElement("div",{style:u.third},n.default.createElement(i.EditableInput,{style:{wrap:u.RGBwrap,input:u.RGBinput,label:u.RGBlabel},label:"r",value:s.r,onChange:d})),n.default.createElement("div",{style:u.third},n.default.createElement(i.EditableInput,{style:{wrap:u.RGBwrap,input:u.RGBinput,label:u.RGBlabel},label:"g",value:s.g,onChange:d})),n.default.createElement("div",{style:u.third},n.default.createElement(i.EditableInput,{style:{wrap:u.RGBwrap,input:u.RGBinput,label:u.RGBlabel},label:"b",value:s.b,onChange:d})))))};t.default=(0,i.ColorWrap)(l)},1397:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Photoshop=void 0;var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=p(r(0)),o=p(r(2)),i=p(r(80)),s=r(145),l=p(r(1398)),c=p(r(1399)),u=p(r(1400)),d=p(r(1401)),h=p(r(1402));function p(e){return e&&e.__esModule?e:{default:e}}var f=t.Photoshop=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.state={currentColor:e.hex},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"render",value:function(){var e=this.props.className,t=void 0===e?"":e,r=(0,i.default)({default:{picker:{background:"#DCDCDC",borderRadius:"4px",boxShadow:"0 0 0 1px rgba(0,0,0,.25), 0 8px 16px rgba(0,0,0,.15)",boxSizing:"initial",width:"513px"},head:{backgroundImage:"linear-gradient(-180deg, #F0F0F0 0%, #D4D4D4 100%)",borderBottom:"1px solid #B1B1B1",boxShadow:"inset 0 1px 0 0 rgba(255,255,255,.2), inset 0 -1px 0 0 rgba(0,0,0,.02)",height:"23px",lineHeight:"24px",borderRadius:"4px 4px 0 0",fontSize:"13px",color:"#4D4D4D",textAlign:"center"},body:{padding:"15px 15px 0",display:"flex"},saturation:{width:"256px",height:"256px",position:"relative",border:"2px solid #B3B3B3",borderBottom:"2px solid #F0F0F0",overflow:"hidden"},hue:{position:"relative",height:"256px",width:"19px",marginLeft:"10px",border:"2px solid #B3B3B3",borderBottom:"2px solid #F0F0F0"},controls:{width:"180px",marginLeft:"10px"},top:{display:"flex"},previews:{width:"60px"},actions:{flex:"1",marginLeft:"20px"}}});return a.default.createElement("div",{style:r.picker,className:"photoshop-picker "+t},a.default.createElement("div",{style:r.head},this.props.header),a.default.createElement("div",{style:r.body,className:"flexbox-fix"},a.default.createElement("div",{style:r.saturation},a.default.createElement(s.Saturation,{hsl:this.props.hsl,hsv:this.props.hsv,pointer:c.default,onChange:this.props.onChange})),a.default.createElement("div",{style:r.hue},a.default.createElement(s.Hue,{direction:"vertical",hsl:this.props.hsl,pointer:u.default,onChange:this.props.onChange})),a.default.createElement("div",{style:r.controls},a.default.createElement("div",{style:r.top,className:"flexbox-fix"},a.default.createElement("div",{style:r.previews},a.default.createElement(h.default,{rgb:this.props.rgb,currentColor:this.state.currentColor})),a.default.createElement("div",{style:r.actions},a.default.createElement(d.default,{label:"OK",onClick:this.props.onAccept,active:!0}),a.default.createElement(d.default,{label:"Cancel",onClick:this.props.onCancel}),a.default.createElement(l.default,{onChange:this.props.onChange,rgb:this.props.rgb,hsv:this.props.hsv,hex:this.props.hex}))))))}}]),t}(a.default.Component);f.propTypes={header:o.default.string},f.defaultProps={header:"Color Picker"},t.default=(0,s.ColorWrap)(f)},1398:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PhotoshopPicker=void 0;var n=s(r(0)),a=s(r(80)),o=s(r(284)),i=r(145);function s(e){return e&&e.__esModule?e:{default:e}}var l=t.PhotoshopPicker=function(e){var t=e.onChange,r=e.rgb,s=e.hsv,l=e.hex,c=(0,a.default)({default:{fields:{paddingTop:"5px",paddingBottom:"9px",width:"80px",position:"relative"},divider:{height:"5px"},RGBwrap:{position:"relative"},RGBinput:{marginLeft:"40%",width:"40%",height:"18px",border:"1px solid #888888",boxShadow:"inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC",marginBottom:"5px",fontSize:"13px",paddingLeft:"3px",marginRight:"10px"},RGBlabel:{left:"0px",width:"34px",textTransform:"uppercase",fontSize:"13px",height:"18px",lineHeight:"22px",position:"absolute"},HEXwrap:{position:"relative"},HEXinput:{marginLeft:"20%",width:"80%",height:"18px",border:"1px solid #888888",boxShadow:"inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC",marginBottom:"6px",fontSize:"13px",paddingLeft:"3px"},HEXlabel:{position:"absolute",top:"0px",left:"0px",width:"14px",textTransform:"uppercase",fontSize:"13px",height:"18px",lineHeight:"22px"},fieldSymbols:{position:"absolute",top:"5px",right:"-7px",fontSize:"13px"},symbol:{height:"20px",lineHeight:"22px",paddingBottom:"7px"}}}),u=function(e,n){e["#"]?o.default.isValidHex(e["#"])&&t({hex:e["#"],source:"hex"},n):e.r||e.g||e.b?t({r:e.r||r.r,g:e.g||r.g,b:e.b||r.b,source:"rgb"},n):(e.h||e.s||e.v)&&t({h:e.h||s.h,s:e.s||s.s,v:e.v||s.v,source:"hsv"},n)};return n.default.createElement("div",{style:c.fields},n.default.createElement(i.EditableInput,{style:{wrap:c.RGBwrap,input:c.RGBinput,label:c.RGBlabel},label:"h",value:Math.round(s.h),onChange:u}),n.default.createElement(i.EditableInput,{style:{wrap:c.RGBwrap,input:c.RGBinput,label:c.RGBlabel},label:"s",value:Math.round(100*s.s),onChange:u}),n.default.createElement(i.EditableInput,{style:{wrap:c.RGBwrap,input:c.RGBinput,label:c.RGBlabel},label:"v",value:Math.round(100*s.v),onChange:u}),n.default.createElement("div",{style:c.divider}),n.default.createElement(i.EditableInput,{style:{wrap:c.RGBwrap,input:c.RGBinput,label:c.RGBlabel},label:"r",value:r.r,onChange:u}),n.default.createElement(i.EditableInput,{style:{wrap:c.RGBwrap,input:c.RGBinput,label:c.RGBlabel},label:"g",value:r.g,onChange:u}),n.default.createElement(i.EditableInput,{style:{wrap:c.RGBwrap,input:c.RGBinput,label:c.RGBlabel},label:"b",value:r.b,onChange:u}),n.default.createElement("div",{style:c.divider}),n.default.createElement(i.EditableInput,{style:{wrap:c.HEXwrap,input:c.HEXinput,label:c.HEXlabel},label:"#",value:l.replace("#",""),onChange:u}),n.default.createElement("div",{style:c.fieldSymbols},n.default.createElement("div",{style:c.symbol},"°"),n.default.createElement("div",{style:c.symbol},"%"),n.default.createElement("div",{style:c.symbol},"%")))};t.default=l},1399:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PhotoshopPointerCircle=void 0;var n=o(r(0)),a=o(r(80));function o(e){return e&&e.__esModule?e:{default:e}}var i=t.PhotoshopPointerCircle=function(e){var t=e.hsl,r=(0,a.default)({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}},"black-outline":{picker:{boxShadow:"inset 0 0 0 1px #000"}}},{"black-outline":t.l>.5});return n.default.createElement("div",{style:r.picker})};t.default=i},140:function(e,t,r){"use strict";r.d(t,"f",(function(){return y})),r.d(t,"e",(function(){return O})),r.d(t,"d",(function(){return x})),r.d(t,"c",(function(){return w})),r.d(t,"i",(function(){return C})),r.d(t,"g",(function(){return _})),r.d(t,"h",(function(){return j})),r.d(t,"j",(function(){return S})),r.d(t,"l",(function(){return E})),r.d(t,"k",(function(){return T})),r.d(t,"a",(function(){return M})),r.d(t,"b",(function(){return R}));r(39);var n=r(48),a=r.n(n),o=r(63),i=r.n(o),s=r(69),l=r.n(s),c=r(11),u=r.n(c),d=r(68),h=r(15),p=r(135),f=r(51),g=r(97),b=r.n(g),m=r(71);const v=e=>(t,r,n,a)=>async(o="",i,s)=>{const c=`/api/v1/${t}/${e}/${r}`,h=a&&0===i?[{label:"me",value:a}]:[];try{var p;const e=b.a.encode({...i?{page:i}:{},...s?{page_size:s}:{},...o?{filter:o}:{}}),{json:t={}}=await d.a.get({endpoint:`${c}?q=${e}`}),r=null==t?void 0:null==(p=t.result)?void 0:u()(p).call(p,({text:e,value:t})=>({label:e,value:t}));return l()(h).call(h,r)}catch(e){n(e)}return[]},y=(e,t,r)=>{const n=e=>{const t={order_column:"changed_on_delta_humanized",order_direction:"desc",page:0,page_size:3,filters:e};return e||delete t.filters,b.a.encode(t)},o={edited:[{col:"changed_by",opr:"rel_o_m",value:`${e}`}],created:[{col:"created_by",opr:"rel_o_m",value:`${e}`}]},s=[d.a.get({endpoint:t}),d.a.get({endpoint:`/api/v1/dashboard/?q=${n(o.edited)}`}),d.a.get({endpoint:`/api/v1/chart/?q=${n(o.edited)}`}),d.a.get({endpoint:`/api/v1/dashboard/?q=${n(o.created)}`}),d.a.get({endpoint:`/api/v1/chart/?q=${n(o.created)}`}),d.a.get({endpoint:`/api/v1/saved_query/?q=${n(o.created)}`})];return i.a.all(s).then(([e,t,o,s,l,c])=>{var u,p,f,g,b,m,v,y,O,x;const w={editedDash:null==(u=t.json)?void 0:a()(p=u.result).call(p,0,3),editedChart:null==(f=o.json)?void 0:a()(g=f.result).call(g,0,3),createdByDash:null==(b=s.json)?void 0:a()(m=b.result).call(m,0,3),createdByChart:null==(v=l.json)?void 0:a()(y=v.result).call(y,0,3),createdByQuery:null==(O=c.json)?void 0:a()(x=O.result).call(x,0,3)};if(0===e.json.length){const e=[d.a.get({endpoint:`/api/v1/chart/?q=${n()}`}),d.a.get({endpoint:`/api/v1/dashboard/?q=${n()}`})];return i.a.all(e).then(([e,t])=>(w.examples=[...e.json.result,...t.json.result],w)).catch(e=>r(Object(h.e)("There was an error fetching your recent activity:"),e))}return w.viewed=e.json,w})},O=v("related"),x=v("distinct");function w(e){return async t=>{const r=await Object(m.a)(t);p.a.error(t),e(r.message||r.error)}}function C({id:e,slice_name:t},r,n,a,o,i){const s={pageIndex:0,pageSize:3,sortBy:[{id:"changed_on_delta_humanized",desc:!0}],filters:[{id:"created_by",operator:"rel_o_m",value:`${i}`}]};d.a.delete({endpoint:`/api/v1/chart/${e}`}).then(()=>{"Mine"===o?a(s):a(),r(Object(h.e)("Deleted: %s",t))},()=>{n(Object(h.e)("There was an issue deleting: %s",t))})}function _(e){return window.location.assign(`/api/v1/chart/export/?q=${b.a.encode(u()(e).call(e,({id:e})=>e))}`)}function j(e){return window.location.assign(`/api/v1/dashboard/export/?q=${b.a.encode(u()(e).call(e,({id:e})=>e))}`)}function S({id:e,dashboard_title:t},r,n,a,o,i){return d.a.delete({endpoint:`/api/v1/dashboard/${e}`}).then(()=>{"Mine"===o?r({pageIndex:0,pageSize:3,sortBy:[{id:"changed_on_delta_humanized",desc:!0}],filters:[{id:"owners",operator:"rel_m_m",value:`${i}`}]}):r(),n(Object(h.e)("Deleted: %s",t))},w(e=>a(Object(h.e)("There was an issue deleting %s: %s",t,e))))}function E(e,t){let r=e.split("\n");return r.length>=t&&(r=a()(r).call(r,0,t),r.push("...")),r.join("\n")}const k=[576,768,992,1200],T=u()(k).call(k,e=>`@media (max-width: ${e}px)`),M=f.c.div`
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(31%, 31%));
  ${[T[3]]} {
    grid-template-columns: repeat(auto-fit, minmax(31%, 31%));
  }

  ${[T[2]]} {
    grid-template-columns: repeat(auto-fit, minmax(48%, 48%));
  }

  ${[T[1]]} {
    grid-template-columns: repeat(auto-fit, minmax(50%, 80%));
  }
  grid-gap: ${({theme:e})=>8*e.gridUnit}px;
  justify-content: left;
  padding: ${({theme:e})=>6*e.gridUnit}px;
  padding-top: ${({theme:e})=>2*e.gridUnit}px;
`,R=f.c.div`
  cursor: pointer;
  a {
    text-decoration: none;
  }
`},1400:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PhotoshopPointerCircle=void 0;var n=o(r(0)),a=o(r(80));function o(e){return e&&e.__esModule?e:{default:e}}var i=t.PhotoshopPointerCircle=function(){var e=(0,a.default)({default:{triangle:{width:0,height:0,borderStyle:"solid",borderWidth:"4px 0 4px 6px",borderColor:"transparent transparent transparent #fff",position:"absolute",top:"1px",left:"1px"},triangleBorder:{width:0,height:0,borderStyle:"solid",borderWidth:"5px 0 5px 8px",borderColor:"transparent transparent transparent #555"},left:{Extend:"triangleBorder",transform:"translate(-13px, -4px)"},leftInside:{Extend:"triangle",transform:"translate(-8px, -5px)"},right:{Extend:"triangleBorder",transform:"translate(20px, -14px) rotate(180deg)"},rightInside:{Extend:"triangle",transform:"translate(-8px, -5px)"}}});return n.default.createElement("div",{style:e.pointer},n.default.createElement("div",{style:e.left},n.default.createElement("div",{style:e.leftInside})),n.default.createElement("div",{style:e.right},n.default.createElement("div",{style:e.rightInside})))};t.default=i},1401:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PhotoshopBotton=void 0;var n=o(r(0)),a=o(r(80));function o(e){return e&&e.__esModule?e:{default:e}}var i=t.PhotoshopBotton=function(e){var t=e.onClick,r=e.label,o=e.children,i=e.active,s=(0,a.default)({default:{button:{backgroundImage:"linear-gradient(-180deg, #FFFFFF 0%, #E6E6E6 100%)",border:"1px solid #878787",borderRadius:"2px",height:"20px",boxShadow:"0 1px 0 0 #EAEAEA",fontSize:"14px",color:"#000",lineHeight:"20px",textAlign:"center",marginBottom:"10px",cursor:"pointer"}},active:{button:{boxShadow:"0 0 0 1px #878787"}}},{active:i});return n.default.createElement("div",{style:s.button,onClick:t},r||o)};t.default=i},1402:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PhotoshopPreviews=void 0;var n=o(r(0)),a=o(r(80));function o(e){return e&&e.__esModule?e:{default:e}}var i=t.PhotoshopPreviews=function(e){var t=e.rgb,r=e.currentColor,o=(0,a.default)({default:{swatches:{border:"1px solid #B3B3B3",borderBottom:"1px solid #F0F0F0",marginBottom:"2px",marginTop:"1px"},new:{height:"34px",background:"rgb("+t.r+","+t.g+", "+t.b+")",boxShadow:"inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 1px 0 #000"},current:{height:"34px",background:r,boxShadow:"inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 -1px 0 #000"},label:{fontSize:"14px",color:"#000",textAlign:"center"}}});return n.default.createElement("div",null,n.default.createElement("div",{style:o.label},"new"),n.default.createElement("div",{style:o.swatches},n.default.createElement("div",{style:o.new}),n.default.createElement("div",{style:o.current})),n.default.createElement("div",{style:o.label},"current"))};t.default=i},1403:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Sketch=void 0;var n=c(r(0)),a=c(r(2)),o=c(r(80)),i=r(145),s=c(r(1404)),l=c(r(1405));function c(e){return e&&e.__esModule?e:{default:e}}var u=t.Sketch=function(e){var t=e.width,r=e.rgb,a=e.hex,c=e.hsv,u=e.hsl,d=e.onChange,h=e.onSwatchHover,p=e.disableAlpha,f=e.presetColors,g=e.renderers,b=e.className,m=void 0===b?"":b,v=(0,o.default)({default:{picker:{width:t,padding:"10px 10px 0",boxSizing:"initial",background:"#fff",borderRadius:"4px",boxShadow:"0 0 0 1px rgba(0,0,0,.15), 0 8px 16px rgba(0,0,0,.15)"},saturation:{width:"100%",paddingBottom:"75%",position:"relative",overflow:"hidden"},Saturation:{radius:"3px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},controls:{display:"flex"},sliders:{padding:"4px 0",flex:"1"},color:{width:"24px",height:"24px",position:"relative",marginTop:"4px",marginLeft:"4px",borderRadius:"3px"},activeColor:{absolute:"0px 0px 0px 0px",borderRadius:"2px",background:"rgba("+r.r+","+r.g+","+r.b+","+r.a+")",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},hue:{position:"relative",height:"10px",overflow:"hidden"},Hue:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},alpha:{position:"relative",height:"10px",marginTop:"4px",overflow:"hidden"},Alpha:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"}},disableAlpha:{color:{height:"10px"},hue:{height:"10px"},alpha:{display:"none"}}},{disableAlpha:p});return n.default.createElement("div",{style:v.picker,className:"sketch-picker "+m},n.default.createElement("div",{style:v.saturation},n.default.createElement(i.Saturation,{style:v.Saturation,hsl:u,hsv:c,onChange:d})),n.default.createElement("div",{style:v.controls,className:"flexbox-fix"},n.default.createElement("div",{style:v.sliders},n.default.createElement("div",{style:v.hue},n.default.createElement(i.Hue,{style:v.Hue,hsl:u,onChange:d})),n.default.createElement("div",{style:v.alpha},n.default.createElement(i.Alpha,{style:v.Alpha,rgb:r,hsl:u,renderers:g,onChange:d}))),n.default.createElement("div",{style:v.color},n.default.createElement(i.Checkboard,null),n.default.createElement("div",{style:v.activeColor}))),n.default.createElement(s.default,{rgb:r,hsl:u,hex:a,onChange:d,disableAlpha:p}),n.default.createElement(l.default,{colors:f,onClick:d,onSwatchHover:h}))};u.propTypes={disableAlpha:a.default.bool,width:a.default.oneOfType([a.default.string,a.default.number])},u.defaultProps={disableAlpha:!1,width:200,presetColors:["#D0021B","#F5A623","#F8E71C","#8B572A","#7ED321","#417505","#BD10E0","#9013FE","#4A90E2","#50E3C2","#B8E986","#000000","#4A4A4A","#9B9B9B","#FFFFFF"]},t.default=(0,i.ColorWrap)(u)},1404:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SketchFields=void 0;var n=s(r(0)),a=s(r(80)),o=s(r(284)),i=r(145);function s(e){return e&&e.__esModule?e:{default:e}}var l=t.SketchFields=function(e){var t=e.onChange,r=e.rgb,s=e.hsl,l=e.hex,c=e.disableAlpha,u=(0,a.default)({default:{fields:{display:"flex",paddingTop:"4px"},single:{flex:"1",paddingLeft:"6px"},alpha:{flex:"1",paddingLeft:"6px"},double:{flex:"2"},input:{width:"80%",padding:"4px 10% 3px",border:"none",boxShadow:"inset 0 0 0 1px #ccc",fontSize:"11px"},label:{display:"block",textAlign:"center",fontSize:"11px",color:"#222",paddingTop:"3px",paddingBottom:"4px",textTransform:"capitalize"}},disableAlpha:{alpha:{display:"none"}}},{disableAlpha:c}),d=function(e,n){e.hex?o.default.isValidHex(e.hex)&&t({hex:e.hex,source:"hex"},n):e.r||e.g||e.b?t({r:e.r||r.r,g:e.g||r.g,b:e.b||r.b,a:r.a,source:"rgb"},n):e.a&&(e.a<0?e.a=0:e.a>100&&(e.a=100),e.a/=100,t({h:s.h,s:s.s,l:s.l,a:e.a,source:"rgb"},n))};return n.default.createElement("div",{style:u.fields,className:"flexbox-fix"},n.default.createElement("div",{style:u.double},n.default.createElement(i.EditableInput,{style:{input:u.input,label:u.label},label:"hex",value:l.replace("#",""),onChange:d})),n.default.createElement("div",{style:u.single},n.default.createElement(i.EditableInput,{style:{input:u.input,label:u.label},label:"r",value:r.r,onChange:d,dragLabel:"true",dragMax:"255"})),n.default.createElement("div",{style:u.single},n.default.createElement(i.EditableInput,{style:{input:u.input,label:u.label},label:"g",value:r.g,onChange:d,dragLabel:"true",dragMax:"255"})),n.default.createElement("div",{style:u.single},n.default.createElement(i.EditableInput,{style:{input:u.input,label:u.label},label:"b",value:r.b,onChange:d,dragLabel:"true",dragMax:"255"})),n.default.createElement("div",{style:u.alpha},n.default.createElement(i.EditableInput,{style:{input:u.input,label:u.label},label:"a",value:Math.round(100*r.a),onChange:d,dragLabel:"true",dragMax:"100"})))};t.default=l},1405:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SketchPresetColors=void 0;var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=l(r(0)),o=l(r(2)),i=l(r(80)),s=r(145);function l(e){return e&&e.__esModule?e:{default:e}}var c=t.SketchPresetColors=function(e){var t=e.colors,r=e.onClick,o=void 0===r?function(){}:r,l=e.onSwatchHover,c=(0,i.default)({default:{colors:{margin:"0 -10px",padding:"10px 0 0 10px",borderTop:"1px solid #eee",display:"flex",flexWrap:"wrap",position:"relative"},swatchWrap:{width:"16px",height:"16px",margin:"0 10px 10px 0"},swatch:{borderRadius:"3px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15)"}},"no-presets":{colors:{display:"none"}}},{"no-presets":!t||!t.length}),u=function(e,t){o({hex:e,source:"hex"},t)};return a.default.createElement("div",{style:c.colors,className:"flexbox-fix"},t.map((function(e){var t="string"==typeof e?{color:e}:e,r=""+t.color+(t.title||"");return a.default.createElement("div",{key:r,style:c.swatchWrap},a.default.createElement(s.Swatch,n({},t,{style:c.swatch,onClick:u,onHover:l,focusStyle:{boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15), 0 0 4px "+t.color}})))})))};c.propTypes={colors:o.default.arrayOf(o.default.oneOfType([o.default.string,o.default.shape({color:o.default.string,title:o.default.string})])).isRequired},t.default=c},1406:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Slider=void 0;var n=l(r(0)),a=l(r(80)),o=r(145),i=l(r(1407)),s=l(r(1409));function l(e){return e&&e.__esModule?e:{default:e}}var c=t.Slider=function(e){var t=e.hsl,r=e.onChange,s=e.pointer,l=e.className,c=void 0===l?"":l,u=(0,a.default)({default:{hue:{height:"12px",position:"relative"},Hue:{radius:"2px"}}});return n.default.createElement("div",{className:"slider-picker "+c},n.default.createElement("div",{style:u.hue},n.default.createElement(o.Hue,{style:u.Hue,hsl:t,pointer:s,onChange:r})),n.default.createElement("div",{style:u.swatches},n.default.createElement(i.default,{hsl:t,onClick:r})))};c.defaultProps={pointer:s.default},t.default=(0,o.ColorWrap)(c)},1407:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SliderSwatches=void 0;var n=i(r(0)),a=i(r(80)),o=i(r(1408));function i(e){return e&&e.__esModule?e:{default:e}}var s=t.SliderSwatches=function(e){var t=e.onClick,r=e.hsl,i=(0,a.default)({default:{swatches:{marginTop:"20px"},swatch:{boxSizing:"border-box",width:"20%",paddingRight:"1px",float:"left"},clear:{clear:"both"}}});return n.default.createElement("div",{style:i.swatches},n.default.createElement("div",{style:i.swatch},n.default.createElement(o.default,{hsl:r,offset:".80",active:Math.round(100*r.l)/100==.8&&Math.round(100*r.s)/100==.5,onClick:t,first:!0})),n.default.createElement("div",{style:i.swatch},n.default.createElement(o.default,{hsl:r,offset:".65",active:Math.round(100*r.l)/100==.65&&Math.round(100*r.s)/100==.5,onClick:t})),n.default.createElement("div",{style:i.swatch},n.default.createElement(o.default,{hsl:r,offset:".50",active:Math.round(100*r.l)/100==.5&&Math.round(100*r.s)/100==.5,onClick:t})),n.default.createElement("div",{style:i.swatch},n.default.createElement(o.default,{hsl:r,offset:".35",active:Math.round(100*r.l)/100==.35&&Math.round(100*r.s)/100==.5,onClick:t})),n.default.createElement("div",{style:i.swatch},n.default.createElement(o.default,{hsl:r,offset:".20",active:Math.round(100*r.l)/100==.2&&Math.round(100*r.s)/100==.5,onClick:t,last:!0})),n.default.createElement("div",{style:i.clear}))};t.default=s},1408:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SliderSwatch=void 0;var n=o(r(0)),a=o(r(80));function o(e){return e&&e.__esModule?e:{default:e}}var i=t.SliderSwatch=function(e){var t=e.hsl,r=e.offset,o=e.onClick,i=void 0===o?function(){}:o,s=e.active,l=e.first,c=e.last,u=(0,a.default)({default:{swatch:{height:"12px",background:"hsl("+t.h+", 50%, "+100*r+"%)",cursor:"pointer"}},first:{swatch:{borderRadius:"2px 0 0 2px"}},last:{swatch:{borderRadius:"0 2px 2px 0"}},active:{swatch:{transform:"scaleY(1.8)",borderRadius:"3.6px/2px"}}},{active:s,first:l,last:c});return n.default.createElement("div",{style:u.swatch,onClick:function(e){return i({h:t.h,s:.5,l:r,source:"hsl"},e)}})};t.default=i},1409:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SliderPointer=void 0;var n=o(r(0)),a=o(r(80));function o(e){return e&&e.__esModule?e:{default:e}}var i=t.SliderPointer=function(){var e=(0,a.default)({default:{picker:{width:"14px",height:"14px",borderRadius:"6px",transform:"translate(-7px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return n.default.createElement("div",{style:e.picker})};t.default=i},1410:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Swatches=void 0;var n=d(r(0)),a=d(r(2)),o=d(r(80)),i=d(r(491)),s=d(r(284)),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(1149)),c=r(145),u=d(r(1411));function d(e){return e&&e.__esModule?e:{default:e}}var h=t.Swatches=function(e){var t=e.width,r=e.height,a=e.onChange,l=e.onSwatchHover,d=e.colors,h=e.hex,p=e.className,f=void 0===p?"":p,g=(0,o.default)({default:{picker:{width:t,height:r},overflow:{height:r,overflowY:"scroll"},body:{padding:"16px 0 6px 16px"},clear:{clear:"both"}}}),b=function(e,t){s.default.isValidHex(e)&&a({hex:e,source:"hex"},t)};return n.default.createElement("div",{style:g.picker,className:"swatches-picker "+f},n.default.createElement(c.Raised,null,n.default.createElement("div",{style:g.overflow},n.default.createElement("div",{style:g.body},(0,i.default)(d,(function(e){return n.default.createElement(u.default,{key:e.toString(),group:e,active:h,onClick:b,onSwatchHover:l})})),n.default.createElement("div",{style:g.clear})))))};h.propTypes={width:a.default.oneOfType([a.default.string,a.default.number]),height:a.default.oneOfType([a.default.string,a.default.number]),colors:a.default.arrayOf(a.default.arrayOf(a.default.string))},h.defaultProps={width:320,height:240,colors:[[l.red[900],l.red[700],l.red[500],l.red[300],l.red[100]],[l.pink[900],l.pink[700],l.pink[500],l.pink[300],l.pink[100]],[l.purple[900],l.purple[700],l.purple[500],l.purple[300],l.purple[100]],[l.deepPurple[900],l.deepPurple[700],l.deepPurple[500],l.deepPurple[300],l.deepPurple[100]],[l.indigo[900],l.indigo[700],l.indigo[500],l.indigo[300],l.indigo[100]],[l.blue[900],l.blue[700],l.blue[500],l.blue[300],l.blue[100]],[l.lightBlue[900],l.lightBlue[700],l.lightBlue[500],l.lightBlue[300],l.lightBlue[100]],[l.cyan[900],l.cyan[700],l.cyan[500],l.cyan[300],l.cyan[100]],[l.teal[900],l.teal[700],l.teal[500],l.teal[300],l.teal[100]],["#194D33",l.green[700],l.green[500],l.green[300],l.green[100]],[l.lightGreen[900],l.lightGreen[700],l.lightGreen[500],l.lightGreen[300],l.lightGreen[100]],[l.lime[900],l.lime[700],l.lime[500],l.lime[300],l.lime[100]],[l.yellow[900],l.yellow[700],l.yellow[500],l.yellow[300],l.yellow[100]],[l.amber[900],l.amber[700],l.amber[500],l.amber[300],l.amber[100]],[l.orange[900],l.orange[700],l.orange[500],l.orange[300],l.orange[100]],[l.deepOrange[900],l.deepOrange[700],l.deepOrange[500],l.deepOrange[300],l.deepOrange[100]],[l.brown[900],l.brown[700],l.brown[500],l.brown[300],l.brown[100]],[l.blueGrey[900],l.blueGrey[700],l.blueGrey[500],l.blueGrey[300],l.blueGrey[100]],["#000000","#525252","#969696","#D9D9D9","#FFFFFF"]]},t.default=(0,c.ColorWrap)(h)},1411:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SwatchesGroup=void 0;var n=s(r(0)),a=s(r(80)),o=s(r(491)),i=s(r(1412));function s(e){return e&&e.__esModule?e:{default:e}}var l=t.SwatchesGroup=function(e){var t=e.onClick,r=e.onSwatchHover,s=e.group,l=e.active,c=(0,a.default)({default:{group:{paddingBottom:"10px",width:"40px",float:"left",marginRight:"10px"}}});return n.default.createElement("div",{style:c.group},(0,o.default)(s,(function(e,a){return n.default.createElement(i.default,{key:e,color:e,active:e.toLowerCase()===l,first:0===a,last:a===s.length-1,onClick:t,onSwatchHover:r})})))};t.default=l},1412:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SwatchesColor=void 0;var n=s(r(0)),a=s(r(80)),o=s(r(284)),i=r(145);function s(e){return e&&e.__esModule?e:{default:e}}var l=t.SwatchesColor=function(e){var t=e.color,r=e.onClick,s=void 0===r?function(){}:r,l=e.onSwatchHover,c=e.first,u=e.last,d=e.active,h=(0,a.default)({default:{color:{width:"40px",height:"24px",cursor:"pointer",background:t,marginBottom:"1px"},check:{fill:o.default.getContrastingColor(t),marginLeft:"8px",display:"none"}},first:{color:{overflow:"hidden",borderRadius:"2px 2px 0 0"}},last:{color:{overflow:"hidden",borderRadius:"0 0 2px 2px"}},active:{check:{display:"block"}},"color-#FFFFFF":{color:{boxShadow:"inset 0 0 0 1px #ddd"},check:{fill:"#333"}},transparent:{check:{fill:"#333"}}},{first:c,last:u,active:d,"color-#FFFFFF":"#FFFFFF"===t,transparent:"transparent"===t});return n.default.createElement(i.Swatch,{color:t,style:h.color,onClick:s,onHover:l,focusStyle:{boxShadow:"0 0 4px "+t}},n.default.createElement("div",{style:h.check},n.default.createElement("svg",{style:{width:"24px",height:"24px"},viewBox:"0 0 24 24"},n.default.createElement("path",{d:"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"}))))};t.default=l},1413:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Twitter=void 0;var n=c(r(0)),a=c(r(2)),o=c(r(80)),i=c(r(491)),s=c(r(284)),l=r(145);function c(e){return e&&e.__esModule?e:{default:e}}var u=t.Twitter=function(e){var t=e.onChange,r=e.onSwatchHover,a=e.hex,c=e.colors,u=e.width,d=e.triangle,h=e.className,p=void 0===h?"":h,f=(0,o.default)({default:{card:{width:u,background:"#fff",border:"0 solid rgba(0,0,0,0.25)",boxShadow:"0 1px 4px rgba(0,0,0,0.25)",borderRadius:"4px",position:"relative"},body:{padding:"15px 9px 9px 15px"},label:{fontSize:"18px",color:"#fff"},triangle:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 9px 10px 9px",borderColor:"transparent transparent #fff transparent",position:"absolute"},triangleShadow:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 9px 10px 9px",borderColor:"transparent transparent rgba(0,0,0,.1) transparent",position:"absolute"},hash:{background:"#F0F0F0",height:"30px",width:"30px",borderRadius:"4px 0 0 4px",float:"left",color:"#98A1A4",display:"flex",alignItems:"center",justifyContent:"center"},input:{width:"100px",fontSize:"14px",color:"#666",border:"0px",outline:"none",height:"28px",boxShadow:"inset 0 0 0 1px #F0F0F0",boxSizing:"content-box",borderRadius:"0 4px 4px 0",float:"left",paddingLeft:"8px"},swatch:{width:"30px",height:"30px",float:"left",borderRadius:"4px",margin:"0 6px 6px 0"},clear:{clear:"both"}},"hide-triangle":{triangle:{display:"none"},triangleShadow:{display:"none"}},"top-left-triangle":{triangle:{top:"-10px",left:"12px"},triangleShadow:{top:"-11px",left:"12px"}},"top-right-triangle":{triangle:{top:"-10px",right:"12px"},triangleShadow:{top:"-11px",right:"12px"}}},{"hide-triangle":"hide"===d,"top-left-triangle":"top-left"===d,"top-right-triangle":"top-right"===d}),g=function(e,r){s.default.isValidHex(e)&&t({hex:e,source:"hex"},r)};return n.default.createElement("div",{style:f.card,className:"twitter-picker "+p},n.default.createElement("div",{style:f.triangleShadow}),n.default.createElement("div",{style:f.triangle}),n.default.createElement("div",{style:f.body},(0,i.default)(c,(function(e,t){return n.default.createElement(l.Swatch,{key:t,color:e,hex:e,style:f.swatch,onClick:g,onHover:r,focusStyle:{boxShadow:"0 0 4px "+e}})})),n.default.createElement("div",{style:f.hash},"#"),n.default.createElement(l.EditableInput,{style:{input:f.input},value:a.replace("#",""),onChange:g}),n.default.createElement("div",{style:f.clear})))};u.propTypes={width:a.default.oneOfType([a.default.string,a.default.number]),triangle:a.default.oneOf(["hide","top-left","top-right"]),colors:a.default.arrayOf(a.default.string)},u.defaultProps={width:276,colors:["#FF6900","#FCB900","#7BDCB5","#00D084","#8ED1FC","#0693E3","#ABB8C3","#EB144C","#F78DA7","#9900EF"],triangle:"top-left"},t.default=(0,l.ColorWrap)(u)},1414:function(e,t,r){},1415:function(e,t,r){},142:function(e,t,r){"use strict";r.d(t,"a",(function(){return l}));r(0);var n=r(51),a=r(5),o=r.n(a),i=r(1);const s=n.c.img`
  z-index: 99;
  width: 50px;
  position: relative;
  margin: 10px;
  &.inline {
    margin: 0px;
    width: 30px;
  }
  &.floating {
    padding: 0;
    margin: 0;
    position: absolute;
    left: 50%;
    top: 50%;
    transform: translate(-50%, -50%);
  }
`;function l({position:e="floating",image:t="/static/assets/images/loading.gif",className:r}){return Object(i.f)(s,{className:o()("loading",e,r),alt:"Loading...",src:t,role:"status","aria-live":"polite","aria-label":"Loading"})}},145:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1369);Object.defineProperty(t,"Alpha",{enumerable:!0,get:function(){return d(n).default}});var a=r(1147);Object.defineProperty(t,"Checkboard",{enumerable:!0,get:function(){return d(a).default}});var o=r(1372);Object.defineProperty(t,"EditableInput",{enumerable:!0,get:function(){return d(o).default}});var i=r(1373);Object.defineProperty(t,"Hue",{enumerable:!0,get:function(){return d(i).default}});var s=r(1375);Object.defineProperty(t,"Raised",{enumerable:!0,get:function(){return d(s).default}});var l=r(1376);Object.defineProperty(t,"Saturation",{enumerable:!0,get:function(){return d(l).default}});var c=r(1148);Object.defineProperty(t,"ColorWrap",{enumerable:!0,get:function(){return d(c).default}});var u=r(1378);function d(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"Swatch",{enumerable:!0,get:function(){return d(u).default}})},156:function(e,t,r){"use strict";r.d(t,"n",(function(){return n})),r.d(t,"o",(function(){return a})),r.d(t,"q",(function(){return o})),r.d(t,"i",(function(){return i})),r.d(t,"j",(function(){return s})),r.d(t,"m",(function(){return l})),r.d(t,"c",(function(){return c})),r.d(t,"a",(function(){return u})),r.d(t,"d",(function(){return d})),r.d(t,"e",(function(){return h})),r.d(t,"g",(function(){return p})),r.d(t,"f",(function(){return f})),r.d(t,"l",(function(){return g})),r.d(t,"k",(function(){return b})),r.d(t,"h",(function(){return m})),r.d(t,"p",(function(){return v})),r.d(t,"b",(function(){return y}));const n={offline:"danger",failed:"danger",pending:"info",fetching:"info",running:"warning",stopped:"danger",success:"success"},a={success:"success",failed:"failed",running:"running",offline:"offline",pending:"pending"},o=["now","1 hour ago","1 day ago","7 days ago","28 days ago","90 days ago","1 year ago"],i=5,s=3,l=51,c=1024,u=2,d=864e5,h=5120,p=.9,f=8e3,g=100,b=90,m=60,v=55,y=50},176:function(e,t,r){"use strict";r.d(t,"b",(function(){return u})),r.d(t,"a",(function(){return d}));var n=r(75),a=r.n(n),o=r(51),i=r(25);const s=Object(o.c)(i.t)`
  display: block;
`,l=Object(o.c)(s)`
  &.ant-select-single {
    .ant-select-selector {
      height: 36px;
      padding: 0 11px;
      background-color: ${({theme:e})=>e.colors.grayscale.light3};
      border: none;

      .ant-select-selection-search-input {
        height: 100%;
      }

      .ant-select-selection-item,
      .ant-select-selection-placeholder {
        line-height: 35px;
        color: ${({theme:e})=>e.colors.grayscale.dark1};
      }
    }
  }
`,c=i.t.Option,u=a()(s,{Option:c}),d=a()(l,{Option:c})},195:function(e,t,r){"use strict";r.d(t,"a",(function(){return u}));var n=r(31),a=r.n(n),o=r(118),i=(r(0),r(25)),s=r(51),l=r(45),c=r(1);function u(e){const{type:t="info",description:r,showIcon:n=!0,closable:u=!0,children:d}=e,h=Object(s.e)(),{colors:p,typography:f}=h,{alert:g,error:b,info:m,success:v}=p;let y=m,O="info-solid";return"error"===t?(y=b,O="error-solid"):"warning"===t?(y=g,O="alert-solid"):"success"===t&&(y=v,O="circle-check-solid"),Object(c.f)(i.a,a()({role:"alert",showIcon:n,icon:Object(c.f)(l.a,{name:O,"aria-label":`${t} icon`}),closeText:u&&Object(c.f)(l.a,{name:"x-small","aria-label":"close icon"}),css:Object(o.a)({padding:"6px 10px",alignItems:"flex-start",border:0,backgroundColor:y.light2,"& .ant-alert-icon":{marginRight:10},"& .ant-alert-message":{color:y.dark2,fontSize:f.sizes.m,fontWeight:r?f.weights.bold:f.weights.normal},"& .ant-alert-description":{color:y.dark2,fontSize:f.sizes.m}},";label:Alert;")},e),d)}},204:function(e,t,r){"use strict";var n;r.d(t,"a",(function(){return n})),function(e){e.Column="column",e.ColumnOption="columnOption",e.AdhocColumnOption="adhocColumn",e.Metric="metric",e.MetricOption="metricOption",e.AdhocMetricOption="adhocMetric",e.FilterOption="filterOption"}(n||(n={}))},2116:function(e,t,r){},2119:function(e,t,r){"use strict";r.d(t,"a",(function(){return b}));var n=r(0),a=r(54),o=r(890),i=r(251),s=r(745),l=r(749),c=r(1075),u=r(1076);function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(n=(i=s.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{n||null==s.return||s.return()}finally{if(a)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return h(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return h(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(n=(i=s.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{n||null==s.return||s.return()}finally{if(a)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return g(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return g(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function b(e){var t=Object(n.useRef)(e);t.current=e,Object(a.a)(null!=e.item,"item must be defined"),Object(a.a)(null!=e.item.type,"item type must be defined");var r,h=f((r=Object(l.a)(),[Object(n.useMemo)((function(){return new c.a(r)}),[r]),Object(n.useMemo)((function(){return new u.a(r.getBackend())}),[r])]),2),g=h[0],b=h[1];!function(e,t,r){var o=Object(l.a)(),c=Object(n.useMemo)((function(){return{beginDrag:function(){var r=e.current,n=r.begin,o=r.item;if(n){var i=n(t);return Object(a.a)(null==i||"object"===p(i),"dragSpec.begin() must either return an object, undefined, or null"),i||o||{}}return o||{}},canDrag:function(){return"boolean"==typeof e.current.canDrag?e.current.canDrag:"function"!=typeof e.current.canDrag||e.current.canDrag(t)},isDragging:function(r,n){var a=e.current.isDragging;return a?a(t):n===r.getSourceId()},endDrag:function(){var n=e.current.end;n&&n(t.getItem(),t),r.reconnect()}}}),[]);Object(i.a)((function(){var n=d(Object(s.a)(e.current.item.type,c,o),2),a=n[0],i=n[1];return t.receiveHandlerId(a),r.receiveHandlerId(a),i}),[])}(t,g,b);var m=Object(o.a)(g,t.current.collect||function(){return{}},(function(){return b.reconnect()})),v=Object(n.useMemo)((function(){return b.hooks.dragSource()}),[b]),y=Object(n.useMemo)((function(){return b.hooks.dragPreview()}),[b]);return Object(i.a)((function(){b.dragSourceOptions=t.current.options||null,b.reconnect()}),[b]),Object(i.a)((function(){b.dragPreviewOptions=t.current.previewOptions||null,b.reconnect()}),[b]),[m,v,y]}},215:function(e,t,r){"use strict";r.d(t,"f",(function(){return C})),r.d(t,"c",(function(){return _})),r.d(t,"e",(function(){return j})),r.d(t,"g",(function(){return S})),r.d(t,"b",(function(){return E})),r.d(t,"d",(function(){return k})),r.d(t,"a",(function(){return T}));r(277),r(39);var n=r(31),a=r.n(n),o=r(143),i=r.n(o),s=r(201),l=r.n(s),c=r(257),u=r.n(c),d=r(60),h=r.n(d),p=r(11),f=r.n(p),g=r(63),b=r.n(g),m=r(0),v=r.n(m),y=r(352),O=r(1);const x={"mode/sql":()=>r.e(91).then(r.t.bind(null,1416,7)),"mode/markdown":()=>Promise.all([r.e(12),r.e(11),r.e(20),r.e(75)]).then(r.t.bind(null,1417,7)),"mode/css":()=>Promise.all([r.e(11),r.e(88)]).then(r.t.bind(null,1418,7)),"mode/json":()=>r.e(74).then(r.t.bind(null,1419,7)),"mode/yaml":()=>r.e(92).then(r.t.bind(null,1420,7)),"mode/html":()=>Promise.all([r.e(12),r.e(11),r.e(20),r.e(89)]).then(r.t.bind(null,1421,7)),"mode/javascript":()=>Promise.all([r.e(12),r.e(90)]).then(r.t.bind(null,1422,7)),"theme/textmate":()=>r.e(94).then(r.t.bind(null,1423,7)),"theme/github":()=>r.e(93).then(r.t.bind(null,1424,7)),"ext/language_tools":()=>r.e(87).then(r.t.bind(null,1425,7))};function w(e,{defaultMode:t,defaultTheme:n,defaultTabSize:o=2,placeholder:s}={}){return Object(y.a)(async()=>{var s,c;const{default:d}=await Promise.all([r.e(0),r.e(19)]).then(r.t.bind(null,1357,7)),{default:p}=await Promise.all([r.e(0),r.e(19),r.e(57)]).then(r.t.bind(null,1426,7));await b.a.all(f()(e).call(e,e=>x[e]()));const g=t||(null==(s=h()(e).call(e,e=>u()(e).call(e,"mode/")))?void 0:s.replace("mode/","")),m=n||(null==(c=h()(e).call(e,e=>u()(e).call(e,"theme/")))?void 0:c.replace("theme/",""));return v.a.forwardRef((function({keywords:e,mode:t=g,theme:r=m,tabSize:n=o,...s},c){if(e){const r={getCompletions:(r,n,a,o,s)=>{l()(i()(o,10))&&n.getMode().$id===`ace/mode/${t}`&&s(null,e)}};d.acequire("ace/ext/language_tools").setCompleters([r])}return Object(O.f)(p,a()({ref:c,mode:t,theme:r,tabSize:n},s))}))},s)}const C=w(["mode/sql","theme/github","ext/language_tools"]),_=w(["mode/sql","theme/github","ext/language_tools"],{placeholder:()=>Object(O.f)("div",{style:{height:"100%"}},Object(O.f)("div",{style:{width:41,height:"100%",background:"#e8e8e8"}}),Object(O.f)("div",{className:"ace_content"}))}),j=w(["mode/markdown","theme/textmate"]),S=w(["mode/markdown","mode/sql","mode/json","mode/html","mode/javascript","theme/textmate"]),E=w(["mode/css","theme/github"]),k=w(["mode/json","theme/github"]),T=w(["mode/json","mode/yaml","theme/github"])},222:function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var n=r(85),a=r.n(n),o=r(70),i=r.n(o);function s(e){const t=new i.a;return a()(e,(e,r)=>{if("object"==typeof r&&null!==r){if(t.has(r))try{return JSON.parse(a()(r))}catch(e){return}t.add(r)}return r})}},243:function(e,t,r){"use strict";r.d(t,"e",(function(){return B})),r.d(t,"c",(function(){return H})),r.d(t,"f",(function(){return D})),r.d(t,"a",(function(){return U})),r.d(t,"d",(function(){return $})),r.d(t,"b",(function(){return G}));var n={};r.r(n),r.d(n,"druidTimeSeries",(function(){return S})),r.d(n,"datasourceAndVizType",(function(){return E})),r.d(n,"colorScheme",(function(){return k})),r.d(n,"sqlaTimeSeries",(function(){return T})),r.d(n,"annotations",(function(){return M})),r.d(n,"NVD3TimeSeries",(function(){return R}));var a=r(55),o=r.n(a),i=r(59),s=r.n(i),l=r(34),c=r.n(l),u=r(11),d=r.n(u),h=r(29),p=r.n(h),f=(r(39),r(36)),g=r.n(f),b=r(69),m=r.n(b),v=r(102),y=r.n(v),O=r(103),x=r(273),w=r(788),C=(r(0),r(15)),_=r(192),j=r(1);const S={label:Object(C.e)("Time"),expanded:!0,description:Object(C.e)("Time related form attributes"),controlSetRows:[["time_range"]]},E={label:Object(C.e)("Chart type"),expanded:!0,controlSetRows:[["datasource"],["viz_type"],[{name:"slice_id",config:{type:"HiddenControl",label:Object(C.e)("Chart ID"),hidden:!0,description:Object(C.e)("The id of the active chart")}},{name:"cache_timeout",config:{type:"HiddenControl",label:Object(C.e)("Cache Timeout (seconds)"),hidden:!0,description:Object(C.e)("The number of seconds before expiring the cache")}},{name:"url_params",config:{type:"HiddenControl",label:Object(C.e)("URL parameters"),hidden:!0,description:Object(C.e)("Extra parameters for use in jinja templated queries")}},{name:"time_range_endpoints",config:{type:"HiddenControl",label:Object(C.e)("Time range endpoints"),hidden:!0,description:Object(C.e)("Time range endpoints (SIP-15)")}}]]},k={label:Object(C.e)("Color scheme"),controlSetRows:[["color_scheme","label_colors"]]},T={label:Object(C.e)("Time"),description:Object(C.e)("Time related form attributes"),expanded:!0,controlSetRows:[["granularity_sqla"],["time_range"]]},M={label:Object(C.e)("Annotations and layers"),tabOverride:"data",expanded:!0,controlSetRows:[[{name:"annotation_layers",config:{type:"AnnotationLayerControl",label:"",default:[],description:"Annotation layers",renderTrigger:!0,tabOverride:"data"}}]]},R=[{label:Object(C.e)("Query"),expanded:!0,controlSetRows:[["metrics"],["adhoc_filters"],["groupby"],["limit","timeseries_limit_metric"],[{name:"order_desc",config:{type:"CheckboxControl",label:Object(C.e)("Sort descending"),default:!0,description:Object(C.e)("Whether to sort descending or ascending")}},{name:"contribution",config:{type:"CheckboxControl",label:Object(C.e)("Contribution"),default:!1,description:Object(C.e)("Compute the contribution to the total")}}],["row_limit",null]]},{label:Object(C.e)("Advanced analytics"),tabOverride:"data",description:Object(C.e)("This section contains options that allow for advanced analytical post processing of query results"),controlSetRows:[[Object(j.f)("h1",{className:"section-header"},Object(C.e)("Rolling window"))],[{name:"rolling_type",config:{type:"SelectControl",label:Object(C.e)("Rolling function"),default:"None",choices:Object(_.a)(["None","mean","sum","std","cumsum"]),description:Object(C.e)("Defines a rolling window function to apply, works along with the [Periods] text box")}},{name:"rolling_periods",config:{type:"TextControl",label:Object(C.e)("Periods"),isInt:!0,description:Object(C.e)("Defines the size of the rolling window function, relative to the time granularity selected")}},{name:"min_periods",config:{type:"TextControl",label:Object(C.e)("Min periods"),isInt:!0,description:Object(C.e)('The minimum number of rolling periods required to show a value. For instance if you do a cumulative sum on 7 days you may want your "Min Period" to be 7, so that all data points shown are the total of 7 periods. This will hide the "ramp up" taking place over the first 7 periods')}}],[Object(j.f)("h1",{className:"section-header"},Object(C.e)("Time comparison"))],[{name:"time_compare",config:{type:"SelectControl",multi:!0,freeForm:!0,label:Object(C.e)("Time shift"),choices:Object(_.a)(["1 day","1 week","28 days","30 days","52 weeks","1 year","104 weeks","2 years"]),description:Object(C.e)("Overlay one or more timeseries from a relative time period. Expects relative time deltas in natural language (example:  24 hours, 7 days, 52 weeks, 365 days). Free text is supported.")}},{name:"comparison_type",config:{type:"SelectControl",label:Object(C.e)("Calculation type"),default:"values",choices:[["values","Actual values"],["absolute","Absolute difference"],["percentage","Percentage change"],["ratio","Ratio"]],description:Object(C.e)("How to display time shifts: as individual lines; as the absolute difference between the main time series and each time shift; as the percentage change; or as the ratio between series and time shifts.")}}],[Object(j.f)("h1",{className:"section-header"},Object(C.e)("Python functions"))],[Object(j.f)("h2",{className:"section-header"},"pandas.resample")],[{name:"resample_rule",config:{type:"SelectControl",freeForm:!0,label:Object(C.e)("Rule"),default:null,choices:Object(_.a)(["1T","1H","1D","7D","1M","1AS"]),description:Object(C.e)("Pandas resample rule")}},{name:"resample_method",config:{type:"SelectControl",freeForm:!0,label:Object(C.e)("Method"),default:null,choices:Object(_.a)(["asfreq","bfill","ffill","median","mean","sum"]),description:Object(C.e)("Pandas resample method")}}]]}],A=Object(O.a)((e,t)=>{var r,a,o,i;const{sectionOverrides:s={},controlOverrides:l,controlPanelSections:u=[]}=t,h={...n};p()(r=y()(s)).call(r,([e,t])=>{"object"==typeof t&&t.constructor===Object?h[e]={...h[e],...t}:h[e]=t});const{datasourceAndVizType:f}=h,b="table"===e?["granularity","druid_time_origin"]:["granularity_sqla","time_grain_sqla"];return d()(a=c()(o=m()(i=[f]).call(i,u)).call(o,e=>!!e)).call(a,e=>{const{controlSetRows:t}=e;return{...e,controlSetRows:(null==t?void 0:d()(t).call(t,e=>{var t;return d()(t=c()(e).call(e,e=>"string"!=typeof e||!g()(b).call(b,e))).call(t,e=>Object(w.a)(e,l))}))||[]}})});function D(e,t){const r=Object(x.a)().get(e)||{};return A(t,r)}var P=r(1289),I=r.n(P),F=r(60),N=r.n(F);const L=Object(O.a)((e,t)=>{const{controlOverrides:r={},controlPanelSections:n=[]}=t,a=Object(w.a)(function(e,t){var r,n,a;return null!=(r=N()(n=I()(a=d()(e).call(e,e=>e.controlSetRows)).call(a,2)).call(n,e=>t===e||null!==e&&"object"==typeof e&&"name"in e&&e.name===t))?r:null}(n,e),r);return a&&"config"in a?a.config:a});const H=function(e,t){const r=Object(x.a)().get(t)||{};return L(e,r)};var q=r(43),z=r.n(q);function B(e){var t;const r={viz_type:"table",datasource:""};return p()(t=z()(e)).call(t,t=>{const n=e[t];r[t]=n.value}),r}function U(e,t){const{mapStateToProps:r}=e;let n={...e},{value:a}=n;return r&&t&&(n={...e,...r(t,e)},a=a||n.value),"function"==typeof n.default&&(n.default=n.default(n,t),"function"==typeof n.default&&delete n.default),n.default&&void 0===a&&(a=n.default),a&&n.multi&&!o()(a)&&(a=[a]),n.value=a,function(e,t){const{validators:r}=e,n=[];return r&&r.length>0&&p()(r).call(r,r=>{const a=r.call(e,e.value,t);a&&n.push(a)}),{...e,validationErrors:n}}(function(e){const{value:t}=e;if("SelectControl"===e.type&&!e.freeForm&&e.choices&&t){var r;const n={...e},a=d()(r=e.choices).call(r,e=>e[0]);if(e.multi&&t.length>0)return n.value=c()(t).call(t,e=>s()(a).call(a,e)>-1),n;if(!e.multi&&s()(a).call(a,t)<0)return n.value=null,n}return e}(n),n)}function $(e,t,r){if(!e)return null;const n={...e,value:r};return t&&t.controls||null===t?U(n,t):n}function G(e,t,r,n){var a;const o={};return p()(a=D(e,t)).call(a,e=>{var t;return p()(t=e.controlSetRows).call(t,e=>p()(e).call(e,e=>{if(e&&e.config&&e.name){const{config:t,name:a}=e;o[a]=$(t,r,n[a])}}))}),o}},251:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var n=r(0),a="undefined"!=typeof window?n.useLayoutEffect:n.useEffect},274:function(e,t,r){"use strict";r.r(t),r.d(t,"LOG_EVENT",(function(){return n})),r.d(t,"logEvent",(function(){return a}));const n="LOG_EVENT";function a(e,t){return r=>r({type:n,payload:{eventName:e,eventData:t}})}},284:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.red=void 0;var n=o(r(1715)),a=o(r(1152));function o(e){return e&&e.__esModule?e:{default:e}}t.default={simpleCheckForValidColor:function(e){var t=0,r=0;return(0,n.default)(["r","g","b","a","h","s","l","v"],(function(n){if(e[n]&&(t+=1,isNaN(e[n])||(r+=1),"s"===n||"l"===n)){/^\d+%$/.test(e[n])&&(r+=1)}})),t===r&&e},toState:function(e,t){var r=e.hex?(0,a.default)(e.hex):(0,a.default)(e),n=r.toHsl(),o=r.toHsv(),i=r.toRgb(),s=r.toHex();return 0===n.s&&(n.h=t||0,o.h=t||0),{hsl:n,hex:"000000"===s&&0===i.a?"transparent":"#"+s,rgb:i,hsv:o,oldHue:e.h||t||n.h,source:e.source}},isValidHex:function(e){var t="#"===String(e).charAt(0)?1:0;return e.length!==4+t&&e.length<7+t&&(0,a.default)(e).isValid()},getContrastingColor:function(e){if(!e)return"#fff";var t=this.toState(e);return"transparent"===t.hex?"rgba(0,0,0,0.4)":(299*t.rgb.r+587*t.rgb.g+114*t.rgb.b)/1e3>=128?"#000":"#fff"}};t.red={hsl:{a:1,h:0,l:.5,s:1},hex:"#ff0000",rgb:{r:255,g:0,b:0,a:1},hsv:{h:0,s:1,v:1,a:1}}},286:function(e,t,r){"use strict";function n(e,t,r,n){var a=r?r.call(n,e,t):void 0;if(void 0!==a)return!!a;if(e===t)return!0;if("object"!=typeof e||!e||"object"!=typeof t||!t)return!1;var o=Object.keys(e),i=Object.keys(t);if(o.length!==i.length)return!1;for(var s=Object.prototype.hasOwnProperty.bind(t),l=0;l<o.length;l++){var c=o[l];if(!s(c))return!1;var u=e[c],d=t[c];if(!1===(a=r?r.call(n,u,d,c):void 0)||void 0===a&&u!==d)return!1}return!0}r.d(t,"a",(function(){return n}))},301:function(e,t,r){var n,a,o;!function(i,s){"use strict";e.exports?e.exports=s(r(903),r(904),r(905)):(a=[r(903),r(904),r(905)],void 0===(o="function"==typeof(n=s)?n.apply(t,a):n)||(e.exports=o))}(0,(function(e,t,r,n){"use strict";var a=n&&n.URI;function o(e,t){var r=arguments.length>=1,n=arguments.length>=2;if(!(this instanceof o))return r?n?new o(e,t):new o(e):new o;if(void 0===e){if(r)throw new TypeError("undefined is not a valid argument for URI");e="undefined"!=typeof location?location.href+"":""}if(null===e&&r)throw new TypeError("null is not a valid argument for URI");return this.href(e),void 0!==t?this.absoluteTo(t):this}o.version="1.19.4";var i=o.prototype,s=Object.prototype.hasOwnProperty;function l(e){return e.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}function c(e){return void 0===e?"Undefined":String(Object.prototype.toString.call(e)).slice(8,-1)}function u(e){return"Array"===c(e)}function d(e,t){var r,n,a={};if("RegExp"===c(t))a=null;else if(u(t))for(r=0,n=t.length;r<n;r++)a[t[r]]=!0;else a[t]=!0;for(r=0,n=e.length;r<n;r++){(a&&void 0!==a[e[r]]||!a&&t.test(e[r]))&&(e.splice(r,1),n--,r--)}return e}function h(e,t){var r,n;if(u(t)){for(r=0,n=t.length;r<n;r++)if(!h(e,t[r]))return!1;return!0}var a=c(t);for(r=0,n=e.length;r<n;r++)if("RegExp"===a){if("string"==typeof e[r]&&e[r].match(t))return!0}else if(e[r]===t)return!0;return!1}function p(e,t){if(!u(e)||!u(t))return!1;if(e.length!==t.length)return!1;e.sort(),t.sort();for(var r=0,n=e.length;r<n;r++)if(e[r]!==t[r])return!1;return!0}function f(e){return e.replace(/^\/+|\/+$/g,"")}function g(e){return escape(e)}function b(e){return encodeURIComponent(e).replace(/[!'()*]/g,g).replace(/\*/g,"%2A")}o._parts=function(){return{protocol:null,username:null,password:null,hostname:null,urn:null,port:null,path:null,query:null,fragment:null,preventInvalidHostname:o.preventInvalidHostname,duplicateQueryParameters:o.duplicateQueryParameters,escapeQuerySpace:o.escapeQuerySpace}},o.preventInvalidHostname=!1,o.duplicateQueryParameters=!1,o.escapeQuerySpace=!0,o.protocol_expression=/^[a-z][a-z0-9.+-]*$/i,o.idn_expression=/[^a-z0-9\._-]/i,o.punycode_expression=/(xn--)/i,o.ip4_expression=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,o.ip6_expression=/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,o.find_uri_expression=/\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?«»“”‘’]))/gi,o.findUri={start:/\b(?:([a-z][a-z0-9.+-]*:\/\/)|www\.)/gi,end:/[\s\r\n]|$/,trim:/[`!()\[\]{};:'".,<>?«»“”„‘’]+$/,parens:/(\([^\)]*\)|\[[^\]]*\]|\{[^}]*\}|<[^>]*>)/g},o.defaultPorts={http:"80",https:"443",ftp:"21",gopher:"70",ws:"80",wss:"443"},o.hostProtocols=["http","https"],o.invalid_hostname_characters=/[^a-zA-Z0-9\.\-:_]/,o.domAttributes={a:"href",blockquote:"cite",link:"href",base:"href",script:"src",form:"action",img:"src",area:"href",iframe:"src",embed:"src",source:"src",track:"src",input:"src",audio:"src",video:"src"},o.getDomAttribute=function(e){if(e&&e.nodeName){var t=e.nodeName.toLowerCase();if("input"!==t||"image"===e.type)return o.domAttributes[t]}},o.encode=b,o.decode=decodeURIComponent,o.iso8859=function(){o.encode=escape,o.decode=unescape},o.unicode=function(){o.encode=b,o.decode=decodeURIComponent},o.characters={pathname:{encode:{expression:/%(24|26|2B|2C|3B|3D|3A|40)/gi,map:{"%24":"$","%26":"&","%2B":"+","%2C":",","%3B":";","%3D":"=","%3A":":","%40":"@"}},decode:{expression:/[\/\?#]/g,map:{"/":"%2F","?":"%3F","#":"%23"}}},reserved:{encode:{expression:/%(21|23|24|26|27|28|29|2A|2B|2C|2F|3A|3B|3D|3F|40|5B|5D)/gi,map:{"%3A":":","%2F":"/","%3F":"?","%23":"#","%5B":"[","%5D":"]","%40":"@","%21":"!","%24":"$","%26":"&","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"="}}},urnpath:{encode:{expression:/%(21|24|27|28|29|2A|2B|2C|3B|3D|40)/gi,map:{"%21":"!","%24":"$","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"=","%40":"@"}},decode:{expression:/[\/\?#:]/g,map:{"/":"%2F","?":"%3F","#":"%23",":":"%3A"}}}},o.encodeQuery=function(e,t){var r=o.encode(e+"");return void 0===t&&(t=o.escapeQuerySpace),t?r.replace(/%20/g,"+"):r},o.decodeQuery=function(e,t){e+="",void 0===t&&(t=o.escapeQuerySpace);try{return o.decode(t?e.replace(/\+/g,"%20"):e)}catch(t){return e}};var m,v={encode:"encode",decode:"decode"},y=function(e,t){return function(r){try{return o[t](r+"").replace(o.characters[e][t].expression,(function(r){return o.characters[e][t].map[r]}))}catch(e){return r}}};for(m in v)o[m+"PathSegment"]=y("pathname",v[m]),o[m+"UrnPathSegment"]=y("urnpath",v[m]);var O=function(e,t,r){return function(n){var a;a=r?function(e){return o[t](o[r](e))}:o[t];for(var i=(n+"").split(e),s=0,l=i.length;s<l;s++)i[s]=a(i[s]);return i.join(e)}};function x(e){return function(t,r){return void 0===t?this._parts[e]||"":(this._parts[e]=t||null,this.build(!r),this)}}function w(e,t){return function(r,n){return void 0===r?this._parts[e]||"":(null!==r&&(r+="").charAt(0)===t&&(r=r.substring(1)),this._parts[e]=r,this.build(!n),this)}}o.decodePath=O("/","decodePathSegment"),o.decodeUrnPath=O(":","decodeUrnPathSegment"),o.recodePath=O("/","encodePathSegment","decode"),o.recodeUrnPath=O(":","encodeUrnPathSegment","decode"),o.encodeReserved=y("reserved","encode"),o.parse=function(e,t){var r;return t||(t={preventInvalidHostname:o.preventInvalidHostname}),(r=e.indexOf("#"))>-1&&(t.fragment=e.substring(r+1)||null,e=e.substring(0,r)),(r=e.indexOf("?"))>-1&&(t.query=e.substring(r+1)||null,e=e.substring(0,r)),"//"===e.substring(0,2)?(t.protocol=null,e=e.substring(2),e=o.parseAuthority(e,t)):(r=e.indexOf(":"))>-1&&(t.protocol=e.substring(0,r)||null,t.protocol&&!t.protocol.match(o.protocol_expression)?t.protocol=void 0:"//"===e.substring(r+1,r+3)?(e=e.substring(r+3),e=o.parseAuthority(e,t)):(e=e.substring(r+1),t.urn=!0)),t.path=e,t},o.parseHost=function(e,t){e||(e="");var r,n,a=(e=e.replace(/\\/g,"/")).indexOf("/");if(-1===a&&(a=e.length),"["===e.charAt(0))r=e.indexOf("]"),t.hostname=e.substring(1,r)||null,t.port=e.substring(r+2,a)||null,"/"===t.port&&(t.port=null);else{var i=e.indexOf(":"),s=e.indexOf("/"),l=e.indexOf(":",i+1);-1!==l&&(-1===s||l<s)?(t.hostname=e.substring(0,a)||null,t.port=null):(n=e.substring(0,a).split(":"),t.hostname=n[0]||null,t.port=n[1]||null)}return t.hostname&&"/"!==e.substring(a).charAt(0)&&(a++,e="/"+e),t.preventInvalidHostname&&o.ensureValidHostname(t.hostname,t.protocol),t.port&&o.ensureValidPort(t.port),e.substring(a)||"/"},o.parseAuthority=function(e,t){return e=o.parseUserinfo(e,t),o.parseHost(e,t)},o.parseUserinfo=function(e,t){var r=e;-1!==e.indexOf("\\")&&(e=e.replace(/\\/g,"/"));var n,a=e.indexOf("/"),i=e.lastIndexOf("@",a>-1?a:e.length-1);return i>-1&&(-1===a||i<a)?(n=e.substring(0,i).split(":"),t.username=n[0]?o.decode(n[0]):null,n.shift(),t.password=n[0]?o.decode(n.join(":")):null,e=r.substring(i+1)):(t.username=null,t.password=null),e},o.parseQuery=function(e,t){if(!e)return{};if(!(e=e.replace(/&+/g,"&").replace(/^\?*&*|&+$/g,"")))return{};for(var r,n,a,i={},l=e.split("&"),c=l.length,u=0;u<c;u++)r=l[u].split("="),n=o.decodeQuery(r.shift(),t),a=r.length?o.decodeQuery(r.join("="),t):null,s.call(i,n)?("string"!=typeof i[n]&&null!==i[n]||(i[n]=[i[n]]),i[n].push(a)):i[n]=a;return i},o.build=function(e){var t="",r=!1;return e.protocol&&(t+=e.protocol+":"),e.urn||!t&&!e.hostname||(t+="//",r=!0),t+=o.buildAuthority(e)||"","string"==typeof e.path&&("/"!==e.path.charAt(0)&&r&&(t+="/"),t+=e.path),"string"==typeof e.query&&e.query&&(t+="?"+e.query),"string"==typeof e.fragment&&e.fragment&&(t+="#"+e.fragment),t},o.buildHost=function(e){var t="";return e.hostname?(o.ip6_expression.test(e.hostname)?t+="["+e.hostname+"]":t+=e.hostname,e.port&&(t+=":"+e.port),t):""},o.buildAuthority=function(e){return o.buildUserinfo(e)+o.buildHost(e)},o.buildUserinfo=function(e){var t="";return e.username&&(t+=o.encode(e.username)),e.password&&(t+=":"+o.encode(e.password)),t&&(t+="@"),t},o.buildQuery=function(e,t,r){var n,a,i,l,c="";for(a in e)if(s.call(e,a))if(u(e[a]))for(n={},i=0,l=e[a].length;i<l;i++)void 0!==e[a][i]&&void 0===n[e[a][i]+""]&&(c+="&"+o.buildQueryParameter(a,e[a][i],r),!0!==t&&(n[e[a][i]+""]=!0));else void 0!==e[a]&&(c+="&"+o.buildQueryParameter(a,e[a],r));return c.substring(1)},o.buildQueryParameter=function(e,t,r){return o.encodeQuery(e,r)+(null!==t?"="+o.encodeQuery(t,r):"")},o.addQuery=function(e,t,r){if("object"==typeof t)for(var n in t)s.call(t,n)&&o.addQuery(e,n,t[n]);else{if("string"!=typeof t)throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");if(void 0===e[t])return void(e[t]=r);"string"==typeof e[t]&&(e[t]=[e[t]]),u(r)||(r=[r]),e[t]=(e[t]||[]).concat(r)}},o.setQuery=function(e,t,r){if("object"==typeof t)for(var n in t)s.call(t,n)&&o.setQuery(e,n,t[n]);else{if("string"!=typeof t)throw new TypeError("URI.setQuery() accepts an object, string as the name parameter");e[t]=void 0===r?null:r}},o.removeQuery=function(e,t,r){var n,a,i;if(u(t))for(n=0,a=t.length;n<a;n++)e[t[n]]=void 0;else if("RegExp"===c(t))for(i in e)t.test(i)&&(e[i]=void 0);else if("object"==typeof t)for(i in t)s.call(t,i)&&o.removeQuery(e,i,t[i]);else{if("string"!=typeof t)throw new TypeError("URI.removeQuery() accepts an object, string, RegExp as the first parameter");void 0!==r?"RegExp"===c(r)?!u(e[t])&&r.test(e[t])?e[t]=void 0:e[t]=d(e[t],r):e[t]!==String(r)||u(r)&&1!==r.length?u(e[t])&&(e[t]=d(e[t],r)):e[t]=void 0:e[t]=void 0}},o.hasQuery=function(e,t,r,n){switch(c(t)){case"String":break;case"RegExp":for(var a in e)if(s.call(e,a)&&t.test(a)&&(void 0===r||o.hasQuery(e,a,r)))return!0;return!1;case"Object":for(var i in t)if(s.call(t,i)&&!o.hasQuery(e,i,t[i]))return!1;return!0;default:throw new TypeError("URI.hasQuery() accepts a string, regular expression or object as the name parameter")}switch(c(r)){case"Undefined":return t in e;case"Boolean":return r===Boolean(u(e[t])?e[t].length:e[t]);case"Function":return!!r(e[t],t,e);case"Array":return!!u(e[t])&&(n?h:p)(e[t],r);case"RegExp":return u(e[t])?!!n&&h(e[t],r):Boolean(e[t]&&e[t].match(r));case"Number":r=String(r);case"String":return u(e[t])?!!n&&h(e[t],r):e[t]===r;default:throw new TypeError("URI.hasQuery() accepts undefined, boolean, string, number, RegExp, Function as the value parameter")}},o.joinPaths=function(){for(var e=[],t=[],r=0,n=0;n<arguments.length;n++){var a=new o(arguments[n]);e.push(a);for(var i=a.segment(),s=0;s<i.length;s++)"string"==typeof i[s]&&t.push(i[s]),i[s]&&r++}if(!t.length||!r)return new o("");var l=new o("").segment(t);return""!==e[0].path()&&"/"!==e[0].path().slice(0,1)||l.path("/"+l.path()),l.normalize()},o.commonPath=function(e,t){var r,n=Math.min(e.length,t.length);for(r=0;r<n;r++)if(e.charAt(r)!==t.charAt(r)){r--;break}return r<1?e.charAt(0)===t.charAt(0)&&"/"===e.charAt(0)?"/":"":("/"===e.charAt(r)&&"/"===t.charAt(r)||(r=e.substring(0,r).lastIndexOf("/")),e.substring(0,r+1))},o.withinString=function(e,t,r){r||(r={});var n=r.start||o.findUri.start,a=r.end||o.findUri.end,i=r.trim||o.findUri.trim,s=r.parens||o.findUri.parens,l=/[a-z0-9-]=["']?$/i;for(n.lastIndex=0;;){var c=n.exec(e);if(!c)break;var u=c.index;if(r.ignoreHtml){var d=e.slice(Math.max(u-3,0),u);if(d&&l.test(d))continue}for(var h=u+e.slice(u).search(a),p=e.slice(u,h),f=-1;;){var g=s.exec(p);if(!g)break;var b=g.index+g[0].length;f=Math.max(f,b)}if(!((p=f>-1?p.slice(0,f)+p.slice(f).replace(i,""):p.replace(i,"")).length<=c[0].length||r.ignore&&r.ignore.test(p))){var m=t(p,u,h=u+p.length,e);void 0!==m?(m=String(m),e=e.slice(0,u)+m+e.slice(h),n.lastIndex=u+m.length):n.lastIndex=h}}return n.lastIndex=0,e},o.ensureValidHostname=function(t,r){var n=!!t,a=!1;if(!!r&&(a=h(o.hostProtocols,r)),a&&!n)throw new TypeError("Hostname cannot be empty, if protocol is "+r);if(t&&t.match(o.invalid_hostname_characters)){if(!e)throw new TypeError('Hostname "'+t+'" contains characters other than [A-Z0-9.-:_] and Punycode.js is not available');if(e.toASCII(t).match(o.invalid_hostname_characters))throw new TypeError('Hostname "'+t+'" contains characters other than [A-Z0-9.-:_]')}},o.ensureValidPort=function(e){if(e){var t=Number(e);if(!(/^[0-9]+$/.test(t)&&t>0&&t<65536))throw new TypeError('Port "'+e+'" is not a valid port')}},o.noConflict=function(e){if(e){var t={URI:this.noConflict()};return n.URITemplate&&"function"==typeof n.URITemplate.noConflict&&(t.URITemplate=n.URITemplate.noConflict()),n.IPv6&&"function"==typeof n.IPv6.noConflict&&(t.IPv6=n.IPv6.noConflict()),n.SecondLevelDomains&&"function"==typeof n.SecondLevelDomains.noConflict&&(t.SecondLevelDomains=n.SecondLevelDomains.noConflict()),t}return n.URI===this&&(n.URI=a),this},i.build=function(e){return!0===e?this._deferred_build=!0:(void 0===e||this._deferred_build)&&(this._string=o.build(this._parts),this._deferred_build=!1),this},i.clone=function(){return new o(this)},i.valueOf=i.toString=function(){return this.build(!1)._string},i.protocol=x("protocol"),i.username=x("username"),i.password=x("password"),i.hostname=x("hostname"),i.port=x("port"),i.query=w("query","?"),i.fragment=w("fragment","#"),i.search=function(e,t){var r=this.query(e,t);return"string"==typeof r&&r.length?"?"+r:r},i.hash=function(e,t){var r=this.fragment(e,t);return"string"==typeof r&&r.length?"#"+r:r},i.pathname=function(e,t){if(void 0===e||!0===e){var r=this._parts.path||(this._parts.hostname?"/":"");return e?(this._parts.urn?o.decodeUrnPath:o.decodePath)(r):r}return this._parts.urn?this._parts.path=e?o.recodeUrnPath(e):"":this._parts.path=e?o.recodePath(e):"/",this.build(!t),this},i.path=i.pathname,i.href=function(e,t){var r;if(void 0===e)return this.toString();this._string="",this._parts=o._parts();var n=e instanceof o,a="object"==typeof e&&(e.hostname||e.path||e.pathname);e.nodeName&&(e=e[o.getDomAttribute(e)]||"",a=!1);if(!n&&a&&void 0!==e.pathname&&(e=e.toString()),"string"==typeof e||e instanceof String)this._parts=o.parse(String(e),this._parts);else{if(!n&&!a)throw new TypeError("invalid input");var i=n?e._parts:e;for(r in i)"query"!==r&&s.call(this._parts,r)&&(this._parts[r]=i[r]);i.query&&this.query(i.query,!1)}return this.build(!t),this},i.is=function(e){var t=!1,n=!1,a=!1,i=!1,s=!1,l=!1,c=!1,u=!this._parts.urn;switch(this._parts.hostname&&(u=!1,n=o.ip4_expression.test(this._parts.hostname),a=o.ip6_expression.test(this._parts.hostname),s=(i=!(t=n||a))&&r&&r.has(this._parts.hostname),l=i&&o.idn_expression.test(this._parts.hostname),c=i&&o.punycode_expression.test(this._parts.hostname)),e.toLowerCase()){case"relative":return u;case"absolute":return!u;case"domain":case"name":return i;case"sld":return s;case"ip":return t;case"ip4":case"ipv4":case"inet4":return n;case"ip6":case"ipv6":case"inet6":return a;case"idn":return l;case"url":return!this._parts.urn;case"urn":return!!this._parts.urn;case"punycode":return c}return null};var C=i.protocol,_=i.port,j=i.hostname;i.protocol=function(e,t){if(e&&!(e=e.replace(/:(\/\/)?$/,"")).match(o.protocol_expression))throw new TypeError('Protocol "'+e+"\" contains characters other than [A-Z0-9.+-] or doesn't start with [A-Z]");return C.call(this,e,t)},i.scheme=i.protocol,i.port=function(e,t){return this._parts.urn?void 0===e?"":this:(void 0!==e&&(0===e&&(e=null),e&&(":"===(e+="").charAt(0)&&(e=e.substring(1)),o.ensureValidPort(e))),_.call(this,e,t))},i.hostname=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0!==e){var r={preventInvalidHostname:this._parts.preventInvalidHostname};if("/"!==o.parseHost(e,r))throw new TypeError('Hostname "'+e+'" contains characters other than [A-Z0-9.-]');e=r.hostname,this._parts.preventInvalidHostname&&o.ensureValidHostname(e,this._parts.protocol)}return j.call(this,e,t)},i.origin=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e){var r=this.protocol();return this.authority()?(r?r+"://":"")+this.authority():""}var n=o(e);return this.protocol(n.protocol()).authority(n.authority()).build(!t),this},i.host=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e)return this._parts.hostname?o.buildHost(this._parts):"";if("/"!==o.parseHost(e,this._parts))throw new TypeError('Hostname "'+e+'" contains characters other than [A-Z0-9.-]');return this.build(!t),this},i.authority=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e)return this._parts.hostname?o.buildAuthority(this._parts):"";if("/"!==o.parseAuthority(e,this._parts))throw new TypeError('Hostname "'+e+'" contains characters other than [A-Z0-9.-]');return this.build(!t),this},i.userinfo=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e){var r=o.buildUserinfo(this._parts);return r?r.substring(0,r.length-1):r}return"@"!==e[e.length-1]&&(e+="@"),o.parseUserinfo(e,this._parts),this.build(!t),this},i.resource=function(e,t){var r;return void 0===e?this.path()+this.search()+this.hash():(r=o.parse(e),this._parts.path=r.path,this._parts.query=r.query,this._parts.fragment=r.fragment,this.build(!t),this)},i.subdomain=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e){if(!this._parts.hostname||this.is("IP"))return"";var r=this._parts.hostname.length-this.domain().length-1;return this._parts.hostname.substring(0,r)||""}var n=this._parts.hostname.length-this.domain().length,a=this._parts.hostname.substring(0,n),i=new RegExp("^"+l(a));if(e&&"."!==e.charAt(e.length-1)&&(e+="."),-1!==e.indexOf(":"))throw new TypeError("Domains cannot contain colons");return e&&o.ensureValidHostname(e,this._parts.protocol),this._parts.hostname=this._parts.hostname.replace(i,e),this.build(!t),this},i.domain=function(e,t){if(this._parts.urn)return void 0===e?"":this;if("boolean"==typeof e&&(t=e,e=void 0),void 0===e){if(!this._parts.hostname||this.is("IP"))return"";var r=this._parts.hostname.match(/\./g);if(r&&r.length<2)return this._parts.hostname;var n=this._parts.hostname.length-this.tld(t).length-1;return n=this._parts.hostname.lastIndexOf(".",n-1)+1,this._parts.hostname.substring(n)||""}if(!e)throw new TypeError("cannot set domain empty");if(-1!==e.indexOf(":"))throw new TypeError("Domains cannot contain colons");if(o.ensureValidHostname(e,this._parts.protocol),!this._parts.hostname||this.is("IP"))this._parts.hostname=e;else{var a=new RegExp(l(this.domain())+"$");this._parts.hostname=this._parts.hostname.replace(a,e)}return this.build(!t),this},i.tld=function(e,t){if(this._parts.urn)return void 0===e?"":this;if("boolean"==typeof e&&(t=e,e=void 0),void 0===e){if(!this._parts.hostname||this.is("IP"))return"";var n=this._parts.hostname.lastIndexOf("."),a=this._parts.hostname.substring(n+1);return!0!==t&&r&&r.list[a.toLowerCase()]&&r.get(this._parts.hostname)||a}var o;if(!e)throw new TypeError("cannot set TLD empty");if(e.match(/[^a-zA-Z0-9-]/)){if(!r||!r.is(e))throw new TypeError('TLD "'+e+'" contains characters other than [A-Z0-9]');o=new RegExp(l(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(o,e)}else{if(!this._parts.hostname||this.is("IP"))throw new ReferenceError("cannot set TLD on non-domain host");o=new RegExp(l(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(o,e)}return this.build(!t),this},i.directory=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e||!0===e){if(!this._parts.path&&!this._parts.hostname)return"";if("/"===this._parts.path)return"/";var r=this._parts.path.length-this.filename().length-1,n=this._parts.path.substring(0,r)||(this._parts.hostname?"/":"");return e?o.decodePath(n):n}var a=this._parts.path.length-this.filename().length,i=this._parts.path.substring(0,a),s=new RegExp("^"+l(i));return this.is("relative")||(e||(e="/"),"/"!==e.charAt(0)&&(e="/"+e)),e&&"/"!==e.charAt(e.length-1)&&(e+="/"),e=o.recodePath(e),this._parts.path=this._parts.path.replace(s,e),this.build(!t),this},i.filename=function(e,t){if(this._parts.urn)return void 0===e?"":this;if("string"!=typeof e){if(!this._parts.path||"/"===this._parts.path)return"";var r=this._parts.path.lastIndexOf("/"),n=this._parts.path.substring(r+1);return e?o.decodePathSegment(n):n}var a=!1;"/"===e.charAt(0)&&(e=e.substring(1)),e.match(/\.?\//)&&(a=!0);var i=new RegExp(l(this.filename())+"$");return e=o.recodePath(e),this._parts.path=this._parts.path.replace(i,e),a?this.normalizePath(t):this.build(!t),this},i.suffix=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e||!0===e){if(!this._parts.path||"/"===this._parts.path)return"";var r,n,a=this.filename(),i=a.lastIndexOf(".");return-1===i?"":(r=a.substring(i+1),n=/^[a-z0-9%]+$/i.test(r)?r:"",e?o.decodePathSegment(n):n)}"."===e.charAt(0)&&(e=e.substring(1));var s,c=this.suffix();if(c)s=e?new RegExp(l(c)+"$"):new RegExp(l("."+c)+"$");else{if(!e)return this;this._parts.path+="."+o.recodePath(e)}return s&&(e=o.recodePath(e),this._parts.path=this._parts.path.replace(s,e)),this.build(!t),this},i.segment=function(e,t,r){var n=this._parts.urn?":":"/",a=this.path(),o="/"===a.substring(0,1),i=a.split(n);if(void 0!==e&&"number"!=typeof e&&(r=t,t=e,e=void 0),void 0!==e&&"number"!=typeof e)throw new Error('Bad segment "'+e+'", must be 0-based integer');if(o&&i.shift(),e<0&&(e=Math.max(i.length+e,0)),void 0===t)return void 0===e?i:i[e];if(null===e||void 0===i[e])if(u(t)){i=[];for(var s=0,l=t.length;s<l;s++)(t[s].length||i.length&&i[i.length-1].length)&&(i.length&&!i[i.length-1].length&&i.pop(),i.push(f(t[s])))}else(t||"string"==typeof t)&&(t=f(t),""===i[i.length-1]?i[i.length-1]=t:i.push(t));else t?i[e]=f(t):i.splice(e,1);return o&&i.unshift(""),this.path(i.join(n),r)},i.segmentCoded=function(e,t,r){var n,a,i;if("number"!=typeof e&&(r=t,t=e,e=void 0),void 0===t){if(u(n=this.segment(e,t,r)))for(a=0,i=n.length;a<i;a++)n[a]=o.decode(n[a]);else n=void 0!==n?o.decode(n):void 0;return n}if(u(t))for(a=0,i=t.length;a<i;a++)t[a]=o.encode(t[a]);else t="string"==typeof t||t instanceof String?o.encode(t):t;return this.segment(e,t,r)};var S=i.query;return i.query=function(e,t){if(!0===e)return o.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if("function"==typeof e){var r=o.parseQuery(this._parts.query,this._parts.escapeQuerySpace),n=e.call(this,r);return this._parts.query=o.buildQuery(n||r,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!t),this}return void 0!==e&&"string"!=typeof e?(this._parts.query=o.buildQuery(e,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!t),this):S.call(this,e,t)},i.setQuery=function(e,t,r){var n=o.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if("string"==typeof e||e instanceof String)n[e]=void 0!==t?t:null;else{if("object"!=typeof e)throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");for(var a in e)s.call(e,a)&&(n[a]=e[a])}return this._parts.query=o.buildQuery(n,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof e&&(r=t),this.build(!r),this},i.addQuery=function(e,t,r){var n=o.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return o.addQuery(n,e,void 0===t?null:t),this._parts.query=o.buildQuery(n,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof e&&(r=t),this.build(!r),this},i.removeQuery=function(e,t,r){var n=o.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return o.removeQuery(n,e,t),this._parts.query=o.buildQuery(n,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof e&&(r=t),this.build(!r),this},i.hasQuery=function(e,t,r){var n=o.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return o.hasQuery(n,e,t,r)},i.setSearch=i.setQuery,i.addSearch=i.addQuery,i.removeSearch=i.removeQuery,i.hasSearch=i.hasQuery,i.normalize=function(){return this._parts.urn?this.normalizeProtocol(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build():this.normalizeProtocol(!1).normalizeHostname(!1).normalizePort(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build()},i.normalizeProtocol=function(e){return"string"==typeof this._parts.protocol&&(this._parts.protocol=this._parts.protocol.toLowerCase(),this.build(!e)),this},i.normalizeHostname=function(r){return this._parts.hostname&&(this.is("IDN")&&e?this._parts.hostname=e.toASCII(this._parts.hostname):this.is("IPv6")&&t&&(this._parts.hostname=t.best(this._parts.hostname)),this._parts.hostname=this._parts.hostname.toLowerCase(),this.build(!r)),this},i.normalizePort=function(e){return"string"==typeof this._parts.protocol&&this._parts.port===o.defaultPorts[this._parts.protocol]&&(this._parts.port=null,this.build(!e)),this},i.normalizePath=function(e){var t,r=this._parts.path;if(!r)return this;if(this._parts.urn)return this._parts.path=o.recodeUrnPath(this._parts.path),this.build(!e),this;if("/"===this._parts.path)return this;var n,a,i="";for("/"!==(r=o.recodePath(r)).charAt(0)&&(t=!0,r="/"+r),"/.."!==r.slice(-3)&&"/."!==r.slice(-2)||(r+="/"),r=r.replace(/(\/(\.\/)+)|(\/\.$)/g,"/").replace(/\/{2,}/g,"/"),t&&(i=r.substring(1).match(/^(\.\.\/)+/)||"")&&(i=i[0]);-1!==(n=r.search(/\/\.\.(\/|$)/));)0!==n?(-1===(a=r.substring(0,n).lastIndexOf("/"))&&(a=n),r=r.substring(0,a)+r.substring(n+3)):r=r.substring(3);return t&&this.is("relative")&&(r=i+r.substring(1)),this._parts.path=r,this.build(!e),this},i.normalizePathname=i.normalizePath,i.normalizeQuery=function(e){return"string"==typeof this._parts.query&&(this._parts.query.length?this.query(o.parseQuery(this._parts.query,this._parts.escapeQuerySpace)):this._parts.query=null,this.build(!e)),this},i.normalizeFragment=function(e){return this._parts.fragment||(this._parts.fragment=null,this.build(!e)),this},i.normalizeSearch=i.normalizeQuery,i.normalizeHash=i.normalizeFragment,i.iso8859=function(){var e=o.encode,t=o.decode;o.encode=escape,o.decode=decodeURIComponent;try{this.normalize()}finally{o.encode=e,o.decode=t}return this},i.unicode=function(){var e=o.encode,t=o.decode;o.encode=b,o.decode=unescape;try{this.normalize()}finally{o.encode=e,o.decode=t}return this},i.readable=function(){var t=this.clone();t.username("").password("").normalize();var r="";if(t._parts.protocol&&(r+=t._parts.protocol+"://"),t._parts.hostname&&(t.is("punycode")&&e?(r+=e.toUnicode(t._parts.hostname),t._parts.port&&(r+=":"+t._parts.port)):r+=t.host()),t._parts.hostname&&t._parts.path&&"/"!==t._parts.path.charAt(0)&&(r+="/"),r+=t.path(!0),t._parts.query){for(var n="",a=0,i=t._parts.query.split("&"),s=i.length;a<s;a++){var l=(i[a]||"").split("=");n+="&"+o.decodeQuery(l[0],this._parts.escapeQuerySpace).replace(/&/g,"%26"),void 0!==l[1]&&(n+="="+o.decodeQuery(l[1],this._parts.escapeQuerySpace).replace(/&/g,"%26"))}r+="?"+n.substring(1)}return r+=o.decodeQuery(t.hash(),!0)},i.absoluteTo=function(e){var t,r,n,a=this.clone(),i=["protocol","username","password","hostname","port"];if(this._parts.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(e instanceof o||(e=new o(e)),a._parts.protocol)return a;if(a._parts.protocol=e._parts.protocol,this._parts.hostname)return a;for(r=0;n=i[r];r++)a._parts[n]=e._parts[n];return a._parts.path?(".."===a._parts.path.substring(-2)&&(a._parts.path+="/"),"/"!==a.path().charAt(0)&&(t=(t=e.directory())||(0===e.path().indexOf("/")?"/":""),a._parts.path=(t?t+"/":"")+a._parts.path,a.normalizePath())):(a._parts.path=e._parts.path,a._parts.query||(a._parts.query=e._parts.query)),a.build(),a},i.relativeTo=function(e){var t,r,n,a,i,s=this.clone().normalize();if(s._parts.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(e=new o(e).normalize(),t=s._parts,r=e._parts,a=s.path(),i=e.path(),"/"!==a.charAt(0))throw new Error("URI is already relative");if("/"!==i.charAt(0))throw new Error("Cannot calculate a URI relative to another relative URI");if(t.protocol===r.protocol&&(t.protocol=null),t.username!==r.username||t.password!==r.password)return s.build();if(null!==t.protocol||null!==t.username||null!==t.password)return s.build();if(t.hostname!==r.hostname||t.port!==r.port)return s.build();if(t.hostname=null,t.port=null,a===i)return t.path="",s.build();if(!(n=o.commonPath(a,i)))return s.build();var l=r.path.substring(n.length).replace(/[^\/]*$/,"").replace(/.*?\//g,"../");return t.path=l+t.path.substring(n.length)||"./",s.build()},i.equals=function(e){var t,r,n,a,i,l=this.clone(),c=new o(e),d={};if(l.normalize(),c.normalize(),l.toString()===c.toString())return!0;if(n=l.query(),a=c.query(),l.query(""),c.query(""),l.toString()!==c.toString())return!1;if(n.length!==a.length)return!1;for(i in t=o.parseQuery(n,this._parts.escapeQuerySpace),r=o.parseQuery(a,this._parts.escapeQuerySpace),t)if(s.call(t,i)){if(u(t[i])){if(!p(t[i],r[i]))return!1}else if(t[i]!==r[i])return!1;d[i]=!0}for(i in r)if(s.call(r,i)&&!d[i])return!1;return!0},i.preventInvalidHostname=function(e){return this._parts.preventInvalidHostname=!!e,this},i.duplicateQueryParameters=function(e){return this._parts.duplicateQueryParameters=!!e,this},i.escapeQuerySpace=function(e){return this._parts.escapeQuerySpace=!!e,this},o}))},305:function(e,t,r){"use strict";r.d(t,"a",(function(){return d}));var n=r(0),a=r.n(n),o=r(51),i=r(15),s=r(348),l=r(25),c=r(706),u=r(1);var d;!function(e){e[e.Default=0]="Default",e[e.Small=1]="Small"}(d||(d={}));const h=o.c.div`
  margin: ${({theme:e})=>40*e.gridUnit}px 0;
`,p=o.c.div`
  ${({scrollTable:e,theme:t})=>e&&`\n    height: 300px;\n    margin-bottom: ${4*t.gridUnit}px;\n    overflow: auto;\n  `}

  .table-cell.table-cell {
    vertical-align: top;
  }

  .pagination-container {
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    background-color: ${({theme:e})=>e.colors.grayscale.light5};

    ${({theme:e,isPaginationSticky:t})=>t&&`\n        position: sticky;\n        bottom: ${4*e.gridUnit}px;\n        left: 0;\n    `};
  }

  .row-count-container {
    margin-top: ${({theme:e})=>2*e.gridUnit}px;
    color: ${({theme:e})=>e.colors.grayscale.base};
  }
`,f=({columns:e,data:t,pageSize:r,initialPageIndex:n,initialSortBy:o=[],loading:f=!1,withPagination:g=!0,emptyWrapperType:b=d.Default,noDataText:m,showRowCount:v=!0,...y})=>{const O={pageSize:null!=r?r:10,pageIndex:null!=n?n:0,sortBy:o},{getTableProps:x,getTableBodyProps:w,headerGroups:C,page:_,rows:j,prepareRow:S,pageCount:E,gotoPage:k,state:{pageIndex:T,pageSize:M}}=Object(s.useTable)({columns:e,data:t,initialState:O},s.useFilters,s.useSortBy,s.usePagination),R=g?_:j;let A;switch(b){case d.Small:A=({children:e})=>Object(u.f)(a.a.Fragment,null,e);break;case d.Default:default:A=({children:e})=>Object(u.f)(h,null,e)}const D=!f&&0===R.length;return Object(u.f)(p,y,Object(u.f)(c.b,{getTableProps:x,getTableBodyProps:w,prepareRow:S,headerGroups:C,rows:R,columns:e,loading:f}),D&&Object(u.f)(A,null,m?Object(u.f)(l.k,{image:l.k.PRESENTED_IMAGE_SIMPLE,description:m}):Object(u.f)(l.k,{image:l.k.PRESENTED_IMAGE_SIMPLE})),E>1&&g&&Object(u.f)("div",{className:"pagination-container"},Object(u.f)(c.a,{totalPages:E||0,currentPage:E?T+1:0,onChange:e=>k(e-1),hideFirstAndLastPageLinks:!0}),v&&Object(u.f)("div",{className:"row-count-container"},!f&&Object(i.e)("%s-%s of %s",M*T+(_.length&&1),M*T+_.length,t.length))))};t.b=a.a.memo(f)},310:function(e,t,r){"use strict";var n=r(305);r.d(t,"a",(function(){return n.a})),r.d(t,"b",(function(){return n.b}))},311:function(e,t,r){"use strict";r.d(t,"c",(function(){return n})),r.d(t,"a",(function(){return a})),r.d(t,"b",(function(){return o})),r.d(t,"d",(function(){return i}));const n="UPDATE_DATA_MASK",a="SET_DATA_MASK_FOR_FILTER_CONFIG_COMPLETE",o="SET_DATA_MASK_FOR_FILTER_CONFIG_FAIL";function i(e,t){return{type:n,filterId:e,...t}}},347:function(e,t,r){"use strict";r.d(t,"a",(function(){return d}));var n=r(0),a=r.n(n),o=r(2),i=r.n(o),s=r(15),l=r(550),c=r(1);const u={children:i.a.node.isRequired,onError:i.a.func,showMessage:i.a.bool};class d extends a.a.Component{constructor(e){super(e),this.state={error:null,info:null}}componentDidCatch(e,t){this.props.onError(e,t),this.setState({error:e,info:t})}render(){const{error:e,info:t}=this.state;if(e){const r=e.toString(),n=Object(c.f)("span",null,Object(c.f)("strong",null,Object(s.e)("Unexpected error")),r?`: ${r}`:"");return this.props.showMessage?Object(c.f)(l.a,{subtitle:n,copyText:n,stackTrace:t?t.componentStack:null}):null}return this.props.children}}d.propTypes=u,d.defaultProps={onError:()=>{},showMessage:!0}},352:function(e,t,r){"use strict";r.d(t,"a",(function(){return h}));r(39);var n=r(31),a=r.n(n),o=r(63),i=r.n(o),s=r(0),l=r.n(s),c=r(142),u=r(1);function d({width:e,height:t,showLoadingForImport:r=!1,placeholderStyle:n}){return t&&Object(u.f)("div",{key:"async-asm-placeholder",style:{width:e,height:t,...n}},r&&Object(u.f)(c.a,{position:"floating"}))||null}function h(e,t=d){let r,n;function o(){return r||(r=e instanceof i.a?e:e()),n||r.then(e=>{n=e.default||e}),r}const c=l.a.forwardRef((function(e,r){const[i,l]=Object(s.useState)(void 0!==n);Object(s.useEffect)(()=>{let e=!0;return i||o().then(()=>{e&&l(!0)}),()=>{e=!1}});const c=n||t;return c?Object(u.f)(c,a()({ref:c===n?r:null},e)):null}));return c.preload=o,c}},40:function(e,t,r){"use strict";r.d(t,"d",(function(){return n})),r.d(t,"e",(function(){return a})),r.d(t,"h",(function(){return o})),r.d(t,"i",(function(){return i})),r.d(t,"v",(function(){return s})),r.d(t,"t",(function(){return l})),r.d(t,"u",(function(){return c})),r.d(t,"w",(function(){return u})),r.d(t,"x",(function(){return d})),r.d(t,"y",(function(){return h})),r.d(t,"z",(function(){return p})),r.d(t,"B",(function(){return f})),r.d(t,"A",(function(){return g})),r.d(t,"g",(function(){return b})),r.d(t,"k",(function(){return m})),r.d(t,"n",(function(){return v})),r.d(t,"l",(function(){return y})),r.d(t,"o",(function(){return O})),r.d(t,"p",(function(){return x})),r.d(t,"m",(function(){return w})),r.d(t,"E",(function(){return C})),r.d(t,"s",(function(){return _})),r.d(t,"r",(function(){return j})),r.d(t,"c",(function(){return S})),r.d(t,"b",(function(){return E})),r.d(t,"F",(function(){return k})),r.d(t,"D",(function(){return T})),r.d(t,"C",(function(){return M})),r.d(t,"f",(function(){return R})),r.d(t,"q",(function(){return A})),r.d(t,"a",(function(){return D})),r.d(t,"j",(function(){return P}));const n="GRID_ID",a="HEADER_ID",o="ROOT_ID",i="DASHBOARD_VERSION_KEY",s="NEW_COMPONENTS_SOURCE_ID",l="NEW_CHART_ID",c="NEW_COLUMN_ID",u="NEW_DIVIDER_ID",d="NEW_HEADER_ID",h="NEW_MARKDOWN_ID",p="NEW_ROW_ID",f="NEW_TAB_ID",g="NEW_TABS_ID",b=0,m=8,v=2*m,y=12,O=1,x=5,w=4,C="SMALL_HEADER",_="MEDIUM_HEADER",j="LARGE_HEADER",S="BACKGROUND_WHITE",E="BACKGROUND_TRANSPARENT",k=50,T="overwrite",M="newDashboard",R=65535,A=["LABEL"],D="ALL_FILTERS_ROOT";var P;!function(e){e[e.HIDE_NAV=1]="HIDE_NAV",e[e.HIDE_NAV_AND_TITLE=2]="HIDE_NAV_AND_TITLE"}(P||(P={}))},488:function(e,t,r){"use strict";r.d(t,"b",(function(){return u})),r.d(t,"a",(function(){return d}));var n=r(552),a=r.n(n),o=r(29),i=r.n(o),s=r(70),l=r.n(s),c=r(41);const u=function(){var e;const t=document.getElementById("app");if(!t)return[];const r=JSON.parse(t.getAttribute("data-bootstrap"));Object(c.b)(null==r?void 0:null==(e=r.common)?void 0:e.feature_flags);const n=new l.a([window.location.hostname]);var o;return Object(c.c)(c.a.ALLOW_DASHBOARD_DOMAIN_SHARDING)&&r&&r.common&&r.common.conf&&r.common.conf.SUPERSET_WEBSERVER_DOMAINS&&i()(o=r.common.conf.SUPERSET_WEBSERVER_DOMAINS).call(o,e=>{n.add(e)}),a()(n)}(),d=u.length>1},512:function(e,t,r){"use strict";r.d(t,"b",(function(){return p})),r.d(t,"a",(function(){return f}));var n,a=r(43),o=r.n(a),i=r(69),s=r.n(i),l=r(29),c=r.n(l),u=r(273),d=r(243),h=r(748);function p(e,t){const r={...t},n=r.viz_type||"table";!function(e){e.y_axis_zero&&(e.y_axis_bounds=[0,null])}(r);const a=Object(d.b)(n,e.datasource.type,e,r),o=Object(u.a)().get(n)||{};return o.onInit?o.onInit(a):a}function f(e){var t,r;const n=e.datasource.split("__")[1],a=e.viz_type,i=Object(d.b)(a,n,null,{...e}),l=Object(d.e)(i),u={};return c()(t=s()(r=o()(i)).call(r,o()(e))).call(t,t=>{void 0===e[t]?u[t]=l[t]:u[t]=e[t]}),u}const g={...h.a};c()(n=o()(h.a)).call(n,e=>{g[e].value=h.a[e].default});Object(d.e)(g)},518:function(e,t,r){"use strict";r.d(t,"e",(function(){return I})),r.d(t,"f",(function(){return F})),r.d(t,"d",(function(){return N})),r.d(t,"c",(function(){return H})),r.d(t,"b",(function(){return q})),r.d(t,"a",(function(){return z}));r(870),r(39);var n,a=r(56),o=r.n(a),i=r(57),s=r.n(i),l=r(139),c=r.n(l),u=r(102),d=r.n(u),h=r(34),p=r.n(h),f=r(36),g=r.n(f),b=r(55),m=r.n(b),v=r(85),y=r.n(v),O=r(69),x=r.n(O),w=r(11),C=r.n(w),_=r(60),j=r.n(_),S=r(97),E=r.n(S),k=r(0),T=r(68),M=r(15),R=r(212),A=r(140),D=r(250),P=r(71);function I(e,t,r,n=!0,a=[],o){const[i,s]=Object(k.useState)({count:0,collection:a,loading:!0,lastFetchDataConfig:null,permissions:[],bulkSelectEnabled:!1});function l(e){s(t=>({...t,...e}))}Object(k.useEffect)(()=>{n&&T.a.get({endpoint:`/api/v1/${e}/_info?q=${E.a.encode({keys:["permissions"]})}`}).then(({json:e={}})=>{l({permissions:e.permissions})},Object(A.c)(e=>r(Object(M.e)("An error occurred while fetching %s info: %s",t,e))))},[]);const c=Object(k.useCallback)(({pageIndex:n,pageSize:a,sortBy:i,filters:s})=>{var c,u;l({lastFetchDataConfig:{filters:s,pageIndex:n,pageSize:a,sortBy:i},loading:!0});const d=C()(c=x()(u=o||[]).call(u,s)).call(c,({id:e,operator:t,value:r})=>({col:e,opr:t,value:r})),h=E.a.encode({order_column:i[0].id,order_direction:i[0].desc?"desc":"asc",page:n,page_size:a,...d.length?{filters:d}:{}});return T.a.get({endpoint:`/api/v1/${e}/?q=${h}`}).then(({json:e={}})=>{l({collection:e.result,count:e.count,lastFetched:(new Date).toISOString()})},Object(A.c)(e=>r(Object(M.e)("An error occurred while fetching %ss: %s",t,e)))).finally(()=>{l({loading:!1})})},[o]);return{state:{loading:i.loading,resourceCount:i.count,resourceCollection:i.collection,bulkSelectEnabled:i.bulkSelectEnabled,lastFetched:i.lastFetched},setResourceCollection:e=>l({collection:e}),hasPerm:function(e){var t;return!!i.permissions.length&&Boolean(j()(t=i.permissions).call(t,t=>t===e))},fetchData:c,toggleBulkSelect:function(){l({bulkSelectEnabled:!i.bulkSelectEnabled})},refreshData:e=>i.lastFetchDataConfig?c(i.lastFetchDataConfig):e?c(e):null}}function F(e,t,r){const[n,a]=Object(k.useState)({loading:!1,resource:null,error:null});function o(e){a(t=>({...t,...e}))}return{state:n,setResource:e=>o({resource:e}),fetchResource:Object(k.useCallback)(n=>(o({loading:!0}),T.a.get({endpoint:`/api/v1/${e}/${n}`}).then(({json:e={}})=>(o({resource:e.result,error:null}),e.result),Object(A.c)(e=>{r(Object(M.e)("An error occurred while fetching %ss: %s",t,y()(e))),o({error:e})})).finally(()=>{o({loading:!1})})),[r,e,t]),createResource:Object(k.useCallback)(n=>(o({loading:!0}),T.a.post({endpoint:`/api/v1/${e}/`,body:y()(n),headers:{"Content-Type":"application/json"}}).then(({json:e={}})=>(o({resource:e.result,error:null}),e.id),Object(A.c)(e=>{r(Object(M.e)("An error occurred while creating %ss: %s",t,y()(e))),o({error:e})})).finally(()=>{o({loading:!1})})),[r,e,t]),updateResource:Object(k.useCallback)((n,a)=>(o({loading:!0}),T.a.put({endpoint:`/api/v1/${e}/${n}`,body:y()(a),headers:{"Content-Type":"application/json"}}).then(({json:e={}})=>(o({resource:e.result,error:null}),e.result),Object(A.c)(e=>(r(Object(M.e)("An error occurred while fetching %ss: %s",t,y()(e))),o({error:e}),e))).finally(()=>{o({loading:!1})})),[r,e,t]),clearError:()=>o({error:null})}}function N(e,t,r){const[n,a]=Object(k.useState)({loading:!1,passwordsNeeded:[],alreadyExists:[]});function o(e){a(t=>({...t,...e}))}const i=e=>"object"==typeof e&&m()(e._schema)&&1===e._schema.length&&"Must provide a password for the database"===e._schema[0],l=e=>"string"==typeof e&&g()(e).call(e,"already exists and `overwrite=true` was not passed"),u=e=>{var t,r;return C()(t=p()(r=d()(e)).call(r,([,e])=>i(e))).call(t,([e])=>e)},h=e=>{var t,r;return C()(t=p()(r=d()(e)).call(r,([,e])=>l(e))).call(t,([e])=>e)};return{state:n,importResource:Object(k.useCallback)((n,a={},d=!1)=>{o({loading:!0});const p=new FormData;return p.append("formData",n),a&&p.append("passwords",y()(a)),d&&p.append("overwrite","true"),T.a.post({endpoint:`/api/v1/${e}/import/`,body:p}).then(()=>!0).catch(e=>Object(P.a)(e).then(e=>{const n=e.message||e.error;return"string"==typeof n?(r(Object(M.e)("An error occurred while importing %s: %s",t,n)),!1):((e=>{var t;return c()(t=s()(e)).call(t,e=>!i(e)&&!l(e))})(n)?r(Object(M.e)("An error occurred while importing %s: %s",t,y()(n))):o({passwordsNeeded:u(n),alreadyExists:h(n)}),!1)})).finally(()=>{o({loading:!1})})},[])}}!function(e){e.CHART="slice",e.DASHBOARD="Dashboard"}(n||(n={}));const L={chart:Object(R.a)({requestType:"search",method:"GET",endpoint:"/api/v1/chart/favorite_status"}),dashboard:Object(R.a)({requestType:"search",method:"GET",endpoint:"/api/v1/dashboard/favorite_status"})};function H(e,t,r){const[a,i]=Object(k.useState)({}),s=e=>i(t=>({...t,...e}));return Object(k.useEffect)(()=>{t.length&&L[e](`q=${E.a.encode(t)}`).then(({result:e})=>{const t=o()(e).call(e,(e,t)=>(e[t.id]=t.value,e),{});s(t)},Object(A.c)(e=>r(Object(M.e)("There was an error fetching the favorite status: %s",e))))},[t]),[Object(k.useCallback)((t,a)=>{const o=a?"unselect":"select";T.a.get({endpoint:`/superset/favstar/${"chart"===e?n.CHART:n.DASHBOARD}/${t}/${o}/`}).then(({json:e})=>{s({[t]:(null==e?void 0:e.count)>0})},Object(A.c)(e=>r(Object(M.e)("There was an error saving the favorite status: %s",e))))},[e]),a]}const q=(e,t)=>{const[r,n]=Object(k.useState)(null);return{sliceCurrentlyEditing:r,handleChartUpdated:function(r){const n=C()(t).call(t,e=>e.id===r.id?{...e,...r}:e);e(n)},openChartEditModal:function(e){n({slice_id:e.id,slice_name:e.slice_name,description:e.description,cache_timeout:e.cache_timeout})},closeChartEditModal:function(){n(null)}}},z=(e,t,r)=>{Object(D.a)(`${window.location.origin}/superset/sqllab?savedQueryId=${e}`).then(()=>{r(Object(M.e)("Link Copied!"))}).catch(()=>{t(Object(M.e)("Sorry, your browser does not support copying."))})}},525:function(e,t,r){"use strict";var n=r(11),a=r.n(n),o=r(69),i=r.n(o),s=r(156);const l=["AND","AS","ASC","AVG","BY","CASE","COUNT","CREATE","CROSS","DATABASE","DEFAULT","DELETE","DESC","DISTINCT","DROP","ELSE","END","FOREIGN","FROM","GRANT","GROUP","HAVING","IF","INNER","INSERT","JOIN","KEY","LEFT","LIMIT","MAX","MIN","NATURAL","NOT","NULL","OFFSET","ON","OR","ORDER","OUTER","PRIMARY","REFERENCES","RIGHT","SELECT","SUM","TABLE","THEN","TYPE","UNION","UPDATE","WHEN","WHERE"],c=i()(l).call(l,["BIGINT","BINARY","BIT","CHAR","DATE","DECIMAL","DOUBLE","FLOAT","INT","INTEGER","MONEY","NUMBER","NUMERIC","REAL","SET","TEXT","TIMESTAMP","VARCHAR"]),u=a()(c).call(c,e=>({meta:"sql",name:e,score:s.l,value:e}));t.a=u},54:function(e,t,r){"use strict";function n(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),a=2;a<r;a++)n[a-2]=arguments[a];if(!e){var o;if(void 0===t)o=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var i=0;(o=new Error(t.replace(/%s/g,(function(){return n[i++]})))).name="Invariant Violation"}throw o.framesToPop=1,o}}r.d(t,"a",(function(){return n}))},550:function(e,t,r){"use strict";r.d(t,"a",(function(){return u}));var n=r(0),a=r.n(n),o=r(15),i=r(272),s=r(134),l=r(1);const c=Object(o.e)("Unexpected error");function u({title:e=c,error:t,subtitle:r,copyText:n,link:o,stackTrace:u,source:d}){if(t){const e=Object(i.a)().get(t.error_type);if(e)return Object(l.f)(e,{error:t,source:d})}return Object(l.f)(s.a,{level:"warning",title:e,subtitle:r,copyText:n,source:d,body:o||u?Object(l.f)(a.a.Fragment,null,o&&Object(l.f)("a",{href:o,target:"_blank",rel:"noopener noreferrer"},"(Request Access)"),Object(l.f)("br",null),u&&Object(l.f)("pre",null,u)):void 0})}},554:function(e,t,r){"use strict";r.d(t,"a",(function(){return Ne})),r.d(t,"b",(function(){return Le}));var n=r(0),a=r(58),o="dnd-core/INIT_COORDS",i="dnd-core/BEGIN_DRAG",s="dnd-core/PUBLISH_DRAG_SOURCE",l="dnd-core/HOVER",c="dnd-core/DROP",u="dnd-core/END_DRAG",d=function(e,t){return e===t};function h(e,t){return!e&&!t||!(!e||!t)&&(e.x===t.x&&e.y===t.y)}function p(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:d;if(e.length!==t.length)return!1;for(var n=0;n<e.length;++n)if(!r(e[n],t[n]))return!1;return!0}function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){b(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function b(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var m={initialSourceClientOffset:null,initialClientOffset:null,clientOffset:null};function v(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1?arguments[1]:void 0,r=t.payload;switch(t.type){case o:case i:return{initialSourceClientOffset:r.sourceClientOffset,initialClientOffset:r.clientOffset,clientOffset:r.clientOffset};case l:return h(e.clientOffset,r.clientOffset)?e:g(g({},e),{},{clientOffset:r.clientOffset});case u:case c:return m;default:return e}}var y="dnd-core/ADD_SOURCE",O="dnd-core/ADD_TARGET",x="dnd-core/REMOVE_SOURCE",w="dnd-core/REMOVE_TARGET";function C(e){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(e,t,r){return t.split(".").reduce((function(e,t){return e&&e[t]?e[t]:r||null}),e)}function j(e,t){return e.filter((function(e){return e!==t}))}function S(e){return"object"===C(e)}function E(e,t){var r=new Map,n=function(e){r.set(e,r.has(e)?r.get(e)+1:1)};e.forEach(n),t.forEach(n);var a=[];return r.forEach((function(e,t){1===e&&a.push(t)})),a}function k(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function T(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?k(Object(r),!0).forEach((function(t){M(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function M(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var R={itemType:null,item:null,sourceId:null,targetIds:[],dropResult:null,didDrop:!1,isSourcePublic:null};function A(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,t=arguments.length>1?arguments[1]:void 0,r=t.payload;switch(t.type){case i:return T(T({},e),{},{itemType:r.itemType,item:r.item,sourceId:r.sourceId,isSourcePublic:r.isSourcePublic,dropResult:null,didDrop:!1});case s:return T(T({},e),{},{isSourcePublic:!0});case l:return T(T({},e),{},{targetIds:r.targetIds});case w:return-1===e.targetIds.indexOf(r.targetId)?e:T(T({},e),{},{targetIds:j(e.targetIds,r.targetId)});case c:return T(T({},e),{},{dropResult:r.dropResult,didDrop:!0,targetIds:[]});case u:return T(T({},e),{},{itemType:null,item:null,sourceId:null,dropResult:null,didDrop:!1,isSourcePublic:null,targetIds:[]});default:return e}}function D(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case y:case O:return e+1;case x:case w:return e-1;default:return e}}var P=[],I=[];function F(e,t){return e!==P&&(e===I||void 0===t||(r=e,t.filter((function(e){return r.indexOf(e)>-1}))).length>0);var r}function N(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var e=arguments.length>1?arguments[1]:void 0;switch(e.type){case l:break;case y:case O:case w:case x:return P;case i:case s:case u:case c:default:return I}var t=e.payload,r=t.targetIds,n=void 0===r?[]:r,a=t.prevTargetIds,o=void 0===a?[]:a,d=E(n,o),h=d.length>0||!p(n,o);if(!h)return P;var f=o[o.length-1],g=n[n.length-1];return f!==g&&(f&&d.push(f),g&&d.push(g)),d}function L(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return e+1}function H(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function q(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?H(Object(r),!0).forEach((function(t){z(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):H(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function z(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function B(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return{dirtyHandlerIds:N(e.dirtyHandlerIds,{type:t.type,payload:q(q({},t.payload),{},{prevTargetIds:_(e,"dragOperation.targetIds",[])})}),dragOffset:v(e.dragOffset,t),refCount:D(e.refCount,t),dragOperation:A(e.dragOperation,t),stateId:L(e.stateId)}}P.__IS_NONE__=!0,I.__IS_ALL__=!0;var U=r(54);function $(e,t){return{type:o,payload:{sourceClientOffset:t||null,clientOffset:e||null}}}var G={type:o,payload:{clientOffset:null,sourceClientOffset:null}};function V(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{publishSource:!0},n=r.publishSource,a=void 0===n||n,o=r.clientOffset,s=r.getSourceClientOffset,l=e.getMonitor(),c=e.getRegistry();e.dispatch($(o)),Q(t,l,c);var u=X(t,l);if(null!==u){var d=null;if(o){if(!s)throw new Error("getSourceClientOffset must be defined");W(s),d=s(u)}e.dispatch($(o,d));var h=c.getSource(u),p=h.beginDrag(l,u);Y(p),c.pinSource(u);var f=c.getSourceType(u);return{type:i,payload:{itemType:f,item:p,sourceId:u,clientOffset:o||null,sourceClientOffset:d||null,isSourcePublic:!!a}}}e.dispatch(G)}}function Q(e,t,r){Object(U.a)(!t.isDragging(),"Cannot call beginDrag while dragging."),e.forEach((function(e){Object(U.a)(r.getSource(e),"Expected sourceIds to be registered.")}))}function W(e){Object(U.a)("function"==typeof e,"When clientOffset is provided, getSourceClientOffset must be a function.")}function Y(e){Object(U.a)(S(e),"Item must be an object.")}function X(e,t){for(var r=null,n=e.length-1;n>=0;n--)if(t.canDragSource(e[n])){r=e[n];break}return r}function K(e){return function(){if(e.getMonitor().isDragging())return{type:s}}}function Z(e,t){return null===t?null===e:Array.isArray(e)?e.some((function(e){return e===t})):e===t}function J(e){return function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.clientOffset;ee(t);var a=t.slice(0),o=e.getMonitor(),i=e.getRegistry();te(a,o,i);var s=o.getItemType();return re(a,i,s),ne(a,o,i),{type:l,payload:{targetIds:a,clientOffset:n||null}}}}function ee(e){Object(U.a)(Array.isArray(e),"Expected targetIds to be an array.")}function te(e,t,r){Object(U.a)(t.isDragging(),"Cannot call hover while not dragging."),Object(U.a)(!t.didDrop(),"Cannot call hover after drop.");for(var n=0;n<e.length;n++){var a=e[n];Object(U.a)(e.lastIndexOf(a)===n,"Expected targetIds to be unique in the passed array.");var o=r.getTarget(a);Object(U.a)(o,"Expected targetIds to be registered.")}}function re(e,t,r){for(var n=e.length-1;n>=0;n--){var a=e[n];Z(t.getTargetType(a),r)||e.splice(n,1)}}function ne(e,t,r){e.forEach((function(e){r.getTarget(e).hover(t,e)}))}function ae(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function oe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ae(Object(r),!0).forEach((function(t){ie(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ae(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ie(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function se(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.getMonitor(),n=e.getRegistry();le(r);var a=ue(r);a.forEach((function(a,o){var i=ce(a,o,n,r),s={type:c,payload:{dropResult:oe(oe({},t),i)}};e.dispatch(s)}))}}function le(e){Object(U.a)(e.isDragging(),"Cannot call drop while not dragging."),Object(U.a)(!e.didDrop(),"Cannot call drop twice during one drag operation.")}function ce(e,t,r,n){var a=r.getTarget(e),o=a?a.drop(n,e):void 0;return function(e){Object(U.a)(void 0===e||S(e),"Drop result must either be an object or undefined.")}(o),void 0===o&&(o=0===t?{}:n.getDropResult()),o}function ue(e){var t=e.getTargetIds().filter(e.canDropOnTarget,e);return t.reverse(),t}function de(e){return function(){var t=e.getMonitor(),r=e.getRegistry();!function(e){Object(U.a)(e.isDragging(),"Cannot call endDrag while not dragging.")}(t);var n=t.getSourceId();null!=n&&(r.getSource(n,!0).endDrag(t,n),r.unpinSource());return{type:u}}}function he(e,t){return{x:e.x-t.x,y:e.y-t.y}}function pe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var fe,ge=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.store=t,this.registry=r}var t,r,n;return t=e,(r=[{key:"subscribeToStateChange",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{handlerIds:void 0},n=r.handlerIds;Object(U.a)("function"==typeof e,"listener must be a function."),Object(U.a)(void 0===n||Array.isArray(n),"handlerIds, when specified, must be an array of strings.");var a=this.store.getState().stateId,o=function(){var r=t.store.getState(),o=r.stateId;try{o===a||o===a+1&&!F(r.dirtyHandlerIds,n)||e()}finally{a=o}};return this.store.subscribe(o)}},{key:"subscribeToOffsetChange",value:function(e){var t=this;Object(U.a)("function"==typeof e,"listener must be a function.");var r=this.store.getState().dragOffset;return this.store.subscribe((function(){var n=t.store.getState().dragOffset;n!==r&&(r=n,e())}))}},{key:"canDragSource",value:function(e){if(!e)return!1;var t=this.registry.getSource(e);return Object(U.a)(t,"Expected to find a valid source."),!this.isDragging()&&t.canDrag(this,e)}},{key:"canDropOnTarget",value:function(e){if(!e)return!1;var t=this.registry.getTarget(e);return Object(U.a)(t,"Expected to find a valid target."),!(!this.isDragging()||this.didDrop())&&Z(this.registry.getTargetType(e),this.getItemType())&&t.canDrop(this,e)}},{key:"isDragging",value:function(){return Boolean(this.getItemType())}},{key:"isDraggingSource",value:function(e){if(!e)return!1;var t=this.registry.getSource(e,!0);return Object(U.a)(t,"Expected to find a valid source."),!(!this.isDragging()||!this.isSourcePublic())&&this.registry.getSourceType(e)===this.getItemType()&&t.isDragging(this,e)}},{key:"isOverTarget",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{shallow:!1};if(!e)return!1;var r=t.shallow;if(!this.isDragging())return!1;var n=this.registry.getTargetType(e),a=this.getItemType();if(a&&!Z(n,a))return!1;var o=this.getTargetIds();if(!o.length)return!1;var i=o.indexOf(e);return r?i===o.length-1:i>-1}},{key:"getItemType",value:function(){return this.store.getState().dragOperation.itemType}},{key:"getItem",value:function(){return this.store.getState().dragOperation.item}},{key:"getSourceId",value:function(){return this.store.getState().dragOperation.sourceId}},{key:"getTargetIds",value:function(){return this.store.getState().dragOperation.targetIds}},{key:"getDropResult",value:function(){return this.store.getState().dragOperation.dropResult}},{key:"didDrop",value:function(){return this.store.getState().dragOperation.didDrop}},{key:"isSourcePublic",value:function(){return Boolean(this.store.getState().dragOperation.isSourcePublic)}},{key:"getInitialClientOffset",value:function(){return this.store.getState().dragOffset.initialClientOffset}},{key:"getInitialSourceClientOffset",value:function(){return this.store.getState().dragOffset.initialSourceClientOffset}},{key:"getClientOffset",value:function(){return this.store.getState().dragOffset.clientOffset}},{key:"getSourceClientOffset",value:function(){return e=this.store.getState().dragOffset,n=e.clientOffset,a=e.initialClientOffset,o=e.initialSourceClientOffset,n&&a&&o?he((r=o,{x:(t=n).x+r.x,y:t.y+r.y}),a):null;var e,t,r,n,a,o}},{key:"getDifferenceFromInitialOffset",value:function(){return e=this.store.getState().dragOffset,t=e.clientOffset,r=e.initialClientOffset,t&&r?he(t,r):null;var e,t,r}}])&&pe(t.prototype,r),n&&pe(t,n),e}(),be=0;function me(e){return(me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ve(e,t){t&&Array.isArray(e)?e.forEach((function(e){return ve(e,!1)})):Object(U.a)("string"==typeof e||"symbol"===me(e),t?"Type can only be a string, a symbol, or an array of either.":"Type can only be a string or a symbol.")}!function(e){e.SOURCE="SOURCE",e.TARGET="TARGET"}(fe||(fe={}));var ye=r(1078),Oe=[],xe=[],we=ye.a.makeRequestCallFromTimer((function(){if(xe.length)throw xe.shift()}));function Ce(e){var t;(t=Oe.length?Oe.pop():new _e).task=e,Object(ye.a)(t)}var _e=function(){function e(){}return e.prototype.call=function(){try{this.task.call()}catch(e){Ce.onerror?Ce.onerror(e):(xe.push(e),we())}finally{this.task=null,Oe[Oe.length]=this}},e}();function je(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Se(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(n=(i=s.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{n||null==s.return||s.return()}finally{if(a)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ee(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ee(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ee(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ke(e){var t=(be++).toString();switch(e){case fe.SOURCE:return"S".concat(t);case fe.TARGET:return"T".concat(t);default:throw new Error("Unknown Handler Role: ".concat(e))}}function Te(e){switch(e[0]){case"S":return fe.SOURCE;case"T":return fe.TARGET;default:Object(U.a)(!1,"Cannot parse handler ID: ".concat(e))}}function Me(e,t){var r=e.entries(),n=!1;do{var a=r.next(),o=a.done;if(Se(a.value,2)[1]===t)return!0;n=!!o}while(!n);return!1}var Re=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.types=new Map,this.dragSources=new Map,this.dropTargets=new Map,this.pinnedSourceId=null,this.pinnedSource=null,this.store=t}var t,r,n;return t=e,(r=[{key:"addSource",value:function(e,t){ve(e),function(e){Object(U.a)("function"==typeof e.canDrag,"Expected canDrag to be a function."),Object(U.a)("function"==typeof e.beginDrag,"Expected beginDrag to be a function."),Object(U.a)("function"==typeof e.endDrag,"Expected endDrag to be a function.")}(t);var r=this.addHandler(fe.SOURCE,e,t);return this.store.dispatch(function(e){return{type:y,payload:{sourceId:e}}}(r)),r}},{key:"addTarget",value:function(e,t){ve(e,!0),function(e){Object(U.a)("function"==typeof e.canDrop,"Expected canDrop to be a function."),Object(U.a)("function"==typeof e.hover,"Expected hover to be a function."),Object(U.a)("function"==typeof e.drop,"Expected beginDrag to be a function.")}(t);var r=this.addHandler(fe.TARGET,e,t);return this.store.dispatch(function(e){return{type:O,payload:{targetId:e}}}(r)),r}},{key:"containsHandler",value:function(e){return Me(this.dragSources,e)||Me(this.dropTargets,e)}},{key:"getSource",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Object(U.a)(this.isSourceId(e),"Expected a valid source ID.");var r=t&&e===this.pinnedSourceId,n=r?this.pinnedSource:this.dragSources.get(e);return n}},{key:"getTarget",value:function(e){return Object(U.a)(this.isTargetId(e),"Expected a valid target ID."),this.dropTargets.get(e)}},{key:"getSourceType",value:function(e){return Object(U.a)(this.isSourceId(e),"Expected a valid source ID."),this.types.get(e)}},{key:"getTargetType",value:function(e){return Object(U.a)(this.isTargetId(e),"Expected a valid target ID."),this.types.get(e)}},{key:"isSourceId",value:function(e){return Te(e)===fe.SOURCE}},{key:"isTargetId",value:function(e){return Te(e)===fe.TARGET}},{key:"removeSource",value:function(e){var t=this;Object(U.a)(this.getSource(e),"Expected an existing source."),this.store.dispatch(function(e){return{type:x,payload:{sourceId:e}}}(e)),Ce((function(){t.dragSources.delete(e),t.types.delete(e)}))}},{key:"removeTarget",value:function(e){Object(U.a)(this.getTarget(e),"Expected an existing target."),this.store.dispatch(function(e){return{type:w,payload:{targetId:e}}}(e)),this.dropTargets.delete(e),this.types.delete(e)}},{key:"pinSource",value:function(e){var t=this.getSource(e);Object(U.a)(t,"Expected an existing source."),this.pinnedSourceId=e,this.pinnedSource=t}},{key:"unpinSource",value:function(){Object(U.a)(this.pinnedSource,"No source is pinned at the time."),this.pinnedSourceId=null,this.pinnedSource=null}},{key:"addHandler",value:function(e,t,r){var n=ke(e);return this.types.set(n,t),e===fe.SOURCE?this.dragSources.set(n,r):e===fe.TARGET&&this.dropTargets.set(n,r),n}}])&&je(t.prototype,r),n&&je(t,n),e}();function Ae(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function De(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Pe(e){var t="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__;return Object(a.e)(B,e&&t&&t({name:"dnd-core",instanceId:"dnd-core"}))}var Ie=function(){function e(){var t=this,r=arguments.length>0&&void 0!==arguments[0]&&arguments[0];Ae(this,e),this.isSetUp=!1,this.handleRefCountChange=function(){var e=t.store.getState().refCount>0;t.backend&&(e&&!t.isSetUp?(t.backend.setup(),t.isSetUp=!0):!e&&t.isSetUp&&(t.backend.teardown(),t.isSetUp=!1))};var n=Pe(r);this.store=n,this.monitor=new ge(n,new Re(n)),n.subscribe(this.handleRefCountChange)}var t,r,n;return t=e,(r=[{key:"receiveBackend",value:function(e){this.backend=e}},{key:"getMonitor",value:function(){return this.monitor}},{key:"getBackend",value:function(){return this.backend}},{key:"getRegistry",value:function(){return this.monitor.registry}},{key:"getActions",value:function(){var e=this,t=this.store.dispatch,r=function(e){return{beginDrag:V(e),publishDragSource:K(e),hover:J(e),drop:se(e),endDrag:de(e)}}(this);return Object.keys(r).reduce((function(n,a){var o,i=r[a];return n[a]=(o=i,function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];var i=o.apply(e,n);void 0!==i&&t(i)}),n}),{})}},{key:"dispatch",value:function(e){this.store.dispatch(e)}}])&&De(t.prototype,r),n&&De(t,n),e}();function Fe(e,t,r,n){var a=new Ie(n),o=e(a,t,r);return a.receiveBackend(o),a}var Ne=n.createContext({dragDropManager:void 0});function Le(e,t,r,n){return{dragDropManager:Fe(e,t,r,n)}}},745:function(e,t,r){"use strict";function n(e,t,r){var n=r.getRegistry(),a=n.addTarget(e,t);return[a,function(){return n.removeTarget(a)}]}function a(e,t,r){var n=r.getRegistry(),a=n.addSource(e,t);return[a,function(){return n.removeSource(a)}]}r.d(t,"b",(function(){return n})),r.d(t,"a",(function(){return a}))},748:function(e,t,r){"use strict";r.d(t,"a",(function(){return k}));var n=r(242),a=r.n(n),o=r(92),i=r.n(o),s=r(11),l=r.n(s),c=(r(208),r(34)),u=r.n(c),d=r(59),h=r.n(d),p=(r(0),r(240)),f=r(523),g=r(15),b=r(545),m=r(509),v=r(172),y=r(192),O=r(47),x=r(1);const w=Object(p.a)(),C=Object(f.a)(),_={verbose_name:"Time",column_name:"__timestamp",description:Object(g.e)("A reference to the [Time] configuration, taking granularity into account")},j={type:"SelectControl",multi:!0,freeForm:!0,label:Object(g.e)("Group by"),default:[],includeTime:!1,description:Object(g.e)("One or many controls to group by"),optionRenderer:e=>Object(x.f)(v.a,{column:e,showType:!0}),valueRenderer:e=>Object(x.f)(v.a,{column:e}),valueKey:"column_name",allowAll:!0,filterOption:({data:e},t)=>{var r,n;return e.column_name&&h()(r=e.column_name.toLowerCase()).call(r,t.toLowerCase())>=0||e.verbose_name&&h()(n=e.verbose_name.toLowerCase()).call(n,t.toLowerCase())>=0},promptTextCreator:e=>e,mapStateToProps:(e,t)=>{const r={};var n;e.datasource&&(r.options=u()(n=e.datasource.columns).call(n,e=>e.groupby),t&&t.includeTime&&r.options.push(_));return r},commaChoosesOption:!1},S={type:"MetricsControl",multi:!0,label:Object(g.e)("Metrics"),validators:[b.a],default:e=>{const t=Object(y.d)(e.savedMetrics);return t?[t]:null},mapStateToProps:e=>{const{datasource:t}=e;return{columns:t?t.columns:[],savedMetrics:t?t.metrics:[],datasourceType:t&&t.type}},description:Object(g.e)("One or many metrics to display")},E={...S,multi:!1,label:Object(g.e)("Metric"),description:Object(g.e)("Metric"),default:e=>Object(y.d)(e.savedMetrics)};const k={metrics:S,metric:E,datasource:{type:"DatasourceControl",label:Object(g.e)("Dataset"),default:null,description:null,mapStateToProps:({datasource:e})=>({datasource:e,isEditable:!!e})},viz_type:{type:"VizTypeControl",label:Object(g.e)("Visualization type"),default:"table",description:Object(g.e)("The type of visualization to display")},color_picker:{label:Object(g.e)("Fixed color"),description:Object(g.e)("Use this to define a static color for all circles"),type:"ColorPickerControl",default:{r:0,g:122,b:135,a:1},renderTrigger:!0},metric_2:{...E,label:Object(g.e)("Right axis metric"),clearable:!0,description:Object(g.e)("Choose a metric for right axis")},linear_color_scheme:{type:"ColorSchemeControl",label:Object(g.e)("Linear color scheme"),choices:()=>{var e;return l()(e=i()(C).call(C)).call(e,e=>[e.id,e.label])},default:C.getDefaultKey(),clearable:!1,description:"",renderTrigger:!0,schemes:()=>C.getMap(),isLinear:!0},secondary_metric:{...E,label:Object(g.e)("Color metric"),default:null,validators:[],description:Object(g.e)("A metric to use for color")},groupby:j,columns:{...j,label:Object(g.e)("Columns"),description:Object(g.e)("One or many controls to pivot as columns")},druid_time_origin:{type:"SelectControl",freeForm:!0,label:O.n.druid_time_origin,choices:[["","default"],["now","now"]],default:null,description:Object(g.e)("Defines the origin where time buckets start, accepts natural dates as in `now`, `sunday` or `1970-01-01`")},granularity:{type:"SelectControl",freeForm:!0,label:O.n.granularity,default:"one day",choices:[[null,"all"],["PT5S","5 seconds"],["PT30S","30 seconds"],["PT1M","1 minute"],["PT5M","5 minutes"],["PT30M","30 minutes"],["PT1H","1 hour"],["PT6H","6 hour"],["P1D","1 day"],["P7D","7 days"],["P1W","week"],["week_starting_sunday","week starting Sunday"],["week_ending_saturday","week ending Saturday"],["P1M","month"],["P3M","quarter"],["P1Y","year"]],description:Object(g.e)("The time granularity for the visualization. Note that you can type and use simple natural language as in `10 seconds`, `1 day` or `56 weeks`")},granularity_sqla:{type:"SelectControl",label:O.n.granularity_sqla,description:Object(g.e)("The time column for the visualization. Note that you can define arbitrary expression that return a DATETIME column in the table. Also note that the filter below is applied against this column or expression"),clearable:!1,optionRenderer:e=>Object(x.f)(v.a,{column:e,showType:!0}),valueRenderer:e=>Object(x.f)(v.a,{column:e}),valueKey:"column_name",mapStateToProps:e=>{const t={};return e.datasource&&(t.choices=e.datasource.granularity_sqla,t.default=null,e.datasource.main_dttm_col?t.default=e.datasource.main_dttm_col:t.choices&&t.choices.length>0&&(t.default=t.choices[0].column_name)),t}},time_grain_sqla:{type:"SelectControl",label:O.n.time_grain_sqla,default:"P1D",description:Object(g.e)("The time granularity for the visualization. This applies a date transformation to alter your time column and defines a new time granularity. The options here are defined on a per database engine basis in the Superset source code."),mapStateToProps:e=>({choices:e.datasource?e.datasource.time_grain_sqla:null})},time_range:{type:"DateFilterControl",freeForm:!0,label:O.n.time_range,default:Object(g.e)("Last week"),description:Object(g.e)('The time range for the visualization. All relative times, e.g. "Last month", "Last 7 days", "now", etc. are evaluated on the server using the server\'s local time (sans timezone). All tooltips and placeholder times are expressed in UTC (sans timezone). The timestamps are then evaluated by the database using the engine\'s local timezone. Note one can explicitly set the timezone per the ISO 8601 format if specifying either the start and/or end time.'),mapStateToProps:({form_data:e})=>({endpoints:null==e?void 0:e.time_range_endpoints})},row_limit:{type:"SelectControl",freeForm:!0,label:Object(g.e)("Row limit"),validators:[m.a],default:1e4,choices:Object(y.a)([10,50,100,250,500,1e3,5e3,1e4,5e4])},limit:{type:"SelectControl",freeForm:!0,label:Object(g.e)("Series limit"),validators:[m.a],choices:Object(y.a)([0,5,10,25,50,100,500]),description:Object(g.e)("Limits the number of time series that get displayed. A sub query (or an extra phase where sub queries are not supported) is applied to limit the number of time series that get fetched and displayed. This feature is useful when grouping by high cardinality dimension(s).")},timeseries_limit_metric:{type:"MetricsControl",label:Object(g.e)("Sort by"),default:null,clearable:!0,description:Object(g.e)("Metric used to define the top series"),mapStateToProps:e=>({columns:e.datasource?e.datasource.columns:[],savedMetrics:e.datasource?e.datasource.metrics:[],datasourceType:e.datasource&&e.datasource.type})},series:{...j,label:Object(g.e)("Series"),multi:!1,default:null,description:Object(g.e)("Defines the grouping of entities. Each series is shown as a specific color on the chart and has a legend toggle")},entity:{...j,label:Object(g.e)("Entity"),default:null,multi:!1,validators:[b.a],description:Object(g.e)("This defines the element to be plotted on the chart")},x:{...E,label:Object(g.e)("X Axis"),description:Object(g.e)("Metric assigned to the [X] axis"),default:null},y:{...E,label:Object(g.e)("Y Axis"),default:null,description:Object(g.e)("Metric assigned to the [Y] axis")},size:{...E,label:Object(g.e)("Bubble size"),default:null},y_axis_format:{type:"SelectControl",freeForm:!0,label:Object(g.e)("Y Axis Format"),renderTrigger:!0,default:"SMART_NUMBER",choices:[["SMART_NUMBER","Adaptative formating"],["~g","Original value"],[",d",",d (12345.432 => 12,345)"],[".1s",".1s (12345.432 => 10k)"],[".3s",".3s (12345.432 => 12.3k)"],[",.1%",",.1% (12345.432 => 1,234,543.2%)"],[".3%",".3% (12345.432 => 1234543.200%)"],[".4r",".4r (12345.432 => 12350)"],[",.3f",",.3f (12345.432 => 12,345.432)"],["+,","+, (12345.432 => +12,345.432)"],["$,.2f","$,.2f (12345.432 => $12,345.43)"],["DURATION","Duration in ms (66000 => 1m 6s)"],["DURATION_SUB","Duration in ms (100.40008 => 100ms 400µs 80ns)"]],description:"D3 format syntax: https://github.com/d3/d3-format",mapStateToProps:e=>{const t=e.controls&&e.controls.comparison_type&&"percentage"===e.controls.comparison_type.value;return{warning:t?Object(g.e)('When `Calculation type` is set to "Percentage change", the Y Axis Format is forced to `.1%`'):null,disabled:t}}},adhoc_filters:{type:"AdhocFilterControl",label:Object(g.e)("Filters"),default:null,description:"",mapStateToProps:e=>{var t;return{columns:e.datasource?u()(t=e.datasource.columns).call(t,e=>e.filterable):[],savedMetrics:e.datasource?e.datasource.metrics:[],datasource:e.datasource}}},color_scheme:{type:"ColorSchemeControl",label:Object(g.e)("Color scheme"),default:w.getDefaultKey(),renderTrigger:!0,choices:()=>{var e;return l()(e=a()(w).call(w)).call(e,e=>[e,e])},description:Object(g.e)("The color scheme for rendering chart"),schemes:()=>w.getMap()},label_colors:{type:"ColorMapControl",label:Object(g.e)("Color map"),default:{},renderTrigger:!0,mapStateToProps:e=>({colorNamespace:e.form_data.color_namespace,colorScheme:e.form_data.color_scheme})}}},749:function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=r(0),a=r(54),o=r(554);function i(){var e=Object(n.useContext)(o.a).dragDropManager;return Object(a.a)(null!=e,"Expected drag drop context"),e}},80:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ReactCSS=t.loop=t.handleActive=t.handleHover=t.hover=void 0;var n=c(r(1363)),a=c(r(1364)),o=c(r(1365)),i=c(r(1366)),s=c(r(1367)),l=c(r(1368));function c(e){return e&&e.__esModule?e:{default:e}}t.hover=i.default,t.handleHover=i.default,t.handleActive=s.default,t.loop=l.default;var u=t.ReactCSS=function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];var s=(0,n.default)(r),l=(0,a.default)(e,s);return(0,o.default)(l)};t.default=u},810:function(e,t,r){"use strict";var n=r(31),a=r.n(n),o=r(12),i=r.n(o),s=r(0),l=r.n(s),c=r(2),u=r.n(c),d=r(76),h=r(15),p=r(68),f=r(71),g=r(1);const b={dataEndpoint:u.a.string.isRequired,onChange:u.a.func.isRequired,mutator:u.a.func.isRequired,onAsyncError:u.a.func,value:u.a.oneOfType([u.a.number,u.a.arrayOf(u.a.number)]),valueRenderer:u.a.func,placeholder:u.a.string,autoSelect:u.a.bool},m={placeholder:Object(h.e)("Select ..."),onAsyncError:()=>{}};class v extends l.a.PureComponent{constructor(e){var t;super(e),this.state={isLoading:!1,options:[]},this.onChange=i()(t=this.onChange).call(t,this)}componentDidMount(){this.fetchOptions()}onChange(e){this.props.onChange(e)}fetchOptions(){this.setState({isLoading:!0});const{mutator:e,dataEndpoint:t}=this.props;return p.a.get({endpoint:t}).then(({json:t})=>{const r=e?e(t):t;this.setState({options:r,isLoading:!1}),!this.props.value&&this.props.autoSelect&&r.length>0&&this.onChange(r[0])}).catch(e=>Object(f.a)(e).then(e=>{this.props.onAsyncError(e.error||e.statusText||e),this.setState({isLoading:!1})}))}render(){return Object(g.f)(d.f,a()({placeholder:this.props.placeholder,options:this.state.options,value:this.props.value,isLoading:this.state.isLoading,onChange:this.onChange,valueRenderer:this.props.valueRenderer},this.props))}}v.propTypes=b,v.defaultProps=m,t.a=v},824:function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e){return null!==e&&"object"===n(e)&&Object.prototype.hasOwnProperty.call(e,"current")}r.d(t,"a",(function(){return a}))},851:function(e,t,r){"use strict";r.d(t,"a",(function(){return v}));r(39);var n=r(11),a=r.n(n),o=r(12),i=r.n(o),s=r(746),l=r.n(s),c=r(0),u=r.n(c),d=r(2),h=r.n(d),p=r(76),f=r(53),g=r(86),b=(r(1153),r(1));const m={description:h.a.string,label:h.a.string.isRequired,name:h.a.string.isRequired,onChange:h.a.func,value:h.a.string,clearable:h.a.bool,default:h.a.string,choices:h.a.oneOfType([h.a.arrayOf(h.a.array),h.a.func]),schemes:h.a.oneOfType([h.a.object,h.a.func]),isLinear:h.a.bool};class v extends u.a.PureComponent{constructor(e){var t,r;super(e),this.onChange=i()(t=this.onChange).call(t,this),this.renderOption=i()(r=this.renderOption).call(r,this)}onChange(e){const t=e?e.value:null;this.props.onChange(t)}renderOption(e){const{isLinear:t}=this.props,r=this.schemes[e.value];let n=[];return r&&(n=t?r.getColors(10):r.colors),Object(b.f)(f.a,{id:`${r.id}-tooltip`,title:r.label},Object(b.f)("ul",{className:"color-scheme-container"},a()(n).call(n,(e,t)=>Object(b.f)("li",{key:`${r.id}-${t}`,style:{backgroundColor:e,border:`1px solid ${"white"===e?"black":e}`}}," "))))}render(){var e;const{schemes:t,choices:r}=this.props;this.schemes=l()(t)?t():t;const n=a()(e=l()(r)?r():r).call(e,([e,t])=>{var r;return{value:e,label:(null==(r=this.schemes[e])?void 0:r.label)||t}}),o={multi:!1,name:`select-${this.props.name}`,placeholder:`Select (${n.length})`,default:this.props.default,options:n,value:this.props.value,autosize:!1,clearable:this.props.clearable,onChange:this.onChange,optionRenderer:this.renderOption,valueRenderer:this.renderOption};return Object(b.f)("div",null,Object(b.f)(g.a,this.props),Object(b.f)(p.f,o))}}v.propTypes=m,v.defaultProps={choices:[],schemes:{},clearable:!1,onChange:()=>{}}},890:function(e,t,r){"use strict";r.d(t,"a",(function(){return u}));var n=r(251),a=r(286),o=r(0);function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(n=(i=s.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{n||null==s.return||s.return()}finally{if(a)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(n=(i=s.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{n||null==s.return||s.return()}finally{if(a)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function u(e,t,r){var s=l(function(e,t,r){var s=i(Object(o.useState)((function(){return t(e)})),2),l=s[0],c=s[1],u=Object(o.useCallback)((function(){var n=t(e);Object(a.a)(l,n)||(c(n),r&&r())}),[l,e,r]);return Object(n.a)(u,[]),[l,u]}(e,t,r),2),c=s[0],u=s[1];return Object(n.a)((function(){var t=e.getHandlerId();if(null!=t)return e.subscribeToStateChange(u,{handlerIds:[t]})}),[e,u]),c}},891:function(e,t,r){"use strict";r.d(t,"a",(function(){return l}));var n=r(0),a=r(54);function o(e,t){"function"==typeof e?e(t):e.current=t}function i(e,t){var r=e.ref;return Object(a.a)("string"!=typeof r,"Cannot connect React DnD to an element with an existing string ref. Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. Read more: https://facebook.github.io/react/docs/more-about-refs.html#the-ref-callback-attribute"),r?Object(n.cloneElement)(e,{ref:function(e){o(r,e),o(t,e)}}):Object(n.cloneElement)(e,{ref:t})}function s(e){if("string"!=typeof e.type){var t=e.type.displayName||e.type.name||"the component";throw new Error("Only native element nodes can now be passed to React DnD connectors."+"You can either wrap ".concat(t," into a <div>, or turn it into a ")+"drag source or a drop target itself.")}}function l(e){var t={};return Object.keys(e).forEach((function(r){var a=e[r];if(r.endsWith("Ref"))t[r]=e[r];else{var o=function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!Object(n.isValidElement)(t)){var a=t;return e(a,r),a}var o=t;s(o);var l=r?function(t){return e(t,r)}:e;return i(o,l)}}(a);t[r]=function(){return o}}})),t}},903:function(e,t,r){(function(e,n){var a;!function(o){t&&t.nodeType,e&&e.nodeType;var i="object"==typeof n&&n;i.global!==i&&i.window!==i&&i.self;var s,l=2147483647,c=/^xn--/,u=/[^\x20-\x7E]/,d=/[\x2E\u3002\uFF0E\uFF61]/g,h={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},p=Math.floor,f=String.fromCharCode;function g(e){throw new RangeError(h[e])}function b(e,t){for(var r=e.length,n=[];r--;)n[r]=t(e[r]);return n}function m(e,t){var r=e.split("@"),n="";return r.length>1&&(n=r[0]+"@",e=r[1]),n+b((e=e.replace(d,".")).split("."),t).join(".")}function v(e){for(var t,r,n=[],a=0,o=e.length;a<o;)(t=e.charCodeAt(a++))>=55296&&t<=56319&&a<o?56320==(64512&(r=e.charCodeAt(a++)))?n.push(((1023&t)<<10)+(1023&r)+65536):(n.push(t),a--):n.push(t);return n}function y(e){return b(e,(function(e){var t="";return e>65535&&(t+=f((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+=f(e)})).join("")}function O(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function x(e,t,r){var n=0;for(e=r?p(e/700):e>>1,e+=p(e/t);e>455;n+=36)e=p(e/35);return p(n+36*e/(e+38))}function w(e){var t,r,n,a,o,i,s,c,u,d,h,f=[],b=e.length,m=0,v=128,O=72;for((r=e.lastIndexOf("-"))<0&&(r=0),n=0;n<r;++n)e.charCodeAt(n)>=128&&g("not-basic"),f.push(e.charCodeAt(n));for(a=r>0?r+1:0;a<b;){for(o=m,i=1,s=36;a>=b&&g("invalid-input"),((c=(h=e.charCodeAt(a++))-48<10?h-22:h-65<26?h-65:h-97<26?h-97:36)>=36||c>p((l-m)/i))&&g("overflow"),m+=c*i,!(c<(u=s<=O?1:s>=O+26?26:s-O));s+=36)i>p(l/(d=36-u))&&g("overflow"),i*=d;O=x(m-o,t=f.length+1,0==o),p(m/t)>l-v&&g("overflow"),v+=p(m/t),m%=t,f.splice(m++,0,v)}return y(f)}function C(e){var t,r,n,a,o,i,s,c,u,d,h,b,m,y,w,C=[];for(b=(e=v(e)).length,t=128,r=0,o=72,i=0;i<b;++i)(h=e[i])<128&&C.push(f(h));for(n=a=C.length,a&&C.push("-");n<b;){for(s=l,i=0;i<b;++i)(h=e[i])>=t&&h<s&&(s=h);for(s-t>p((l-r)/(m=n+1))&&g("overflow"),r+=(s-t)*m,t=s,i=0;i<b;++i)if((h=e[i])<t&&++r>l&&g("overflow"),h==t){for(c=r,u=36;!(c<(d=u<=o?1:u>=o+26?26:u-o));u+=36)w=c-d,y=36-d,C.push(f(O(d+w%y,0))),c=p(w/y);C.push(f(O(c,0))),o=x(r,m,n==a),r=0,++n}++r,++t}return C.join("")}s={version:"1.3.2",ucs2:{decode:v,encode:y},decode:w,encode:C,toASCII:function(e){return m(e,(function(e){return u.test(e)?"xn--"+C(e):e}))},toUnicode:function(e){return m(e,(function(e){return c.test(e)?w(e.slice(4).toLowerCase()):e}))}},void 0===(a=function(){return s}.call(t,r,t,e))||(e.exports=a)}()}).call(this,r(193)(e),r(168))},904:function(e,t,r){var n,a;!function(o,i){"use strict";e.exports?e.exports=i():void 0===(a="function"==typeof(n=i)?n.call(t,r,t,e):n)||(e.exports=a)}(0,(function(e){"use strict";var t=e&&e.IPv6;return{best:function(e){var t,r,n=e.toLowerCase().split(":"),a=n.length,o=8;for(""===n[0]&&""===n[1]&&""===n[2]?(n.shift(),n.shift()):""===n[0]&&""===n[1]?n.shift():""===n[a-1]&&""===n[a-2]&&n.pop(),-1!==n[(a=n.length)-1].indexOf(".")&&(o=7),t=0;t<a&&""!==n[t];t++);if(t<o)for(n.splice(t,1,"0000");n.length<o;)n.splice(t,0,"0000");for(var i=0;i<o;i++){r=n[i].split("");for(var s=0;s<3&&("0"===r[0]&&r.length>1);s++)r.splice(0,1);n[i]=r.join("")}var l=-1,c=0,u=0,d=-1,h=!1;for(i=0;i<o;i++)h?"0"===n[i]?u+=1:(h=!1,u>c&&(l=d,c=u)):"0"===n[i]&&(h=!0,d=i,u=1);u>c&&(l=d,c=u),c>1&&n.splice(l,c,""),a=n.length;var p="";for(""===n[0]&&(p=":"),i=0;i<a&&(p+=n[i],i!==a-1);i++)p+=":";return""===n[a-1]&&(p+=":"),p},noConflict:function(){return e.IPv6===this&&(e.IPv6=t),this}}}))},905:function(e,t,r){var n,a;!function(o,i){"use strict";e.exports?e.exports=i():void 0===(a="function"==typeof(n=i)?n.call(t,r,t,e):n)||(e.exports=a)}(0,(function(e){"use strict";var t=e&&e.SecondLevelDomains,r={list:{ac:" com gov mil net org ",ae:" ac co gov mil name net org pro sch ",af:" com edu gov net org ",al:" com edu gov mil net org ",ao:" co ed gv it og pb ",ar:" com edu gob gov int mil net org tur ",at:" ac co gv or ",au:" asn com csiro edu gov id net org ",ba:" co com edu gov mil net org rs unbi unmo unsa untz unze ",bb:" biz co com edu gov info net org store tv ",bh:" biz cc com edu gov info net org ",bn:" com edu gov net org ",bo:" com edu gob gov int mil net org tv ",br:" adm adv agr am arq art ato b bio blog bmd cim cng cnt com coop ecn edu eng esp etc eti far flog fm fnd fot fst g12 ggf gov imb ind inf jor jus lel mat med mil mus net nom not ntr odo org ppg pro psc psi qsl rec slg srv tmp trd tur tv vet vlog wiki zlg ",bs:" com edu gov net org ",bz:" du et om ov rg ",ca:" ab bc mb nb nf nl ns nt nu on pe qc sk yk ",ck:" biz co edu gen gov info net org ",cn:" ac ah bj com cq edu fj gd gov gs gx gz ha hb he hi hl hn jl js jx ln mil net nm nx org qh sc sd sh sn sx tj tw xj xz yn zj ",co:" com edu gov mil net nom org ",cr:" ac c co ed fi go or sa ",cy:" ac biz com ekloges gov ltd name net org parliament press pro tm ",do:" art com edu gob gov mil net org sld web ",dz:" art asso com edu gov net org pol ",ec:" com edu fin gov info med mil net org pro ",eg:" com edu eun gov mil name net org sci ",er:" com edu gov ind mil net org rochest w ",es:" com edu gob nom org ",et:" biz com edu gov info name net org ",fj:" ac biz com info mil name net org pro ",fk:" ac co gov net nom org ",fr:" asso com f gouv nom prd presse tm ",gg:" co net org ",gh:" com edu gov mil org ",gn:" ac com gov net org ",gr:" com edu gov mil net org ",gt:" com edu gob ind mil net org ",gu:" com edu gov net org ",hk:" com edu gov idv net org ",hu:" 2000 agrar bolt casino city co erotica erotika film forum games hotel info ingatlan jogasz konyvelo lakas media news org priv reklam sex shop sport suli szex tm tozsde utazas video ",id:" ac co go mil net or sch web ",il:" ac co gov idf k12 muni net org ",in:" ac co edu ernet firm gen gov i ind mil net nic org res ",iq:" com edu gov i mil net org ",ir:" ac co dnssec gov i id net org sch ",it:" edu gov ",je:" co net org ",jo:" com edu gov mil name net org sch ",jp:" ac ad co ed go gr lg ne or ",ke:" ac co go info me mobi ne or sc ",kh:" com edu gov mil net org per ",ki:" biz com de edu gov info mob net org tel ",km:" asso com coop edu gouv k medecin mil nom notaires pharmaciens presse tm veterinaire ",kn:" edu gov net org ",kr:" ac busan chungbuk chungnam co daegu daejeon es gangwon go gwangju gyeongbuk gyeonggi gyeongnam hs incheon jeju jeonbuk jeonnam k kg mil ms ne or pe re sc seoul ulsan ",kw:" com edu gov net org ",ky:" com edu gov net org ",kz:" com edu gov mil net org ",lb:" com edu gov net org ",lk:" assn com edu gov grp hotel int ltd net ngo org sch soc web ",lr:" com edu gov net org ",lv:" asn com conf edu gov id mil net org ",ly:" com edu gov id med net org plc sch ",ma:" ac co gov m net org press ",mc:" asso tm ",me:" ac co edu gov its net org priv ",mg:" com edu gov mil nom org prd tm ",mk:" com edu gov inf name net org pro ",ml:" com edu gov net org presse ",mn:" edu gov org ",mo:" com edu gov net org ",mt:" com edu gov net org ",mv:" aero biz com coop edu gov info int mil museum name net org pro ",mw:" ac co com coop edu gov int museum net org ",mx:" com edu gob net org ",my:" com edu gov mil name net org sch ",nf:" arts com firm info net other per rec store web ",ng:" biz com edu gov mil mobi name net org sch ",ni:" ac co com edu gob mil net nom org ",np:" com edu gov mil net org ",nr:" biz com edu gov info net org ",om:" ac biz co com edu gov med mil museum net org pro sch ",pe:" com edu gob mil net nom org sld ",ph:" com edu gov i mil net ngo org ",pk:" biz com edu fam gob gok gon gop gos gov net org web ",pl:" art bialystok biz com edu gda gdansk gorzow gov info katowice krakow lodz lublin mil net ngo olsztyn org poznan pwr radom slupsk szczecin torun warszawa waw wroc wroclaw zgora ",pr:" ac biz com edu est gov info isla name net org pro prof ",ps:" com edu gov net org plo sec ",pw:" belau co ed go ne or ",ro:" arts com firm info nom nt org rec store tm www ",rs:" ac co edu gov in org ",sb:" com edu gov net org ",sc:" com edu gov net org ",sh:" co com edu gov net nom org ",sl:" com edu gov net org ",st:" co com consulado edu embaixada gov mil net org principe saotome store ",sv:" com edu gob org red ",sz:" ac co org ",tr:" av bbs bel biz com dr edu gen gov info k12 name net org pol tel tsk tv web ",tt:" aero biz cat co com coop edu gov info int jobs mil mobi museum name net org pro tel travel ",tw:" club com ebiz edu game gov idv mil net org ",mu:" ac co com gov net or org ",mz:" ac co edu gov org ",na:" co com ",nz:" ac co cri geek gen govt health iwi maori mil net org parliament school ",pa:" abo ac com edu gob ing med net nom org sld ",pt:" com edu gov int net nome org publ ",py:" com edu gov mil net org ",qa:" com edu gov mil net org ",re:" asso com nom ",ru:" ac adygeya altai amur arkhangelsk astrakhan bashkiria belgorod bir bryansk buryatia cbg chel chelyabinsk chita chukotka chuvashia com dagestan e-burg edu gov grozny int irkutsk ivanovo izhevsk jar joshkar-ola kalmykia kaluga kamchatka karelia kazan kchr kemerovo khabarovsk khakassia khv kirov koenig komi kostroma kranoyarsk kuban kurgan kursk lipetsk magadan mari mari-el marine mil mordovia mosreg msk murmansk nalchik net nnov nov novosibirsk nsk omsk orenburg org oryol penza perm pp pskov ptz rnd ryazan sakhalin samara saratov simbirsk smolensk spb stavropol stv surgut tambov tatarstan tom tomsk tsaritsyn tsk tula tuva tver tyumen udm udmurtia ulan-ude vladikavkaz vladimir vladivostok volgograd vologda voronezh vrn vyatka yakutia yamal yekaterinburg yuzhno-sakhalinsk ",rw:" ac co com edu gouv gov int mil net ",sa:" com edu gov med net org pub sch ",sd:" com edu gov info med net org tv ",se:" a ac b bd c d e f g h i k l m n o org p parti pp press r s t tm u w x y z ",sg:" com edu gov idn net org per ",sn:" art com edu gouv org perso univ ",sy:" com edu gov mil net news org ",th:" ac co go in mi net or ",tj:" ac biz co com edu go gov info int mil name net nic org test web ",tn:" agrinet com defense edunet ens fin gov ind info intl mincom nat net org perso rnrt rns rnu tourism ",tz:" ac co go ne or ",ua:" biz cherkassy chernigov chernovtsy ck cn co com crimea cv dn dnepropetrovsk donetsk dp edu gov if in ivano-frankivsk kh kharkov kherson khmelnitskiy kiev kirovograd km kr ks kv lg lugansk lutsk lviv me mk net nikolaev od odessa org pl poltava pp rovno rv sebastopol sumy te ternopil uzhgorod vinnica vn zaporizhzhe zhitomir zp zt ",ug:" ac co go ne or org sc ",uk:" ac bl british-library co cym gov govt icnet jet lea ltd me mil mod national-library-scotland nel net nhs nic nls org orgn parliament plc police sch scot soc ",us:" dni fed isa kids nsn ",uy:" com edu gub mil net org ",ve:" co com edu gob info mil net org web ",vi:" co com k12 net org ",vn:" ac biz com edu gov health info int name net org pro ",ye:" co com gov ltd me net org plc ",yu:" ac co edu gov org ",za:" ac agric alt bourse city co cybernet db edu gov grondar iaccess imt inca landesign law mil net ngo nis nom olivetti org pix school tm web ",zm:" ac co com edu gov net org sch ",com:"ar br cn de eu gb gr hu jpn kr no qc ru sa se uk us uy za ",net:"gb jp se uk ",org:"ae",de:"com "},has:function(e){var t=e.lastIndexOf(".");if(t<=0||t>=e.length-1)return!1;var n=e.lastIndexOf(".",t-1);if(n<=0||n>=t-1)return!1;var a=r.list[e.slice(t+1)];return!!a&&a.indexOf(" "+e.slice(n+1,t)+" ")>=0},is:function(e){var t=e.lastIndexOf(".");if(t<=0||t>=e.length-1)return!1;if(e.lastIndexOf(".",t-1)>=0)return!1;var n=r.list[e.slice(t+1)];return!!n&&n.indexOf(" "+e.slice(0,t)+" ")>=0},get:function(e){var t=e.lastIndexOf(".");if(t<=0||t>=e.length-1)return null;var n=e.lastIndexOf(".",t-1);if(n<=0||n>=t-1)return null;var a=r.list[e.slice(t+1)];return a?a.indexOf(" "+e.slice(n+1,t)+" ")<0?null:e.slice(n+1):null},noConflict:function(){return e.SecondLevelDomains===this&&(e.SecondLevelDomains=t),this}};return r}))},923:function(e,t,r){"use strict";r(39);var n=r(48),a=r.n(n),o=r(1119),i=r.n(o),s=r(36),l=r.n(s),c=r(11),u=r.n(c),d=r(69),h=r.n(d),p=r(34),f=r.n(p),g=r(70),b=r.n(g),m=r(0),v=r.n(m),y=r(2),O=r.n(y),x=r(1251),w=r(1090),C=r(717),_=r(170),j=r(15),S=r(254),E=r(285),k=r(53),T=r(101),M=r(126),R=r(86),A=(r(1151),r(41)),D=r(1);const P={description:O.a.string,label:O.a.string,name:O.a.string.isRequired,onChange:O.a.func,value:O.a.string.isRequired,labelType:O.a.string},I=Object(_.a)(),F=["line","big_number","table","filter_box","dist_bar","area","bar","deck_polygon","pie","time_table","pivot_table","histogram","big_number_total","deck_scatter","deck_hex","time_pivot","deck_arc","heatmap","deck_grid","dual_line","deck_screengrid","line_multi","treemap","box_plot","sunburst","sankey","word_cloud","mapbox","kepler","cal_heatmap","rose","bubble","deck_geojson","horizon","deck_multi","compare","partition","event_flow","deck_path","graph_chart","world_map","paired_ttest","para","country_map"],N=new b.a(F);function L({vizType:e}){return Object(E.c)().loading||I.has(e)?null:Object(D.f)("div",{className:"text-danger"},Object(D.f)("i",{className:"fa fa-exclamation-circle text-danger"})," ",Object(D.f)("small",null,Object(j.e)("This visualization type is not supported.")))}const H=e=>{var t,r,n,o,s,c;const[d,p]=Object(m.useState)(!1),[g,b]=Object(m.useState)(""),y=Object(m.useRef)(null);Object(m.useEffect)(()=>{var e;d&&(null==y||null==(e=y.current)||e.focus())},[d]);const O=()=>{p(e=>!e)},_=t=>{const{value:r}=e,{key:n,value:a}=t,o=n===r;return Object(D.f)("div",{role:"button",tabIndex:0,className:`viztype-selector-container ${o?"selected":""}`,onClick:()=>{return t=n,e.onChange(t),void p(!1);var t}},Object(D.f)("img",{alt:a.name,width:"100%",className:`viztype-selector ${o?"selected":""}`,src:a.thumbnail}),Object(D.f)("div",{className:"viztype-label"},a.name))},{value:E,labelType:P}=e,H=g.toLowerCase(),q=f()(t=h()(r=u()(n=f()(o=f()(F).call(F,e=>I.has(e))).call(o,e=>{var t;const r=(null==(t=I.get(e))?void 0:t.behaviors)||[];return Object(A.c)(A.a.DASHBOARD_CROSS_FILTERS)&&l()(r).call(r,S.a.CROSS_FILTER)||!r.length})).call(n,e=>({key:e,value:I.get(e)}))).call(r,f()(s=f()(c=i()(I).call(I)).call(c,e=>{var t;const r=(null==(t=e.value)?void 0:t.behaviors)||[];return Object(A.c)(A.a.DASHBOARD_CROSS_FILTERS)&&l()(r).call(r,S.a.CROSS_FILTER)||!r.length})).call(s,({key:e})=>!N.has(e)))).call(t,e=>{var t;return l()(t=e.value.name.toLowerCase()).call(t,H)}),z=[];for(let e=0;e<=q.length;e+=6){var B;z.push(Object(D.f)(x.a,{key:`row-${e}`},u()(B=a()(q).call(q,e,e+6)).call(B,e=>Object(D.f)(w.a,{md:2,key:`grid-col-${e.key}`},_(e)))))}return Object(D.f)("div",null,Object(D.f)(R.a,e),Object(D.f)(k.a,{id:"error-tooltip",placement:"right",title:Object(j.e)("Click to change visualization type")},Object(D.f)(v.a.Fragment,null,Object(D.f)(M.a,{onClick:O,type:P},I.has(E)?I.get(E).name:`${E}`),Object(D.f)(L,{vizType:E}))),Object(D.f)(T.b,{show:d,onHide:O,onEnter:()=>{y&&y.focus()},title:Object(j.e)("Select a visualization type"),responsive:!0,hideFooter:!0,forceRender:!0},Object(D.f)("div",{className:"viztype-control-search-box"},Object(D.f)(C.a,{inputRef:e=>{y.current=e},type:"text",value:g,placeholder:Object(j.e)("Search"),onChange:e=>{b(e.target.value)}})),z))};H.propTypes=P,H.defaultProps={onChange:()=>{},labelType:"default"},t.a=H},93:function(e,t,r){"use strict";r.r(t),r.d(t,"CHART_UPDATE_STARTED",(function(){return R})),r.d(t,"chartUpdateStarted",(function(){return A})),r.d(t,"CHART_UPDATE_SUCCEEDED",(function(){return D})),r.d(t,"chartUpdateSucceeded",(function(){return P})),r.d(t,"CHART_UPDATE_STOPPED",(function(){return I})),r.d(t,"chartUpdateStopped",(function(){return F})),r.d(t,"CHART_UPDATE_FAILED",(function(){return N})),r.d(t,"chartUpdateFailed",(function(){return L})),r.d(t,"CHART_UPDATE_QUEUED",(function(){return H})),r.d(t,"chartUpdateQueued",(function(){return q})),r.d(t,"CHART_RENDERING_FAILED",(function(){return z})),r.d(t,"chartRenderingFailed",(function(){return B})),r.d(t,"CHART_RENDERING_SUCCEEDED",(function(){return U})),r.d(t,"chartRenderingSucceeded",(function(){return $})),r.d(t,"REMOVE_CHART",(function(){return G})),r.d(t,"removeChart",(function(){return V})),r.d(t,"ANNOTATION_QUERY_SUCCESS",(function(){return Q})),r.d(t,"annotationQuerySuccess",(function(){return W})),r.d(t,"ANNOTATION_QUERY_STARTED",(function(){return Y})),r.d(t,"annotationQueryStarted",(function(){return X})),r.d(t,"ANNOTATION_QUERY_FAILED",(function(){return K})),r.d(t,"annotationQueryFailed",(function(){return Z})),r.d(t,"DYNAMIC_PLUGIN_CONTROLS_READY",(function(){return J})),r.d(t,"dynamicPluginControlsReady",(function(){return ee})),r.d(t,"getChartDataRequest",(function(){return te})),r.d(t,"runAnnotationQuery",(function(){return re})),r.d(t,"TRIGGER_QUERY",(function(){return ne})),r.d(t,"triggerQuery",(function(){return ae})),r.d(t,"RENDER_TRIGGERED",(function(){return oe})),r.d(t,"renderTriggered",(function(){return ie})),r.d(t,"UPDATE_QUERY_FORM_DATA",(function(){return se})),r.d(t,"updateQueryFormData",(function(){return le})),r.d(t,"UPDATE_CHART_ID",(function(){return ce})),r.d(t,"updateChartId",(function(){return ue})),r.d(t,"ADD_CHART",(function(){return de})),r.d(t,"addChart",(function(){return he})),r.d(t,"exploreJSON",(function(){return pe})),r.d(t,"GET_SAVED_CHART",(function(){return fe})),r.d(t,"getSavedChart",(function(){return ge})),r.d(t,"POST_CHART_FORM_DATA",(function(){return be})),r.d(t,"postChartFormData",(function(){return me})),r.d(t,"redirectSQLLab",(function(){return ve})),r.d(t,"refreshChart",(function(){return ye}));r(39);var n=r(11),a=r.n(n),o=r(29),i=r.n(o),s=r(56),l=r.n(s),c=r(36),u=r.n(c),d=r(63),h=r.n(d),p=r(43),f=r.n(p),g=r(85),b=r.n(g),m=r(35),v=r.n(m),y=r(68),O=r(15),x=r(512),w=r(41),C=r(111),_=r(1072),j=r(64),S=r(274),E=r(105),k=r(71),T=r(488),M=r(311);const R="CHART_UPDATE_STARTED";function A(e,t,r){return{type:R,queryController:e,latestQueryFormData:t,key:r}}const D="CHART_UPDATE_SUCCEEDED";function P(e,t){return{type:D,queriesResponse:e,key:t}}const I="CHART_UPDATE_STOPPED";function F(e){return{type:I,key:e}}const N="CHART_UPDATE_FAILED";function L(e,t){return{type:N,queriesResponse:e,key:t}}const H="CHART_UPDATE_QUEUED";function q(e,t){return{type:H,asyncJobMeta:e,key:t}}const z="CHART_RENDERING_FAILED";function B(e,t,r){return{type:z,error:e,key:t,stackTrace:r}}const U="CHART_RENDERING_SUCCEEDED";function $(e){return{type:U,key:e}}const G="REMOVE_CHART";function V(e){return{type:G,key:e}}const Q="ANNOTATION_QUERY_SUCCESS";function W(e,t,r){return{type:Q,annotation:e,queryResponse:t,key:r}}const Y="ANNOTATION_QUERY_STARTED";function X(e,t,r){return{type:Y,annotation:e,queryController:t,key:r}}const K="ANNOTATION_QUERY_FAILED";function Z(e,t,r){return{type:K,annotation:e,queryResponse:t,key:r}}const J="DYNAMIC_PLUGIN_CONTROLS_READY",ee=()=>(e,t)=>{const r=t(),n=Object(x.b)(r.explore,r.explore.form_data);e({type:J,key:n.slice_id.value,controlsState:n})};async function te({formData:e,setDataMask:t=(()=>{}),resultFormat:r="json",resultType:n="full",force:a=!1,method:o="POST",requestParams:i={}}){let s={...i};return T.a&&(s={...s,mode:"cors",credentials:"include"}),Object(C.m)(e)?(async(e,t,r,n,a="POST",o={})=>{const i=Object(C.i)({resultFormat:t,resultType:r}),s=T.a&&(null==o?void 0:o.dashboard_id),l=Object(C.h)({formData:e,endpointType:i,force:n,allowDomainSharding:s,method:a,requestParams:o.dashboard_id?{dashboard_id:o.dashboard_id}:{}}),c={...o,url:l,postPayload:{form_data:e}};return(Object(w.c)(w.a.CLIENT_CACHE)?y.a.get:y.a.post)(c).then(({json:e})=>({result:[e]}))})(e,r,n,a,o,s):(async(e,t,r,n,a,o)=>{const i=Object(C.a)({formData:e,resultType:r,resultFormat:t,force:n,setDataMask:o}),{slice_id:s}=e,{dashboard_id:l}=a,c={};void 0!==s&&(c.form_data=`{"slice_id":${s}}`),void 0!==l&&(c.dashboard_id=l),!1!==n&&(c.force=n);const u=T.a&&(null==a?void 0:a.dashboard_id),d=Object(C.e)({path:"/api/v1/chart/data",qs:c,allowDomainSharding:u}).toString(),h={...a,url:d,headers:{"Content-Type":"application/json"},body:b()(i)};return y.a.post(h).then(({json:e})=>e)})(e,r,n,a,s,t)}function re(e,t=60,r=null,n,a=!1){return function(o,i){var s;const c=n||f()(i().charts)[0],d={...r||i().charts[c].latestQueryFormData};if(!Object(_.f)(e.sourceType))return h.a.resolve();const p=d.time_grain_sqla||d.granularity;d.time_grain_sqla=p,d.granularity=p;const g=f()(e.overrides);(u()(g).call(g,"since")||u()(g).call(g,"until"))&&(e.overrides={...e.overrides,time_range:null});const b=l()(s=f()(e.overrides)).call(s,(t,r)=>({...t,[r]:e.overrides[r]||d[r]}),{});if(!a&&d){const e=d.extra_filters&&d.extra_filters.length>0;b.extra_filters=e?d.extra_filters:void 0}const m=e.sourceType===_.a.NATIVE,v=Object(C.d)(e.value,b,m),O=new AbortController,{signal:x}=O;return o(X(e,O,c)),y.a.get({url:v,signal:x,timeout:1e3*t}).then(({json:t})=>o(W(e,t,c))).catch(t=>Object(k.a)(t).then(t=>{var r;"timeout"===t.statusText?o(Z(e,{error:"Query timeout"},c)):u()(r=(t.error||"").toLowerCase()).call(r,"no data")?o(W(e,t,c)):"abort"!==t.statusText&&o(Z(e,t,c))}))}}const ne="TRIGGER_QUERY";function ae(e=!0,t){return{type:ne,value:e,key:t}}const oe="RENDER_TRIGGERED";function ie(e,t){return{type:oe,value:e,key:t}}const se="UPDATE_QUERY_FORM_DATA";function le(e,t){return{type:se,value:e,key:t}}const ce="UPDATE_CHART_ID";function ue(e,t=0){return{type:ce,newId:e,key:t}}const de="ADD_CHART";function he(e,t){return{type:de,chart:e,key:t}}function pe(e,t=!1,r=60,n,o,s){return async l=>{const c=E.q.getTimestamp(),u=new AbortController,d={signal:u.signal,timeout:1e3*r};s&&(d.dashboard_id=s);const p=te({setDataMask:t=>{l(Object(M.d)(e.slice_id,t))},formData:e,resultFormat:"json",resultType:"full",force:t,method:o,requestParams:d});l(A(u,e,n));const f=p.then(r=>{const a=r.result;if(Object(w.c)(w.a.GLOBAL_ASYNC_QUERIES)){const e="result"in r?r.result[0]:r;return l(q(e,n))}return i()(a).call(a,r=>l(Object(S.logEvent)(E.h,{slice_id:n,applied_filters:r.applied_filters,is_cached:r.is_cached,force_refresh:t,row_count:r.rowcount,datasource:e.datasource,start_offset:c,ts:(new Date).getTime(),duration:E.q.getTimestamp()-c,has_extra_filters:e.extra_filters&&e.extra_filters.length>0,viz_type:e.viz_type,data_age:r.is_cached?v()(new Date).diff(v.a.utc(r.cached_dttm)):null}))),l(P(a,n))}).catch(t=>{const r=(t,r)=>{l(Object(S.logEvent)(E.h,{slice_id:n,has_err:!0,is_cached:r,error_details:t,datasource:e.datasource,start_offset:c,ts:(new Date).getTime(),duration:E.q.getTimestamp()-c}))};return"AbortError"===t.name?(r("abort"),l(F(n))):Object(k.a)(t).then(e=>("timeout"===t.statusText?r("timeout"):r(e.error,e.is_cached),l(L([e],n))))}),g=Object(C.m)(e)&&e.annotation_layers||[],b=s>0;return h.a.all([f,l(ae(!1,n)),l(le(e,n)),...a()(g).call(g,t=>l(re(t,r,e,n,b)))])}}const fe="GET_SAVED_CHART";function ge(e,t=!1,r=60,n,a){return pe(e,t,r,n,"GET",a)}const be="POST_CHART_FORM_DATA";function me(e,t=!1,r=60,n,a){return pe(e,t,r,n,"POST",a)}function ve(e){return t=>{te({formData:e,resultFormat:"json",resultType:"query"}).then(({result:t})=>{const r={datasourceKey:e.datasource,sql:t[0].query};Object(C.l)("/superset/sqllab",r)}).catch(()=>t(Object(j.c)(Object(O.e)("An error occurred while loading the SQL"))))}}function ye(e,t,r){return(n,a)=>{const o=(a().charts||{})[e],i=a().dashboardInfo.common.conf.SUPERSET_WEBSERVER_TIMEOUT;o.latestQueryFormData&&0!==f()(o.latestQueryFormData).length&&n(me(o.latestQueryFormData,t,i,o.id,r))}}},931:function(e,t,r){"use strict";r.d(t,"a",(function(){return ma}));var n=r(31),a=r.n(n),o=r(12),i=r.n(o),s=r(0),l=r.n(s),c=(r(39),r(34)),u=r.n(c),d=r(11),h=r.n(d),p=r(36),f=r.n(p),g=r(43),b=r.n(g),m=r(2),v=r.n(m),y=r(1702),O=r(4487),x=r(61),w=r(15),C=r(160),_=r(124),j=r(164),S=r(352),E=r(111),k=r(93),T=r(1);const M=Object(S.a)(()=>r.e(70).then(r.bind(null,4899)),()=>Object(T.f)("div",{style:{width:450,height:368}})),R={colorScheme:v.a.string.isRequired,annotationError:v.a.object,annotationQuery:v.a.object,vizType:v.a.string,validationErrors:v.a.array,name:v.a.string.isRequired,actions:v.a.object,value:v.a.arrayOf(v.a.object),onChange:v.a.func,refreshAnnotationData:v.a.func};class A extends l.a.PureComponent{constructor(e){var t,r,n;super(e),this.state={popoverVisible:{},addedAnnotationIndex:null},this.addAnnotationLayer=i()(t=this.addAnnotationLayer).call(t,this),this.removeAnnotationLayer=i()(r=this.removeAnnotationLayer).call(r,this),this.handleVisibleChange=i()(n=this.handleVisibleChange).call(n,this)}componentDidMount(){M.preload()}UNSAFE_componentWillReceiveProps(e){const{name:t,annotationError:r,validationErrors:n,value:a}=e;b()(r).length&&!n.length&&this.props.actions.setControlValue(t,a,b()(r)),!b()(r).length&&n.length&&this.props.actions.setControlValue(t,a,[])}addAnnotationLayer(e,t){let r=this.props.value;f()(r).call(r,e)?r=h()(r).call(r,r=>r===e?t:r):(r=[...r,t],this.setState({addedAnnotationIndex:r.length-1})),this.props.refreshAnnotationData(t),this.props.onChange(r)}handleVisibleChange(e,t){this.setState(r=>({popoverVisible:{...r.popoverVisible,[t]:e}}))}removeAnnotationLayer(e){var t;const r=u()(t=this.props.value).call(t,t=>t!==e);this.props.onChange(r)}renderPopover(e,t,r){const n=(null==t?void 0:t.name)||"_new";return Object(T.f)("div",{id:`annotation-pop-${n}`},Object(T.f)(M,a()({},t,{error:r,colorScheme:this.props.colorScheme,vizType:this.props.vizType,addAnnotationLayer:e=>this.addAnnotationLayer(t,e),removeAnnotationLayer:()=>this.removeAnnotationLayer(t),close:()=>{this.handleVisibleChange(!1,e),this.setState({addedAnnotationIndex:null})}})))}renderInfo(e){const{annotationError:t,annotationQuery:r}=this.props;return r[e.name]?Object(T.f)("i",{className:"fa fa-refresh",style:{color:"orange"},"aria-hidden":!0}):t[e.name]?Object(T.f)(_.a,{label:"validation-errors",bsStyle:"danger",tooltip:t[e.name]}):e.show?"":Object(T.f)("span",{style:{color:"red"}}," Hidden ")}render(){var e;const{addedAnnotationIndex:t}=this.state,r=this.props.value[t],n=h()(e=this.props.value).call(e,(e,t)=>Object(T.f)(j.a,{key:t,trigger:"click",placement:"right",title:Object(w.e)("Edit annotation layer"),content:this.renderPopover(t,e,this.props.annotationError[e.name]),visible:this.state.popoverVisible[t],onVisibleChange:e=>this.handleVisibleChange(e,t)},Object(T.f)(y.a,null,Object(T.f)("span",null,e.name),Object(T.f)("span",{style:{float:"right"}},this.renderInfo(e)))));return Object(T.f)("div",null,Object(T.f)(O.a,null,n,Object(T.f)(j.a,{trigger:"click",placement:"right",content:this.renderPopover("add",r),title:Object(w.e)("Add annotation layer"),visible:this.state.popoverVisible.add,destroyTooltipOnHide:!0,onVisibleChange:e=>this.handleVisibleChange(e,"add")},Object(T.f)(y.a,null,Object(T.f)("i",{className:"fa fa-plus"})," ","  ",Object(w.e)("Add annotation layer")))))}}A.propTypes=R,A.defaultProps={vizType:"",value:[],annotationError:{},annotationQuery:{},onChange:()=>{}};const D=Object(C.c)(A);var P=Object(x.b)((function({charts:e,explore:t}){var r,n;const a=e[Object(E.f)(t)]||e[0]||{};return{colorScheme:null==(r=t.controls)?void 0:null==(n=r.color_scheme)?void 0:n.value,annotationError:a.annotationError,annotationQuery:a.annotationQuery,vizType:t.controls.viz_type.value}}),(function(e){return{refreshAnnotationData:t=>e(Object(k.runAnnotationQuery)(t))}}))(D),I=r(704),F=r.n(I),N=r(201),L=r.n(N),H=r(754),q=r(1251),z=r(1090),B=r(717),U=r(86);const $={onChange:v.a.func,value:v.a.array};class G extends l.a.Component{constructor(e){var t,r,n;super(e),this.state={minMax:[null===e.value[0]?"":e.value[0],null===e.value[1]?"":e.value[1]]},this.onChange=i()(t=this.onChange).call(t,this),this.onMinChange=i()(r=this.onMinChange).call(r,this),this.onMaxChange=i()(n=this.onMaxChange).call(n,this)}onMinChange(e){const t=e.target.value;this.setState(e=>({minMax:[t,e.minMax[1]]}),this.onChange)}onMaxChange(e){const t=e.target.value;this.setState(e=>({minMax:[e.minMax[0],t]}),this.onChange)}onChange(){const e=this.state.minMax,t=[];e[0]&&L()(Number(e[0]))&&t.push(Object(w.e)("`Min` value should be numeric or empty")),e[1]&&L()(Number(e[1]))&&t.push(Object(w.e)("`Max` value should be numeric or empty")),0===t.length?this.props.onChange([F()(e[0]),F()(e[1])],t):this.props.onChange([null,null],t)}render(){return Object(T.f)("div",null,Object(T.f)(U.a,this.props),Object(T.f)(H.a,{bsSize:"small"},Object(T.f)(q.a,null,Object(T.f)(z.a,{xs:6},Object(T.f)(B.a,{type:"text",placeholder:Object(w.e)("Min"),onChange:this.onMinChange,value:this.state.minMax[0]})),Object(T.f)(z.a,{xs:6},Object(T.f)(B.a,{type:"text",placeholder:Object(w.e)("Max"),onChange:this.onMaxChange,value:this.state.minMax[1]})))))}}G.propTypes=$,G.defaultProps={onChange:()=>{},value:[null,null]};var V=r(483),Q=r(69),W=r.n(Q),Y=r(75),X=r.n(Y),K=r(94),Z=r.n(K),J=r(275);r(1361);const ee={name:v.a.string.isRequired,label:v.a.string,description:v.a.string,placeholder:v.a.string,addTooltip:v.a.string,itemGenerator:v.a.func,keyAccessor:v.a.func,onChange:v.a.func,value:v.a.oneOfType([v.a.array]),isFloat:v.a.bool,isInt:v.a.bool,controlName:v.a.string.isRequired},te={label:null,description:null,onChange:()=>{},placeholder:"Empty collection",itemGenerator:()=>({key:Z.a.generate()}),keyAccessor:e=>e.key,value:[],addTooltip:"Add an item"},re=Object(J.b)(y.a),ne=Object(J.a)(O.a),ae=Object(J.c)(()=>Object(T.f)("i",{className:"fa fa-bars text-primary",style:{cursor:"ns-resize"}}));class oe extends l.a.Component{constructor(e){var t;super(e),this.onAdd=i()(t=this.onAdd).call(t,this)}onChange(e,t){X()(this.props.value[e],t),this.props.onChange(this.props.value)}onAdd(){var e;this.props.onChange(W()(e=this.props.value).call(e,[this.props.itemGenerator()]))}onSortEnd({oldIndex:e,newIndex:t}){this.props.onChange(Object(J.d)(this.props.value,e,t))}removeItem(e){var t;this.props.onChange(u()(t=this.props.value).call(t,(t,r)=>e!==r))}renderList(){var e,t;if(0===this.props.value.length)return Object(T.f)("div",{className:"text-muted"},this.props.placeholder);const r=ba[this.props.controlName];return Object(T.f)(ne,{useDragHandle:!0,lockAxis:"y",onSortEnd:i()(e=this.onSortEnd).call(e,this)},h()(t=this.props.value).call(t,(e,t)=>{var n,o;const{label:s,...l}=this.props;return Object(T.f)(re,{className:"clearfix",key:this.props.keyAccessor(e),index:t},Object(T.f)("div",{className:"pull-left m-r-5"},Object(T.f)(ae,null)),Object(T.f)("div",{className:"pull-left"},Object(T.f)(r,a()({},l,e,{onChange:i()(n=this.onChange).call(n,this,t)}))),Object(T.f)("div",{className:"pull-right"},Object(T.f)(_.a,{icon:"times",label:"remove-item",tooltip:"remove item",bsStyle:"primary",onClick:i()(o=this.removeItem).call(o,this,t)})))}))}render(){return Object(T.f)("div",{className:"CollectionControl"},Object(T.f)(U.a,this.props),this.renderList(),Object(T.f)(_.a,{icon:"plus-circle",label:"add-item",tooltip:this.props.addTooltip,bsStyle:"primary",className:"fa-lg",onClick:this.onAdd}))}}oe.propTypes=ee,oe.defaultProps=te;var ie=r(29),se=r.n(ie),le=r(813);const ce={onChange:v.a.func,value:v.a.object,colorScheme:v.a.string,colorNamespace:v.a.string},ue={onChange:()=>{},value:{},colorScheme:void 0,colorNamespace:void 0};class de extends l.a.PureComponent{constructor(e){var t;super(e),se()(t=b()(this.props.value)).call(t,e=>{le.b.getScale(this.props.colorScheme,this.props.colorNamespace).setColor(e,this.props.value[e])})}render(){return null}}de.propTypes=ce,de.defaultProps=ue;var he=r(1155),pe=r(240);const fe={onChange:v.a.func,value:v.a.object},ge={position:"absolute",width:"50px",height:"20px",top:"0px",left:"0px",right:"0px",bottom:"0px"},be={swatch:{width:"50px",height:"20px",position:"relative",padding:"5px",borderRadius:"1px",display:"inline-block",cursor:"pointer",boxShadow:"rgba(0, 0, 0, 0.15) 0px 0px 0px 1px inset, rgba(0, 0, 0, 0.25) 0px 0px 4px inset"},color:{...ge,borderRadius:"2px"},checkboard:{...ge,background:'url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAMUlEQVQ4T2NkYGAQYcAP3uCTZhw1gGGYhAGBZIA/nYDCgBDAm9BGDWAAJyRCgLaBCAAgXwixzAS0pgAAAABJRU5ErkJggg==") left center'}};class me extends l.a.Component{constructor(e){var t;super(e),this.onChange=i()(t=this.onChange).call(t,this)}onChange(e){this.props.onChange(e.rgb)}renderPopover(){var e;const t=u()(e=Object(pe.a)().get().colors).call(e,(e,t)=>t<7);return Object(T.f)("div",{id:"filter-popover",className:"color-popover"},Object(T.f)(he.SketchPicker,{color:this.props.value,onChange:this.onChange,presetColors:t}))}render(){const e=this.props.value||{r:0,g:0,b:0,a:0},t={...be.color,background:`rgba(${e.r}, ${e.g}, ${e.b}, ${e.a})`};return Object(T.f)("div",null,Object(T.f)(U.a,this.props),Object(T.f)(j.a,{trigger:"click",placement:"right",content:this.renderPopover()},Object(T.f)("div",{style:be.swatch},Object(T.f)("div",{style:be.checkboard}),Object(T.f)("div",{style:t}))))}}me.propTypes=fe,me.defaultProps={onChange:()=>{}};var ve,ye=r(851),Oe=r(51),xe=r(25),we=r(53),Ce=r(45),_e=r(195),je=r(68),Se=r(310),Ee=r(101),ke=r(42),Te=r(518),Me=r(71),Re=r(142),Ae=r(121);const De=Object(w.e)("Warning! Changing the dataset may break the chart if the metadata does not exist."),Pe=Object(w.e)("Changing the dataset may break the chart if the chart relies on columns or metadata that does not exist in the target dataset"),Ie=Oe.c.div`
  .btn-container {
    display: flex;
    justify-content: flex-end;
    padding: 0px 15px;
    margin: 10px 0 0 0;
  }

  .confirm-modal-container {
    margin: 9px;
  }
`,Fe=Oe.c.span`
  cursor: pointer;
  color: ${({theme:e})=>e.colors.primary.dark1};
  &: hover {
    color: ${({theme:e})=>e.colors.primary.dark2};
  }
`,Ne=h()(ve=["name","type","schema","connection","creator"]).call(ve,e=>({accessor:e,Header:e})),Le={pageIndex:0,pageSize:20,filters:[],sortBy:[{id:"changed_on_delta_humanized"}]};var He=Object(Ae.a)(({addDangerToast:e,addSuccessToast:t,onChange:r,onDatasourceSave:n,onHide:a,show:o})=>{const[i,c]=Object(s.useState)(void 0),[u,d]=Object(s.useState)(!1),[p,f]=Object(s.useState)();let g=Object(s.useRef)(null);const{state:{loading:b,resourceCollection:m},fetchData:v}=Object(Te.e)("dataset",Object(w.e)("dataset"),e),y=Object(s.useCallback)(e=>{d(!0),f(e)},[]);Object(E.n)(()=>{v({...Le,...i&&{filters:[{id:"table_name",operator:"ct",value:i}]}})},300,[i]),Object(s.useEffect)(()=>{o&&(async()=>{g&&g.current&&g.current.focus()})()},[e,v,r,n,a,y,o]);return Object(T.f)(Ee.b,{show:o,onHide:a,responsive:!0,title:Object(w.e)("Change dataset"),width:u?"432px":"",height:u?"auto":"480px",hideFooter:!u,footer:Object(T.f)(l.a.Fragment,null,u&&Object(T.f)(Ie,null,Object(T.f)("div",{className:"btn-container"},Object(T.f)(ke.a,{onClick:()=>{d(!1)}},"Cancel"),Object(T.f)(ke.a,{className:"proceed-btn",buttonStyle:"primary",onClick:()=>{je.a.get({endpoint:`/datasource/get/${null==p?void 0:p.type}/${null==p?void 0:p.id}`}).then(({json:e})=>{n(e),r(`${null==p?void 0:p.id}__table`)}).catch(t=>{Object(Me.a)(t).then(({error:t,message:r})=>{const n=t?t.error||t.statusText||t:r;e(n)})}),a(),t("Successfully changed dataset!")}},"Proceed"))))},Object(T.f)(l.a.Fragment,null,!u&&Object(T.f)(l.a.Fragment,null,Object(T.f)(_e.a,{type:"warning",message:Object(T.f)(l.a.Fragment,null,Object(T.f)("strong",null,Object(w.e)("Warning!"))," ",Pe)}),Object(T.f)("div",null,Object(T.f)(B.a,{inputRef:e=>{(e=>{g=e})(e)},type:"text",bsSize:"sm",value:i,placeholder:Object(w.e)("Search / Filter"),onChange:e=>{var t,r;const n=null!=(t=null==(r=e.currentTarget)?void 0:r.value)?t:"";c(n)}})),b&&Object(T.f)(Re.a,null),!b&&Object(T.f)(Se.b,{columns:Ne,data:h()(m).call(m,e=>({rawName:e.table_name,connection:e.database.database_name,schema:e.schema,name:Object(T.f)(Fe,{role:"button",tabIndex:0,onClick:()=>y({type:"table",...e})},e.table_name),type:e.kind})),pageSize:20,className:"table-condensed",emptyWrapperType:Se.a.Small,scrollTable:!0})),u&&Object(T.f)(l.a.Fragment,null,De)))}),qe=r(1154),ze=r(134);const Be={actions:v.a.object.isRequired,onChange:v.a.func,value:v.a.string,datasource:v.a.object.isRequired,isEditable:v.a.bool,onDatasourceSave:v.a.func},Ue=Oe.c.div`
  .data-container {
    display: flex;
    justify-content: space-between;
    align-items: center;
    border-bottom: 1px solid ${({theme:e})=>e.colors.grayscale.light2};
    padding: ${({theme:e})=>2*e.gridUnit}px;
  }
  .error-alert {
    margin: ${({theme:e})=>2*e.gridUnit}px;
  }
  .ant-dropdown-trigger {
    margin-left: ${({theme:e})=>2*e.gridUnit}px;
    box-shadow: none;
    &:active {
      box-shadow: none;
    }
  }
  .btn-group .open .dropdown-toggle {
    box-shadow: none;
    &.button-default {
      background: none;
    }
  }
  i.angle {
    color: ${({theme:e})=>e.colors.primary.base};
  }
  svg.datasource-modal-trigger {
    color: ${({theme:e})=>e.colors.primary.base};
    cursor: pointer;
  }
  .title-select {
    flex: 1 1 100%;
    display: inline-block;
    background-color: ${({theme:e})=>e.colors.grayscale.light3};
    padding: ${({theme:e})=>2*e.gridUnit}px;
    border-radius: ${({theme:e})=>e.borderRadius}px;
    text-align: center;
    text-overflow: ellipsis;
    white-space: nowrap;
    overflow: hidden;
  }
  .dataset-svg {
    margin-right: ${({theme:e})=>2*e.gridUnit}px;
    flex: none;
  }
`;class $e extends l.a.PureComponent{constructor(e){var t,r,n,a,o;super(e),this.state={showEditDatasourceModal:!1,showChangeDatasourceModal:!1},this.onDatasourceSave=i()(t=this.onDatasourceSave).call(t,this),this.toggleChangeDatasourceModal=i()(r=this.toggleChangeDatasourceModal).call(r,this),this.toggleEditDatasourceModal=i()(n=this.toggleEditDatasourceModal).call(n,this),this.toggleShowDatasource=i()(a=this.toggleShowDatasource).call(a,this),this.handleMenuItemClick=i()(o=this.handleMenuItemClick).call(o,this)}onDatasourceSave(e){this.props.actions.setDatasource(e),this.props.onDatasourceSave&&this.props.onDatasourceSave(e)}toggleShowDatasource(){this.setState(({showDatasource:e})=>({showDatasource:!e}))}toggleChangeDatasourceModal(){this.setState(({showChangeDatasourceModal:e})=>({showChangeDatasourceModal:!e}))}toggleEditDatasourceModal(){this.setState(({showEditDatasourceModal:e})=>({showEditDatasourceModal:!e}))}handleMenuItemClick({key:e}){if("change_dataset"===e&&this.toggleChangeDatasourceModal(),"edit_dataset"===e&&this.toggleEditDatasourceModal(),"view_in_sql_lab"===e){const{datasource:e}=this.props,t={datasourceKey:`${e.id}__${e.type}`,sql:e.sql};Object(E.l)("/superset/sqllab/",t)}}render(){const{showChangeDatasourceModal:e,showEditDatasourceModal:t}=this.state,{datasource:r,onChange:n}=this.props,a=null==r.id,o="table"===r.type,i=Object(T.f)(xe.o,{onClick:this.handleMenuItemClick},this.props.isEditable&&Object(T.f)(xe.o.Item,{key:"edit_dataset"},Object(w.e)("Edit dataset")),Object(T.f)(xe.o.Item,{key:"change_dataset"},Object(w.e)("Change dataset")),o&&Object(T.f)(xe.o.Item,{key:"view_in_sql_lab"},Object(w.e)("View in SQL Lab"))),{health_check_message:s}=r;return Object(T.f)(Ue,{className:"DatasourceControl"},Object(T.f)("div",{className:"data-container"},Object(T.f)(Ce.a,{name:"dataset-physical",className:"dataset-svg"}),!a&&r.name.length>25?Object(T.f)(we.a,{title:r.name},Object(T.f)("span",{className:"title-select"},r.name)):Object(T.f)("span",{title:r.name,className:"title-select"},r.name),s&&Object(T.f)(we.a,{title:s},Object(T.f)(Ce.a,{name:"alert-solid",color:Oe.d.colors.warning.base})),Object(T.f)(xe.j,{overlay:i,trigger:["click"]},Object(T.f)(we.a,{title:Object(w.e)("More dataset related options")},Object(T.f)(Ce.a,{className:"datasource-modal-trigger",name:"more-horiz"})))),a&&Object(T.f)("div",{className:"error-alert"},Object(T.f)(ze.a,{level:"warning",title:Object(w.e)("Missing dataset"),source:"explore",subtitle:Object(T.f)(l.a.Fragment,null,Object(T.f)("p",null,Object(w.e)("The dataset linked to this chart may have been deleted.")),Object(T.f)("p",null,Object(T.f)(ke.a,{buttonStyle:"primary",onClick:()=>this.handleMenuItemClick({key:"change_dataset"})},Object(w.e)("Change dataset"))))})),t&&Object(T.f)(qe.a,{datasource:r,show:t,onDatasourceSave:this.onDatasourceSave,onHide:this.toggleEditDatasourceModal}),e&&Object(T.f)(He,{onDatasourceSave:this.onDatasourceSave,onHide:this.toggleChangeDatasourceModal,show:e,onChange:n}))}}$e.propTypes=Be,$e.defaultProps={onChange:()=>{},onDatasourceSave:null,value:null,isEditable:!0};var Ge=$e,Ve=r(1e3),Qe=r(126),We=r(137),Ye=r(353),Xe=r(59),Ke=r.n(Xe),Ze=r(1321),Je=r.n(Ze),et=r(56),tt=r.n(et),rt=r(257),nt=r.n(rt),at=r(60),ot=r.n(at),it=r(227),st=r.n(it),lt=r(831),ct=r.n(lt),ut=r(70),dt=r.n(ut),ht=r(55),pt=r.n(ht),ft=r(287),gt=r.n(ft),bt=v.a.shape({column_name:v.a.string.isRequired,type:v.a.string}),mt=r(47),vt=r(54),yt=r(890),Ot=r(251),xt=r(745),wt=r(749),Ct=r(1074),_t=r(1073);function jt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(n=(i=s.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{n||null==s.return||s.return()}finally{if(a)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return St(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return St(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function St(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Et(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(n=(i=s.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{n||null==s.return||s.return()}finally{if(a)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return kt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return kt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Tt(e){var t=Object(s.useRef)(e);t.current=e,Object(vt.a)(null!=e.accept,"accept must be defined");var r,n=Et((r=Object(wt.a)(),[Object(s.useMemo)((function(){return new _t.a(r)}),[r]),Object(s.useMemo)((function(){return new Ct.a(r.getBackend())}),[r])]),2),a=n[0],o=n[1];!function(e,t,r){var n=Object(wt.a)(),a=Object(s.useMemo)((function(){return{canDrop:function(){var r=e.current.canDrop;return!r||r(t.getItem(),t)},hover:function(){var r=e.current.hover;r&&r(t.getItem(),t)},drop:function(){var r=e.current.drop;if(r)return r(t.getItem(),t)}}}),[t]);Object(Ot.a)((function(){var o=jt(Object(xt.b)(e.current.accept,a,n),2),i=o[0],s=o[1];return t.receiveHandlerId(i),r.receiveHandlerId(i),s}),[t,r])}(t,a,o);var i=Object(yt.a)(a,t.current.collect||function(){return{}},(function(){return o.reconnect()})),l=Object(s.useMemo)((function(){return o.hooks.dropTarget()}),[o]);return Object(Ot.a)((function(){o.dropTargetOptions=e.options||null,o.reconnect()}),[e.options]),[i,l]}var Mt=r(2119),Rt=r(815);const At=Oe.c.div`
  margin-bottom: ${({theme:e})=>e.gridUnit}px;
  :last-child {
    margin-bottom: 0;
  }
`,Dt=Oe.c.div`
  display: flex;
  align-items: center;
  width: 100%;
  font-size: ${({theme:e})=>e.typography.sizes.s}px;
  height: ${({theme:e})=>6*e.gridUnit}px;
  background-color: ${({theme:e})=>e.colors.grayscale.light3};
  border-radius: 3px;
  cursor: ${({withCaret:e})=>e?"pointer":"default"};
`,Pt=Oe.c.div`
  display: flex;
  max-width: 100%;
  overflow: hidden;
  text-overflow: ellipsis;
  align-items: center;
  white-space: nowrap;
  padding-left: ${({theme:e})=>e.gridUnit}px;
  svg {
    margin-right: ${({theme:e})=>e.gridUnit}px;
  }
  .option-label {
    display: inline;
  }
`,It=Oe.c.div`
  height: 100%;
  border-left: solid 1px ${({theme:e})=>e.colors.grayscale.dark2}0C;
  margin-left: auto;
`,Ft=Oe.c.div`
  height: 100%;
  width: ${({theme:e})=>6*e.gridUnit}px;
  border-right: solid 1px ${({theme:e})=>e.colors.grayscale.dark2}0C;
  cursor: pointer;
`,Nt=Object(Oe.c)(_.a)`
  margin: 0 ${({theme:e})=>e.gridUnit}px;
`,Lt=Oe.c.div`
  display: flex;
  align-items: center;
  justify-content: space-between;
`,Ht=Oe.c.div`
  padding: ${({theme:e})=>e.gridUnit}px;
  border: solid 1px ${({theme:e})=>e.colors.grayscale.light2};
  border-radius: ${({theme:e})=>e.gridUnit}px;
`,qt=Oe.c.div`
  padding: ${({theme:e})=>e.gridUnit}px;
  border: ${({canDrop:e,isOver:t,theme:r})=>t&&e?`dashed 1px ${r.colors.info.dark1}`:t&&!e?`dashed 1px ${r.colors.error.dark1}`:`solid 1px ${r.colors.grayscale.light2}`};
  border-radius: ${({theme:e})=>e.gridUnit}px;
`,zt=Oe.c.div`
  display: flex;
  align-items: center;
  width: 100%;
  height: ${({theme:e})=>6*e.gridUnit}px;
  padding-left: ${({theme:e})=>e.gridUnit}px;
  font-size: ${({theme:e})=>e.typography.sizes.s}px;
  color: ${({theme:e})=>e.colors.grayscale.light1};
  border: dashed 1px ${({theme:e})=>e.colors.grayscale.light2};
  border-radius: ${({theme:e})=>e.gridUnit}px;
  cursor: ${({cancelHover:e})=>e?"inherit":"pointer"};

  :hover {
    background-color: ${({cancelHover:e,theme:t})=>e?"inherit":t.colors.grayscale.light4};
  }

  :active {
    background-color: ${({cancelHover:e,theme:t})=>e?"inherit":t.colors.grayscale.light3};
  }
`,Bt=Oe.c.button`
  display: flex;
  align-items: center;
  justify-content: center;
  height: ${({theme:e})=>4*e.gridUnit}px;
  width: ${({theme:e})=>4*e.gridUnit}px;
  padding: 0;
  background-color: ${({theme:e})=>e.colors.primary.dark1};
  border: none;
  border-radius: 2px;

  :disabled {
    cursor: not-allowed;
    background-color: ${({theme:e})=>e.colors.grayscale.light1};
  }
`,Ut=({label:e,savedMetric:t,adhocMetric:r,onRemove:n,onMoveLabel:o,onDropLabel:i,withCaret:l,isFunction:c,type:u,index:d,isExtra:h,...p})=>{const f=Object(Oe.e)(),g=Object(s.useRef)(null),[,b]=Tt({accept:u,drop(){null==i||i()},hover(e,t){var r;if(!g.current)return;const n=e.index,a=d;if(n===a)return;const i=null==(r=g.current)?void 0:r.getBoundingClientRect(),s=(i.bottom-i.top)/2,l=t.getClientOffset(),c=null!=l&&l.y?(null==l?void 0:l.y)-i.top:0;n<a&&c<s||n>a&&c>s||(null==o||o(n,a),e.index=a)}}),[,m]=Object(Mt.a)({item:{type:u,index:d,value:null!=t&&t.metric_name?t:r},collect:e=>({isDragging:e.isDragging()})});return m(b(g)),Object(T.f)(At,{ref:g},Object(T.f)(Dt,a()({withCaret:l},p),Object(T.f)(Ft,{role:"button",onClick:n},Object(T.f)(Ce.a,{name:"x-small",color:f.colors.grayscale.light1})),Object(T.f)(Pt,null,c&&Object(T.f)(Ce.a,{name:"function",viewBox:"0 0 16 11"}),null!=t&&t.metric_name?Object(T.f)(Rt.a,{metric:t}):Object(T.f)(we.a,{title:e},e)),h&&Object(T.f)(Nt,{icon:"exclamation-triangle",placement:"top",bsStyle:"warning",tooltip:Object(w.e)("\n                This filter was inherited from the dashboard's context.\n                It won't be saved when saving the chart.\n              ")}),l&&Object(T.f)(It,null,Object(T.f)(Ce.a,{name:"caret-right",color:f.colors.grayscale.light1}))))};var $t=r(172),Gt=r(252),Vt=v.a.shape({aggregate_name:v.a.string.isRequired});const Qt={aggregate:Vt,showType:v.a.bool};function Wt({aggregate:e,showType:t}){return Object(T.f)("div",null,t&&Object(T.f)(Gt.a,{type:"aggregate"}),Object(T.f)("span",{className:"m-r-5 option-label"},e.aggregate_name))}Wt.propTypes=Qt;var Yt=v.a.shape({metric_name:v.a.string.isRequired,verbose_name:v.a.string,expression:v.a.string.isRequired});const Xt={option:v.a.oneOfType([bt,Yt,Vt]).isRequired,addWarningToast:v.a.func.isRequired};function Kt({option:e,addWarningToast:t}){return e.metric_name?Object(T.f)(Rt.a,{metric:e,showType:!0}):e.column_name?Object(T.f)($t.a,{column:e,showType:!0}):e.aggregate_name?Object(T.f)(Wt,{aggregate:e,showType:!0}):(t("You must supply either a saved metric, column or aggregate to MetricDefinitionOption"),null)}Kt.propTypes=Xt;var Zt=Object(Ae.a)(Kt),Jt=r(1322),er=r.n(Jt);const tr="SIMPLE",rr="SQL";function nr(e){if(e.sqlExpression&&mt.r.test(e.sqlExpression)){var t,r;const n=Ke()(t=e.sqlExpression).call(t,")"),a=er()(r=e.sqlExpression.substring(0,n)).call(r,"(");if(n>0&&a>0)return e.sqlExpression.substring(a+1,n)}return null}function ar(e){if(e.sqlExpression&&mt.r.test(e.sqlExpression)){var t;const r=Ke()(t=e.sqlExpression).call(t,"(");if(r>0)return e.sqlExpression.substring(0,r)}return null}class or{constructor(e){if(this.expressionType=e.expressionType||tr,this.expressionType===tr){const t=nr(e);this.column=e.column||t&&{column_name:t},this.aggregate=e.aggregate||ar(e),this.sqlExpression=null}else this.expressionType===rr&&(this.sqlExpression=e.sqlExpression,this.column=null,this.aggregate=null);this.isNew=!!e.isNew,this.hasCustomLabel=!(!e.hasCustomLabel||!e.label),this.label=this.hasCustomLabel?e.label:this.getDefaultLabel(),this.optionName=e.optionName||`metric_${Math.random().toString(36).substring(2,15)}_${Math.random().toString(36).substring(2,15)}`}getDefaultLabel(){const e=this.translateToSql();return e.length<43?e:`${e.substring(0,40)}...`}translateToSql(){if(this.expressionType===tr){var e;return(this.aggregate||"")+(null!=(e=this.column)&&e.column_name?`(${this.column.column_name})`:"")}return this.expressionType===rr?this.sqlExpression:""}duplicateWith(e){return new or({...this,isNew:!1,...e})}equals(e){return e.label===this.label&&e.expressionType===this.expressionType&&e.sqlExpression===this.sqlExpression&&e.aggregate===this.aggregate&&(e.column&&e.column.column_name)===(this.column&&this.column.column_name)}isValid(){return this.expressionType===tr?!(!this.column||!this.aggregate):this.expressionType===rr&&!!this.sqlExpression}inferSqlExpressionAggregate(){return ar(this)}inferSqlExpressionColumn(){return nr(this)}}const ir={title:v.a.shape({label:v.a.string,hasCustomLabel:v.a.bool}),onChange:v.a.func.isRequired,isEditDisabled:v.a.bool};class sr extends l.a.Component{constructor(e){var t,r,n,a,o;super(e),this.onMouseOver=i()(t=this.onMouseOver).call(t,this),this.onMouseOut=i()(r=this.onMouseOut).call(r,this),this.onClick=i()(n=this.onClick).call(n,this),this.onBlur=i()(a=this.onBlur).call(a,this),this.onInputBlur=i()(o=this.onInputBlur).call(o,this),this.state={isHovered:!1,isEditMode:!1}}onMouseOver(){this.setState({isHovered:!0})}onMouseOut(){this.setState({isHovered:!1})}onClick(){this.setState({isEditMode:!0})}onBlur(){this.setState({isEditMode:!1})}onInputBlur(e){""===e.target.value&&this.props.onChange(e),this.onBlur()}render(){const{title:e,onChange:t,isEditDisabled:r}=this.props,n=Object(w.e)("My metric");return r?Object(T.f)("span",null,e.label||n):this.state.isEditMode?Object(T.f)(B.a,{className:"metric-edit-popover-label-input",type:"text",placeholder:e.label,value:e.hasCustomLabel?e.label:"",autoFocus:!0,onChange:t,onBlur:this.onInputBlur}):Object(T.f)(we.a,{placement:"top",title:"Click to edit label"},Object(T.f)("span",{className:"AdhocMetricEditPopoverTitle inline-editable",onMouseOver:this.onMouseOver,onMouseOut:this.onMouseOut,onClick:this.onClick,onBlur:this.onBlur,role:"button",tabIndex:0},e.label||n," ",Object(T.f)("i",{className:"fa fa-pencil",style:{color:this.state.isHovered?"black":"grey"}})))}}sr.propTypes=ir;var lr=r(133),cr=r.n(lr),ur=r(136),dr=r(176),hr=r(95),pr=r(215),fr=r(525),gr=r(210);const br={adhocMetric:v.a.instanceOf(or).isRequired,onChange:v.a.func.isRequired,onClose:v.a.func.isRequired,onResize:v.a.func.isRequired,getCurrentTab:v.a.func,getCurrentLabel:v.a.func,columns:v.a.arrayOf(bt),savedMetricsOptions:v.a.arrayOf(Yt),savedMetric:Yt,datasourceType:v.a.string},mr={columns:[],getCurrentTab:gr.c},vr=Oe.c.i`
  margin-left: ${({theme:e})=>2*e.gridUnit}px;
`,yr=Oe.c.span`
  .option-label {
    display: inline;
  }
`;class Or extends l.a.PureComponent{constructor(e){var t,r,n,a,o,s,l,c,u,d,h,p;super(e),this.defaultActiveTabKey=(this.props.savedMetric.metric_name||this.props.adhocMetric.isNew)&&pt()(this.props.savedMetricsOptions)&&this.props.savedMetricsOptions.length>0?"SAVED":this.props.adhocMetric.expressionType,this.onSave=i()(t=this.onSave).call(t,this),this.onResetStateAndClose=i()(r=this.onResetStateAndClose).call(r,this),this.onColumnChange=i()(n=this.onColumnChange).call(n,this),this.onAggregateChange=i()(a=this.onAggregateChange).call(a,this),this.onSavedMetricChange=i()(o=this.onSavedMetricChange).call(o,this),this.onSqlExpressionChange=i()(s=this.onSqlExpressionChange).call(s,this),this.onDragDown=i()(l=this.onDragDown).call(l,this),this.onMouseMove=i()(c=this.onMouseMove).call(c,this),this.onMouseUp=i()(u=this.onMouseUp).call(u,this),this.onTabChange=i()(d=this.onTabChange).call(d,this),this.handleAceEditorRef=i()(h=this.handleAceEditorRef).call(h,this),this.refreshAceEditor=i()(p=this.refreshAceEditor).call(p,this),this.state={adhocMetric:this.props.adhocMetric,savedMetric:this.props.savedMetric,width:320,height:240},document.addEventListener("mouseup",this.onMouseUp)}componentDidMount(){this.props.getCurrentTab(this.defaultActiveTabKey)}componentDidUpdate(e,t){var r,n,a,o,i,s,l,c,u,d,h,p,f;(null==(r=t.adhocMetric)?void 0:r.sqlExpression)===(null==(n=this.state.adhocMetric)?void 0:n.sqlExpression)&&(null==(a=t.adhocMetric)?void 0:a.aggregate)===(null==(o=this.state.adhocMetric)?void 0:o.aggregate)&&(null==(i=t.adhocMetric)?void 0:null==(s=i.column)?void 0:s.column_name)===(null==(l=this.state.adhocMetric)?void 0:null==(c=l.column)?void 0:c.column_name)&&(null==(u=t.savedMetric)?void 0:u.metric_name)===(null==(d=this.state.savedMetric)?void 0:d.metric_name)||this.props.getCurrentLabel({savedMetricLabel:(null==(h=this.state.savedMetric)?void 0:h.verbose_name)||(null==(p=this.state.savedMetric)?void 0:p.metric_name),adhocMetricLabel:null==(f=this.state.adhocMetric)?void 0:f.getDefaultLabel()})}componentWillUnmount(){document.removeEventListener("mouseup",this.onMouseUp),document.removeEventListener("mousemove",this.onMouseMove)}onSave(){var e;const{adhocMetric:t,savedMetric:r}=this.state,n=null!=r&&r.metric_name?r:t,a=null!=(e=this.props.savedMetric)&&e.metric_name?this.props.savedMetric:this.props.adhocMetric;this.props.onChange({...n},a),this.props.onClose()}onResetStateAndClose(){this.setState({adhocMetric:this.props.adhocMetric,savedMetric:this.props.savedMetric},this.props.onClose)}onColumnChange(e){var t;const r=ot()(t=this.props.columns).call(t,t=>t.id===e);this.setState(e=>({adhocMetric:e.adhocMetric.duplicateWith({column:r,expressionType:tr}),savedMetric:void 0}))}onAggregateChange(e){this.setState(t=>({adhocMetric:t.adhocMetric.duplicateWith({aggregate:e,expressionType:tr}),savedMetric:void 0}))}onSavedMetricChange(e){var t;const r=ot()(t=this.props.savedMetricsOptions).call(t,t=>t.id===e);this.setState(e=>({savedMetric:r,adhocMetric:e.adhocMetric.duplicateWith({column:void 0,aggregate:void 0,sqlExpression:void 0,expressionType:tr})}))}onSqlExpressionChange(e){this.setState(t=>({adhocMetric:t.adhocMetric.duplicateWith({sqlExpression:e,expressionType:rr}),savedMetric:void 0}))}onDragDown(e){this.dragStartX=e.clientX,this.dragStartY=e.clientY,this.dragStartWidth=this.state.width,this.dragStartHeight=this.state.height,document.addEventListener("mousemove",this.onMouseMove)}onMouseMove(e){this.props.onResize(),this.setState({width:Math.max(this.dragStartWidth+(e.clientX-this.dragStartX),320),height:Math.max(this.dragStartHeight+2*(e.clientY-this.dragStartY),240)})}onMouseUp(){document.removeEventListener("mousemove",this.onMouseMove)}onTabChange(e){this.refreshAceEditor(),this.props.getCurrentTab(e)}handleAceEditorRef(e){e&&(this.aceEditorRef=e)}refreshAceEditor(){cr()(()=>{this.aceEditorRef&&this.aceEditorRef.editor.resize()},0)}renderColumnOption(e){const t={...e};return t.metric_name&&!t.verbose_name&&(t.verbose_name=t.metric_name),Object(T.f)(yr,null,Object(T.f)($t.a,{column:t,showType:!0}))}render(){var e;const{adhocMetric:t,savedMetric:r,columns:n,savedMetricsOptions:o,onChange:i,onClose:s,onResize:l,datasourceType:c,...d}=this.props,{adhocMetric:p,savedMetric:f}=this.state,g=W()(fr.a).call(fr.a,h()(n).call(n,e=>({name:e.column_name,value:e.column_name,score:50,meta:"column"}))),b=p.column&&p.column.column_name||p.inferSqlExpressionColumn(),m={placeholder:Object(w.e)("%s column(s)",n.length),value:b,onChange:this.onColumnChange,allowClear:!0,showSearch:!0,autoFocus:!b,filterOption:(e,t)=>{var r;return Ke()(r=t.filterBy.toLowerCase()).call(r,e.toLowerCase())>=0}},v={placeholder:Object(w.e)("%s aggregates(s)",mt.b.length),value:p.aggregate||p.inferSqlExpressionAggregate(),onChange:this.onAggregateChange,allowClear:!0,autoFocus:!!b,showSearch:!0},y={placeholder:Object(w.e)("%s saved metric(s)",null!=(e=null==o?void 0:o.length)?e:0),value:(null==f?void 0:f.verbose_name)||(null==f?void 0:f.metric_name),onChange:this.onSavedMetricChange,allowClear:!0,showSearch:!0,autoFocus:!0,filterOption:(e,t)=>{var r;return Ke()(r=t.filterBy.toLowerCase()).call(r,e.toLowerCase())>=0}};var O;"druid"===this.props.datasourceType&&(v.options=u()(O=v.options).call(O,e=>"AVG"!==e));const x=p.isValid()||(null==f?void 0:f.metric_name),C=!p.equals(t)||!(void 0===(null==f?void 0:f.metric_name)&&void 0===(null==r?void 0:r.metric_name))&&(null==f?void 0:f.metric_name)!==(null==r?void 0:r.metric_name);return Object(T.f)("div",a()({id:"metrics-edit-popover"},d),Object(T.f)(ur.c,{id:"adhoc-metric-edit-tabs",defaultActiveKey:this.defaultActiveTabKey,className:"adhoc-metric-edit-tabs",style:{height:this.state.height,width:this.state.width},onChange:this.onTabChange,allowOverflow:!0},Object(T.f)(ur.c.TabPane,{key:"SAVED",tab:Object(w.e)("Saved")},Object(T.f)(H.a,null,Object(T.f)(hr.a,null,Object(T.f)("strong",null,Object(w.e)("Saved metric"))),Object(T.f)(dr.b,a()({},y,{name:"select-saved",getPopupContainer:e=>e.parentNode}),pt()(o)&&h()(o).call(o,e=>Object(T.f)(dr.b.Option,{value:e.id,filterBy:e.verbose_name||e.metric_name,key:e.id},Object(T.f)(Rt.a,{metric:e,showType:!0})))))),Object(T.f)(ur.c.TabPane,{key:tr,tab:Object(w.e)("Simple")},Object(T.f)(H.a,null,Object(T.f)(hr.a,null,Object(T.f)("strong",null,Object(w.e)("column"))),Object(T.f)(dr.b,a()({},m,{name:"select-column",getPopupContainer:e=>e.parentNode}),h()(n).call(n,e=>Object(T.f)(dr.b.Option,{value:e.id,filterBy:e.verbose_name||e.column_name,key:e.id},this.renderColumnOption(e))))),Object(T.f)(H.a,null,Object(T.f)(hr.a,null,Object(T.f)("strong",null,Object(w.e)("aggregate"))),Object(T.f)(dr.b,a()({},v,{name:"select-aggregate",getPopupContainer:e=>e.parentNode}),h()(mt.b).call(mt.b,e=>Object(T.f)(dr.b.Option,{value:e,key:e},e))))),Object(T.f)(ur.c.TabPane,{key:rr,tab:Object(w.e)("Custom SQL")},"druid"!==this.props.datasourceType?Object(T.f)(H.a,null,Object(T.f)(pr.f,{showLoadingForImport:!0,ref:this.handleAceEditorRef,keywords:g,height:`${this.state.height-80}px`,onChange:this.onSqlExpressionChange,width:"100%",showGutter:!1,value:p.sqlExpression||p.translateToSql(),editorProps:{$blockScrolling:!0},enableLiveAutocompletion:!0,className:"adhoc-filter-sql-editor",wrapEnabled:!0})):Object(T.f)("div",{className:"custom-sql-disabled-message"},"Custom SQL Metrics are not available on druid datasources"))),Object(T.f)("div",null,Object(T.f)(ke.a,{buttonSize:"small",onClick:this.onResetStateAndClose,cta:!0},Object(w.e)("Close")),Object(T.f)(ke.a,{disabled:!x,buttonStyle:C&&x?"primary":"default",buttonSize:"small",onClick:this.onSave,cta:!0},Object(w.e)("Save")),Object(T.f)(vr,{role:"button","aria-label":"Resize",tabIndex:0,onMouseDown:this.onDragDown,className:"fa fa-expand edit-popover-resize text-muted"})))}}Or.propTypes=br,Or.defaultProps=mr;class xr extends l.a.PureComponent{constructor(e){var t,r,n,a,o,s,l;super(e),this.onPopoverResize=i()(t=this.onPopoverResize).call(t,this),this.onLabelChange=i()(r=this.onLabelChange).call(r,this),this.closePopover=i()(n=this.closePopover).call(n,this),this.togglePopover=i()(a=this.togglePopover).call(a,this),this.getCurrentTab=i()(o=this.getCurrentTab).call(o,this),this.getCurrentLabel=i()(s=this.getCurrentLabel).call(s,this),this.onChange=i()(l=this.onChange).call(l,this),this.state={popoverVisible:!1,title:{label:e.adhocMetric.label,hasCustomLabel:e.adhocMetric.hasCustomLabel},currentLabel:"",labelModified:!1,isTitleEditDisabled:!1}}onLabelChange(e){var t;const{verbose_name:r,metric_name:n}=this.props.savedMetric,a=null==(t=this.props.adhocMetric)?void 0:t.getDefaultLabel(),o=e.target.value;this.setState(e=>({title:{label:o||e.currentLabel||r||n||a,hasCustomLabel:!!o},labelModified:!0}))}onPopoverResize(){this.forceUpdate()}closePopover(){this.togglePopover(!1),this.setState({labelModified:!1})}togglePopover(e){this.setState({popoverVisible:e})}getCurrentTab(e){this.setState({isTitleEditDisabled:"SAVED"===e})}getCurrentLabel({savedMetricLabel:e,adhocMetricLabel:t}){const r=e||t;this.setState({currentLabel:r,labelModified:!0}),!e&&this.state.title.hasCustomLabel||this.setState({title:{label:r,hasCustomLabel:!1}})}onChange(e,t){this.props.onMetricEdit({...e,...this.state.title},t)}render(){const{adhocMetric:e,savedMetric:t}=this.props,{verbose_name:r,metric_name:n}=t,{hasCustomLabel:a,label:o}=e,i=a?o:e.getDefaultLabel(),s=this.state.labelModified?this.state.title:{label:r||n||i,hasCustomLabel:a},l=Object(T.f)(Or,{adhocMetric:e,title:s,columns:this.props.columns,savedMetricsOptions:this.props.savedMetricsOptions,savedMetric:this.props.savedMetric,datasourceType:this.props.datasourceType,onResize:this.onPopoverResize,onClose:this.closePopover,onChange:this.onChange,getCurrentTab:this.getCurrentTab,getCurrentLabel:this.getCurrentLabel}),c=Object(T.f)(sr,{title:s,onChange:this.onLabelChange,isEditDisabled:this.state.isTitleEditDisabled});return Object(T.f)(j.a,{placement:"right",trigger:"click",content:l,defaultVisible:this.state.popoverVisible,visible:this.state.popoverVisible,onVisibleChange:this.togglePopover,title:c,destroyTooltipOnHide:this.props.createNew},this.props.children)}}var wr=xr,Cr=r(204);const _r={adhocMetric:v.a.instanceOf(or),onMetricEdit:v.a.func.isRequired,onRemoveMetric:v.a.func,columns:v.a.arrayOf(bt),savedMetricsOptions:v.a.arrayOf(Yt),savedMetric:Yt,datasourceType:v.a.string,onMoveLabel:v.a.func,onDropLabel:v.a.func,index:v.a.number};class jr extends l.a.PureComponent{constructor(e){var t;super(e),this.onRemoveMetric=i()(t=this.onRemoveMetric).call(t,this)}onRemoveMetric(e){e.stopPropagation(),this.props.onRemoveMetric()}render(){const{adhocMetric:e,onMetricEdit:t,columns:r,savedMetricsOptions:n,savedMetric:a,datasourceType:o,onMoveLabel:i,onDropLabel:s,index:l}=this.props;return Object(T.f)(wr,{adhocMetric:e,onMetricEdit:t,columns:r,savedMetricsOptions:n,savedMetric:a,datasourceType:o},Object(T.f)(Ut,{savedMetric:a,adhocMetric:e,label:e.label,onRemove:this.onRemoveMetric,onMoveLabel:i,onDropLabel:s,index:l,type:Cr.a.AdhocMetricOption,withCaret:!0,isFunction:!0}))}}var Sr=jr;jr.propTypes=_r;var Er=v.a.oneOfType([v.a.shape({expressionType:v.a.oneOf([tr]).isRequired,column:bt.isRequired,aggregate:v.a.oneOf(b()(mt.a)).isRequired,label:v.a.string.isRequired}),v.a.shape({expressionType:v.a.oneOf([rr]).isRequired,sqlExpression:v.a.string.isRequired,label:v.a.string.isRequired})]);const kr={option:v.a.oneOfType([Yt,Er]).isRequired,index:v.a.number.isRequired,onMetricEdit:v.a.func,onRemoveMetric:v.a.func,onMoveLabel:v.a.func,onDropLabel:v.a.func,columns:v.a.arrayOf(bt),savedMetrics:v.a.arrayOf(Yt),savedMetricsOptions:v.a.arrayOf(Yt),multi:v.a.bool,datasourceType:v.a.string};function Tr({option:e,onMetricEdit:t,onRemoveMetric:r,columns:n,savedMetrics:a,savedMetricsOptions:o,datasourceType:i,onMoveLabel:s,onDropLabel:l,index:c}){let u;var d;if("string"==typeof e?(d=e,u=ot()(a).call(a,e=>e.metric_name===d)):e.metric_name&&(u=e),e instanceof or||u){var h;const a={onMetricEdit:t,onRemoveMetric:r,columns:n,savedMetricsOptions:o,datasourceType:i,adhocMetric:e instanceof or?e:new or({isNew:!0}),onMoveLabel:s,onDropLabel:l,index:c,savedMetric:null!=(h=u)?h:{}};return Object(T.f)(Sr,a)}return"string"==typeof e?Object(T.f)(Ut,{label:e,onRemove:r,onMoveLabel:s,onDropLabel:l,type:Cr.a.FilterOption,index:c,isFunction:!0}):null}Tr.propTypes=kr;const Mr={name:v.a.string.isRequired,onChange:v.a.func,value:v.a.oneOfType([v.a.arrayOf(v.a.oneOfType([v.a.string,Er])),v.a.oneOfType([v.a.string,Er])]),columns:v.a.arrayOf(bt),savedMetrics:v.a.arrayOf(Yt),isLoading:v.a.bool,multi:v.a.bool,clearable:v.a.bool,datasourceType:v.a.string};function Rr(e,t,r){var n;return null!=(n=null==e?void 0:u()(e).call(e,e=>pt()(t)?!f()(t).call(t,e.metric_name)||e.metric_name===r:e))?n:[]}function Ar(e){return e&&!(e instanceof or)&&e.expressionType}function Dr(e){return e?pt()(e)?h()(e).call(e,e=>Ar(e)?new or(e):e):Ar(e)?[new or(e)]:[e]:[]}class Pr extends l.a.PureComponent{constructor(e){var t,r,n,a,o,s,l,c,u;super(e),this.onChange=i()(t=this.onChange).call(t,this),this.onMetricEdit=i()(r=this.onMetricEdit).call(r,this),this.onNewMetric=i()(n=this.onNewMetric).call(n,this),this.onRemoveMetric=i()(a=this.onRemoveMetric).call(a,this),this.moveLabel=i()(o=this.moveLabel).call(o,this),this.checkIfAggregateInInput=i()(s=this.checkIfAggregateInInput).call(s,this),this.optionsForSelect=i()(l=this.optionsForSelect).call(l,this),this.selectFilterOption=i()(c=this.selectFilterOption).call(c,this),this.isAutoGeneratedMetric=i()(u=this.isAutoGeneratedMetric).call(u,this),this.optionRenderer=e=>Object(T.f)(Zt,{option:e}),this.valueRenderer=(e,t)=>{var r;return Object(T.f)(Tr,{key:t,index:t,option:e,onMetricEdit:this.onMetricEdit,onRemoveMetric:()=>this.onRemoveMetric(t),columns:this.props.columns,datasource:this.props.datasource,savedMetrics:this.props.savedMetrics,savedMetricsOptions:Rr(this.props.savedMetrics,this.props.value,null==(r=this.props.value)?void 0:r[t]),datasourceType:this.props.datasourceType,onMoveLabel:this.moveLabel,onDropLabel:()=>this.props.onChange(this.state.value)})},this.select=null,this.selectRef=e=>{this.select=e?e.select:null},this.state={aggregateInInput:null,options:this.optionsForSelect(this.props),value:Dr(this.props.value)}}UNSAFE_componentWillReceiveProps(e){const{value:t}=this.props;gt()(this.props.columns,e.columns)&&gt()(this.props.savedMetrics,e.savedMetrics)||(this.setState({options:this.optionsForSelect(e)}),function(e,t){var r,n,a,o,i;const s=new dt.a(h()(r=[...t.columns||[],...t.savedMetrics||[]]).call(r,({column_name:e,metric_name:t})=>e||t));return ct()(n=u()(a=h()(o=u()(i=pt()(e)?e:[e]).call(i,e=>e)).call(o,e=>e.column?e.column.column_name:e.column_name||e)).call(a,e=>e&&"string"==typeof e)).call(n,e=>s.has(e))}(e.value,e)||this.props.onChange([])),t!==e.value&&this.setState({value:Dr(e.value)})}onNewMetric(e){this.setState(t=>({...t,value:[...t.value,e]}),()=>{this.onChange(this.state.value)})}onMetricEdit(e,t){this.setState(r=>{var n;return{value:h()(n=r.value).call(n,r=>r!==t.metric_name&&void 0===r.optionName||r.optionName!==t.optionName?r:e)}},()=>{this.onChange(this.state.value)})}onRemoveMetric(e){if(!pt()(this.state.value))return;const t=[...this.state.value];st()(t).call(t,e,1),this.setState(e=>({...e,value:t})),this.props.onChange(t)}onChange(e){var t;if(null===e)return void this.props.onChange(null);let r;r=pt()(e)?e:e?[e]:[];const n=u()(t=h()(r).call(r,e=>e.metric_name?e.metric_name:e)).call(t,e=>e);this.props.onChange(this.props.multi?n:n[0])}moveLabel(e,t){const{value:r}=this.state,n=[...r];[n[t],n[e]]=[n[e],n[t]],this.setState({value:n})}isAddNewMetricDisabled(){return!this.props.multi&&this.state.value.length>0}addNewMetricPopoverTrigger(e){return this.isAddNewMetricDisabled()?e:Object(T.f)(wr,{adhocMetric:new or({isNew:!0}),onMetricEdit:this.onNewMetric,columns:this.props.columns,savedMetricsOptions:Rr(this.props.savedMetrics,this.props.value,null),datasource:this.props.datasource,savedMetric:{},datasourceType:this.props.datasourceType,createNew:!0},e)}checkIfAggregateInInput(e){const t=e.toLowerCase(),r=ot()(mt.b).call(mt.b,e=>nt()(t).call(t,`${e.toLowerCase()}(`))||null;this.clearedAggregateInInput=this.state.aggregateInInput,this.setState({aggregateInInput:r})}optionsForSelect(e){const{columns:t,savedMetrics:r}=e,n=[...t||[],...t&&t.length?h()(mt.b).call(mt.b,e=>({aggregate_name:e})):[],...r||[]];return tt()(n).call(n,(e,t)=>(t.metric_name?e.push({...t,optionName:t.metric_name}):t.column_name?e.push({...t,optionName:`_col_${t.column_name}`}):t.aggregate_name&&e.push({...t,optionName:`_aggregate_${t.aggregate_name}`}),e),[])}isAutoGeneratedMetric(e){return"druid"===this.props.datasourceType?mt.p.test(e.verbose_name):mt.q.test(e.metric_name)}selectFilterOption({data:e},t){var r,n;if(this.state.aggregateInInput){var a;let r=t.length;Je()(t).call(t,")")&&(r=t.length-1);const n=t.substring(Ke()(t).call(t,"(")+1,r);return e.column_name&&Ke()(a=e.column_name.toLowerCase()).call(a,n)>=0}return e.optionName&&(!e.metric_name||!this.isAutoGeneratedMetric(e)||e.verbose_name)&&(Ke()(r=e.optionName.toLowerCase()).call(r,t)>=0||e.verbose_name&&Ke()(n=e.verbose_name.toLowerCase()).call(n,t)>=0)}render(){var e;const{theme:t}=this.props;return Object(T.f)("div",{className:"metrics-select"},Object(T.f)(Lt,null,Object(T.f)(U.a,this.props),this.addNewMetricPopoverTrigger(Object(T.f)(Bt,{disabled:this.isAddNewMetricDisabled()},Object(T.f)(Ce.a,{name:"plus-large",width:3*t.gridUnit,height:3*t.gridUnit,color:t.colors.grayscale.light5})))),Object(T.f)(Ht,null,this.state.value.length>0?h()(e=this.state.value).call(e,(e,t)=>this.valueRenderer(e,t)):this.addNewMetricPopoverTrigger(Object(T.f)(zt,null,Object(T.f)(Ce.a,{name:"plus-small",color:t.colors.grayscale.light1}),Object(w.e)("Add metric")))))}}Pr.propTypes=Mr,Pr.defaultProps={onChange:()=>{},clearable:!0,savedMetrics:[],columns:[]};var Ir=Object(C.c)(Pr),Fr=r(553);const Nr="fix",Lr="metric",Hr={onChange:v.a.func,value:v.a.object,isFloat:v.a.bool,datasource:v.a.object.isRequired,default:v.a.shape({type:v.a.oneOf(["fix","metric"]),value:v.a.oneOfType([v.a.string,v.a.number])})},qr={onChange:()=>{},default:{type:Nr,value:5}};class zr extends l.a.Component{constructor(e){var t,r,n,a;super(e),this.onChange=i()(t=this.onChange).call(t,this),this.setType=i()(r=this.setType).call(r,this),this.setFixedValue=i()(n=this.setFixedValue).call(n,this),this.setMetric=i()(a=this.setMetric).call(a,this);const o=(e.value?e.value.type:e.default.type)||Nr,s=(e.value?e.value.value:e.default.value)||"100";this.state={type:o,fixedValue:o===Nr?s:"",metricValue:o===Lr?s:null}}onChange(){this.props.onChange({type:this.state.type,value:this.state.type===Nr?this.state.fixedValue:this.state.metricValue})}setType(e){this.setState({type:e},this.onChange)}setFixedValue(e){this.setState({fixedValue:e},this.onChange)}setMetric(e){this.setState({metricValue:e},this.onChange)}render(){const e=(this.props.value||this.props.default).type||Nr,t=this.props.datasource?this.props.datasource.columns:null,r=this.props.datasource?this.props.datasource.metrics:null;return Object(T.f)("div",null,Object(T.f)(U.a,this.props),Object(T.f)(We.a,{ghost:!0,css:e=>Object(T.e)("&.ant-collapse > .ant-collapse-item.ant-collapse-no-arrow > .ant-collapse-header{border:0px;padding:0px 0px ",2*e.gridUnit,"px 0px;display:inline-block;}&.ant-collapse-ghost > .ant-collapse-item > .ant-collapse-content > .ant-collapse-content-box{padding:0px;& .well{margin-bottom:0px;padding:",2*e.gridUnit,"px;}}",";label:FixedOrMetricControl;")},Object(T.f)(We.a.Panel,{showArrow:!1,header:Object(T.f)(Qe.a,{onClick:()=>{}},this.state.type===Nr&&Object(T.f)("span",null,this.state.fixedValue),this.state.type===Lr&&Object(T.f)("span",null,Object(T.f)("span",null,"metric: "),Object(T.f)("strong",null,this.state.metricValue?this.state.metricValue.label:null)))},Object(T.f)("div",{className:"well"},Object(T.f)(Fr.a,{title:Object(w.e)("Fixed"),isSelected:e===Nr,onSelect:()=>{this.setType(Nr)}},Object(T.f)(Ye.a,{isFloat:!0,onChange:this.setFixedValue,onFocus:()=>{this.setType(Nr)},value:this.state.fixedValue})),Object(T.f)(Fr.a,{title:Object(w.e)("Based on a metric"),isSelected:e===Lr,onSelect:()=>{this.setType(Lr)}},Object(T.f)(Ir,{name:"metric",columns:t,savedMetrics:r,multi:!1,onFocus:()=>{this.setType(Lr)},onChange:this.setMetric,value:this.state.metricValue}))))))}}zr.propTypes=Hr,zr.defaultProps=qr;const Br={onChange:v.a.func,value:v.a.oneOfType([v.a.string,v.a.number,v.a.object,v.a.bool,v.a.array,v.a.func])};function Ur(e){return Object(T.f)(B.a,{type:"hidden",value:e.value})}Ur.propTypes=Br,Ur.defaultProps={onChange:()=>{}};var $r=r(1156),Gr=r(542),Vr=r(1253),Qr=r.n(Vr);r(1355),r(1414);function Wr(e){return Object(T.f)("span",{className:"BootstrapSliderWrapper"},Object(T.f)(Qr.a,e))}const Yr={onChange:v.a.func,value:v.a.oneOfType([v.a.string,v.a.number])};function Xr(e){return Object(T.f)("div",null,Object(T.f)(U.a,e),Object(T.f)(Wr,a()({},e,{change:t=>{e.onChange(t.target.value)}})))}Xr.propTypes=Yr,Xr.defaultProps={onChange:()=>{}};var Kr=r(1157),Zr=r(1150),Jr=r(76);const en={label:v.a.string,tooltip:v.a.string,colType:v.a.string,width:v.a.string,height:v.a.string,timeLag:v.a.oneOfType([v.a.string,v.a.number]),timeRatio:v.a.string,comparisonType:v.a.string,showYAxis:v.a.bool,yAxisBounds:v.a.array,bounds:v.a.array,d3format:v.a.string,dateFormat:v.a.string,onChange:v.a.func},tn={label:Object(w.e)("Time series columns"),tooltip:"",colType:"",width:"",height:"",timeLag:"",timeRatio:"",comparisonType:"",showYAxis:!1,yAxisBounds:[null,null],bounds:[null,null],d3format:"",dateFormat:"",onChange:()=>{}},rn=[{value:"value",label:"Actual value"},{value:"diff",label:"Difference"},{value:"perc",label:"Percentage"},{value:"perc_change",label:"Percentage change"}],nn=[{value:"time",label:"Time comparison"},{value:"contrib",label:"Contribution"},{value:"spark",label:"Sparkline"},{value:"avg",label:"Period average"}];class an extends l.a.Component{constructor(e){var t;super(e);const r={label:this.props.label,tooltip:this.props.tooltip,colType:this.props.colType,width:this.props.width,height:this.props.height,timeLag:this.props.timeLag||0,timeRatio:this.props.timeRatio,comparisonType:this.props.comparisonType,showYAxis:this.props.showYAxis,yAxisBounds:this.props.yAxisBounds,bounds:this.props.bounds,d3format:this.props.d3format,dateFormat:this.props.dateFormat};delete r.onChange,this.state=r,this.onChange=i()(t=this.onChange).call(t,this)}onChange(){this.props.onChange(this.state)}onSelectChange(e,t){this.setState({[e]:t.value},this.onChange)}onTextInputChange(e,t){this.setState({[e]:t.target.value},this.onChange)}onCheckboxChange(e,t){this.setState({[e]:t},this.onChange)}onBoundsChange(e){this.setState({bounds:e},this.onChange)}onYAxisBoundsChange(e){this.setState({yAxisBounds:e},this.onChange)}setType(){}textSummary(){return`${this.state.label}`}edit(){}formRow(e,t,r,n){return Object(T.f)(q.a,{style:{marginTop:"5px"}},Object(T.f)(z.a,{md:5},`${e} `,Object(T.f)(_.a,{placement:"top",tooltip:t,label:r})),Object(T.f)(z.a,{md:7},n))}renderPopover(){var e,t,r,n,a,o,s,l,c,u,d,h,p,f,g;return Object(T.f)("div",{id:"ts-col-popo",style:{width:300}},this.formRow("Label","The column header label","time-lag",Object(T.f)(B.a,{value:this.state.label,onChange:i()(e=this.onTextInputChange).call(e,this,"label"),bsSize:"small",placeholder:"Label"})),this.formRow("Tooltip","Column header tooltip","col-tooltip",Object(T.f)(B.a,{value:this.state.tooltip,onChange:i()(t=this.onTextInputChange).call(t,this,"tooltip"),bsSize:"small",placeholder:"Tooltip"})),this.formRow("Type","Type of comparison, value difference or percentage","col-type",Object(T.f)(Jr.g,{value:this.state.colType,clearable:!1,onChange:i()(r=this.onSelectChange).call(r,this,"colType"),options:nn})),Object(T.f)("hr",null),"spark"===this.state.colType&&this.formRow("Width","Width of the sparkline","spark-width",Object(T.f)(B.a,{value:this.state.width,onChange:i()(n=this.onTextInputChange).call(n,this,"width"),bsSize:"small",placeholder:"Width"})),"spark"===this.state.colType&&this.formRow("Height","Height of the sparkline","spark-width",Object(T.f)(B.a,{value:this.state.height,onChange:i()(a=this.onTextInputChange).call(a,this,"height"),bsSize:"small",placeholder:"height"})),Ke()(o=["time","avg"]).call(o,this.state.colType)>=0&&this.formRow("Time lag","Number of periods to compare against","time-lag",Object(T.f)(B.a,{value:this.state.timeLag,onChange:i()(s=this.onTextInputChange).call(s,this,"timeLag"),bsSize:"small",placeholder:"Time Lag"})),Ke()(l=["spark"]).call(l,this.state.colType)>=0&&this.formRow("Time ratio","Number of periods to ratio against","time-ratio",Object(T.f)(B.a,{value:this.state.timeRatio,onChange:i()(c=this.onTextInputChange).call(c,this,"timeRatio"),bsSize:"small",placeholder:"Time Ratio"})),"time"===this.state.colType&&this.formRow("Type","Type of comparison, value difference or percentage","comp-type",Object(T.f)(Jr.g,{value:this.state.comparisonType,clearable:!1,onChange:i()(u=this.onSelectChange).call(u,this,"comparisonType"),options:rn})),"spark"===this.state.colType&&this.formRow("Show Y-axis","Show Y-axis on the sparkline. Will display the manually set min/max if set or min/max values in the data otherwise.","show-y-axis-bounds",Object(T.f)(V.a,{value:this.state.showYAxis,onChange:i()(d=this.onCheckboxChange).call(d,this,"showYAxis")})),"spark"===this.state.colType&&this.formRow("Y-axis bounds","Manually set min/max values for the y-axis.","y-axis-bounds",Object(T.f)(G,{value:this.state.yAxisBounds,onChange:i()(h=this.onYAxisBoundsChange).call(h,this)})),"spark"!==this.state.colType&&this.formRow("Color bounds","Number bounds used for color encoding from red to blue.\n              Reverse the numbers for blue to red. To get pure red or blue,\n              you can enter either only min or max.","bounds",Object(T.f)(G,{value:this.state.bounds,onChange:i()(p=this.onBoundsChange).call(p,this)})),this.formRow("Number format","Optional d3 number format string","d3-format",Object(T.f)(B.a,{value:this.state.d3format,onChange:i()(f=this.onTextInputChange).call(f,this,"d3format"),bsSize:"small",placeholder:"Number format string"})),"spark"===this.state.colType&&this.formRow("Date format","Optional d3 date format string","date-format",Object(T.f)(B.a,{value:this.state.dateFormat,onChange:i()(g=this.onTextInputChange).call(g,this,"dateFormat"),bsSize:"small",placeholder:"Date format string"})))}render(){var e;return Object(T.f)("span",null,this.textSummary()," ",Object(T.f)(j.a,{trigger:"click",placement:"right",content:this.renderPopover(),title:"Column Configuration"},Object(T.f)(_.a,{icon:"edit",className:"text-primary",onClick:i()(e=this.edit).call(e,this),label:"edit-ts-column"})))}}an.propTypes=en,an.defaultProps=tn;var on=r(1079);const sn=["longitude","latitude","zoom","bearing","pitch"],ln={onChange:v.a.func,value:v.a.shape({longitude:v.a.number,latitude:v.a.number,zoom:v.a.number,bearing:v.a.number,pitch:v.a.number}),default:v.a.object,name:v.a.string.isRequired},cn={onChange:()=>{},default:{type:"fix",value:5},value:{longitude:6.85236157047845,latitude:31.222656842808707,zoom:1,bearing:0,pitch:0}};class un extends l.a.Component{constructor(e){var t;super(e),this.onChange=i()(t=this.onChange).call(t,this)}onChange(e,t){this.props.onChange({...this.props.value,[e]:t})}renderTextControl(e){var t;return Object(T.f)("div",{key:e},Object(T.f)(hr.a,null,e),Object(T.f)(Ye.a,{value:this.props.value[e],onChange:i()(t=this.onChange).call(t,this,e),isFloat:!0}))}renderPopover(){return Object(T.f)("div",{id:`filter-popover-${this.props.name}`},h()(sn).call(sn,e=>this.renderTextControl(e)))}renderLabel(){return this.props.value.longitude&&this.props.value.latitude?`${Object(on.decimal2sexagesimal)(this.props.value.longitude)} | ${Object(on.decimal2sexagesimal)(this.props.value.latitude)}`:"N/A"}render(){return Object(T.f)("div",null,Object(T.f)(U.a,this.props),Object(T.f)(j.a,{container:document.body,trigger:"click",placement:"right",content:this.renderPopover(),title:"Viewport"},Object(T.f)(Qe.a,{className:"pointer"},this.renderLabel())))}}un.propTypes=ln,un.defaultProps=cn;var dn=r(923),hn=r(208),pn=r.n(hn),fn=r(92),gn=r.n(fn),bn=r(135),mn=r(543);const vn={adhocMetric:Er,showType:v.a.bool};function yn({adhocMetric:e,showType:t=!1}){return Object(T.f)("div",null,t&&Object(T.f)(Gt.a,{type:"expression"}),Object(T.f)("span",{className:"option-label"},e.label))}yn.propTypes=vn;const On={option:v.a.oneOfType([bt,v.a.shape({saved_metric_name:v.a.string.isRequired}),Er]).isRequired};function xn({option:e}){return e.saved_metric_name?Object(T.f)("div",null,Object(T.f)(Gt.a,{type:"expression"}),Object(T.f)("span",{className:"option-label"},e.saved_metric_name)):e.column_name?Object(T.f)($t.a,{column:e,showType:!0}):e.label?Object(T.f)(yn,{adhocMetric:e,showType:!0}):void 0}xn.propTypes=On;var wn=r(347);const Cn="SIMPLE",_n="SQL",jn={HAVING:"HAVING",WHERE:"WHERE"},Sn={"==":"=","!=":"<>",">":">","<":"<",">=":">=","<=":"<=",IN:"IN","NOT IN":"NOT IN",LIKE:"LIKE",REGEX:"REGEX","IS NOT NULL":"IS NOT NULL","IS NULL":"IS NULL","LATEST PARTITION":({datasource:e})=>`= '{{ presto.latest_partition('${e.schema}.${e.datasource_name}') }}'`};function En(e,{useSimple:t}={}){if(e.expressionType===Cn||t){const{subject:t,comparator:r}=e,n=e.operator&&mt.c.has(e.operator)?Sn[e.operator](e):Sn[e.operator];return Object(E.j)(t,n,r)}return e.expressionType===_n?e.sqlExpression:""}class kn{constructor(e){var t;(this.expressionType=e.expressionType||Cn,this.expressionType===Cn)?(this.subject=e.subject,this.operator=null==(t=e.operator)?void 0:t.toUpperCase(),this.comparator=e.comparator,this.clause=e.clause||jn.WHERE,this.sqlExpression=null):this.expressionType===_n&&(this.sqlExpression="string"==typeof e.sqlExpression?e.sqlExpression:En(e,{useSimple:!0}),this.clause=e.clause,e.operator&&mt.c.has(e.operator)?(this.subject=e.subject,this.operator=e.operator):(this.subject=null,this.operator=null),this.comparator=null);this.isExtra=!!e.isExtra,this.isNew=!!e.isNew,this.filterOptionName=e.filterOptionName||`filter_${Math.random().toString(36).substring(2,15)}_${Math.random().toString(36).substring(2,15)}`}duplicateWith(e){return new kn({...this,isNew:!1,...e})}equals(e){return e.expressionType===this.expressionType&&e.sqlExpression===this.sqlExpression&&e.operator===this.operator&&e.comparator===this.comparator&&e.subject===this.subject}isValid(){if(this.expressionType===Cn){if("IS NOT NULL"===this.operator||"IS NULL"===this.operator)return!(!this.operator||!this.subject);if(this.operator&&this.subject&&this.clause)if(pt()(this.comparator)){if(this.comparator.length>0)return!0}else if(null!==this.comparator)return!0}else if(this.expressionType===_n)return!(!this.sqlExpression||!this.clause);return!1}getDefaultLabel(){const e=this.translateToSql();return e.length<43?e:`${e.substring(0,40)}...`}translateToSql(){return En(this)}}var Tn=r(139),Mn=r.n(Tn);const Rn=Object(Oe.c)(dr.b)`
  .ant-select-selector::after {
    content: '${({labelText:e})=>e||"\\A0"}';
    display: inline-block;
    white-space: nowrap;
    color: ${({theme:e})=>e.colors.grayscale.light1};
    width: max-content;
  }
`,An={adhocFilter:v.a.instanceOf(kn).isRequired,onChange:v.a.func.isRequired,options:v.a.arrayOf(v.a.oneOfType([bt,v.a.shape({saved_metric_name:v.a.string.isRequired}),Er])).isRequired,onHeightChange:v.a.func.isRequired,datasource:v.a.object,partitionColumn:v.a.string,popoverRef:v.a.object};class Dn extends l.a.Component{constructor(e){var t,r,n,a,o,s,l;super(e),this.onSubjectChange=i()(t=this.onSubjectChange).call(t,this),this.onOperatorChange=i()(r=this.onOperatorChange).call(r,this),this.onComparatorChange=i()(n=this.onComparatorChange).call(n,this),this.onInputComparatorChange=i()(a=this.onInputComparatorChange).call(a,this),this.isOperatorRelevant=i()(o=this.isOperatorRelevant).call(o,this),this.refreshComparatorSuggestions=i()(s=this.refreshComparatorSuggestions).call(s,this),this.clearSuggestionSearch=i()(l=this.clearSuggestionSearch).call(l,this),this.state={suggestions:[],abortActiveRequest:null,currentSuggestionSearch:""},this.selectProps={name:"select-column",showSearch:!0}}UNSAFE_componentWillMount(){this.refreshComparatorSuggestions()}componentDidUpdate(e){e.adhocFilter.subject!==this.props.adhocFilter.subject&&this.refreshComparatorSuggestions()}onSubjectChange(e){var t;const r=ot()(t=this.props.options).call(t,t=>t.id===e||t.optionName===e);let n,a;r&&r.column_name?(n=r.column_name,a=jn.WHERE):r&&(r.saved_metric_name||r.label)&&(n=r.saved_metric_name||r.label,a=jn.HAVING);const{operator:o}=this.props.adhocFilter;this.props.onChange(this.props.adhocFilter.duplicateWith({subject:n,clause:a,operator:o&&this.isOperatorRelevant(o,n)?o:null,expressionType:Cn}))}onOperatorChange(e){const t=this.props.adhocFilter.comparator;let r;var n;mt.j.has(e)?r=pt()(t)?t:u()(n=[t]).call(n,e=>e):r=pt()(t)?t[0]:t;e&&mt.c.has(e)?this.props.onChange(this.props.adhocFilter.duplicateWith({subject:this.props.adhocFilter.subject,clause:jn.WHERE,operator:e,expressionType:_n,datasource:this.props.datasource})):this.props.onChange(this.props.adhocFilter.duplicateWith({operator:e,comparator:r,expressionType:Cn}))}onInputComparatorChange(e){this.onComparatorChange(e.target.value)}onComparatorChange(e){this.props.onChange(this.props.adhocFilter.duplicateWith({comparator:e,expressionType:Cn}))}refreshComparatorSuggestions(){const{datasource:e}=this.props,t=this.props.adhocFilter.subject,r=this.props.adhocFilter.clause===jn.HAVING;if(t&&e&&e.filter_select&&!r){this.state.abortActiveRequest&&this.state.abortActiveRequest();const r=new AbortController,{signal:n}=r;this.setState({abortActiveRequest:r.abort,loading:!0}),je.a.get({signal:n,endpoint:`/superset/filter/${e.type}/${e.id}/${t}/`}).then(({json:e})=>{this.setState(()=>({suggestions:e,abortActiveRequest:null,loading:!1}))}).catch(()=>{this.setState(()=>({suggestions:[],abortActiveRequest:null,loading:!1}))})}}isOperatorRelevant(e,t){if(e&&mt.c.has(e)){const{partitionColumn:e}=this.props;return e&&t&&t===e}return!("druid"===this.props.datasource.type&&Ke()(mt.m).call(mt.m,e)>=0||"table"===this.props.datasource.type&&Ke()(mt.f).call(mt.f,e)>=0||this.props.adhocFilter.clause===jn.HAVING&&-1===Ke()(mt.i).call(mt.i,e))}focusComparator(e,t){e&&t&&e.focus()}optionsRemaining(){var e;const{suggestions:t}=this.state,{comparator:r}=this.props.adhocFilter,n=pt()(r)?u()(r).call(r,e=>f()(t).call(t,e)).length:0;return null!=(e=(null==t?void 0:t.length)-n)?e:0}createSuggestionsPlaceholder(){const e=this.optionsRemaining(),t=Object(w.e)("%s option(s)",e);return e?t:""}renderSubjectOptionLabel(e){return Object(T.f)(xn,{option:e})}clearSuggestionSearch(){this.setState({currentSuggestionSearch:""})}render(){var e,t,r;const{adhocFilter:n,options:o,datasource:i}=this.props,{currentSuggestionSearch:s}=this.state;let c=o;const{subject:d,operator:p,comparator:g}=n,b={value:null!=d?d:void 0,onChange:this.onSubjectChange,notFoundContent:Object(w.e)("No such column found. To filter on a metric, try the Custom SQL tab."),filterOption:(e,t)=>{var r;return Ke()(r=t.filterBy.toLowerCase()).call(r,e.toLowerCase())>=0},autoFocus:!d};"druid"===i.type?b.placeholder=Object(w.e)("%s column(s) and metric(s)",c.length):(b.placeholder=n.clause===jn.WHERE?Object(w.e)("%s column(s)",c.length):Object(w.e)("To filter on a metric, use Custom SQL tab."),c=u()(o).call(o,e=>e.column_name));const m={placeholder:Object(w.e)("%s operator(s)",u()(mt.l).call(mt.l,e=>this.isOperatorRelevant(e,d)).length),value:p,onChange:this.onOperatorChange,filterOption:(e,t)=>{var r;return Ke()(r=t.value.toLowerCase()).call(r,e.toLowerCase())>=0},autoFocus:!!b.value&&!p},v=!!b.value&&!!m.value,y={allowClear:!0,showSearch:!0,mode:mt.j.has(p)&&"tags",tokenSeparators:[",","\n","\t",";"],loading:this.state.loading,value:g,onChange:this.onComparatorChange,notFoundContent:Object(w.e)("Type a value here"),disabled:f()(mt.e).call(mt.e,p),placeholder:this.createSuggestionsPlaceholder(),labelText:(null==g?void 0:g.length)>0&&this.createSuggestionsPlaceholder(),autoFocus:v};return Object(T.f)(l.a.Fragment,null,Object(T.f)(H.a,{className:"adhoc-filter-simple-column-dropdown"},Object(T.f)(dr.b,a()({},this.selectProps,b,{name:"filter-column",getPopupContainer:e=>e.parentNode}),h()(c).call(c,e=>Object(T.f)(dr.b.Option,{value:e.id||e.optionName,filterBy:e.saved_metric_name||e.column_name||e.label,key:e.id||e.optionName},this.renderSubjectOptionLabel(e))))),Object(T.f)(H.a,null,Object(T.f)(dr.b,a()({},this.selectProps,m,{getPopupContainer:e=>e.parentNode,name:"filter-operator"}),h()(e=u()(mt.l).call(mt.l,e=>this.isOperatorRelevant(e,d))).call(e,e=>Object(T.f)(dr.b.Option,{value:e,key:e},function(e){return e===mt.k["=="]?"equals":e===mt.k["!="]?"not equal to":e===mt.k.LIKE?"LIKE":e===mt.k["LATEST PARTITION"]?"use latest_partition template":e}(e))))),Object(T.f)(H.a,null,mt.j.has(p)||this.state.suggestions.length>0?Object(T.f)(Rn,a()({name:"filter-value"},y,{getPopupContainer:e=>e.parentNode,onSearch:e=>this.setState({currentSuggestionSearch:e}),onSelect:this.clearSuggestionSearch,onBlur:this.clearSuggestionSearch}),h()(t=this.state.suggestions).call(t,e=>Object(T.f)(dr.b.Option,{value:e,key:e},e)),s&&!Mn()(r=this.state.suggestions).call(r,e=>e===s)&&Object(T.f)(dr.b.Option,{value:s},s)):Object(T.f)(xe.m,{name:"filter-value",ref:e=>this.focusComparator(e,v),onChange:this.onInputComparatorChange,value:g,placeholder:Object(w.e)("Filter value (case sensitive)"),disabled:f()(mt.e).call(mt.e,p)})))}}Dn.propTypes=An,Dn.defaultProps={datasource:{}};const Pn={adhocFilter:v.a.instanceOf(kn).isRequired,onChange:v.a.func.isRequired,options:v.a.arrayOf(v.a.oneOfType([bt,v.a.shape({saved_metric_name:v.a.string.isRequired}),Er])).isRequired,height:v.a.number.isRequired};class In extends l.a.Component{constructor(e){var t,r,n;super(e),this.onSqlExpressionChange=i()(t=this.onSqlExpressionChange).call(t,this),this.onSqlExpressionClauseChange=i()(r=this.onSqlExpressionClauseChange).call(r,this),this.handleAceEditorRef=i()(n=this.handleAceEditorRef).call(n,this),this.selectProps={name:"select-column"}}componentDidUpdate(){this.aceEditorRef&&this.aceEditorRef.editor.resize()}onSqlExpressionClauseChange(e){this.props.onChange(this.props.adhocFilter.duplicateWith({clause:e,expressionType:_n}))}onSqlExpressionChange(e){this.props.onChange(this.props.adhocFilter.duplicateWith({sqlExpression:e,expressionType:_n}))}handleAceEditorRef(e){e&&(this.aceEditorRef=e)}render(){var e,t;const{adhocFilter:r,height:n,options:o}=this.props,i={placeholder:Object(w.e)("choose WHERE or HAVING..."),value:r.clause,onChange:this.onSqlExpressionClauseChange},s=W()(fr.a).call(fr.a,u()(e=h()(o).call(o,e=>e.column_name?{name:e.column_name,value:e.column_name,score:50,meta:"option"}:null)).call(e,Boolean));return Object(T.f)("span",null,Object(T.f)(H.a,{className:"filter-edit-clause-section"},Object(T.f)(dr.b,a()({},this.selectProps,i,{className:"filter-edit-clause-dropdown",getPopupContainer:e=>e.parentNode}),h()(t=b()(jn)).call(t,e=>Object(T.f)(dr.b.Option,{value:e,key:e},e))),Object(T.f)("span",{className:"filter-edit-clause-info"},Object(T.f)("strong",null,"WHERE")," ",Object(w.e)("Filters by columns"),Object(T.f)("br",null),Object(T.f)("strong",null,"HAVING")," ",Object(w.e)("Filters by metrics"))),Object(T.f)(H.a,null,Object(T.f)(pr.f,{ref:this.handleAceEditorRef,keywords:s,height:`${n-130}px`,onChange:this.onSqlExpressionChange,width:"100%",showGutter:!1,value:r.sqlExpression||r.translateToSql(),editorProps:{$blockScrolling:!0},enableLiveAutocompletion:!0,className:"adhoc-filter-sql-editor",wrapEnabled:!0})))}}In.propTypes=Pn;const Fn={adhocFilter:v.a.instanceOf(kn).isRequired,onChange:v.a.func.isRequired,onClose:v.a.func.isRequired,onResize:v.a.func.isRequired,options:v.a.arrayOf(v.a.oneOfType([bt,v.a.shape({saved_metric_name:v.a.string.isRequired}),Er])).isRequired,datasource:v.a.object,partitionColumn:v.a.string,theme:v.a.object},Nn=Oe.c.i`
  margin-left: ${({theme:e})=>2*e.gridUnit}px;
`;class Ln extends l.a.Component{constructor(e){var t,r,n,a,o,s;super(e),this.onSave=i()(t=this.onSave).call(t,this),this.onDragDown=i()(r=this.onDragDown).call(r,this),this.onMouseMove=i()(n=this.onMouseMove).call(n,this),this.onMouseUp=i()(a=this.onMouseUp).call(a,this),this.onAdhocFilterChange=i()(o=this.onAdhocFilterChange).call(o,this),this.adjustHeight=i()(s=this.adjustHeight).call(s,this),this.state={adhocFilter:this.props.adhocFilter,width:320,height:240},this.popoverContentRef=l.a.createRef()}componentDidMount(){document.addEventListener("mouseup",this.onMouseUp)}componentWillUnmount(){document.removeEventListener("mouseup",this.onMouseUp),document.removeEventListener("mousemove",this.onMouseMove)}onAdhocFilterChange(e){this.setState({adhocFilter:e})}onSave(){this.props.onChange(this.state.adhocFilter),this.props.onClose()}onDragDown(e){this.dragStartX=e.clientX,this.dragStartY=e.clientY,this.dragStartWidth=this.state.width,this.dragStartHeight=this.state.height,document.addEventListener("mousemove",this.onMouseMove)}onMouseMove(e){this.props.onResize(),this.setState({width:Math.max(this.dragStartWidth+(e.clientX-this.dragStartX),320),height:Math.max(this.dragStartHeight+2*(e.clientY-this.dragStartY),240)})}onMouseUp(){document.removeEventListener("mousemove",this.onMouseMove)}adjustHeight(e){this.setState(t=>({height:t.height+e}))}render(){const{adhocFilter:e,options:t,onChange:r,onClose:n,onResize:o,datasource:i,partitionColumn:s,theme:l,...c}=this.props,{adhocFilter:u}=this.state,d=u.isValid(),h=!u.equals(e);return Object(T.f)("div",a()({id:"filter-edit-popover"},c,{ref:this.popoverContentRef}),Object(T.f)(ur.c,{id:"adhoc-filter-edit-tabs",defaultActiveKey:u.expressionType,className:"adhoc-filter-edit-tabs",style:{minHeight:this.state.height,width:this.state.width},allowOverflow:!0},Object(T.f)(ur.c.TabPane,{className:"adhoc-filter-edit-tab",key:Cn,tab:Object(w.e)("Simple")},Object(T.f)(wn.a,null,Object(T.f)(Dn,{adhocFilter:this.state.adhocFilter,onChange:this.onAdhocFilterChange,options:t,datasource:i,onHeightChange:this.adjustHeight,partitionColumn:s,popoverRef:this.popoverContentRef.current}))),Object(T.f)(ur.c.TabPane,{className:"adhoc-filter-edit-tab",key:_n,tab:Object(w.e)("Custom SQL")},Object(T.f)(wn.a,null,this.props.datasource&&"druid"===this.props.datasource.type?Object(T.f)("div",{className:"custom-sql-disabled-message"},"Custom SQL Filters are not available on druid datasources"):Object(T.f)(In,{adhocFilter:this.state.adhocFilter,onChange:this.onAdhocFilterChange,options:this.props.options,height:this.state.height})))),Object(T.f)("div",null,Object(T.f)(ke.a,{buttonSize:"small",onClick:this.props.onClose,cta:!0},Object(w.e)("Close")),Object(T.f)(ke.a,{disabled:!d,buttonStyle:h&&d?"primary":"default",buttonSize:"small",className:"m-r-5",onClick:this.onSave,cta:!0},Object(w.e)("Save")),Object(T.f)(Nn,{role:"button","aria-label":"Resize",tabIndex:0,onMouseDown:this.onDragDown,className:"fa fa-expand edit-popover-resize text-muted"})))}}Ln.propTypes=Fn;class Hn extends l.a.PureComponent{constructor(e){var t,r,n;super(e),this.onPopoverResize=i()(t=this.onPopoverResize).call(t,this),this.closePopover=i()(r=this.closePopover).call(r,this),this.togglePopover=i()(n=this.togglePopover).call(n,this),this.state={popoverVisible:!1}}onPopoverResize(){this.forceUpdate()}closePopover(){this.togglePopover(!1)}togglePopover(e){this.setState({popoverVisible:e})}render(){const{adhocFilter:e,isControlledComponent:t}=this.props,{visible:r,togglePopover:n,closePopover:a}=t?{visible:this.props.visible,togglePopover:this.props.togglePopover,closePopover:this.props.closePopover}:{visible:this.state.popoverVisible,togglePopover:this.togglePopover,closePopover:this.closePopover},o=Object(T.f)(Ln,{adhocFilter:e,options:this.props.options,datasource:this.props.datasource,partitionColumn:this.props.partitionColumn,onResize:this.onPopoverResize,onClose:a,onChange:this.props.onFilterEdit});return Object(T.f)(j.a,{placement:"right",trigger:"click",content:o,defaultVisible:r,visible:r,onVisibleChange:n,destroyTooltipOnHide:this.props.createNew},this.props.children)}}var qn=Hn;const zn={adhocFilter:v.a.instanceOf(kn).isRequired,onFilterEdit:v.a.func.isRequired,onRemoveFilter:v.a.func,options:v.a.arrayOf(v.a.oneOfType([bt,v.a.shape({saved_metric_name:v.a.string.isRequired}),Er])).isRequired,datasource:v.a.object,partitionColumn:v.a.string,onMoveLabel:v.a.func,onDropLabel:v.a.func,index:v.a.number},Bn=({adhocFilter:e,options:t,datasource:r,onFilterEdit:n,onRemoveFilter:a,partitionColumn:o,onMoveLabel:i,onDropLabel:s,index:l})=>Object(T.f)(qn,{adhocFilter:e,options:t,datasource:r,onFilterEdit:n,partitionColumn:o},Object(T.f)(Ut,{label:e.getDefaultLabel(),onRemove:a,onMoveLabel:i,onDropLabel:s,index:l,type:Cr.a.FilterOption,withCaret:!0,isExtra:e.isExtra}));var Un=Bn;Bn.propTypes=zn;var $n=v.a.oneOfType([v.a.shape({expressionType:v.a.oneOf([Cn]).isRequired,clause:v.a.oneOf([jn.HAVING,jn.WHERE]).isRequired,subject:v.a.string.isRequired,operator:v.a.oneOf(b()(mt.k)).isRequired,comparator:v.a.oneOfType([v.a.string,v.a.arrayOf(v.a.string)]).isRequired}),v.a.shape({expressionType:v.a.oneOf([_n]).isRequired,clause:v.a.oneOf([jn.WHERE,jn.HAVING]).isRequired,sqlExpression:v.a.string.isRequired})]);const Gn=v.a.oneOfType([v.a.string,Er]),Vn={name:v.a.string,onChange:v.a.func,value:v.a.arrayOf($n),datasource:v.a.object,columns:v.a.arrayOf(bt),savedMetrics:v.a.arrayOf(Yt),selectedMetrics:v.a.oneOfType([Gn,v.a.arrayOf(Gn)]),isLoading:v.a.bool};function Qn(e){return e&&!(e instanceof kn)&&e.expressionType}class Wn extends l.a.Component{constructor(e){var t,r,n,a,o,s,l,c,u;super(e),this.optionsForSelect=i()(t=this.optionsForSelect).call(t,this),this.onRemoveFilter=i()(r=this.onRemoveFilter).call(r,this),this.onNewFilter=i()(n=this.onNewFilter).call(n,this),this.onFilterEdit=i()(a=this.onFilterEdit).call(a,this),this.moveLabel=i()(o=this.moveLabel).call(o,this),this.onChange=i()(s=this.onChange).call(s,this),this.mapOption=i()(l=this.mapOption).call(l,this),this.getMetricExpression=i()(c=this.getMetricExpression).call(c,this);const d=h()(u=this.props.value||[]).call(u,e=>Qn(e)?new kn(e):e);this.optionRenderer=e=>Object(T.f)(xn,{option:e}),this.valueRenderer=(e,t)=>Object(T.f)(Un,{key:t,index:t,adhocFilter:e,onFilterEdit:this.onFilterEdit,options:this.state.options,datasource:this.props.datasource,onRemoveFilter:()=>this.onRemoveFilter(t),onMoveLabel:this.moveLabel,onDropLabel:()=>this.props.onChange(gn()(this.state)),partitionColumn:this.state.partitionColumn}),this.state={values:d,options:this.optionsForSelect(this.props),partitionColumn:null}}componentDidMount(){const{datasource:e}=this.props;if(e&&"table"===e.type){var t;const r=null==(t=e.database)?void 0:t.id,{datasource_name:n,schema:a,is_sqllab_view:o}=e;!o&&r&&n&&a&&je.a.get({endpoint:`/superset/extra_table_metadata/${r}/${n}/${a}/`}).then(({json:e})=>{if(e&&e.partitions){const{partitions:t}=e;t&&t.cols&&1===b()(t.cols).length&&this.setState({partitionColumn:t.cols[0]})}}).catch(e=>{bn.a.error("fetch extra_table_metadata:",e.statusText)})}}UNSAFE_componentWillReceiveProps(e){var t;(this.props.columns!==e.columns&&this.setState({options:this.optionsForSelect(e)}),this.props.value!==e.value)&&this.setState({values:h()(t=e.value||[]).call(t,e=>Qn(e)?new kn(e):e)})}onRemoveFilter(e){const t=[...gn()(this.state)];st()(t).call(t,e,1),this.setState(e=>({...e,values:t})),this.props.onChange(t)}onNewFilter(e){const t=this.mapOption(e);t&&this.setState(e=>({...e,values:[...gn()(e),t]}),()=>{this.props.onChange(gn()(this.state))})}onFilterEdit(e){var t;this.props.onChange(h()(t=gn()(this.state)).call(t,t=>t.filterOptionName===e.filterOptionName?e:t))}onChange(e){var t,r;const n=u()(t=h()(r=e||[]).call(r,e=>this.mapOption(e))).call(t,e=>e);this.props.onChange(n)}getMetricExpression(e){var t;return ot()(t=this.props.savedMetrics).call(t,t=>t.metric_name===e).expression}moveLabel(e,t){const{values:r}=this.state,n=[...r];[n[t],n[e]]=[n[e],n[t]],this.setState({values:n})}mapOption(e){return e instanceof kn?e:e.saved_metric_name?new kn({expressionType:"druid"===this.props.datasource.type?Cn:_n,subject:"druid"===this.props.datasource.type?e.saved_metric_name:this.getMetricExpression(e.saved_metric_name),operator:mt.k[">"],comparator:0,clause:jn.HAVING}):e.label?new kn({expressionType:"druid"===this.props.datasource.type?Cn:_n,subject:"druid"===this.props.datasource.type?e.label:new or(e).translateToSql(),operator:mt.k[">"],comparator:0,clause:jn.HAVING}):e.column_name?new kn({expressionType:Cn,subject:e.column_name,operator:mt.k["=="],comparator:"",clause:jn.WHERE,isNew:!0}):null}optionsForSelect(e){var t,r,n;const a=u()(t=[...e.columns,...h()(r=Object(mn.a)(e.selectedMetrics)).call(r,e=>e&&("string"==typeof e?{saved_metric_name:e}:new or(e)))]).call(t,e=>e);return pn()(n=tt()(a).call(a,(e,t)=>(t.saved_metric_name?e.push({...t,filterOptionName:t.saved_metric_name}):t.column_name?e.push({...t,filterOptionName:`_col_${t.column_name}`}):t instanceof or&&e.push({...t,filterOptionName:`_adhocmetric_${t.label}`}),e),[])).call(n,(e,t)=>(e.saved_metric_name||e.column_name||e.label).localeCompare(t.saved_metric_name||t.column_name||t.label))}addNewFilterPopoverTrigger(e){return Object(T.f)(qn,{adhocFilter:new kn({}),datasource:this.props.datasource,options:this.state.options,onFilterEdit:this.onNewFilter,partitionColumn:this.state.partitionColumn,createNew:!0},e)}render(){var e;const{theme:t}=this.props;return Object(T.f)("div",{className:"metrics-select"},Object(T.f)(Lt,null,Object(T.f)(U.a,this.props),this.addNewFilterPopoverTrigger(Object(T.f)(Bt,null,Object(T.f)(Ce.a,{name:"plus-large",width:3*t.gridUnit,height:3*t.gridUnit,color:t.colors.grayscale.light5})))),Object(T.f)(Ht,null,gn()(this.state).length>0?h()(e=gn()(this.state)).call(e,(e,t)=>this.valueRenderer(e,t)):this.addNewFilterPopoverTrigger(Object(T.f)(zt,null,Object(T.f)(Ce.a,{name:"plus-small",color:t.colors.grayscale.light1}),Object(w.e)("Add filter")))))}}Wn.propTypes=Vn,Wn.defaultProps={name:"",onChange:()=>{},columns:[],savedMetrics:[],selectedMetrics:[]};var Yn=Object(C.c)(Wn),Xn=r(143),Kn=r.n(Xn);const Zn={marginTop:"5px",minHeight:"30px"},Jn={textAlign:"right"},ea={label:v.a.string.isRequired,tooltip:v.a.string,control:v.a.node.isRequired,isCheckbox:v.a.bool};function ta({label:e,tooltip:t,control:r,isCheckbox:n}){const a=Object(T.f)("span",null,e," ",t&&Object(T.f)(_.a,{placement:"top",label:e,tooltip:t}));return n?Object(T.f)(q.a,{style:Zn},Object(T.f)(z.a,{md:4,style:Jn},r),Object(T.f)(z.a,{md:8},a)):Object(T.f)(q.a,{style:Zn},Object(T.f)(z.a,{md:4,style:Jn},a),Object(T.f)(z.a,{md:8},r))}ta.propTypes=ea,ta.defaultProps={tooltip:null,isCheckbox:!1};const ra=new dt.a(["TINYINT","SMALLINT","INT","INTEGER","BIGINT","LONG"]),na=new dt.a(["FLOAT","DOUBLE","REAL","NUMERIC","DECIMAL","MONEY"]),aa={datasource:v.a.object.isRequired,onChange:v.a.func,asc:v.a.bool,clearable:v.a.bool,multiple:v.a.bool,column:v.a.string,label:v.a.string,metric:v.a.string,searchAllOptions:v.a.bool,defaultValue:v.a.string},oa={width:350};class ia extends l.a.Component{constructor(e){var t,r;super(e);const{column:n,metric:a,asc:o,clearable:s,multiple:l,searchAllOptions:c,label:u,defaultValue:d}=e;this.state={column:n,metric:a,label:u,asc:o,clearable:s,multiple:l,searchAllOptions:c,defaultValue:d},this.onChange=i()(t=this.onChange).call(t,this),this.onControlChange=i()(r=this.onControlChange).call(r,this)}onChange(){this.props.onChange(this.state)}onControlChange(e,t){let r=t;const{column:n,multiple:a}=this.state;if(t&&!a&&e===mt.g.DEFAULT_VALUE){var o;const{datasource:e}=this.props,a=ot()(o=e.columns).call(o,e=>e.column_name===n);if(a&&a.type){const e=a.type.toUpperCase();"BOOLEAN"===e?r="true"===t:ra.has(e)?r=L()(Number(t))?null:Kn()(t,10):na.has(e)&&(r=L()(Number(t))?null:F()(t))}}this.setState({[e]:r},this.onChange)}setType(){}textSummary(){return this.state.column||"N/A"}renderForm(){var e,t,r,n,a,o;return Object(T.f)("div",null,Object(T.f)(ta,{label:Object(w.e)("Column"),control:Object(T.f)(Gr.a,{value:this.state.column,name:"column",clearable:!1,options:W()(e=h()(t=u()(r=this.props.datasource.columns).call(r,e=>e!==this.state.column)).call(t,e=>({value:e.column_name,label:e.column_name}))).call(e,[{value:this.state.column,label:this.state.column}]),onChange:e=>this.onControlChange("column",e)})}),Object(T.f)(ta,{label:Object(w.e)("Label"),control:Object(T.f)(Ye.a,{value:this.state.label,name:"label",onChange:e=>this.onControlChange("label",e)})}),Object(T.f)(ta,{label:Object(w.e)("Default"),tooltip:Object(w.e)("(optional) default value for the filter, when using the multiple option, you can use a semicolon-delimited list of options."),control:Object(T.f)(Ye.a,{value:this.state.defaultValue,name:"defaultValue",onChange:e=>this.onControlChange(mt.g.DEFAULT_VALUE,e)})}),Object(T.f)(ta,{label:Object(w.e)("Sort metric"),tooltip:Object(w.e)("Metric to sort the results by"),control:Object(T.f)(Gr.a,{value:this.state.metric,name:"column",options:W()(n=h()(a=u()(o=this.props.datasource.metrics).call(o,e=>e!==this.state.metric)).call(a,e=>({value:e.metric_name,label:e.metric_name}))).call(n,[{value:this.state.metric,label:this.state.metric}]),onChange:e=>this.onControlChange("metric",e)})}),Object(T.f)(ta,{label:Object(w.e)("Sort ascending"),tooltip:Object(w.e)("Check for sorting ascending"),isCheckbox:!0,control:Object(T.f)(V.a,{value:this.state.asc,onChange:e=>this.onControlChange("asc",e)})}),Object(T.f)(ta,{label:Object(w.e)("Allow multiple selections"),isCheckbox:!0,tooltip:Object(w.e)("Multiple selections allowed, otherwise filter is limited to a single value"),control:Object(T.f)(V.a,{value:this.state.multiple,onChange:e=>this.onControlChange(mt.g.MULTIPLE,e)})}),Object(T.f)(ta,{label:Object(w.e)("Search all filter options"),tooltip:Object(w.e)("By default, each filter loads at most 1000 choices at the initial page load. Check this box if you have more than 1000 filter values and want to enable dynamically searching that loads filter values as users type (may add stress to your database)."),isCheckbox:!0,control:Object(T.f)(V.a,{value:this.state.searchAllOptions,onChange:e=>this.onControlChange(mt.g.SEARCH_ALL_OPTIONS,e)})}),Object(T.f)(ta,{label:Object(w.e)("Required"),tooltip:Object(w.e)("User must select a value for this filter"),isCheckbox:!0,control:Object(T.f)(V.a,{value:!this.state.clearable,onChange:e=>this.onControlChange("clearable",!e)})}))}renderPopover(){return Object(T.f)("div",{id:"ts-col-popo",style:oa},this.renderForm())}render(){return Object(T.f)("span",null,this.textSummary()," ",Object(T.f)(j.a,{trigger:"click",placement:"right",content:this.renderPopover(),title:Object(w.e)("Filter configuration")},Object(T.f)(_.a,{icon:"edit",className:"text-primary",label:"edit-ts-column"})))}}ia.propTypes=aa,ia.defaultProps={onChange:()=>{},asc:!0,clearable:!0,multiple:!0,searchAllOptions:!1};var sa=r(486),la=r.n(sa);function ca(e){const t=Object(Oe.e)(),[{isOver:r,canDrop:n},a]=Tt({accept:e.accept,drop:t=>{e.onDrop(t)},canDrop:t=>e.canDrop(t),collect:e=>({isOver:e.isOver(),canDrop:e.canDrop(),type:e.getItemType()})});return Object(T.f)("div",{ref:a},Object(T.f)(Lt,null,Object(T.f)(U.a,e)),Object(T.f)(qt,{canDrop:n,isOver:r},la()(gn()(e))?Object(T.f)(zt,{cancelHover:!0},Object(T.f)(Ce.a,{name:"plus-small",color:t.colors.grayscale.light1}),Object(w.e)("Drop Columns")):e.valuesRenderer()))}r(277);function ua(e){const t=Object(Oe.e)();return Object(T.f)(Dt,{withCaret:e.withCaret},Object(T.f)(Ft,{role:"button",onClick:()=>e.clickClose(e.index)},Object(T.f)(Ce.a,{name:"x-small",color:t.colors.grayscale.light1})),Object(T.f)(Pt,null,e.children),e.withCaret&&Object(T.f)(It,null,Object(T.f)(Ce.a,{name:"caret-right",color:t.colors.grayscale.light1})))}function da(e){const{index:t,type:r,onShiftOptions:n,clickClose:o,withCaret:i,children:l}=e,c=Object(s.useRef)(null),u={dragIndex:t,type:r},[,d]=Object(Mt.a)({item:u,collect:e=>({isDragging:e.isDragging()})}),[,h]=Tt({accept:r,hover:(e,r)=>{var a;if(!c.current)return;const{dragIndex:o}=e,i=t;if(o===i)return;const s=null==(a=c.current)?void 0:a.getBoundingClientRect(),l=(s.bottom-s.top)/2,u=r.getClientOffset(),d=null!=u&&u.y?(null==u?void 0:u.y)-s.top:0;o<i&&d<l||o>i&&d>l||(n(o,i),e.dragIndex=i)}});return d(h(c)),Object(T.f)(At,a()({ref:c},e),Object(T.f)(ua,{index:t,clickClose:o,onShiftOptions:n,withCaret:i},l))}class ha{constructor(e,t){var r;let n;this.options=e,pt()(t)?(n=t,this.isArray=!0):(n=t?[t]:[],this.isArray=!1),this.values=u()(r=h()(n).call(n,t=>t in e?e[t]:null)).call(r,Boolean)}add(e){e in this.options&&gn()(this).push(this.options[e])}del(e){var t;st()(t=gn()(this)).call(t,e,1)}replace(e,t){gn()(this)[e]&&(gn()(this)[e]=this.options[t])}swap(e,t){[gn()(this)[e],gn()(this)[t]]=[gn()(this)[t],gn()(this)[e]]}has(e){var t;return!(null==(t=this.getValues())||!f()(t).call(t,e))}getValues(){var e;return this.isArray?h()(e=gn()(this)).call(e,e=>e.column_name):gn()(this).length>0?gn()(this)[0].column_name:void 0}}var pa=r(552),fa=r.n(pa);const ga=e=>!(e instanceof kn)&&(null==e?void 0:e.expressionType);var ba={AnnotationLayerControl:P,BoundsControl:G,CheckboxControl:V.a,CollectionControl:oe,ColorMapControl:de,ColorPickerControl:me,ColorSchemeControl:ye.a,DatasourceControl:Ge,DateFilterControl:Ve.a,DndColumnSelectControl:ca,DndColumnSelect:e=>{const{value:t,options:r}=e,n=new ha(r,t),[o,i]=Object(s.useState)(gn()(n)),l=t=>{n.del(t),i(gn()(n)),e.onChange(n.getValues())},c=(t,r)=>{n.swap(t,r),i(gn()(n)),e.onChange(n.getValues())};return Object(T.f)(ca,a()({values:o,onDrop:t=>{const r=t.value;n.isArray||la()(gn()(n))?n.add(r.column_name):n.replace(0,r.column_name),i(gn()(n)),e.onChange(n.getValues())},canDrop:e=>!n.has(e.value.column_name),valuesRenderer:()=>h()(o).call(o,(e,t)=>Object(T.f)(da,{key:t,index:t,clickClose:l,onShiftOptions:c,type:Cr.a.ColumnOption},Object(T.f)($t.a,{column:e,showType:!0}))),accept:Cr.a.Column},e))},DndFilterSelect:e=>{var t;const r=fa()(null!=(t=e.value)?t:[]),[n,o]=Object(s.useState)(h()(r).call(r,e=>ga(e)?new kn(e):e)),[i,c]=Object(s.useState)(void 0),[d,p]=Object(s.useState)(!1),[f,g]=Object(s.useState)(null),m=(e,t)=>{var r,n,a;const o=u()(r=[...e,...h()(n=[...(null==t?void 0:t.metrics)||[],null==t?void 0:t.metric]).call(n,e=>e&&("string"==typeof e?{saved_metric_name:e}:new or(e)))]).call(r,e=>e);return pn()(a=tt()(o).call(o,(e,t)=>("saved_metric_name"in t&&t.saved_metric_name?e.push({...t,filterOptionName:t.saved_metric_name}):"column_name"in t&&t.column_name?e.push({...t,filterOptionName:`_col_${t.column_name}`}):t instanceof or&&e.push({...t,filterOptionName:`_adhocmetric_${t.label}`}),e),[])).call(a,(e,t)=>{var r,n;return null!=(r=null==(n=e.saved_metric_name||e.column_name||e.label)?void 0:n.localeCompare(t.saved_metric_name||t.column_name||t.label||""))?r:0})},[v,y]=Object(s.useState)(m(e.columns,e.formData));Object(s.useEffect)(()=>{const{datasource:t}=e;if(t&&"table"===t.type){var r;const e=null==(r=t.database)?void 0:r.id,{datasource_name:n,schema:a,is_sqllab_view:o}=t;!o&&e&&n&&a&&je.a.get({endpoint:`/superset/extra_table_metadata/${e}/${n}/${a}/`}).then(({json:e})=>{if(e&&e.partitions){const{partitions:t}=e;t&&t.cols&&1===b()(t.cols).length&&c(t.cols[0])}}).catch(e=>{bn.a.error("fetch extra_table_metadata:",e.statusText)})}},[]),Object(s.useEffect)(()=>{y(m(e.columns,e.formData))},[e.columns,e.formData]),Object(s.useEffect)(()=>{var t;o(h()(t=e.value||[]).call(t,e=>ga(e)?new kn(e):e))},[e.value]);const O=t=>{const r=[...n];st()(r).call(r,t,1),o(r),e.onChange(r)},x=(e,t)=>{const r=[...n];[r[t],r[e]]=[r[e],r[t]],o(r)},w=t=>{e.onChange(h()(n).call(n,e=>e.filterOptionName===t.filterOptionName?t:e))},C=e=>{p(e)},_=Object(s.useMemo)(()=>null!=f&&f.metric_name?new kn({expressionType:_n,clause:jn.HAVING,sqlExpression:null==f?void 0:f.expression}):new kn(f instanceof or?{expressionType:_n,clause:jn.HAVING,sqlExpression:null==f?void 0:f.translateToSql()}:{subject:null==f?void 0:f.column_name}),[f]);return Object(T.f)(l.a.Fragment,null,Object(T.f)(ca,a()({values:n,onDrop:e=>{g(e.value),C(!0)},canDrop:()=>!0,valuesRenderer:()=>h()(n).call(n,(t,r)=>{const n=t.getDefaultLabel();return Object(T.f)(qn,{key:r,adhocFilter:t,options:v,datasource:e.datasource,onFilterEdit:w,partitionColumn:i},Object(T.f)(da,{key:r,index:r,clickClose:O,onShiftOptions:x,type:Cr.a.FilterOption,withCaret:!0},Object(T.f)(we.a,{title:n},n)))}),accept:[Cr.a.Column,Cr.a.Metric,Cr.a.MetricOption,Cr.a.AdhocMetricOption]},e)),Object(T.f)(qn,{adhocFilter:_,options:v,datasource:e.datasource,onFilterEdit:t=>{const r=(t=>{if(t instanceof kn)return t;const r=t;return r.saved_metric_name?new kn({expressionType:"druid"===e.datasource.type?Cn:_n,subject:"druid"===e.datasource.type?r.saved_metric_name:(n=r.saved_metric_name,null==(a=ot()(o=e.savedMetrics).call(o,e=>e.metric_name===n))?void 0:a.expression),operator:mt.k[">"],comparator:0,clause:jn.HAVING}):r.label?new kn({expressionType:"druid"===e.datasource.type?Cn:_n,subject:"druid"===e.datasource.type?r.label:new or(t).translateToSql(),operator:mt.k[">"],comparator:0,clause:jn.HAVING}):r.column_name?new kn({expressionType:Cn,subject:r.column_name,operator:mt.k["=="],comparator:"",clause:jn.WHERE,isNew:!0}):null;var n,a,o})(t);if(r){const t=[...n,r];o(t),e.onChange(t)}},partitionColumn:i,isControlledComponent:!0,visible:d,togglePopover:C,closePopover:()=>{C(!1)},createNew:!0},Object(T.f)("div",null)))},FixedOrMetricControl:zr,HiddenControl:Ur,SelectAsyncControl:$r.a,SelectControl:Gr.a,SliderControl:Xr,SpatialControl:Kr.a,TextAreaControl:Zr.a,TextControl:Ye.a,TimeSeriesColumnControl:an,ViewportControl:un,VizTypeControl:dn.a,MetricsControl:Ir,AdhocFilterControl:Yn,FilterBoxItemControl:ia};r(1415);class ma extends l.a.PureComponent{constructor(e){var t,r,n;super(e),this.state={hovered:!1},this.onChange=i()(t=this.onChange).call(t,this),this.onMouseEnter=i()(r=this.setHover).call(r,this,!0),this.onMouseLeave=i()(n=this.setHover).call(n,this,!1)}onChange(e,t){this.props.actions.setControlValue(this.props.name,e,t)}setHover(e){this.setState({hovered:e})}render(){const{type:e,hidden:t}=this.props;if(!e)return null;const r="string"==typeof e?ba[e]:e;return Object(T.f)("div",{className:"Control",style:t?{display:"none"}:void 0,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave},Object(T.f)(r,a()({onChange:this.onChange,hovered:this.state.hovered},this.props)))}}}}]);