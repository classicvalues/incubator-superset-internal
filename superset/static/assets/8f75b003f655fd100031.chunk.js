"use strict";(globalThis.webpackChunksuperset=globalThis.webpackChunksuperset||[]).push([[6259],{76259:(t,e,n)=>{n.r(e),n.d(e,{default:()=>f});var a=n(73834),s=n(15078),l=n.n(s),r=n(45697),i=n.n(r),h=n(83527),o=n(50855),c=n(63758),p=n(67542);function u(t,e,n){t.each((function(){const t=l().select(this),a=t.text().split(/\s+/);let s=[],r=0;const i=t.attr("x"),h=t.attr("y"),o=parseFloat(t.attr("dy"));let c=t.text(null).append("tspan").attr("x",i).attr("y",h).attr("dy",`${o}em`),p=!1;a.forEach((n=>{s.push(n),c.text(s.join(" ")),c.node().getComputedTextLength()>e&&(r+=1,s.pop(),c.text(s.join(" ")),s=[n],c=t.append("tspan").attr("x",i).attr("y",h).attr("dy",`${1*r+o}em`).text(n),p=!0)})),p||void 0===n||c.attr("y",n)}))}const d={data:i().arrayOf(i().array),width:i().number,height:i().number,colorScheme:i().string,linearColorScheme:i().string,numberFormat:i().string,metrics:i().arrayOf(i().oneOfType([i().string,i().object]))};function m(t){return"string"==typeof t||t instanceof String?t:t.label}function g(t,e){const n=l().select(t),{data:a,width:s,height:r,colorScheme:i,linearColorScheme:d,metrics:g,numberFormat:y}=e,f=function(t){return t>500?"l":t>200&&t<=500?"m":"s"}(s),v="s"===f;n.attr("class",`superset-legacy-chart-sunburst ${f}`);const $=s,x=r,b=.085*x,w=$-5-5,T=x-10-10-b,k=Math.min(w,T)/2;let A,S,N,C,I,M,P,W=!0;const _=h.getScale(i);let j;const E=l().layout.partition().size([2*Math.PI,k*k]).value((t=>t.m1)),O=l().svg.arc().startAngle((t=>t.x)).endAngle((t=>t.x+t.dx)).innerRadius((t=>Math.sqrt(t.y))).outerRadius((t=>Math.sqrt(t.y+t.dy))),Z=(0,o.JB)(y||c.Z.SI_3_DIGIT),F=(0,o.JB)(c.Z.PERCENT_3_POINT);n.select("svg").remove();const R=n.append("svg:svg").attr("width",$).attr("height",x);function q(t,e){const n=[];return v?(n.push("0,0"),n.push(`${s},0`),n.push(`${s},0`),n.push(`${s},${S.height}`),n.push(`0,${S.height}`)):(n.push("0,0"),n.push(`${S.width},0`),n.push(`${S.width+S.tipTailWidth},${S.height/2}`),n.push(`${S.width},${S.height}`),n.push(`0,${S.height}`),e>0&&n.push(`${S.tipTailWidth},${S.height/2}`)),n.join(" ")}function B(t){const e=function(t){const e=[];let n=t;for(;n.parent;)e.unshift(n),n=n.parent;return e}(t),n=e[e.length-2]||null,a=(t.m1/N).toPrecision(3),r=n?(t.m1/n.m1).toPrecision(3):null,i=F(a),h=n?F(r):"",o=function(t){return t>500?["0","20","40","60"]:t>200&&t<=500?["0","15","30","45"]:["0","10","20","30"]}(s);let c=0;const p=Math.abs(t.m1-t.m2)<1e-5;P.selectAll("*").remove(),c+=1,P.append("text").attr("class","path-abs-percent").attr("y",o[c]).text(`${i} of total`),h&&(c+=1,P.append("text").attr("class","path-cond-percent").attr("y",o[c]).text(`${h} of parent`)),c+=1,P.append("text").attr("class","path-metrics").attr("y",o[c]).text(`${m(g[0])}: ${Z(t.m1)}${p?"":`, ${m(g[1])}: ${Z(t.m2)}`}`),c+=1,P.append("text").attr("class","path-ratio").attr("y",o[c]).text(p?"":`${m(g[1])}/${m(g[0])}: ${F(t.m2/t.m1)}`),M.selectAll("path").style("stroke-width",null).style("stroke",null).style("opacity",.3),M.selectAll("path").filter((t=>e.includes(t))).style("opacity",1).style("stroke","#aaa"),function(t,e){const n=v?s:S.width,a=C.selectAll("g").data(t,(t=>t.name+t.depth)),r=a.enter().append("svg:g");r.append("svg:polygon").attr("points",q).style("fill",(t=>W?_(t.name):j(t.m2/t.m1))),r.append("svg:text").attr("x",(n+S.tipTailWidth)/2).attr("y",S.height/4).attr("dy","0.35em").style("fill",(t=>l().hsl(W?_(t.name):j(t.m2/t.m1)).l<.5?"white":"black")).attr("class","step-label").text((t=>t.name.replace(/_/g," "))).call(u,n,S.height/2),a.attr("transform",((t,e)=>v?`translate(0, ${e*(S.height+S.spacing)})`:`translate(${e*(S.width+S.spacing)}, 0)`)),a.exit().remove(),C.select(".end-label").attr("x",(()=>v?(n+S.tipTailWidth)/2:(t.length+.5)*(S.width+S.spacing))).attr("y",(()=>v?(t.length+1)*S.height:S.height/2)).attr("dy","0.35em").text(e),C.style("visibility",null)}(e,i)}function J(){C.style("visibility","hidden"),P.selectAll("*").remove(),M.selectAll("path").on("mouseenter",null),M.selectAll("path").transition().duration(200).style("opacity",1).style("stroke",null).style("stroke-width",null).each("end",(function(){l().select(this).on("mouseenter",B)}))}var L;L=a[0],A=L.length-2+1,S={width:w/A,height:.8*b,spacing:3,tipTailWidth:10},C=R.append("svg:g").attr("class","breadcrumbs").attr("transform","translate(5,10)"),C.append("svg:text").attr("class","end-label"),function(t){const e=function(t){const e={name:"root",children:[]};return t.forEach((t=>{const n=Number(t[t.length-2]),a=Number(t[t.length-1]),s=t.slice(0,-2);if(Number.isNaN(n))return;let l=e;for(let t=0;t<s.length;t+=1){const e=l.children||[],r=s[t].toString();let i;t>=s.length-1||0===s[t+1]?0!==r&&(i={name:r,m1:n,m2:a},e.push(i)):(i=e.find((e=>e.name===r&&e.level===t)),i||(i={name:r,children:[],level:t},e.push(i)),l=i)}})),function t(e){if(e.children){let n,a=0,s=0;for(let l=0;l<e.children.length;l+=1)n=t(e.children[l]),a+=n[0],s+=n[1];e.m1=a,e.m2=s}return[e.m1,e.m2]}(e),e}(t);A=t[0].length-2,I=R.append("svg:g").attr("class","sunburst-vis").attr("transform",`translate(${5+w/2},${10+(v?b*A:b)+T/2})`).on("mouseleave",J),M=I.append("svg:g").attr("id","arcs"),P=I.append("svg:g").attr("class","center-label"),M.append("svg:circle").attr("r",k).style("opacity",0);const n=E.nodes(e).filter((t=>t.dx>.005));if(g[0]!==g[1]&&g[1]){W=!1;const t=l().extent(n,(t=>t.m2/t.m1));j=(0,p.Z)().get(d).createLinearScale(t)}M.selectAll("path").data(n).enter().append("svg:path").attr("display",(t=>t.depth?null:"none")).attr("d",O).attr("fill-rule","evenodd").style("fill",(t=>W?_(t.name):j(t.m2/t.m1))).style("opacity",1).on("mouseenter",B),N=e.value}(a)}g.displayName="Sunburst",g.propTypes=d;const y=g,f=(0,a.Z)(y)}}]);